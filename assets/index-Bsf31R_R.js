var gE=Object.defineProperty;var g_=g=>{throw TypeError(g)};var mE=(g,t,e)=>t in g?gE(g,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):g[t]=e;var xe=(g,t,e)=>mE(g,typeof t!="symbol"?t+"":t,e),Km=(g,t,e)=>t.has(g)||g_("Cannot "+e);var a=(g,t,e)=>(Km(g,t,"read from private field"),e?e.call(g):t.get(g)),M=(g,t,e)=>t.has(g)?g_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(g):t.set(g,e),x=(g,t,e,i)=>(Km(g,t,"write to private field"),i?i.call(g,e):t.set(g,e),e),w=(g,t,e)=>(Km(g,t,"access private method"),e);var bi=(g,t,e,i)=>({set _(o){x(g,t,o,e)},get _(){return a(g,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();function getAugmentedNamespace(g){if(g.__esModule)return g;var t=g.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(g).forEach(function(i){var o=Object.getOwnPropertyDescriptor(g,i);Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:function(){return g[i]}})}),e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var g=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function v(V){return V===null||typeof V!="object"?null:(V=m&&V[m]||V["@@iterator"],typeof V=="function"?V:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,S={};function C(V,H,R){this.props=V,this.context=H,this.refs=S,this.updater=R||_}C.prototype.isReactComponent={},C.prototype.setState=function(V,H){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,H,"setState")},C.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function b(){}b.prototype=C.prototype;function I(V,H,R){this.props=V,this.context=H,this.refs=S,this.updater=R||_}var B=I.prototype=new b;B.constructor=I,A(B,C.prototype),B.isPureReactComponent=!0;var N=Array.isArray,T=Object.prototype.hasOwnProperty,L={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function D(V,H,R){var F,U={},K=null,X=null;if(H!=null)for(F in H.ref!==void 0&&(X=H.ref),H.key!==void 0&&(K=""+H.key),H)T.call(H,F)&&!k.hasOwnProperty(F)&&(U[F]=H[F]);var Y=arguments.length-2;if(Y===1)U.children=R;else if(1<Y){for(var ut=Array(Y),wt=0;wt<Y;wt++)ut[wt]=arguments[wt+2];U.children=ut}if(V&&V.defaultProps)for(F in Y=V.defaultProps,Y)U[F]===void 0&&(U[F]=Y[F]);return{$$typeof:g,type:V,key:K,ref:X,props:U,_owner:L.current}}function j(V,H){return{$$typeof:g,type:V.type,key:H,ref:V.ref,props:V.props,_owner:V._owner}}function Z(V){return typeof V=="object"&&V!==null&&V.$$typeof===g}function O(V){var H={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(R){return H[R]})}var G=/\/+/g;function Q(V,H){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):H.toString(36)}function mt(V,H,R,F,U){var K=typeof V;(K==="undefined"||K==="boolean")&&(V=null);var X=!1;if(V===null)X=!0;else switch(K){case"string":case"number":X=!0;break;case"object":switch(V.$$typeof){case g:case t:X=!0}}if(X)return X=V,U=U(X),V=F===""?"."+Q(X,0):F,N(U)?(R="",V!=null&&(R=V.replace(G,"$&/")+"/"),mt(U,H,R,"",function(wt){return wt})):U!=null&&(Z(U)&&(U=j(U,R+(!U.key||X&&X.key===U.key?"":(""+U.key).replace(G,"$&/")+"/")+V)),H.push(U)),1;if(X=0,F=F===""?".":F+":",N(V))for(var Y=0;Y<V.length;Y++){K=V[Y];var ut=F+Q(K,Y);X+=mt(K,H,R,ut,U)}else if(ut=v(V),typeof ut=="function")for(V=ut.call(V),Y=0;!(K=V.next()).done;)K=K.value,ut=F+Q(K,Y++),X+=mt(K,H,R,ut,U);else if(K==="object")throw H=String(V),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return X}function ot(V,H,R){if(V==null)return V;var F=[],U=0;return mt(V,F,"","",function(K){return H.call(R,K,U++)}),F}function dt(V){if(V._status===-1){var H=V._result;H=H(),H.then(function(R){(V._status===0||V._status===-1)&&(V._status=1,V._result=R)},function(R){(V._status===0||V._status===-1)&&(V._status=2,V._result=R)}),V._status===-1&&(V._status=0,V._result=H)}if(V._status===1)return V._result.default;throw V._result}var et={current:null},it={transition:null},$={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:it,ReactCurrentOwner:L};function tt(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:ot,forEach:function(V,H,R){ot(V,function(){H.apply(this,arguments)},R)},count:function(V){var H=0;return ot(V,function(){H++}),H},toArray:function(V){return ot(V,function(H){return H})||[]},only:function(V){if(!Z(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},react_production_min.Component=C,react_production_min.Fragment=e,react_production_min.Profiler=o,react_production_min.PureComponent=I,react_production_min.StrictMode=i,react_production_min.Suspense=h,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,react_production_min.act=tt,react_production_min.cloneElement=function(V,H,R){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var F=A({},V.props),U=V.key,K=V.ref,X=V._owner;if(H!=null){if(H.ref!==void 0&&(K=H.ref,X=L.current),H.key!==void 0&&(U=""+H.key),V.type&&V.type.defaultProps)var Y=V.type.defaultProps;for(ut in H)T.call(H,ut)&&!k.hasOwnProperty(ut)&&(F[ut]=H[ut]===void 0&&Y!==void 0?Y[ut]:H[ut])}var ut=arguments.length-2;if(ut===1)F.children=R;else if(1<ut){Y=Array(ut);for(var wt=0;wt<ut;wt++)Y[wt]=arguments[wt+2];F.children=Y}return{$$typeof:g,type:V.type,key:U,ref:K,props:F,_owner:X}},react_production_min.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:r,_context:V},V.Consumer=V},react_production_min.createElement=D,react_production_min.createFactory=function(V){var H=D.bind(null,V);return H.type=V,H},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(V){return{$$typeof:u,render:V}},react_production_min.isValidElement=Z,react_production_min.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:dt}},react_production_min.memo=function(V,H){return{$$typeof:f,type:V,compare:H===void 0?null:H}},react_production_min.startTransition=function(V){var H=it.transition;it.transition={};try{V()}finally{it.transition=H}},react_production_min.unstable_act=tt,react_production_min.useCallback=function(V,H){return et.current.useCallback(V,H)},react_production_min.useContext=function(V){return et.current.useContext(V)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(V){return et.current.useDeferredValue(V)},react_production_min.useEffect=function(V,H){return et.current.useEffect(V,H)},react_production_min.useId=function(){return et.current.useId()},react_production_min.useImperativeHandle=function(V,H,R){return et.current.useImperativeHandle(V,H,R)},react_production_min.useInsertionEffect=function(V,H){return et.current.useInsertionEffect(V,H)},react_production_min.useLayoutEffect=function(V,H){return et.current.useLayoutEffect(V,H)},react_production_min.useMemo=function(V,H){return et.current.useMemo(V,H)},react_production_min.useReducer=function(V,H,R){return et.current.useReducer(V,H,R)},react_production_min.useRef=function(V){return et.current.useRef(V)},react_production_min.useState=function(V){return et.current.useState(V)},react_production_min.useSyncExternalStore=function(V,H,R){return et.current.useSyncExternalStore(V,H,R)},react_production_min.useTransition=function(){return et.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var g=requireReact(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var d,m={},v=null,_=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(_=h.ref);for(d in h)i.call(h,d)&&!r.hasOwnProperty(d)&&(m[d]=h[d]);if(u&&u.defaultProps)for(d in h=u.defaultProps,h)m[d]===void 0&&(m[d]=h[d]);return{$$typeof:t,type:u,key:v,ref:_,props:m,_owner:o.current}}return reactJsxRuntime_production_min.Fragment=e,reactJsxRuntime_production_min.jsx=c,reactJsxRuntime_production_min.jsxs=c,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(g){function t(it,$){var tt=it.length;it.push($);t:for(;0<tt;){var V=tt-1>>>1,H=it[V];if(0<o(H,$))it[V]=$,it[tt]=H,tt=V;else break t}}function e(it){return it.length===0?null:it[0]}function i(it){if(it.length===0)return null;var $=it[0],tt=it.pop();if(tt!==$){it[0]=tt;t:for(var V=0,H=it.length,R=H>>>1;V<R;){var F=2*(V+1)-1,U=it[F],K=F+1,X=it[K];if(0>o(U,tt))K<H&&0>o(X,U)?(it[V]=X,it[K]=tt,V=K):(it[V]=U,it[F]=tt,V=F);else if(K<H&&0>o(X,tt))it[V]=X,it[K]=tt,V=K;else break t}}return $}function o(it,$){var tt=it.sortIndex-$.sortIndex;return tt!==0?tt:it.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;g.unstable_now=function(){return r.now()}}else{var c=Date,u=c.now();g.unstable_now=function(){return c.now()-u}}var h=[],f=[],d=1,m=null,v=3,_=!1,A=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(it){for(var $=e(f);$!==null;){if($.callback===null)i(f);else if($.startTime<=it)i(f),$.sortIndex=$.expirationTime,t(h,$);else break;$=e(f)}}function N(it){if(S=!1,B(it),!A)if(e(h)!==null)A=!0,dt(T);else{var $=e(f);$!==null&&et(N,$.startTime-it)}}function T(it,$){A=!1,S&&(S=!1,b(D),D=-1),_=!0;var tt=v;try{for(B($),m=e(h);m!==null&&(!(m.expirationTime>$)||it&&!O());){var V=m.callback;if(typeof V=="function"){m.callback=null,v=m.priorityLevel;var H=V(m.expirationTime<=$);$=g.unstable_now(),typeof H=="function"?m.callback=H:m===e(h)&&i(h),B($)}else i(h);m=e(h)}if(m!==null)var R=!0;else{var F=e(f);F!==null&&et(N,F.startTime-$),R=!1}return R}finally{m=null,v=tt,_=!1}}var L=!1,k=null,D=-1,j=5,Z=-1;function O(){return!(g.unstable_now()-Z<j)}function G(){if(k!==null){var it=g.unstable_now();Z=it;var $=!0;try{$=k(!0,it)}finally{$?Q():(L=!1,k=null)}}else L=!1}var Q;if(typeof I=="function")Q=function(){I(G)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,ot=mt.port2;mt.port1.onmessage=G,Q=function(){ot.postMessage(null)}}else Q=function(){C(G,0)};function dt(it){k=it,L||(L=!0,Q())}function et(it,$){D=C(function(){it(g.unstable_now())},$)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(it){it.callback=null},g.unstable_continueExecution=function(){A||_||(A=!0,dt(T))},g.unstable_forceFrameRate=function(it){0>it||125<it?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<it?Math.floor(1e3/it):5},g.unstable_getCurrentPriorityLevel=function(){return v},g.unstable_getFirstCallbackNode=function(){return e(h)},g.unstable_next=function(it){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var tt=v;v=$;try{return it()}finally{v=tt}},g.unstable_pauseExecution=function(){},g.unstable_requestPaint=function(){},g.unstable_runWithPriority=function(it,$){switch(it){case 1:case 2:case 3:case 4:case 5:break;default:it=3}var tt=v;v=it;try{return $()}finally{v=tt}},g.unstable_scheduleCallback=function(it,$,tt){var V=g.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?V+tt:V):tt=V,it){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=tt+H,it={id:d++,callback:$,priorityLevel:it,startTime:tt,expirationTime:H,sortIndex:-1},tt>V?(it.sortIndex=tt,t(f,it),e(h)===null&&it===e(f)&&(S?(b(D),D=-1):S=!0,et(N,tt-V))):(it.sortIndex=H,t(h,it),A||_||(A=!0,dt(T))),it},g.unstable_shouldYield=O,g.unstable_wrapCallback=function(it){var $=v;return function(){var tt=v;v=$;try{return it.apply(this,arguments)}finally{v=tt}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var g=requireReact(),t=requireScheduler();function e(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function r(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function v(n){return h.call(m,n)?!0:h.call(d,n)?!1:f.test(n)?m[n]=!0:(d[n]=!0,!1)}function _(n,s,l,p){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return p?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A(n,s,l,p){if(s===null||typeof s>"u"||_(n,s,l,p))return!0;if(p)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function S(n,s,l,p,y,E,W){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=E,this.removeEmptyString=W}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){C[n]=new S(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];C[s]=new S(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){C[n]=new S(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){C[n]=new S(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){C[n]=new S(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){C[n]=new S(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){C[n]=new S(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){C[n]=new S(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){C[n]=new S(n,5,!1,n.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function I(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(b,I);C[s]=new S(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(b,I);C[s]=new S(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(b,I);C[s]=new S(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){C[n]=new S(n,1,!1,n.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){C[n]=new S(n,1,!1,n.toLowerCase(),null,!0,!0)});function B(n,s,l,p){var y=C.hasOwnProperty(s)?C[s]:null;(y!==null?y.type!==0:p||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(A(s,l,y,p)&&(l=null),p||y===null?v(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):y.mustUseProperty?n[y.propertyName]=l===null?y.type===3?!1:"":l:(s=y.attributeName,p=y.attributeNamespace,l===null?n.removeAttribute(s):(y=y.type,l=y===3||y===4&&l===!0?"":""+l,p?n.setAttributeNS(p,s,l):n.setAttribute(s,l))))}var N=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),L=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),O=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),mt=Symbol.for("react.suspense_list"),ot=Symbol.for("react.memo"),dt=Symbol.for("react.lazy"),et=Symbol.for("react.offscreen"),it=Symbol.iterator;function $(n){return n===null||typeof n!="object"?null:(n=it&&n[it]||n["@@iterator"],typeof n=="function"?n:null)}var tt=Object.assign,V;function H(n){if(V===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+n}var R=!1;function F(n,s){if(!n||R)return"";R=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Bt){var p=Bt}Reflect.construct(n,[],s)}else{try{s.call()}catch(Bt){p=Bt}n.call(s.prototype)}else{try{throw Error()}catch(Bt){p=Bt}n()}}catch(Bt){if(Bt&&p&&typeof Bt.stack=="string"){for(var y=Bt.stack.split(`
`),E=p.stack.split(`
`),W=y.length-1,ht=E.length-1;1<=W&&0<=ht&&y[W]!==E[ht];)ht--;for(;1<=W&&0<=ht;W--,ht--)if(y[W]!==E[ht]){if(W!==1||ht!==1)do if(W--,ht--,0>ht||y[W]!==E[ht]){var _t=`
`+y[W].replace(" at new "," at ");return n.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",n.displayName)),_t}while(1<=W&&0<=ht);break}}}finally{R=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?H(n):""}function U(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=F(n.type,!1),n;case 11:return n=F(n.type.render,!1),n;case 1:return n=F(n.type,!0),n;default:return""}}function K(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case L:return"Portal";case j:return"Profiler";case D:return"StrictMode";case Q:return"Suspense";case mt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case O:return(n.displayName||"Context")+".Consumer";case Z:return(n._context.displayName||"Context")+".Provider";case G:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ot:return s=n.displayName||null,s!==null?s:K(n.type)||"Memo";case dt:s=n._payload,n=n._init;try{return K(n(s))}catch{}}return null}function X(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(s);case 8:return s===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Y(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ut(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wt(n){var s=ut(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),p=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,E=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return y.call(this)},set:function(W){p=""+W,E.call(this,W)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return p},setValue:function(W){p=""+W},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function It(n){n._valueTracker||(n._valueTracker=wt(n))}function Dt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),p="";return n&&(p=ut(n)?n.checked?"true":"false":n.value),n=p,n!==l?(s.setValue(n),!0):!1}function Ht(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Vt(n,s){var l=s.checked;return tt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Gt(n,s){var l=s.defaultValue==null?"":s.defaultValue,p=s.checked!=null?s.checked:s.defaultChecked;l=Y(s.value!=null?s.value:l),n._wrapperState={initialChecked:p,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function xt(n,s){s=s.checked,s!=null&&B(n,"checked",s,!1)}function Pt(n,s){xt(n,s);var l=Y(s.value),p=s.type;if(l!=null)p==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?st(n,s.type,l):s.hasOwnProperty("defaultValue")&&st(n,s.type,Y(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function q(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var p=s.type;if(!(p!=="submit"&&p!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function st(n,s,l){(s!=="number"||Ht(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var vt=Array.isArray;function Ct(n,s,l,p){if(n=n.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<n.length;l++)y=s.hasOwnProperty("$"+n[l].value),n[l].selected!==y&&(n[l].selected=y),y&&p&&(n[l].defaultSelected=!0)}else{for(l=""+Y(l),s=null,y=0;y<n.length;y++){if(n[y].value===l){n[y].selected=!0,p&&(n[y].defaultSelected=!0);return}s!==null||n[y].disabled||(s=n[y])}s!==null&&(s.selected=!0)}}function Ot(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(e(91));return tt({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function qt(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(e(92));if(vt(l)){if(1<l.length)throw Error(e(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:Y(l)}}function Ut(n,s){var l=Y(s.value),p=Y(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),p!=null&&(n.defaultValue=""+p)}function yt(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ne(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ne(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var He,Pe=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,p,y){MSApp.execUnsafeLocalFunction(function(){return n(s,l,p,y)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(He=He||document.createElement("div"),He.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=He.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Qe(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ee=["Webkit","ms","Moz","O"];Object.keys(ce).forEach(function(n){Ee.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ce[s]=ce[n]})});function Xe(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ce.hasOwnProperty(n)&&ce[n]?(""+s).trim():s+"px"}function dn(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var p=l.indexOf("--")===0,y=Xe(l,s[l],p);l==="float"&&(l="cssFloat"),p?n.setProperty(l,y):n[l]=y}}var zt=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bt(n,s){if(s){if(zt[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(e(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(e(61))}if(s.style!=null&&typeof s.style!="object")throw Error(e(62))}}function Et(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var he=null;function pe(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Te=null,rt=null,Nt=null;function ee(n){if(n=gh(n)){if(typeof Te!="function")throw Error(e(280));var s=n.stateNode;s&&(s=Nf(s),Te(n.stateNode,n.type,s))}}function ge(n){rt?Nt?Nt.push(n):Nt=[n]:rt=n}function ye(){if(rt){var n=rt,s=Nt;if(Nt=rt=null,ee(n),s)for(n=0;n<s.length;n++)ee(s[n])}}function le(n,s){return n(s)}function nt(){}var J=!1;function pt(n,s,l){if(J)return n(s,l);J=!0;try{return le(n,s,l)}finally{J=!1,(rt!==null||Nt!==null)&&(nt(),ye())}}function Mt(n,s){var l=n.stateNode;if(l===null)return null;var p=Nf(l);if(p===null)return null;l=p[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,s,typeof l));return l}var Ft=!1;if(u)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Ft=!1}function Yt(n,s,l,p,y,E,W,ht,_t){var Bt=Array.prototype.slice.call(arguments,3);try{s.apply(l,Bt)}catch(re){this.onError(re)}}var fe=!1,de=null,se=!1,Ve=null,me={onError:function(n){fe=!0,de=n}};function Ae(n,s,l,p,y,E,W,ht,_t){fe=!1,de=null,Yt.apply(me,arguments)}function Be(n,s,l,p,y,E,W,ht,_t){if(Ae.apply(this,arguments),fe){if(fe){var Bt=de;fe=!1,de=null}else throw Error(e(198));se||(se=!0,Ve=Bt)}}function $e(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function cn(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function bn(n){if($e(n)!==n)throw Error(e(188))}function oi(n){var s=n.alternate;if(!s){if(s=$e(n),s===null)throw Error(e(188));return s!==n?null:n}for(var l=n,p=s;;){var y=l.return;if(y===null)break;var E=y.alternate;if(E===null){if(p=y.return,p!==null){l=p;continue}break}if(y.child===E.child){for(E=y.child;E;){if(E===l)return bn(y),n;if(E===p)return bn(y),s;E=E.sibling}throw Error(e(188))}if(l.return!==p.return)l=y,p=E;else{for(var W=!1,ht=y.child;ht;){if(ht===l){W=!0,l=y,p=E;break}if(ht===p){W=!0,p=y,l=E;break}ht=ht.sibling}if(!W){for(ht=E.child;ht;){if(ht===l){W=!0,l=E,p=y;break}if(ht===p){W=!0,p=E,l=y;break}ht=ht.sibling}if(!W)throw Error(e(189))}}if(l.alternate!==p)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:s}function jn(n){return n=oi(n),n!==null?os(n):null}function os(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=os(n);if(s!==null)return s;n=n.sibling}return null}var bs=t.unstable_scheduleCallback,Es=t.unstable_cancelCallback,dc=t.unstable_shouldYield,Rg=t.unstable_requestPaint,Zn=t.unstable_now,fc=t.unstable_getCurrentPriorityLevel,ih=t.unstable_ImmediatePriority,pf=t.unstable_UserBlockingPriority,pc=t.unstable_NormalPriority,kg=t.unstable_LowPriority,gf=t.unstable_IdlePriority,gc=null,Ji=null;function mf(n){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(gc,n,void 0,(n.current.flags&128)===128)}catch{}}var ls=Math.clz32?Math.clz32:Mg,Pg=Math.log,Ho=Math.LN2;function Mg(n){return n>>>=0,n===0?32:31-(Pg(n)/Ho|0)|0}var mc=64,vc=4194304;function Zr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function yc(n,s){var l=n.pendingLanes;if(l===0)return 0;var p=0,y=n.suspendedLanes,E=n.pingedLanes,W=l&268435455;if(W!==0){var ht=W&~y;ht!==0?p=Zr(ht):(E&=W,E!==0&&(p=Zr(E)))}else W=l&~y,W!==0?p=Zr(W):E!==0&&(p=Zr(E));if(p===0)return 0;if(s!==0&&s!==p&&!(s&y)&&(y=p&-p,E=s&-s,y>=E||y===16&&(E&4194240)!==0))return s;if(p&4&&(p|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=p;0<s;)l=31-ls(s),y=1<<l,p|=n[l],s&=~y;return p}function Fg(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vf(n,s){for(var l=n.suspendedLanes,p=n.pingedLanes,y=n.expirationTimes,E=n.pendingLanes;0<E;){var W=31-ls(E),ht=1<<W,_t=y[W];_t===-1?(!(ht&l)||ht&p)&&(y[W]=Fg(ht,s)):_t<=s&&(n.expiredLanes|=ht),E&=~ht}}function _c(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function yf(){var n=mc;return mc<<=1,!(mc&4194240)&&(mc=64),n}function sh(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function ta(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-ls(s),n[s]=l}function Lg(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<l;){var y=31-ls(l),E=1<<y;s[y]=0,p[y]=-1,n[y]=-1,l&=~E}}function Ac(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var p=31-ls(l),y=1<<p;y&s|n[p]&s&&(n[p]|=s),l&=~y}}var Rn=0;function _f(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var bc,rh,Af,ea,bf,Ec=!1,wc=[],ws=null,Hs=null,Tr=null,za=new Map,Wa=new Map,Bs=[],Ig="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ef(n,s){switch(n){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":za.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(s.pointerId)}}function Bo(n,s,l,p,y,E){return n===null||n.nativeEvent!==E?(n={blockedOn:s,domEventName:l,eventSystemFlags:p,nativeEvent:E,targetContainers:[y]},s!==null&&(s=gh(s),s!==null&&rh(s)),n):(n.eventSystemFlags|=p,s=n.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),n)}function P(n,s,l,p,y){switch(s){case"focusin":return ws=Bo(ws,n,s,l,p,y),!0;case"dragenter":return Hs=Bo(Hs,n,s,l,p,y),!0;case"mouseover":return Tr=Bo(Tr,n,s,l,p,y),!0;case"pointerover":var E=y.pointerId;return za.set(E,Bo(za.get(E)||null,n,s,l,p,y)),!0;case"gotpointercapture":return E=y.pointerId,Wa.set(E,Bo(Wa.get(E)||null,n,s,l,p,y)),!0}return!1}function z(n){var s=Ko(n.target);if(s!==null){var l=$e(s);if(l!==null){if(s=l.tag,s===13){if(s=cn(l),s!==null){n.blockedOn=s,bf(n.priority,function(){Af(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function at(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=$t(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var p=new l.constructor(l.type,l);he=p,l.target.dispatchEvent(p),he=null}else return s=gh(l),s!==null&&rh(s),n.blockedOn=l,!1;s.shift()}return!0}function lt(n,s,l){at(n)&&l.delete(s)}function ft(){Ec=!1,ws!==null&&at(ws)&&(ws=null),Hs!==null&&at(Hs)&&(Hs=null),Tr!==null&&at(Tr)&&(Tr=null),za.forEach(lt),Wa.forEach(lt)}function gt(n,s){n.blockedOn===s&&(n.blockedOn=null,Ec||(Ec=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ft)))}function Rt(n){function s(y){return gt(y,n)}if(0<wc.length){gt(wc[0],n);for(var l=1;l<wc.length;l++){var p=wc[l];p.blockedOn===n&&(p.blockedOn=null)}}for(ws!==null&&gt(ws,n),Hs!==null&&gt(Hs,n),Tr!==null&&gt(Tr,n),za.forEach(s),Wa.forEach(s),l=0;l<Bs.length;l++)p=Bs[l],p.blockedOn===n&&(p.blockedOn=null);for(;0<Bs.length&&(l=Bs[0],l.blockedOn===null);)z(l),l.blockedOn===null&&Bs.shift()}var At=N.ReactCurrentBatchConfig,ct=!0;function Tt(n,s,l,p){var y=Rn,E=At.transition;At.transition=null;try{Rn=1,Kt(n,s,l,p)}finally{Rn=y,At.transition=E}}function St(n,s,l,p){var y=Rn,E=At.transition;At.transition=null;try{Rn=4,Kt(n,s,l,p)}finally{Rn=y,At.transition=E}}function Kt(n,s,l,p){if(ct){var y=$t(n,s,l,p);if(y===null)Hg(n,s,p,Xt,l),Ef(n,p);else if(P(y,n,s,l,p))p.stopPropagation();else if(Ef(n,p),s&4&&-1<Ig.indexOf(n)){for(;y!==null;){var E=gh(y);if(E!==null&&bc(E),E=$t(n,s,l,p),E===null&&Hg(n,s,p,Xt,l),E===y)break;y=E}y!==null&&p.stopPropagation()}else Hg(n,s,p,null,l)}}var Xt=null;function $t(n,s,l,p){if(Xt=null,n=pe(p),n=Ko(n),n!==null)if(s=$e(n),s===null)n=null;else if(l=s.tag,l===13){if(n=cn(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Xt=n,null}function ae(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fc()){case ih:return 1;case pf:return 4;case pc:case kg:return 16;case gf:return 536870912;default:return 16}default:return 16}}var Zt=null,te=null,Ze=null;function Oe(){if(Ze)return Ze;var n,s=te,l=s.length,p,y="value"in Zt?Zt.value:Zt.textContent,E=y.length;for(n=0;n<l&&s[n]===y[n];n++);var W=l-n;for(p=1;p<=W&&s[l-p]===y[E-p];p++);return Ze=y.slice(n,1<p?1-p:void 0)}function Ie(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function We(){return!0}function we(){return!1}function Me(n){function s(l,p,y,E,W){this._reactName=l,this._targetInst=y,this.type=p,this.nativeEvent=E,this.target=W,this.currentTarget=null;for(var ht in n)n.hasOwnProperty(ht)&&(l=n[ht],this[ht]=l?l(E):E[ht]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?We:we,this.isPropagationStopped=we,this}return tt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=We)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=We)},persist:function(){},isPersistent:We}),s}var Ne={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gn=Me(Ne),un=tt({},Ne,{view:0,detail:0}),_n=Me(un),vn,An,Hn,kn=tt({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Se,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Hn&&(Hn&&n.type==="mousemove"?(vn=n.screenX-Hn.screenX,An=n.screenY-Hn.screenY):An=vn=0,Hn=n),vn)},movementY:function(n){return"movementY"in n?n.movementY:An}}),Yn=Me(kn),Wn=tt({},kn,{dataTransfer:0}),$n=Me(Wn),qn=tt({},un,{relatedTarget:0}),Bn=Me(qn),yi=tt({},Ne,{animationName:0,elapsedTime:0,pseudoElement:0}),Us=Me(yi),Ss=tt({},Ne,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),hi=Me(Ss),zi=tt({},Ne,{data:0}),zs=Me(zi),qe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ue={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fe(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ce[n])?!!s[n]:!1}function Se(){return Fe}var Ye=tt({},un,{key:function(n){if(n.key){var s=qe[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ie(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ue[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Se,charCode:function(n){return n.type==="keypress"?Ie(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ie(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),tn=Me(Ye),Le=tt({},kn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ve=Me(Le),sn=tt({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Se}),on=Me(sn),Ln=tt({},Ne,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pn=Me(Ln),pi=tt({},kn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Zi=Me(pi),rn=[9,13,27,32],li=u&&"CompositionEvent"in window,xn=null;u&&"documentMode"in document&&(xn=document.documentMode);var Dn=u&&"TextEvent"in window&&!xn,ti=u&&(!li||xn&&8<xn&&11>=xn),Cn=" ",sr=!1;function na(n,s){switch(n){case"keyup":return rn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var cs=!1;function zo(n,s){switch(n){case"compositionend":return Uo(s);case"keypress":return s.which!==32?null:(sr=!0,Cn);case"textInput":return n=s.data,n===Cn&&sr?null:n;default:return null}}function Dg(n,s){if(cs)return n==="compositionend"||!li&&na(n,s)?(n=Oe(),Ze=te=Zt=null,cs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ti&&s.locale!=="ko"?null:s.data;default:return null}}var ts={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ah(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!ts[n.type]:s==="textarea"}function wf(n,s,l,p){ge(p),s=If(s,"onChange"),0<s.length&&(l=new gn("onChange","change",null,l,p),n.push({event:l,listeners:s}))}var Sn=null,Wo=null;function Rr(n){My(n,0)}function Sc(n){var s=Mc(n);if(Dt(s))return n}function Og(n,s){if(n==="change")return s}var Sf=!1;if(u){var Vo;if(u){var xc="oninput"in document;if(!xc){var xf=document.createElement("div");xf.setAttribute("oninput","return;"),xc=typeof xf.oninput=="function"}Vo=xc}else Vo=!1;Sf=Vo&&(!document.documentMode||9<document.documentMode)}function Cf(){Sn&&(Sn.detachEvent("onpropertychange",Tf),Wo=Sn=null)}function Tf(n){if(n.propertyName==="value"&&Sc(Wo)){var s=[];wf(s,Wo,n,pe(n)),pt(Rr,s)}}function kr(n,s,l){n==="focusin"?(Cf(),Sn=s,Wo=l,Sn.attachEvent("onpropertychange",Tf)):n==="focusout"&&Cf()}function Ng(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Sc(Wo)}function Rf(n,s){if(n==="click")return Sc(s)}function kf(n,s){if(n==="input"||n==="change")return Sc(s)}function oh(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var us=typeof Object.is=="function"?Object.is:oh;function Va(n,s){if(us(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),p=Object.keys(s);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var y=l[p];if(!h.call(s,y)||!us(n[y],s[y]))return!1}return!0}function Pr(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Pf(n,s){var l=Pr(n);n=0;for(var p;l;){if(l.nodeType===3){if(p=n+l.textContent.length,n<=s&&p>=s)return{node:l,offset:s-n};n=p}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Pr(l)}}function Mf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Mf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Cc(){for(var n=window,s=Ht();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=Ht(n.document)}return s}function Go(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function lh(n){var s=Cc(),l=n.focusedElem,p=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&Mf(l.ownerDocument.documentElement,l)){if(p!==null&&Go(l)){if(s=p.start,n=p.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var y=l.textContent.length,E=Math.min(p.start,y);p=p.end===void 0?E:Math.min(p.end,y),!n.extend&&E>p&&(y=p,p=E,E=y),y=Pf(l,E);var W=Pf(l,p);y&&W&&(n.rangeCount!==1||n.anchorNode!==y.node||n.anchorOffset!==y.offset||n.focusNode!==W.node||n.focusOffset!==W.offset)&&(s=s.createRange(),s.setStart(y.node,y.offset),n.removeAllRanges(),E>p?(n.addRange(s),n.extend(W.node,W.offset)):(s.setEnd(W.node,W.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ff=u&&"documentMode"in document&&11>=document.documentMode,Ga=null,$o=null,qo=null,ch=!1;function uh(n,s,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ch||Ga==null||Ga!==Ht(p)||(p=Ga,"selectionStart"in p&&Go(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),qo&&Va(qo,p)||(qo=p,p=If($o,"onSelect"),0<p.length&&(s=new gn("onSelect","select",null,s,l),n.push({event:s,listeners:p}),s.target=Ga)))}function Jt(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Ke={animationend:Jt("Animation","AnimationEnd"),animationiteration:Jt("Animation","AnimationIteration"),animationstart:Jt("Animation","AnimationStart"),transitionend:Jt("Transition","TransitionEnd")},ln={},En={};u&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete Ke.animationend.animation,delete Ke.animationiteration.animation,delete Ke.animationstart.animation),"TransitionEvent"in window||delete Ke.transitionend.transition);function mn(n){if(ln[n])return ln[n];if(!Ke[n])return n;var s=Ke[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in En)return ln[n]=s[l];return n}var hn=mn("animationend"),ei=mn("animationiteration"),rr=mn("animationstart"),Tc=mn("transitionend"),Xo=new Map,ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(n,s){Xo.set(n,s),r(s,[n])}for(var Rc=0;Rc<ar.length;Rc++){var $a=ar[Rc],qa=$a.toLowerCase(),Cb=$a[0].toUpperCase()+$a.slice(1);xs(qa,"on"+Cb)}xs(hn,"onAnimationEnd"),xs(ei,"onAnimationIteration"),xs(rr,"onAnimationStart"),xs("dblclick","onDoubleClick"),xs("focusin","onFocus"),xs("focusout","onBlur"),xs(Tc,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tb=new Set("cancel close invalid load scroll toggle".split(" ").concat(hh));function Py(n,s,l){var p=n.type||"unknown-event";n.currentTarget=l,Be(p,s,void 0,n),n.currentTarget=null}function My(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var p=n[l],y=p.event;p=p.listeners;t:{var E=void 0;if(s)for(var W=p.length-1;0<=W;W--){var ht=p[W],_t=ht.instance,Bt=ht.currentTarget;if(ht=ht.listener,_t!==E&&y.isPropagationStopped())break t;Py(y,ht,Bt),E=_t}else for(W=0;W<p.length;W++){if(ht=p[W],_t=ht.instance,Bt=ht.currentTarget,ht=ht.listener,_t!==E&&y.isPropagationStopped())break t;Py(y,ht,Bt),E=_t}}}if(se)throw n=Ve,se=!1,Ve=null,n}function Xn(n,s){var l=s[Gg];l===void 0&&(l=s[Gg]=new Set);var p=n+"__bubble";l.has(p)||(Fy(s,n,2,!1),l.add(p))}function jg(n,s,l){var p=0;s&&(p|=4),Fy(l,n,p,s)}var Lf="_reactListening"+Math.random().toString(36).slice(2);function dh(n){if(!n[Lf]){n[Lf]=!0,i.forEach(function(l){l!=="selectionchange"&&(Tb.has(l)||jg(l,!1,n),jg(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Lf]||(s[Lf]=!0,jg("selectionchange",!1,s))}}function Fy(n,s,l,p){switch(ae(s)){case 1:var y=Tt;break;case 4:y=St;break;default:y=Kt}l=y.bind(null,s,l,n),y=void 0,!Ft||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),p?y!==void 0?n.addEventListener(s,l,{capture:!0,passive:y}):n.addEventListener(s,l,!0):y!==void 0?n.addEventListener(s,l,{passive:y}):n.addEventListener(s,l,!1)}function Hg(n,s,l,p,y){var E=p;if(!(s&1)&&!(s&2)&&p!==null)t:for(;;){if(p===null)return;var W=p.tag;if(W===3||W===4){var ht=p.stateNode.containerInfo;if(ht===y||ht.nodeType===8&&ht.parentNode===y)break;if(W===4)for(W=p.return;W!==null;){var _t=W.tag;if((_t===3||_t===4)&&(_t=W.stateNode.containerInfo,_t===y||_t.nodeType===8&&_t.parentNode===y))return;W=W.return}for(;ht!==null;){if(W=Ko(ht),W===null)return;if(_t=W.tag,_t===5||_t===6){p=E=W;continue t}ht=ht.parentNode}}p=p.return}pt(function(){var Bt=E,re=pe(l),oe=[];t:{var ie=Xo.get(n);if(ie!==void 0){var Re=gn,je=n;switch(n){case"keypress":if(Ie(l)===0)break t;case"keydown":case"keyup":Re=tn;break;case"focusin":je="focus",Re=Bn;break;case"focusout":je="blur",Re=Bn;break;case"beforeblur":case"afterblur":Re=Bn;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=Yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=$n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=on;break;case hn:case ei:case rr:Re=Us;break;case Tc:Re=Pn;break;case"scroll":Re=_n;break;case"wheel":Re=Zi;break;case"copy":case"cut":case"paste":Re=hi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=ve}var ze=(s&4)!==0,di=!ze&&n==="scroll",Lt=ze?ie!==null?ie+"Capture":null:ie;ze=[];for(var kt=Bt,jt;kt!==null;){jt=kt;var ue=jt.stateNode;if(jt.tag===5&&ue!==null&&(jt=ue,Lt!==null&&(ue=Mt(kt,Lt),ue!=null&&ze.push(fh(kt,ue,jt)))),di)break;kt=kt.return}0<ze.length&&(ie=new Re(ie,je,null,l,re),oe.push({event:ie,listeners:ze}))}}if(!(s&7)){t:{if(ie=n==="mouseover"||n==="pointerover",Re=n==="mouseout"||n==="pointerout",ie&&l!==he&&(je=l.relatedTarget||l.fromElement)&&(Ko(je)||je[ia]))break t;if((Re||ie)&&(ie=re.window===re?re:(ie=re.ownerDocument)?ie.defaultView||ie.parentWindow:window,Re?(je=l.relatedTarget||l.toElement,Re=Bt,je=je?Ko(je):null,je!==null&&(di=$e(je),je!==di||je.tag!==5&&je.tag!==6)&&(je=null)):(Re=null,je=Bt),Re!==je)){if(ze=Yn,ue="onMouseLeave",Lt="onMouseEnter",kt="mouse",(n==="pointerout"||n==="pointerover")&&(ze=ve,ue="onPointerLeave",Lt="onPointerEnter",kt="pointer"),di=Re==null?ie:Mc(Re),jt=je==null?ie:Mc(je),ie=new ze(ue,kt+"leave",Re,l,re),ie.target=di,ie.relatedTarget=jt,ue=null,Ko(re)===Bt&&(ze=new ze(Lt,kt+"enter",je,l,re),ze.target=jt,ze.relatedTarget=di,ue=ze),di=ue,Re&&je)e:{for(ze=Re,Lt=je,kt=0,jt=ze;jt;jt=kc(jt))kt++;for(jt=0,ue=Lt;ue;ue=kc(ue))jt++;for(;0<kt-jt;)ze=kc(ze),kt--;for(;0<jt-kt;)Lt=kc(Lt),jt--;for(;kt--;){if(ze===Lt||Lt!==null&&ze===Lt.alternate)break e;ze=kc(ze),Lt=kc(Lt)}ze=null}else ze=null;Re!==null&&Ly(oe,ie,Re,ze,!1),je!==null&&di!==null&&Ly(oe,di,je,ze,!0)}}t:{if(ie=Bt?Mc(Bt):window,Re=ie.nodeName&&ie.nodeName.toLowerCase(),Re==="select"||Re==="input"&&ie.type==="file")var Ge=Og;else if(ah(ie))if(Sf)Ge=kf;else{Ge=Ng;var en=kr}else(Re=ie.nodeName)&&Re.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ge=Rf);if(Ge&&(Ge=Ge(n,Bt))){wf(oe,Ge,l,re);break t}en&&en(n,ie,Bt),n==="focusout"&&(en=ie._wrapperState)&&en.controlled&&ie.type==="number"&&st(ie,"number",ie.value)}switch(en=Bt?Mc(Bt):window,n){case"focusin":(ah(en)||en.contentEditable==="true")&&(Ga=en,$o=Bt,qo=null);break;case"focusout":qo=$o=Ga=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,uh(oe,l,re);break;case"selectionchange":if(Ff)break;case"keydown":case"keyup":uh(oe,l,re)}var nn;if(li)t:{switch(n){case"compositionstart":var an="onCompositionStart";break t;case"compositionend":an="onCompositionEnd";break t;case"compositionupdate":an="onCompositionUpdate";break t}an=void 0}else cs?na(n,l)&&(an="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(an="onCompositionStart");an&&(ti&&l.locale!=="ko"&&(cs||an!=="onCompositionStart"?an==="onCompositionEnd"&&cs&&(nn=Oe()):(Zt=re,te="value"in Zt?Zt.value:Zt.textContent,cs=!0)),en=If(Bt,an),0<en.length&&(an=new zs(an,n,null,l,re),oe.push({event:an,listeners:en}),nn?an.data=nn:(nn=Uo(l),nn!==null&&(an.data=nn)))),(nn=Dn?zo(n,l):Dg(n,l))&&(Bt=If(Bt,"onBeforeInput"),0<Bt.length&&(re=new zs("onBeforeInput","beforeinput",null,l,re),oe.push({event:re,listeners:Bt}),re.data=nn))}My(oe,s)})}function fh(n,s,l){return{instance:n,listener:s,currentTarget:l}}function If(n,s){for(var l=s+"Capture",p=[];n!==null;){var y=n,E=y.stateNode;y.tag===5&&E!==null&&(y=E,E=Mt(n,l),E!=null&&p.unshift(fh(n,E,y)),E=Mt(n,s),E!=null&&p.push(fh(n,E,y))),n=n.return}return p}function kc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ly(n,s,l,p,y){for(var E=s._reactName,W=[];l!==null&&l!==p;){var ht=l,_t=ht.alternate,Bt=ht.stateNode;if(_t!==null&&_t===p)break;ht.tag===5&&Bt!==null&&(ht=Bt,y?(_t=Mt(l,E),_t!=null&&W.unshift(fh(l,_t,ht))):y||(_t=Mt(l,E),_t!=null&&W.push(fh(l,_t,ht)))),l=l.return}W.length!==0&&n.push({event:s,listeners:W})}var Rb=/\r\n?/g,kb=/\u0000|\uFFFD/g;function Iy(n){return(typeof n=="string"?n:""+n).replace(Rb,`
`).replace(kb,"")}function Df(n,s,l){if(s=Iy(s),Iy(n)!==s&&l)throw Error(e(425))}function Of(){}var Bg=null,Ug=null;function zg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wg=typeof setTimeout=="function"?setTimeout:void 0,Pb=typeof clearTimeout=="function"?clearTimeout:void 0,Dy=typeof Promise=="function"?Promise:void 0,Mb=typeof queueMicrotask=="function"?queueMicrotask:typeof Dy<"u"?function(n){return Dy.resolve(null).then(n).catch(Fb)}:Wg;function Fb(n){setTimeout(function(){throw n})}function Vg(n,s){var l=s,p=0;do{var y=l.nextSibling;if(n.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(p===0){n.removeChild(y),Rt(s);return}p--}else l!=="$"&&l!=="$?"&&l!=="$!"||p++;l=y}while(l);Rt(s)}function Xa(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Oy(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var Pc=Math.random().toString(36).slice(2),Mr="__reactFiber$"+Pc,ph="__reactProps$"+Pc,ia="__reactContainer$"+Pc,Gg="__reactEvents$"+Pc,Lb="__reactListeners$"+Pc,Ib="__reactHandles$"+Pc;function Ko(n){var s=n[Mr];if(s)return s;for(var l=n.parentNode;l;){if(s=l[ia]||l[Mr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=Oy(n);n!==null;){if(l=n[Mr])return l;n=Oy(n)}return s}n=l,l=n.parentNode}return null}function gh(n){return n=n[Mr]||n[ia],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Mc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function Nf(n){return n[ph]||null}var $g=[],Fc=-1;function Ka(n){return{current:n}}function Kn(n){0>Fc||(n.current=$g[Fc],$g[Fc]=null,Fc--)}function Vn(n,s){Fc++,$g[Fc]=n.current,n.current=s}var Ya={},Wi=Ka(Ya),hs=Ka(!1),Yo=Ya;function Lc(n,s){var l=n.type.contextTypes;if(!l)return Ya;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===s)return p.__reactInternalMemoizedMaskedChildContext;var y={},E;for(E in l)y[E]=s[E];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=y),y}function ds(n){return n=n.childContextTypes,n!=null}function jf(){Kn(hs),Kn(Wi)}function Ny(n,s,l){if(Wi.current!==Ya)throw Error(e(168));Vn(Wi,s),Vn(hs,l)}function jy(n,s,l){var p=n.stateNode;if(s=s.childContextTypes,typeof p.getChildContext!="function")return l;p=p.getChildContext();for(var y in p)if(!(y in s))throw Error(e(108,X(n)||"Unknown",y));return tt({},l,p)}function Hf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ya,Yo=Wi.current,Vn(Wi,n),Vn(hs,hs.current),!0}function Hy(n,s,l){var p=n.stateNode;if(!p)throw Error(e(169));l?(n=jy(n,s,Yo),p.__reactInternalMemoizedMergedChildContext=n,Kn(hs),Kn(Wi),Vn(Wi,n)):Kn(hs),Vn(hs,l)}var sa=null,Bf=!1,qg=!1;function By(n){sa===null?sa=[n]:sa.push(n)}function Db(n){Bf=!0,By(n)}function Qa(){if(!qg&&sa!==null){qg=!0;var n=0,s=Rn;try{var l=sa;for(Rn=1;n<l.length;n++){var p=l[n];do p=p(!0);while(p!==null)}sa=null,Bf=!1}catch(y){throw sa!==null&&(sa=sa.slice(n+1)),bs(ih,Qa),y}finally{Rn=s,qg=!1}}return null}var Ic=[],Dc=0,Uf=null,zf=0,Ws=[],Vs=0,Qo=null,ra=1,aa="";function Jo(n,s){Ic[Dc++]=zf,Ic[Dc++]=Uf,Uf=n,zf=s}function Uy(n,s,l){Ws[Vs++]=ra,Ws[Vs++]=aa,Ws[Vs++]=Qo,Qo=n;var p=ra;n=aa;var y=32-ls(p)-1;p&=~(1<<y),l+=1;var E=32-ls(s)+y;if(30<E){var W=y-y%5;E=(p&(1<<W)-1).toString(32),p>>=W,y-=W,ra=1<<32-ls(s)+y|l<<y|p,aa=E+n}else ra=1<<E|l<<y|p,aa=n}function Xg(n){n.return!==null&&(Jo(n,1),Uy(n,1,0))}function Kg(n){for(;n===Uf;)Uf=Ic[--Dc],Ic[Dc]=null,zf=Ic[--Dc],Ic[Dc]=null;for(;n===Qo;)Qo=Ws[--Vs],Ws[Vs]=null,aa=Ws[--Vs],Ws[Vs]=null,ra=Ws[--Vs],Ws[Vs]=null}var Cs=null,Ts=null,Qn=!1,or=null;function zy(n,s){var l=Xs(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function Wy(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Cs=n,Ts=Xa(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Cs=n,Ts=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Qo!==null?{id:ra,overflow:aa}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Xs(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,Cs=n,Ts=null,!0):!1;default:return!1}}function Yg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Qg(n){if(Qn){var s=Ts;if(s){var l=s;if(!Wy(n,s)){if(Yg(n))throw Error(e(418));s=Xa(l.nextSibling);var p=Cs;s&&Wy(n,s)?zy(p,l):(n.flags=n.flags&-4097|2,Qn=!1,Cs=n)}}else{if(Yg(n))throw Error(e(418));n.flags=n.flags&-4097|2,Qn=!1,Cs=n}}}function Vy(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Cs=n}function Wf(n){if(n!==Cs)return!1;if(!Qn)return Vy(n),Qn=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!zg(n.type,n.memoizedProps)),s&&(s=Ts)){if(Yg(n))throw Gy(),Error(e(418));for(;s;)zy(n,s),s=Xa(s.nextSibling)}if(Vy(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){Ts=Xa(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}Ts=null}}else Ts=Cs?Xa(n.stateNode.nextSibling):null;return!0}function Gy(){for(var n=Ts;n;)n=Xa(n.nextSibling)}function Oc(){Ts=Cs=null,Qn=!1}function Jg(n){or===null?or=[n]:or.push(n)}var Ob=N.ReactCurrentBatchConfig;function mh(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var p=l.stateNode}if(!p)throw Error(e(147,n));var y=p,E=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===E?s.ref:(s=function(W){var ht=y.refs;W===null?delete ht[E]:ht[E]=W},s._stringRef=E,s)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function Vf(n,s){throw n=Object.prototype.toString.call(s),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function $y(n){var s=n._init;return s(n._payload)}function qy(n){function s(Lt,kt){if(n){var jt=Lt.deletions;jt===null?(Lt.deletions=[kt],Lt.flags|=16):jt.push(kt)}}function l(Lt,kt){if(!n)return null;for(;kt!==null;)s(Lt,kt),kt=kt.sibling;return null}function p(Lt,kt){for(Lt=new Map;kt!==null;)kt.key!==null?Lt.set(kt.key,kt):Lt.set(kt.index,kt),kt=kt.sibling;return Lt}function y(Lt,kt){return Lt=ro(Lt,kt),Lt.index=0,Lt.sibling=null,Lt}function E(Lt,kt,jt){return Lt.index=jt,n?(jt=Lt.alternate,jt!==null?(jt=jt.index,jt<kt?(Lt.flags|=2,kt):jt):(Lt.flags|=2,kt)):(Lt.flags|=1048576,kt)}function W(Lt){return n&&Lt.alternate===null&&(Lt.flags|=2),Lt}function ht(Lt,kt,jt,ue){return kt===null||kt.tag!==6?(kt=Wm(jt,Lt.mode,ue),kt.return=Lt,kt):(kt=y(kt,jt),kt.return=Lt,kt)}function _t(Lt,kt,jt,ue){var Ge=jt.type;return Ge===k?re(Lt,kt,jt.props.children,ue,jt.key):kt!==null&&(kt.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===dt&&$y(Ge)===kt.type)?(ue=y(kt,jt.props),ue.ref=mh(Lt,kt,jt),ue.return=Lt,ue):(ue=pp(jt.type,jt.key,jt.props,null,Lt.mode,ue),ue.ref=mh(Lt,kt,jt),ue.return=Lt,ue)}function Bt(Lt,kt,jt,ue){return kt===null||kt.tag!==4||kt.stateNode.containerInfo!==jt.containerInfo||kt.stateNode.implementation!==jt.implementation?(kt=Vm(jt,Lt.mode,ue),kt.return=Lt,kt):(kt=y(kt,jt.children||[]),kt.return=Lt,kt)}function re(Lt,kt,jt,ue,Ge){return kt===null||kt.tag!==7?(kt=al(jt,Lt.mode,ue,Ge),kt.return=Lt,kt):(kt=y(kt,jt),kt.return=Lt,kt)}function oe(Lt,kt,jt){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return kt=Wm(""+kt,Lt.mode,jt),kt.return=Lt,kt;if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case T:return jt=pp(kt.type,kt.key,kt.props,null,Lt.mode,jt),jt.ref=mh(Lt,null,kt),jt.return=Lt,jt;case L:return kt=Vm(kt,Lt.mode,jt),kt.return=Lt,kt;case dt:var ue=kt._init;return oe(Lt,ue(kt._payload),jt)}if(vt(kt)||$(kt))return kt=al(kt,Lt.mode,jt,null),kt.return=Lt,kt;Vf(Lt,kt)}return null}function ie(Lt,kt,jt,ue){var Ge=kt!==null?kt.key:null;if(typeof jt=="string"&&jt!==""||typeof jt=="number")return Ge!==null?null:ht(Lt,kt,""+jt,ue);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case T:return jt.key===Ge?_t(Lt,kt,jt,ue):null;case L:return jt.key===Ge?Bt(Lt,kt,jt,ue):null;case dt:return Ge=jt._init,ie(Lt,kt,Ge(jt._payload),ue)}if(vt(jt)||$(jt))return Ge!==null?null:re(Lt,kt,jt,ue,null);Vf(Lt,jt)}return null}function Re(Lt,kt,jt,ue,Ge){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return Lt=Lt.get(jt)||null,ht(kt,Lt,""+ue,Ge);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:return Lt=Lt.get(ue.key===null?jt:ue.key)||null,_t(kt,Lt,ue,Ge);case L:return Lt=Lt.get(ue.key===null?jt:ue.key)||null,Bt(kt,Lt,ue,Ge);case dt:var en=ue._init;return Re(Lt,kt,jt,en(ue._payload),Ge)}if(vt(ue)||$(ue))return Lt=Lt.get(jt)||null,re(kt,Lt,ue,Ge,null);Vf(kt,ue)}return null}function je(Lt,kt,jt,ue){for(var Ge=null,en=null,nn=kt,an=kt=0,ki=null;nn!==null&&an<jt.length;an++){nn.index>an?(ki=nn,nn=null):ki=nn.sibling;var Mn=ie(Lt,nn,jt[an],ue);if(Mn===null){nn===null&&(nn=ki);break}n&&nn&&Mn.alternate===null&&s(Lt,nn),kt=E(Mn,kt,an),en===null?Ge=Mn:en.sibling=Mn,en=Mn,nn=ki}if(an===jt.length)return l(Lt,nn),Qn&&Jo(Lt,an),Ge;if(nn===null){for(;an<jt.length;an++)nn=oe(Lt,jt[an],ue),nn!==null&&(kt=E(nn,kt,an),en===null?Ge=nn:en.sibling=nn,en=nn);return Qn&&Jo(Lt,an),Ge}for(nn=p(Lt,nn);an<jt.length;an++)ki=Re(nn,Lt,an,jt[an],ue),ki!==null&&(n&&ki.alternate!==null&&nn.delete(ki.key===null?an:ki.key),kt=E(ki,kt,an),en===null?Ge=ki:en.sibling=ki,en=ki);return n&&nn.forEach(function(ao){return s(Lt,ao)}),Qn&&Jo(Lt,an),Ge}function ze(Lt,kt,jt,ue){var Ge=$(jt);if(typeof Ge!="function")throw Error(e(150));if(jt=Ge.call(jt),jt==null)throw Error(e(151));for(var en=Ge=null,nn=kt,an=kt=0,ki=null,Mn=jt.next();nn!==null&&!Mn.done;an++,Mn=jt.next()){nn.index>an?(ki=nn,nn=null):ki=nn.sibling;var ao=ie(Lt,nn,Mn.value,ue);if(ao===null){nn===null&&(nn=ki);break}n&&nn&&ao.alternate===null&&s(Lt,nn),kt=E(ao,kt,an),en===null?Ge=ao:en.sibling=ao,en=ao,nn=ki}if(Mn.done)return l(Lt,nn),Qn&&Jo(Lt,an),Ge;if(nn===null){for(;!Mn.done;an++,Mn=jt.next())Mn=oe(Lt,Mn.value,ue),Mn!==null&&(kt=E(Mn,kt,an),en===null?Ge=Mn:en.sibling=Mn,en=Mn);return Qn&&Jo(Lt,an),Ge}for(nn=p(Lt,nn);!Mn.done;an++,Mn=jt.next())Mn=Re(nn,Lt,an,Mn.value,ue),Mn!==null&&(n&&Mn.alternate!==null&&nn.delete(Mn.key===null?an:Mn.key),kt=E(Mn,kt,an),en===null?Ge=Mn:en.sibling=Mn,en=Mn);return n&&nn.forEach(function(pE){return s(Lt,pE)}),Qn&&Jo(Lt,an),Ge}function di(Lt,kt,jt,ue){if(typeof jt=="object"&&jt!==null&&jt.type===k&&jt.key===null&&(jt=jt.props.children),typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case T:t:{for(var Ge=jt.key,en=kt;en!==null;){if(en.key===Ge){if(Ge=jt.type,Ge===k){if(en.tag===7){l(Lt,en.sibling),kt=y(en,jt.props.children),kt.return=Lt,Lt=kt;break t}}else if(en.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===dt&&$y(Ge)===en.type){l(Lt,en.sibling),kt=y(en,jt.props),kt.ref=mh(Lt,en,jt),kt.return=Lt,Lt=kt;break t}l(Lt,en);break}else s(Lt,en);en=en.sibling}jt.type===k?(kt=al(jt.props.children,Lt.mode,ue,jt.key),kt.return=Lt,Lt=kt):(ue=pp(jt.type,jt.key,jt.props,null,Lt.mode,ue),ue.ref=mh(Lt,kt,jt),ue.return=Lt,Lt=ue)}return W(Lt);case L:t:{for(en=jt.key;kt!==null;){if(kt.key===en)if(kt.tag===4&&kt.stateNode.containerInfo===jt.containerInfo&&kt.stateNode.implementation===jt.implementation){l(Lt,kt.sibling),kt=y(kt,jt.children||[]),kt.return=Lt,Lt=kt;break t}else{l(Lt,kt);break}else s(Lt,kt);kt=kt.sibling}kt=Vm(jt,Lt.mode,ue),kt.return=Lt,Lt=kt}return W(Lt);case dt:return en=jt._init,di(Lt,kt,en(jt._payload),ue)}if(vt(jt))return je(Lt,kt,jt,ue);if($(jt))return ze(Lt,kt,jt,ue);Vf(Lt,jt)}return typeof jt=="string"&&jt!==""||typeof jt=="number"?(jt=""+jt,kt!==null&&kt.tag===6?(l(Lt,kt.sibling),kt=y(kt,jt),kt.return=Lt,Lt=kt):(l(Lt,kt),kt=Wm(jt,Lt.mode,ue),kt.return=Lt,Lt=kt),W(Lt)):l(Lt,kt)}return di}var Nc=qy(!0),Xy=qy(!1),Gf=Ka(null),$f=null,jc=null,Zg=null;function tm(){Zg=jc=$f=null}function em(n){var s=Gf.current;Kn(Gf),n._currentValue=s}function nm(n,s,l){for(;n!==null;){var p=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),n===l)break;n=n.return}}function Hc(n,s){$f=n,Zg=jc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(fs=!0),n.firstContext=null)}function Gs(n){var s=n._currentValue;if(Zg!==n)if(n={context:n,memoizedValue:s,next:null},jc===null){if($f===null)throw Error(e(308));jc=n,$f.dependencies={lanes:0,firstContext:n}}else jc=jc.next=n;return s}var Zo=null;function im(n){Zo===null?Zo=[n]:Zo.push(n)}function Ky(n,s,l,p){var y=s.interleaved;return y===null?(l.next=l,im(s)):(l.next=y.next,y.next=l),s.interleaved=l,oa(n,p)}function oa(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Ja=!1;function sm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yy(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function la(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Za(n,s,l){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,Tn&2){var y=p.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),p.pending=s,oa(n,l)}return y=p.interleaved,y===null?(s.next=s,im(p)):(s.next=y.next,y.next=s),p.interleaved=s,oa(n,l)}function qf(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var p=s.lanes;p&=n.pendingLanes,l|=p,s.lanes=l,Ac(n,l)}}function Qy(n,s){var l=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var y=null,E=null;if(l=l.firstBaseUpdate,l!==null){do{var W={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};E===null?y=E=W:E=E.next=W,l=l.next}while(l!==null);E===null?y=E=s:E=E.next=s}else y=E=s;l={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:E,shared:p.shared,effects:p.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function Xf(n,s,l,p){var y=n.updateQueue;Ja=!1;var E=y.firstBaseUpdate,W=y.lastBaseUpdate,ht=y.shared.pending;if(ht!==null){y.shared.pending=null;var _t=ht,Bt=_t.next;_t.next=null,W===null?E=Bt:W.next=Bt,W=_t;var re=n.alternate;re!==null&&(re=re.updateQueue,ht=re.lastBaseUpdate,ht!==W&&(ht===null?re.firstBaseUpdate=Bt:ht.next=Bt,re.lastBaseUpdate=_t))}if(E!==null){var oe=y.baseState;W=0,re=Bt=_t=null,ht=E;do{var ie=ht.lane,Re=ht.eventTime;if((p&ie)===ie){re!==null&&(re=re.next={eventTime:Re,lane:0,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null});t:{var je=n,ze=ht;switch(ie=s,Re=l,ze.tag){case 1:if(je=ze.payload,typeof je=="function"){oe=je.call(Re,oe,ie);break t}oe=je;break t;case 3:je.flags=je.flags&-65537|128;case 0:if(je=ze.payload,ie=typeof je=="function"?je.call(Re,oe,ie):je,ie==null)break t;oe=tt({},oe,ie);break t;case 2:Ja=!0}}ht.callback!==null&&ht.lane!==0&&(n.flags|=64,ie=y.effects,ie===null?y.effects=[ht]:ie.push(ht))}else Re={eventTime:Re,lane:ie,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null},re===null?(Bt=re=Re,_t=oe):re=re.next=Re,W|=ie;if(ht=ht.next,ht===null){if(ht=y.shared.pending,ht===null)break;ie=ht,ht=ie.next,ie.next=null,y.lastBaseUpdate=ie,y.shared.pending=null}}while(!0);if(re===null&&(_t=oe),y.baseState=_t,y.firstBaseUpdate=Bt,y.lastBaseUpdate=re,s=y.shared.interleaved,s!==null){y=s;do W|=y.lane,y=y.next;while(y!==s)}else E===null&&(y.shared.lanes=0);nl|=W,n.lanes=W,n.memoizedState=oe}}function Jy(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var p=n[s],y=p.callback;if(y!==null){if(p.callback=null,p=l,typeof y!="function")throw Error(e(191,y));y.call(p)}}}var vh={},Fr=Ka(vh),yh=Ka(vh),_h=Ka(vh);function tl(n){if(n===vh)throw Error(e(174));return n}function rm(n,s){switch(Vn(_h,s),Vn(yh,n),Vn(Fr,vh),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Qt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Qt(s,n)}Kn(Fr),Vn(Fr,s)}function Bc(){Kn(Fr),Kn(yh),Kn(_h)}function Zy(n){tl(_h.current);var s=tl(Fr.current),l=Qt(s,n.type);s!==l&&(Vn(yh,n),Vn(Fr,l))}function am(n){yh.current===n&&(Kn(Fr),Kn(yh))}var ni=Ka(0);function Kf(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var om=[];function lm(){for(var n=0;n<om.length;n++)om[n]._workInProgressVersionPrimary=null;om.length=0}var Yf=N.ReactCurrentDispatcher,cm=N.ReactCurrentBatchConfig,el=0,ii=null,_i=null,Ti=null,Qf=!1,Ah=!1,bh=0,Nb=0;function Vi(){throw Error(e(321))}function um(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!us(n[l],s[l]))return!1;return!0}function hm(n,s,l,p,y,E){if(el=E,ii=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Yf.current=n===null||n.memoizedState===null?Ub:zb,n=l(p,y),Ah){E=0;do{if(Ah=!1,bh=0,25<=E)throw Error(e(301));E+=1,Ti=_i=null,s.updateQueue=null,Yf.current=Wb,n=l(p,y)}while(Ah)}if(Yf.current=tp,s=_i!==null&&_i.next!==null,el=0,Ti=_i=ii=null,Qf=!1,s)throw Error(e(300));return n}function dm(){var n=bh!==0;return bh=0,n}function Lr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?ii.memoizedState=Ti=n:Ti=Ti.next=n,Ti}function $s(){if(_i===null){var n=ii.alternate;n=n!==null?n.memoizedState:null}else n=_i.next;var s=Ti===null?ii.memoizedState:Ti.next;if(s!==null)Ti=s,_i=n;else{if(n===null)throw Error(e(310));_i=n,n={memoizedState:_i.memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},Ti===null?ii.memoizedState=Ti=n:Ti=Ti.next=n}return Ti}function Eh(n,s){return typeof s=="function"?s(n):s}function fm(n){var s=$s(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var p=_i,y=p.baseQueue,E=l.pending;if(E!==null){if(y!==null){var W=y.next;y.next=E.next,E.next=W}p.baseQueue=y=E,l.pending=null}if(y!==null){E=y.next,p=p.baseState;var ht=W=null,_t=null,Bt=E;do{var re=Bt.lane;if((el&re)===re)_t!==null&&(_t=_t.next={lane:0,action:Bt.action,hasEagerState:Bt.hasEagerState,eagerState:Bt.eagerState,next:null}),p=Bt.hasEagerState?Bt.eagerState:n(p,Bt.action);else{var oe={lane:re,action:Bt.action,hasEagerState:Bt.hasEagerState,eagerState:Bt.eagerState,next:null};_t===null?(ht=_t=oe,W=p):_t=_t.next=oe,ii.lanes|=re,nl|=re}Bt=Bt.next}while(Bt!==null&&Bt!==E);_t===null?W=p:_t.next=ht,us(p,s.memoizedState)||(fs=!0),s.memoizedState=p,s.baseState=W,s.baseQueue=_t,l.lastRenderedState=p}if(n=l.interleaved,n!==null){y=n;do E=y.lane,ii.lanes|=E,nl|=E,y=y.next;while(y!==n)}else y===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function pm(n){var s=$s(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var p=l.dispatch,y=l.pending,E=s.memoizedState;if(y!==null){l.pending=null;var W=y=y.next;do E=n(E,W.action),W=W.next;while(W!==y);us(E,s.memoizedState)||(fs=!0),s.memoizedState=E,s.baseQueue===null&&(s.baseState=E),l.lastRenderedState=E}return[E,p]}function t0(){}function e0(n,s){var l=ii,p=$s(),y=s(),E=!us(p.memoizedState,y);if(E&&(p.memoizedState=y,fs=!0),p=p.queue,gm(s0.bind(null,l,p,n),[n]),p.getSnapshot!==s||E||Ti!==null&&Ti.memoizedState.tag&1){if(l.flags|=2048,wh(9,i0.bind(null,l,p,y,s),void 0,null),Ri===null)throw Error(e(349));el&30||n0(l,s,y)}return y}function n0(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=ii.updateQueue,s===null?(s={lastEffect:null,stores:null},ii.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function i0(n,s,l,p){s.value=l,s.getSnapshot=p,r0(s)&&a0(n)}function s0(n,s,l){return l(function(){r0(s)&&a0(n)})}function r0(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!us(n,l)}catch{return!0}}function a0(n){var s=oa(n,1);s!==null&&hr(s,n,1,-1)}function o0(n){var s=Lr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eh,lastRenderedState:n},s.queue=n,n=n.dispatch=Bb.bind(null,ii,n),[s.memoizedState,n]}function wh(n,s,l,p){return n={tag:n,create:s,destroy:l,deps:p,next:null},s=ii.updateQueue,s===null?(s={lastEffect:null,stores:null},ii.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(p=l.next,l.next=n,n.next=p,s.lastEffect=n)),n}function l0(){return $s().memoizedState}function Jf(n,s,l,p){var y=Lr();ii.flags|=n,y.memoizedState=wh(1|s,l,void 0,p===void 0?null:p)}function Zf(n,s,l,p){var y=$s();p=p===void 0?null:p;var E=void 0;if(_i!==null){var W=_i.memoizedState;if(E=W.destroy,p!==null&&um(p,W.deps)){y.memoizedState=wh(s,l,E,p);return}}ii.flags|=n,y.memoizedState=wh(1|s,l,E,p)}function c0(n,s){return Jf(8390656,8,n,s)}function gm(n,s){return Zf(2048,8,n,s)}function u0(n,s){return Zf(4,2,n,s)}function h0(n,s){return Zf(4,4,n,s)}function d0(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function f0(n,s,l){return l=l!=null?l.concat([n]):null,Zf(4,4,d0.bind(null,s,n),l)}function mm(){}function p0(n,s){var l=$s();s=s===void 0?null:s;var p=l.memoizedState;return p!==null&&s!==null&&um(s,p[1])?p[0]:(l.memoizedState=[n,s],n)}function g0(n,s){var l=$s();s=s===void 0?null:s;var p=l.memoizedState;return p!==null&&s!==null&&um(s,p[1])?p[0]:(n=n(),l.memoizedState=[n,s],n)}function m0(n,s,l){return el&21?(us(l,s)||(l=yf(),ii.lanes|=l,nl|=l,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,fs=!0),n.memoizedState=l)}function jb(n,s){var l=Rn;Rn=l!==0&&4>l?l:4,n(!0);var p=cm.transition;cm.transition={};try{n(!1),s()}finally{Rn=l,cm.transition=p}}function v0(){return $s().memoizedState}function Hb(n,s,l){var p=io(n);if(l={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null},y0(n))_0(s,l);else if(l=Ky(n,s,l,p),l!==null){var y=ns();hr(l,n,p,y),A0(l,s,p)}}function Bb(n,s,l){var p=io(n),y={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null};if(y0(n))_0(s,y);else{var E=n.alternate;if(n.lanes===0&&(E===null||E.lanes===0)&&(E=s.lastRenderedReducer,E!==null))try{var W=s.lastRenderedState,ht=E(W,l);if(y.hasEagerState=!0,y.eagerState=ht,us(ht,W)){var _t=s.interleaved;_t===null?(y.next=y,im(s)):(y.next=_t.next,_t.next=y),s.interleaved=y;return}}catch{}finally{}l=Ky(n,s,y,p),l!==null&&(y=ns(),hr(l,n,p,y),A0(l,s,p))}}function y0(n){var s=n.alternate;return n===ii||s!==null&&s===ii}function _0(n,s){Ah=Qf=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function A0(n,s,l){if(l&4194240){var p=s.lanes;p&=n.pendingLanes,l|=p,s.lanes=l,Ac(n,l)}}var tp={readContext:Gs,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},Ub={readContext:Gs,useCallback:function(n,s){return Lr().memoizedState=[n,s===void 0?null:s],n},useContext:Gs,useEffect:c0,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Jf(4194308,4,d0.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Jf(4194308,4,n,s)},useInsertionEffect:function(n,s){return Jf(4,2,n,s)},useMemo:function(n,s){var l=Lr();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var p=Lr();return s=l!==void 0?l(s):s,p.memoizedState=p.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},p.queue=n,n=n.dispatch=Hb.bind(null,ii,n),[p.memoizedState,n]},useRef:function(n){var s=Lr();return n={current:n},s.memoizedState=n},useState:o0,useDebugValue:mm,useDeferredValue:function(n){return Lr().memoizedState=n},useTransition:function(){var n=o0(!1),s=n[0];return n=jb.bind(null,n[1]),Lr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var p=ii,y=Lr();if(Qn){if(l===void 0)throw Error(e(407));l=l()}else{if(l=s(),Ri===null)throw Error(e(349));el&30||n0(p,s,l)}y.memoizedState=l;var E={value:l,getSnapshot:s};return y.queue=E,c0(s0.bind(null,p,E,n),[n]),p.flags|=2048,wh(9,i0.bind(null,p,E,l,s),void 0,null),l},useId:function(){var n=Lr(),s=Ri.identifierPrefix;if(Qn){var l=aa,p=ra;l=(p&~(1<<32-ls(p)-1)).toString(32)+l,s=":"+s+"R"+l,l=bh++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=Nb++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},zb={readContext:Gs,useCallback:p0,useContext:Gs,useEffect:gm,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:h0,useMemo:g0,useReducer:fm,useRef:l0,useState:function(){return fm(Eh)},useDebugValue:mm,useDeferredValue:function(n){var s=$s();return m0(s,_i.memoizedState,n)},useTransition:function(){var n=fm(Eh)[0],s=$s().memoizedState;return[n,s]},useMutableSource:t0,useSyncExternalStore:e0,useId:v0,unstable_isNewReconciler:!1},Wb={readContext:Gs,useCallback:p0,useContext:Gs,useEffect:gm,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:h0,useMemo:g0,useReducer:pm,useRef:l0,useState:function(){return pm(Eh)},useDebugValue:mm,useDeferredValue:function(n){var s=$s();return _i===null?s.memoizedState=n:m0(s,_i.memoizedState,n)},useTransition:function(){var n=pm(Eh)[0],s=$s().memoizedState;return[n,s]},useMutableSource:t0,useSyncExternalStore:e0,useId:v0,unstable_isNewReconciler:!1};function lr(n,s){if(n&&n.defaultProps){s=tt({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function vm(n,s,l,p){s=n.memoizedState,l=l(p,s),l=l==null?s:tt({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var ep={isMounted:function(n){return(n=n._reactInternals)?$e(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var p=ns(),y=io(n),E=la(p,y);E.payload=s,l!=null&&(E.callback=l),s=Za(n,E,y),s!==null&&(hr(s,n,y,p),qf(s,n,y))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var p=ns(),y=io(n),E=la(p,y);E.tag=1,E.payload=s,l!=null&&(E.callback=l),s=Za(n,E,y),s!==null&&(hr(s,n,y,p),qf(s,n,y))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=ns(),p=io(n),y=la(l,p);y.tag=2,s!=null&&(y.callback=s),s=Za(n,y,p),s!==null&&(hr(s,n,p,l),qf(s,n,p))}};function b0(n,s,l,p,y,E,W){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,E,W):s.prototype&&s.prototype.isPureReactComponent?!Va(l,p)||!Va(y,E):!0}function E0(n,s,l){var p=!1,y=Ya,E=s.contextType;return typeof E=="object"&&E!==null?E=Gs(E):(y=ds(s)?Yo:Wi.current,p=s.contextTypes,E=(p=p!=null)?Lc(n,y):Ya),s=new s(l,E),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ep,n.stateNode=s,s._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=y,n.__reactInternalMemoizedMaskedChildContext=E),s}function w0(n,s,l,p){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,p),s.state!==n&&ep.enqueueReplaceState(s,s.state,null)}function ym(n,s,l,p){var y=n.stateNode;y.props=l,y.state=n.memoizedState,y.refs={},sm(n);var E=s.contextType;typeof E=="object"&&E!==null?y.context=Gs(E):(E=ds(s)?Yo:Wi.current,y.context=Lc(n,E)),y.state=n.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(vm(n,s,E,l),y.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(s=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),s!==y.state&&ep.enqueueReplaceState(y,y.state,null),Xf(n,l,y,p),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308)}function Uc(n,s){try{var l="",p=s;do l+=U(p),p=p.return;while(p);var y=l}catch(E){y=`
Error generating stack: `+E.message+`
`+E.stack}return{value:n,source:s,stack:y,digest:null}}function _m(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function Am(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var Vb=typeof WeakMap=="function"?WeakMap:Map;function S0(n,s,l){l=la(-1,l),l.tag=3,l.payload={element:null};var p=s.value;return l.callback=function(){lp||(lp=!0,Dm=p),Am(n,s)},l}function x0(n,s,l){l=la(-1,l),l.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var y=s.value;l.payload=function(){return p(y)},l.callback=function(){Am(n,s)}}var E=n.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(l.callback=function(){Am(n,s),typeof p!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var W=s.stack;this.componentDidCatch(s.value,{componentStack:W!==null?W:""})}),l}function C0(n,s,l){var p=n.pingCache;if(p===null){p=n.pingCache=new Vb;var y=new Set;p.set(s,y)}else y=p.get(s),y===void 0&&(y=new Set,p.set(s,y));y.has(l)||(y.add(l),n=sE.bind(null,n,s,l),s.then(n,n))}function T0(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function R0(n,s,l,p,y){return n.mode&1?(n.flags|=65536,n.lanes=y,n):(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=la(-1,1),s.tag=2,Za(l,s,1))),l.lanes|=1),n)}var Gb=N.ReactCurrentOwner,fs=!1;function es(n,s,l,p){s.child=n===null?Xy(s,null,l,p):Nc(s,n.child,l,p)}function k0(n,s,l,p,y){l=l.render;var E=s.ref;return Hc(s,y),p=hm(n,s,l,p,E,y),l=dm(),n!==null&&!fs?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~y,ca(n,s,y)):(Qn&&l&&Xg(s),s.flags|=1,es(n,s,p,y),s.child)}function P0(n,s,l,p,y){if(n===null){var E=l.type;return typeof E=="function"&&!zm(E)&&E.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=E,M0(n,s,E,p,y)):(n=pp(l.type,null,p,s,s.mode,y),n.ref=s.ref,n.return=s,s.child=n)}if(E=n.child,!(n.lanes&y)){var W=E.memoizedProps;if(l=l.compare,l=l!==null?l:Va,l(W,p)&&n.ref===s.ref)return ca(n,s,y)}return s.flags|=1,n=ro(E,p),n.ref=s.ref,n.return=s,s.child=n}function M0(n,s,l,p,y){if(n!==null){var E=n.memoizedProps;if(Va(E,p)&&n.ref===s.ref)if(fs=!1,s.pendingProps=p=E,(n.lanes&y)!==0)n.flags&131072&&(fs=!0);else return s.lanes=n.lanes,ca(n,s,y)}return bm(n,s,l,p,y)}function F0(n,s,l){var p=s.pendingProps,y=p.children,E=n!==null?n.memoizedState:null;if(p.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(Wc,Rs),Rs|=l;else{if(!(l&1073741824))return n=E!==null?E.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Vn(Wc,Rs),Rs|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=E!==null?E.baseLanes:l,Vn(Wc,Rs),Rs|=p}else E!==null?(p=E.baseLanes|l,s.memoizedState=null):p=l,Vn(Wc,Rs),Rs|=p;return es(n,s,y,l),s.child}function L0(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function bm(n,s,l,p,y){var E=ds(l)?Yo:Wi.current;return E=Lc(s,E),Hc(s,y),l=hm(n,s,l,p,E,y),p=dm(),n!==null&&!fs?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~y,ca(n,s,y)):(Qn&&p&&Xg(s),s.flags|=1,es(n,s,l,y),s.child)}function I0(n,s,l,p,y){if(ds(l)){var E=!0;Hf(s)}else E=!1;if(Hc(s,y),s.stateNode===null)ip(n,s),E0(s,l,p),ym(s,l,p,y),p=!0;else if(n===null){var W=s.stateNode,ht=s.memoizedProps;W.props=ht;var _t=W.context,Bt=l.contextType;typeof Bt=="object"&&Bt!==null?Bt=Gs(Bt):(Bt=ds(l)?Yo:Wi.current,Bt=Lc(s,Bt));var re=l.getDerivedStateFromProps,oe=typeof re=="function"||typeof W.getSnapshotBeforeUpdate=="function";oe||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ht!==p||_t!==Bt)&&w0(s,W,p,Bt),Ja=!1;var ie=s.memoizedState;W.state=ie,Xf(s,p,W,y),_t=s.memoizedState,ht!==p||ie!==_t||hs.current||Ja?(typeof re=="function"&&(vm(s,l,re,p),_t=s.memoizedState),(ht=Ja||b0(s,l,ht,p,ie,_t,Bt))?(oe||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(s.flags|=4194308)):(typeof W.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=_t),W.props=p,W.state=_t,W.context=Bt,p=ht):(typeof W.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{W=s.stateNode,Yy(n,s),ht=s.memoizedProps,Bt=s.type===s.elementType?ht:lr(s.type,ht),W.props=Bt,oe=s.pendingProps,ie=W.context,_t=l.contextType,typeof _t=="object"&&_t!==null?_t=Gs(_t):(_t=ds(l)?Yo:Wi.current,_t=Lc(s,_t));var Re=l.getDerivedStateFromProps;(re=typeof Re=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ht!==oe||ie!==_t)&&w0(s,W,p,_t),Ja=!1,ie=s.memoizedState,W.state=ie,Xf(s,p,W,y);var je=s.memoizedState;ht!==oe||ie!==je||hs.current||Ja?(typeof Re=="function"&&(vm(s,l,Re,p),je=s.memoizedState),(Bt=Ja||b0(s,l,Bt,p,ie,je,_t)||!1)?(re||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(p,je,_t),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(p,je,_t)),typeof W.componentDidUpdate=="function"&&(s.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof W.componentDidUpdate!="function"||ht===n.memoizedProps&&ie===n.memoizedState||(s.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ht===n.memoizedProps&&ie===n.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=je),W.props=p,W.state=je,W.context=_t,p=Bt):(typeof W.componentDidUpdate!="function"||ht===n.memoizedProps&&ie===n.memoizedState||(s.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||ht===n.memoizedProps&&ie===n.memoizedState||(s.flags|=1024),p=!1)}return Em(n,s,l,p,E,y)}function Em(n,s,l,p,y,E){L0(n,s);var W=(s.flags&128)!==0;if(!p&&!W)return y&&Hy(s,l,!1),ca(n,s,E);p=s.stateNode,Gb.current=s;var ht=W&&typeof l.getDerivedStateFromError!="function"?null:p.render();return s.flags|=1,n!==null&&W?(s.child=Nc(s,n.child,null,E),s.child=Nc(s,null,ht,E)):es(n,s,ht,E),s.memoizedState=p.state,y&&Hy(s,l,!0),s.child}function D0(n){var s=n.stateNode;s.pendingContext?Ny(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Ny(n,s.context,!1),rm(n,s.containerInfo)}function O0(n,s,l,p,y){return Oc(),Jg(y),s.flags|=256,es(n,s,l,p),s.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function Sm(n){return{baseLanes:n,cachePool:null,transitions:null}}function N0(n,s,l){var p=s.pendingProps,y=ni.current,E=!1,W=(s.flags&128)!==0,ht;if((ht=W)||(ht=n!==null&&n.memoizedState===null?!1:(y&2)!==0),ht?(E=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(y|=1),Vn(ni,y&1),n===null)return Qg(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(W=p.children,n=p.fallback,E?(p=s.mode,E=s.child,W={mode:"hidden",children:W},!(p&1)&&E!==null?(E.childLanes=0,E.pendingProps=W):E=gp(W,p,0,null),n=al(n,p,l,null),E.return=s,n.return=s,E.sibling=n,s.child=E,s.child.memoizedState=Sm(l),s.memoizedState=wm,n):xm(s,W));if(y=n.memoizedState,y!==null&&(ht=y.dehydrated,ht!==null))return $b(n,s,W,p,ht,y,l);if(E){E=p.fallback,W=s.mode,y=n.child,ht=y.sibling;var _t={mode:"hidden",children:p.children};return!(W&1)&&s.child!==y?(p=s.child,p.childLanes=0,p.pendingProps=_t,s.deletions=null):(p=ro(y,_t),p.subtreeFlags=y.subtreeFlags&14680064),ht!==null?E=ro(ht,E):(E=al(E,W,l,null),E.flags|=2),E.return=s,p.return=s,p.sibling=E,s.child=p,p=E,E=s.child,W=n.child.memoizedState,W=W===null?Sm(l):{baseLanes:W.baseLanes|l,cachePool:null,transitions:W.transitions},E.memoizedState=W,E.childLanes=n.childLanes&~l,s.memoizedState=wm,p}return E=n.child,n=E.sibling,p=ro(E,{mode:"visible",children:p.children}),!(s.mode&1)&&(p.lanes=l),p.return=s,p.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=p,s.memoizedState=null,p}function xm(n,s){return s=gp({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function np(n,s,l,p){return p!==null&&Jg(p),Nc(s,n.child,null,l),n=xm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function $b(n,s,l,p,y,E,W){if(l)return s.flags&256?(s.flags&=-257,p=_m(Error(e(422))),np(n,s,W,p)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(E=p.fallback,y=s.mode,p=gp({mode:"visible",children:p.children},y,0,null),E=al(E,y,W,null),E.flags|=2,p.return=s,E.return=s,p.sibling=E,s.child=p,s.mode&1&&Nc(s,n.child,null,W),s.child.memoizedState=Sm(W),s.memoizedState=wm,E);if(!(s.mode&1))return np(n,s,W,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var ht=p.dgst;return p=ht,E=Error(e(419)),p=_m(E,p,void 0),np(n,s,W,p)}if(ht=(W&n.childLanes)!==0,fs||ht){if(p=Ri,p!==null){switch(W&-W){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(p.suspendedLanes|W)?0:y,y!==0&&y!==E.retryLane&&(E.retryLane=y,oa(n,y),hr(p,n,y,-1))}return Um(),p=_m(Error(e(421))),np(n,s,W,p)}return y.data==="$?"?(s.flags|=128,s.child=n.child,s=rE.bind(null,n),y._reactRetry=s,null):(n=E.treeContext,Ts=Xa(y.nextSibling),Cs=s,Qn=!0,or=null,n!==null&&(Ws[Vs++]=ra,Ws[Vs++]=aa,Ws[Vs++]=Qo,ra=n.id,aa=n.overflow,Qo=s),s=xm(s,p.children),s.flags|=4096,s)}function j0(n,s,l){n.lanes|=s;var p=n.alternate;p!==null&&(p.lanes|=s),nm(n.return,s,l)}function Cm(n,s,l,p,y){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:y}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=l,E.tailMode=y)}function H0(n,s,l){var p=s.pendingProps,y=p.revealOrder,E=p.tail;if(es(n,s,p.children,l),p=ni.current,p&2)p=p&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&j0(n,l,s);else if(n.tag===19)j0(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(Vn(ni,p),!(s.mode&1))s.memoizedState=null;else switch(y){case"forwards":for(l=s.child,y=null;l!==null;)n=l.alternate,n!==null&&Kf(n)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),Cm(s,!1,y,l,E);break;case"backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(n=y.alternate,n!==null&&Kf(n)===null){s.child=y;break}n=y.sibling,y.sibling=l,l=y,y=n}Cm(s,!0,l,null,E);break;case"together":Cm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ip(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ca(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),nl|=s.lanes,!(l&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(e(153));if(s.child!==null){for(n=s.child,l=ro(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=ro(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function qb(n,s,l){switch(s.tag){case 3:D0(s),Oc();break;case 5:Zy(s);break;case 1:ds(s.type)&&Hf(s);break;case 4:rm(s,s.stateNode.containerInfo);break;case 10:var p=s.type._context,y=s.memoizedProps.value;Vn(Gf,p._currentValue),p._currentValue=y;break;case 13:if(p=s.memoizedState,p!==null)return p.dehydrated!==null?(Vn(ni,ni.current&1),s.flags|=128,null):l&s.child.childLanes?N0(n,s,l):(Vn(ni,ni.current&1),n=ca(n,s,l),n!==null?n.sibling:null);Vn(ni,ni.current&1);break;case 19:if(p=(l&s.childLanes)!==0,n.flags&128){if(p)return H0(n,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Vn(ni,ni.current),p)break;return null;case 22:case 23:return s.lanes=0,F0(n,s,l)}return ca(n,s,l)}var B0,Tm,U0,z0;B0=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Tm=function(){},U0=function(n,s,l,p){var y=n.memoizedProps;if(y!==p){n=s.stateNode,tl(Fr.current);var E=null;switch(l){case"input":y=Vt(n,y),p=Vt(n,p),E=[];break;case"select":y=tt({},y,{value:void 0}),p=tt({},p,{value:void 0}),E=[];break;case"textarea":y=Ot(n,y),p=Ot(n,p),E=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=Of)}bt(l,p);var W;l=null;for(Bt in y)if(!p.hasOwnProperty(Bt)&&y.hasOwnProperty(Bt)&&y[Bt]!=null)if(Bt==="style"){var ht=y[Bt];for(W in ht)ht.hasOwnProperty(W)&&(l||(l={}),l[W]="")}else Bt!=="dangerouslySetInnerHTML"&&Bt!=="children"&&Bt!=="suppressContentEditableWarning"&&Bt!=="suppressHydrationWarning"&&Bt!=="autoFocus"&&(o.hasOwnProperty(Bt)?E||(E=[]):(E=E||[]).push(Bt,null));for(Bt in p){var _t=p[Bt];if(ht=y!=null?y[Bt]:void 0,p.hasOwnProperty(Bt)&&_t!==ht&&(_t!=null||ht!=null))if(Bt==="style")if(ht){for(W in ht)!ht.hasOwnProperty(W)||_t&&_t.hasOwnProperty(W)||(l||(l={}),l[W]="");for(W in _t)_t.hasOwnProperty(W)&&ht[W]!==_t[W]&&(l||(l={}),l[W]=_t[W])}else l||(E||(E=[]),E.push(Bt,l)),l=_t;else Bt==="dangerouslySetInnerHTML"?(_t=_t?_t.__html:void 0,ht=ht?ht.__html:void 0,_t!=null&&ht!==_t&&(E=E||[]).push(Bt,_t)):Bt==="children"?typeof _t!="string"&&typeof _t!="number"||(E=E||[]).push(Bt,""+_t):Bt!=="suppressContentEditableWarning"&&Bt!=="suppressHydrationWarning"&&(o.hasOwnProperty(Bt)?(_t!=null&&Bt==="onScroll"&&Xn("scroll",n),E||ht===_t||(E=[])):(E=E||[]).push(Bt,_t))}l&&(E=E||[]).push("style",l);var Bt=E;(s.updateQueue=Bt)&&(s.flags|=4)}},z0=function(n,s,l,p){l!==p&&(s.flags|=4)};function Sh(n,s){if(!Qn)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function Gi(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,p=0;if(s)for(var y=n.child;y!==null;)l|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)l|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=p,n.childLanes=l,s}function Xb(n,s,l){var p=s.pendingProps;switch(Kg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(s),null;case 1:return ds(s.type)&&jf(),Gi(s),null;case 3:return p=s.stateNode,Bc(),Kn(hs),Kn(Wi),lm(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(Wf(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,or!==null&&(jm(or),or=null))),Tm(n,s),Gi(s),null;case 5:am(s);var y=tl(_h.current);if(l=s.type,n!==null&&s.stateNode!=null)U0(n,s,l,p,y),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!p){if(s.stateNode===null)throw Error(e(166));return Gi(s),null}if(n=tl(Fr.current),Wf(s)){p=s.stateNode,l=s.type;var E=s.memoizedProps;switch(p[Mr]=s,p[ph]=E,n=(s.mode&1)!==0,l){case"dialog":Xn("cancel",p),Xn("close",p);break;case"iframe":case"object":case"embed":Xn("load",p);break;case"video":case"audio":for(y=0;y<hh.length;y++)Xn(hh[y],p);break;case"source":Xn("error",p);break;case"img":case"image":case"link":Xn("error",p),Xn("load",p);break;case"details":Xn("toggle",p);break;case"input":Gt(p,E),Xn("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!E.multiple},Xn("invalid",p);break;case"textarea":qt(p,E),Xn("invalid",p)}bt(l,E),y=null;for(var W in E)if(E.hasOwnProperty(W)){var ht=E[W];W==="children"?typeof ht=="string"?p.textContent!==ht&&(E.suppressHydrationWarning!==!0&&Df(p.textContent,ht,n),y=["children",ht]):typeof ht=="number"&&p.textContent!==""+ht&&(E.suppressHydrationWarning!==!0&&Df(p.textContent,ht,n),y=["children",""+ht]):o.hasOwnProperty(W)&&ht!=null&&W==="onScroll"&&Xn("scroll",p)}switch(l){case"input":It(p),q(p,E,!0);break;case"textarea":It(p),yt(p);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(p.onclick=Of)}p=y,s.updateQueue=p,p!==null&&(s.flags|=4)}else{W=y.nodeType===9?y:y.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ne(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=W.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=W.createElement(l,{is:p.is}):(n=W.createElement(l),l==="select"&&(W=n,p.multiple?W.multiple=!0:p.size&&(W.size=p.size))):n=W.createElementNS(n,l),n[Mr]=s,n[ph]=p,B0(n,s,!1,!1),s.stateNode=n;t:{switch(W=Et(l,p),l){case"dialog":Xn("cancel",n),Xn("close",n),y=p;break;case"iframe":case"object":case"embed":Xn("load",n),y=p;break;case"video":case"audio":for(y=0;y<hh.length;y++)Xn(hh[y],n);y=p;break;case"source":Xn("error",n),y=p;break;case"img":case"image":case"link":Xn("error",n),Xn("load",n),y=p;break;case"details":Xn("toggle",n),y=p;break;case"input":Gt(n,p),y=Vt(n,p),Xn("invalid",n);break;case"option":y=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},y=tt({},p,{value:void 0}),Xn("invalid",n);break;case"textarea":qt(n,p),y=Ot(n,p),Xn("invalid",n);break;default:y=p}bt(l,y),ht=y;for(E in ht)if(ht.hasOwnProperty(E)){var _t=ht[E];E==="style"?dn(n,_t):E==="dangerouslySetInnerHTML"?(_t=_t?_t.__html:void 0,_t!=null&&Pe(n,_t)):E==="children"?typeof _t=="string"?(l!=="textarea"||_t!=="")&&Qe(n,_t):typeof _t=="number"&&Qe(n,""+_t):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(o.hasOwnProperty(E)?_t!=null&&E==="onScroll"&&Xn("scroll",n):_t!=null&&B(n,E,_t,W))}switch(l){case"input":It(n),q(n,p,!1);break;case"textarea":It(n),yt(n);break;case"option":p.value!=null&&n.setAttribute("value",""+Y(p.value));break;case"select":n.multiple=!!p.multiple,E=p.value,E!=null?Ct(n,!!p.multiple,E,!1):p.defaultValue!=null&&Ct(n,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(n.onclick=Of)}switch(l){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}}p&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Gi(s),null;case 6:if(n&&s.stateNode!=null)z0(n,s,n.memoizedProps,p);else{if(typeof p!="string"&&s.stateNode===null)throw Error(e(166));if(l=tl(_h.current),tl(Fr.current),Wf(s)){if(p=s.stateNode,l=s.memoizedProps,p[Mr]=s,(E=p.nodeValue!==l)&&(n=Cs,n!==null))switch(n.tag){case 3:Df(p.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Df(p.nodeValue,l,(n.mode&1)!==0)}E&&(s.flags|=4)}else p=(l.nodeType===9?l:l.ownerDocument).createTextNode(p),p[Mr]=s,s.stateNode=p}return Gi(s),null;case 13:if(Kn(ni),p=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Qn&&Ts!==null&&s.mode&1&&!(s.flags&128))Gy(),Oc(),s.flags|=98560,E=!1;else if(E=Wf(s),p!==null&&p.dehydrated!==null){if(n===null){if(!E)throw Error(e(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(e(317));E[Mr]=s}else Oc(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Gi(s),E=!1}else or!==null&&(jm(or),or=null),E=!0;if(!E)return s.flags&65536?s:null}return s.flags&128?(s.lanes=l,s):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(s.child.flags|=8192,s.mode&1&&(n===null||ni.current&1?Ai===0&&(Ai=3):Um())),s.updateQueue!==null&&(s.flags|=4),Gi(s),null);case 4:return Bc(),Tm(n,s),n===null&&dh(s.stateNode.containerInfo),Gi(s),null;case 10:return em(s.type._context),Gi(s),null;case 17:return ds(s.type)&&jf(),Gi(s),null;case 19:if(Kn(ni),E=s.memoizedState,E===null)return Gi(s),null;if(p=(s.flags&128)!==0,W=E.rendering,W===null)if(p)Sh(E,!1);else{if(Ai!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(W=Kf(n),W!==null){for(s.flags|=128,Sh(E,!1),p=W.updateQueue,p!==null&&(s.updateQueue=p,s.flags|=4),s.subtreeFlags=0,p=l,l=s.child;l!==null;)E=l,n=p,E.flags&=14680066,W=E.alternate,W===null?(E.childLanes=0,E.lanes=n,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=W.childLanes,E.lanes=W.lanes,E.child=W.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=W.memoizedProps,E.memoizedState=W.memoizedState,E.updateQueue=W.updateQueue,E.type=W.type,n=W.dependencies,E.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Vn(ni,ni.current&1|2),s.child}n=n.sibling}E.tail!==null&&Zn()>Vc&&(s.flags|=128,p=!0,Sh(E,!1),s.lanes=4194304)}else{if(!p)if(n=Kf(W),n!==null){if(s.flags|=128,p=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Sh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!W.alternate&&!Qn)return Gi(s),null}else 2*Zn()-E.renderingStartTime>Vc&&l!==1073741824&&(s.flags|=128,p=!0,Sh(E,!1),s.lanes=4194304);E.isBackwards?(W.sibling=s.child,s.child=W):(l=E.last,l!==null?l.sibling=W:s.child=W,E.last=W)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Zn(),s.sibling=null,l=ni.current,Vn(ni,p?l&1|2:l&1),s):(Gi(s),null);case 22:case 23:return Bm(),p=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(s.flags|=8192),p&&s.mode&1?Rs&1073741824&&(Gi(s),s.subtreeFlags&6&&(s.flags|=8192)):Gi(s),null;case 24:return null;case 25:return null}throw Error(e(156,s.tag))}function Kb(n,s){switch(Kg(s),s.tag){case 1:return ds(s.type)&&jf(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Bc(),Kn(hs),Kn(Wi),lm(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return am(s),null;case 13:if(Kn(ni),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(e(340));Oc()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Kn(ni),null;case 4:return Bc(),null;case 10:return em(s.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var sp=!1,$i=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,De=null;function zc(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(p){ci(n,s,p)}else l.current=null}function Rm(n,s,l){try{l()}catch(p){ci(n,s,p)}}var W0=!1;function Qb(n,s){if(Bg=ct,n=Cc(),Go(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var y=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{l.nodeType,E.nodeType}catch{l=null;break t}var W=0,ht=-1,_t=-1,Bt=0,re=0,oe=n,ie=null;e:for(;;){for(var Re;oe!==l||y!==0&&oe.nodeType!==3||(ht=W+y),oe!==E||p!==0&&oe.nodeType!==3||(_t=W+p),oe.nodeType===3&&(W+=oe.nodeValue.length),(Re=oe.firstChild)!==null;)ie=oe,oe=Re;for(;;){if(oe===n)break e;if(ie===l&&++Bt===y&&(ht=W),ie===E&&++re===p&&(_t=W),(Re=oe.nextSibling)!==null)break;oe=ie,ie=oe.parentNode}oe=Re}l=ht===-1||_t===-1?null:{start:ht,end:_t}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ug={focusedElem:n,selectionRange:l},ct=!1,De=s;De!==null;)if(s=De,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,De=n;else for(;De!==null;){s=De;try{var je=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var ze=je.memoizedProps,di=je.memoizedState,Lt=s.stateNode,kt=Lt.getSnapshotBeforeUpdate(s.elementType===s.type?ze:lr(s.type,ze),di);Lt.__reactInternalSnapshotBeforeUpdate=kt}break;case 3:var jt=s.stateNode.containerInfo;jt.nodeType===1?jt.textContent="":jt.nodeType===9&&jt.documentElement&&jt.removeChild(jt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(ue){ci(s,s.return,ue)}if(n=s.sibling,n!==null){n.return=s.return,De=n;break}De=s.return}return je=W0,W0=!1,je}function xh(n,s,l){var p=s.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&n)===n){var E=y.destroy;y.destroy=void 0,E!==void 0&&Rm(s,l,E)}y=y.next}while(y!==p)}}function rp(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var p=l.create;l.destroy=p()}l=l.next}while(l!==s)}}function km(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function V0(n){var s=n.alternate;s!==null&&(n.alternate=null,V0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Mr],delete s[ph],delete s[Gg],delete s[Lb],delete s[Ib])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function G0(n){return n.tag===5||n.tag===3||n.tag===4}function $0(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||G0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pm(n,s,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Of));else if(p!==4&&(n=n.child,n!==null))for(Pm(n,s,l),n=n.sibling;n!==null;)Pm(n,s,l),n=n.sibling}function Mm(n,s,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(Mm(n,s,l),n=n.sibling;n!==null;)Mm(n,s,l),n=n.sibling}var Di=null,cr=!1;function to(n,s,l){for(l=l.child;l!==null;)q0(n,s,l),l=l.sibling}function q0(n,s,l){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(gc,l)}catch{}switch(l.tag){case 5:$i||zc(l,s);case 6:var p=Di,y=cr;Di=null,to(n,s,l),Di=p,cr=y,Di!==null&&(cr?(n=Di,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Di.removeChild(l.stateNode));break;case 18:Di!==null&&(cr?(n=Di,l=l.stateNode,n.nodeType===8?Vg(n.parentNode,l):n.nodeType===1&&Vg(n,l),Rt(n)):Vg(Di,l.stateNode));break;case 4:p=Di,y=cr,Di=l.stateNode.containerInfo,cr=!0,to(n,s,l),Di=p,cr=y;break;case 0:case 11:case 14:case 15:if(!$i&&(p=l.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var E=y,W=E.destroy;E=E.tag,W!==void 0&&(E&2||E&4)&&Rm(l,s,W),y=y.next}while(y!==p)}to(n,s,l);break;case 1:if(!$i&&(zc(l,s),p=l.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=l.memoizedProps,p.state=l.memoizedState,p.componentWillUnmount()}catch(ht){ci(l,s,ht)}to(n,s,l);break;case 21:to(n,s,l);break;case 22:l.mode&1?($i=(p=$i)||l.memoizedState!==null,to(n,s,l),$i=p):to(n,s,l);break;default:to(n,s,l)}}function X0(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new Yb),s.forEach(function(p){var y=aE.bind(null,n,p);l.has(p)||(l.add(p),p.then(y,y))})}}function ur(n,s){var l=s.deletions;if(l!==null)for(var p=0;p<l.length;p++){var y=l[p];try{var E=n,W=s,ht=W;t:for(;ht!==null;){switch(ht.tag){case 5:Di=ht.stateNode,cr=!1;break t;case 3:Di=ht.stateNode.containerInfo,cr=!0;break t;case 4:Di=ht.stateNode.containerInfo,cr=!0;break t}ht=ht.return}if(Di===null)throw Error(e(160));q0(E,W,y),Di=null,cr=!1;var _t=y.alternate;_t!==null&&(_t.return=null),y.return=null}catch(Bt){ci(y,s,Bt)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)K0(s,n),s=s.sibling}function K0(n,s){var l=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ur(s,n),Ir(n),p&4){try{xh(3,n,n.return),rp(3,n)}catch(ze){ci(n,n.return,ze)}try{xh(5,n,n.return)}catch(ze){ci(n,n.return,ze)}}break;case 1:ur(s,n),Ir(n),p&512&&l!==null&&zc(l,l.return);break;case 5:if(ur(s,n),Ir(n),p&512&&l!==null&&zc(l,l.return),n.flags&32){var y=n.stateNode;try{Qe(y,"")}catch(ze){ci(n,n.return,ze)}}if(p&4&&(y=n.stateNode,y!=null)){var E=n.memoizedProps,W=l!==null?l.memoizedProps:E,ht=n.type,_t=n.updateQueue;if(n.updateQueue=null,_t!==null)try{ht==="input"&&E.type==="radio"&&E.name!=null&&xt(y,E),Et(ht,W);var Bt=Et(ht,E);for(W=0;W<_t.length;W+=2){var re=_t[W],oe=_t[W+1];re==="style"?dn(y,oe):re==="dangerouslySetInnerHTML"?Pe(y,oe):re==="children"?Qe(y,oe):B(y,re,oe,Bt)}switch(ht){case"input":Pt(y,E);break;case"textarea":Ut(y,E);break;case"select":var ie=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!E.multiple;var Re=E.value;Re!=null?Ct(y,!!E.multiple,Re,!1):ie!==!!E.multiple&&(E.defaultValue!=null?Ct(y,!!E.multiple,E.defaultValue,!0):Ct(y,!!E.multiple,E.multiple?[]:"",!1))}y[ph]=E}catch(ze){ci(n,n.return,ze)}}break;case 6:if(ur(s,n),Ir(n),p&4){if(n.stateNode===null)throw Error(e(162));y=n.stateNode,E=n.memoizedProps;try{y.nodeValue=E}catch(ze){ci(n,n.return,ze)}}break;case 3:if(ur(s,n),Ir(n),p&4&&l!==null&&l.memoizedState.isDehydrated)try{Rt(s.containerInfo)}catch(ze){ci(n,n.return,ze)}break;case 4:ur(s,n),Ir(n);break;case 13:ur(s,n),Ir(n),y=n.child,y.flags&8192&&(E=y.memoizedState!==null,y.stateNode.isHidden=E,!E||y.alternate!==null&&y.alternate.memoizedState!==null||(Im=Zn())),p&4&&X0(n);break;case 22:if(re=l!==null&&l.memoizedState!==null,n.mode&1?($i=(Bt=$i)||re,ur(s,n),$i=Bt):ur(s,n),Ir(n),p&8192){if(Bt=n.memoizedState!==null,(n.stateNode.isHidden=Bt)&&!re&&n.mode&1)for(De=n,re=n.child;re!==null;){for(oe=De=re;De!==null;){switch(ie=De,Re=ie.child,ie.tag){case 0:case 11:case 14:case 15:xh(4,ie,ie.return);break;case 1:zc(ie,ie.return);var je=ie.stateNode;if(typeof je.componentWillUnmount=="function"){p=ie,l=ie.return;try{s=p,je.props=s.memoizedProps,je.state=s.memoizedState,je.componentWillUnmount()}catch(ze){ci(p,l,ze)}}break;case 5:zc(ie,ie.return);break;case 22:if(ie.memoizedState!==null){J0(oe);continue}}Re!==null?(Re.return=ie,De=Re):J0(oe)}re=re.sibling}t:for(re=null,oe=n;;){if(oe.tag===5){if(re===null){re=oe;try{y=oe.stateNode,Bt?(E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(ht=oe.stateNode,_t=oe.memoizedProps.style,W=_t!=null&&_t.hasOwnProperty("display")?_t.display:null,ht.style.display=Xe("display",W))}catch(ze){ci(n,n.return,ze)}}}else if(oe.tag===6){if(re===null)try{oe.stateNode.nodeValue=Bt?"":oe.memoizedProps}catch(ze){ci(n,n.return,ze)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===n)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===n)break t;for(;oe.sibling===null;){if(oe.return===null||oe.return===n)break t;re===oe&&(re=null),oe=oe.return}re===oe&&(re=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:ur(s,n),Ir(n),p&4&&X0(n);break;case 21:break;default:ur(s,n),Ir(n)}}function Ir(n){var s=n.flags;if(s&2){try{t:{for(var l=n.return;l!==null;){if(G0(l)){var p=l;break t}l=l.return}throw Error(e(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Qe(y,""),p.flags&=-33);var E=$0(n);Mm(n,E,y);break;case 3:case 4:var W=p.stateNode.containerInfo,ht=$0(n);Pm(n,ht,W);break;default:throw Error(e(161))}}catch(_t){ci(n,n.return,_t)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Jb(n,s,l){De=n,Y0(n)}function Y0(n,s,l){for(var p=(n.mode&1)!==0;De!==null;){var y=De,E=y.child;if(y.tag===22&&p){var W=y.memoizedState!==null||sp;if(!W){var ht=y.alternate,_t=ht!==null&&ht.memoizedState!==null||$i;ht=sp;var Bt=$i;if(sp=W,($i=_t)&&!Bt)for(De=y;De!==null;)W=De,_t=W.child,W.tag===22&&W.memoizedState!==null?Z0(y):_t!==null?(_t.return=W,De=_t):Z0(y);for(;E!==null;)De=E,Y0(E),E=E.sibling;De=y,sp=ht,$i=Bt}Q0(n)}else y.subtreeFlags&8772&&E!==null?(E.return=y,De=E):Q0(n)}}function Q0(n){for(;De!==null;){var s=De;if(s.flags&8772){var l=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:$i||rp(5,s);break;case 1:var p=s.stateNode;if(s.flags&4&&!$i)if(l===null)p.componentDidMount();else{var y=s.elementType===s.type?l.memoizedProps:lr(s.type,l.memoizedProps);p.componentDidUpdate(y,l.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var E=s.updateQueue;E!==null&&Jy(s,E,p);break;case 3:var W=s.updateQueue;if(W!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Jy(s,W,l)}break;case 5:var ht=s.stateNode;if(l===null&&s.flags&4){l=ht;var _t=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":_t.autoFocus&&l.focus();break;case"img":_t.src&&(l.src=_t.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Bt=s.alternate;if(Bt!==null){var re=Bt.memoizedState;if(re!==null){var oe=re.dehydrated;oe!==null&&Rt(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}$i||s.flags&512&&km(s)}catch(ie){ci(s,s.return,ie)}}if(s===n){De=null;break}if(l=s.sibling,l!==null){l.return=s.return,De=l;break}De=s.return}}function J0(n){for(;De!==null;){var s=De;if(s===n){De=null;break}var l=s.sibling;if(l!==null){l.return=s.return,De=l;break}De=s.return}}function Z0(n){for(;De!==null;){var s=De;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{rp(4,s)}catch(_t){ci(s,l,_t)}break;case 1:var p=s.stateNode;if(typeof p.componentDidMount=="function"){var y=s.return;try{p.componentDidMount()}catch(_t){ci(s,y,_t)}}var E=s.return;try{km(s)}catch(_t){ci(s,E,_t)}break;case 5:var W=s.return;try{km(s)}catch(_t){ci(s,W,_t)}}}catch(_t){ci(s,s.return,_t)}if(s===n){De=null;break}var ht=s.sibling;if(ht!==null){ht.return=s.return,De=ht;break}De=s.return}}var Zb=Math.ceil,ap=N.ReactCurrentDispatcher,Fm=N.ReactCurrentOwner,qs=N.ReactCurrentBatchConfig,Tn=0,Ri=null,gi=null,Oi=0,Rs=0,Wc=Ka(0),Ai=0,Ch=null,nl=0,op=0,Lm=0,Th=null,ps=null,Im=0,Vc=1/0,ua=null,lp=!1,Dm=null,eo=null,cp=!1,no=null,up=0,Rh=0,Om=null,hp=-1,dp=0;function ns(){return Tn&6?Zn():hp!==-1?hp:hp=Zn()}function io(n){return n.mode&1?Tn&2&&Oi!==0?Oi&-Oi:Ob.transition!==null?(dp===0&&(dp=yf()),dp):(n=Rn,n!==0||(n=window.event,n=n===void 0?16:ae(n.type)),n):1}function hr(n,s,l,p){if(50<Rh)throw Rh=0,Om=null,Error(e(185));ta(n,l,p),(!(Tn&2)||n!==Ri)&&(n===Ri&&(!(Tn&2)&&(op|=l),Ai===4&&so(n,Oi)),gs(n,p),l===1&&Tn===0&&!(s.mode&1)&&(Vc=Zn()+500,Bf&&Qa()))}function gs(n,s){var l=n.callbackNode;vf(n,s);var p=yc(n,n===Ri?Oi:0);if(p===0)l!==null&&Es(l),n.callbackNode=null,n.callbackPriority=0;else if(s=p&-p,n.callbackPriority!==s){if(l!=null&&Es(l),s===1)n.tag===0?Db(e_.bind(null,n)):By(e_.bind(null,n)),Mb(function(){!(Tn&6)&&Qa()}),l=null;else{switch(_f(p)){case 1:l=ih;break;case 4:l=pf;break;case 16:l=pc;break;case 536870912:l=gf;break;default:l=pc}l=c_(l,t_.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function t_(n,s){if(hp=-1,dp=0,Tn&6)throw Error(e(327));var l=n.callbackNode;if(Gc()&&n.callbackNode!==l)return null;var p=yc(n,n===Ri?Oi:0);if(p===0)return null;if(p&30||p&n.expiredLanes||s)s=fp(n,p);else{s=p;var y=Tn;Tn|=2;var E=i_();(Ri!==n||Oi!==s)&&(ua=null,Vc=Zn()+500,sl(n,s));do try{nE();break}catch(ht){n_(n,ht)}while(!0);tm(),ap.current=E,Tn=y,gi!==null?s=0:(Ri=null,Oi=0,s=Ai)}if(s!==0){if(s===2&&(y=_c(n),y!==0&&(p=y,s=Nm(n,y))),s===1)throw l=Ch,sl(n,0),so(n,p),gs(n,Zn()),l;if(s===6)so(n,p);else{if(y=n.current.alternate,!(p&30)&&!tE(y)&&(s=fp(n,p),s===2&&(E=_c(n),E!==0&&(p=E,s=Nm(n,E))),s===1))throw l=Ch,sl(n,0),so(n,p),gs(n,Zn()),l;switch(n.finishedWork=y,n.finishedLanes=p,s){case 0:case 1:throw Error(e(345));case 2:rl(n,ps,ua);break;case 3:if(so(n,p),(p&130023424)===p&&(s=Im+500-Zn(),10<s)){if(yc(n,0)!==0)break;if(y=n.suspendedLanes,(y&p)!==p){ns(),n.pingedLanes|=n.suspendedLanes&y;break}n.timeoutHandle=Wg(rl.bind(null,n,ps,ua),s);break}rl(n,ps,ua);break;case 4:if(so(n,p),(p&4194240)===p)break;for(s=n.eventTimes,y=-1;0<p;){var W=31-ls(p);E=1<<W,W=s[W],W>y&&(y=W),p&=~E}if(p=y,p=Zn()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Zb(p/1960))-p,10<p){n.timeoutHandle=Wg(rl.bind(null,n,ps,ua),p);break}rl(n,ps,ua);break;case 5:rl(n,ps,ua);break;default:throw Error(e(329))}}}return gs(n,Zn()),n.callbackNode===l?t_.bind(null,n):null}function Nm(n,s){var l=Th;return n.current.memoizedState.isDehydrated&&(sl(n,s).flags|=256),n=fp(n,s),n!==2&&(s=ps,ps=l,s!==null&&jm(s)),n}function jm(n){ps===null?ps=n:ps.push.apply(ps,n)}function tE(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var p=0;p<l.length;p++){var y=l[p],E=y.getSnapshot;y=y.value;try{if(!us(E(),y))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function so(n,s){for(s&=~Lm,s&=~op,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-ls(s),p=1<<l;n[l]=-1,s&=~p}}function e_(n){if(Tn&6)throw Error(e(327));Gc();var s=yc(n,0);if(!(s&1))return gs(n,Zn()),null;var l=fp(n,s);if(n.tag!==0&&l===2){var p=_c(n);p!==0&&(s=p,l=Nm(n,p))}if(l===1)throw l=Ch,sl(n,0),so(n,s),gs(n,Zn()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,rl(n,ps,ua),gs(n,Zn()),null}function Hm(n,s){var l=Tn;Tn|=1;try{return n(s)}finally{Tn=l,Tn===0&&(Vc=Zn()+500,Bf&&Qa())}}function il(n){no!==null&&no.tag===0&&!(Tn&6)&&Gc();var s=Tn;Tn|=1;var l=qs.transition,p=Rn;try{if(qs.transition=null,Rn=1,n)return n()}finally{Rn=p,qs.transition=l,Tn=s,!(Tn&6)&&Qa()}}function Bm(){Rs=Wc.current,Kn(Wc)}function sl(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,Pb(l)),gi!==null)for(l=gi.return;l!==null;){var p=l;switch(Kg(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&jf();break;case 3:Bc(),Kn(hs),Kn(Wi),lm();break;case 5:am(p);break;case 4:Bc();break;case 13:Kn(ni);break;case 19:Kn(ni);break;case 10:em(p.type._context);break;case 22:case 23:Bm()}l=l.return}if(Ri=n,gi=n=ro(n.current,null),Oi=Rs=s,Ai=0,Ch=null,Lm=op=nl=0,ps=Th=null,Zo!==null){for(s=0;s<Zo.length;s++)if(l=Zo[s],p=l.interleaved,p!==null){l.interleaved=null;var y=p.next,E=l.pending;if(E!==null){var W=E.next;E.next=y,p.next=W}l.pending=p}Zo=null}return n}function n_(n,s){do{var l=gi;try{if(tm(),Yf.current=tp,Qf){for(var p=ii.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Qf=!1}if(el=0,Ti=_i=ii=null,Ah=!1,bh=0,Fm.current=null,l===null||l.return===null){Ai=1,Ch=s,gi=null;break}t:{var E=n,W=l.return,ht=l,_t=s;if(s=Oi,ht.flags|=32768,_t!==null&&typeof _t=="object"&&typeof _t.then=="function"){var Bt=_t,re=ht,oe=re.tag;if(!(re.mode&1)&&(oe===0||oe===11||oe===15)){var ie=re.alternate;ie?(re.updateQueue=ie.updateQueue,re.memoizedState=ie.memoizedState,re.lanes=ie.lanes):(re.updateQueue=null,re.memoizedState=null)}var Re=T0(W);if(Re!==null){Re.flags&=-257,R0(Re,W,ht,E,s),Re.mode&1&&C0(E,Bt,s),s=Re,_t=Bt;var je=s.updateQueue;if(je===null){var ze=new Set;ze.add(_t),s.updateQueue=ze}else je.add(_t);break t}else{if(!(s&1)){C0(E,Bt,s),Um();break t}_t=Error(e(426))}}else if(Qn&&ht.mode&1){var di=T0(W);if(di!==null){!(di.flags&65536)&&(di.flags|=256),R0(di,W,ht,E,s),Jg(Uc(_t,ht));break t}}E=_t=Uc(_t,ht),Ai!==4&&(Ai=2),Th===null?Th=[E]:Th.push(E),E=W;do{switch(E.tag){case 3:E.flags|=65536,s&=-s,E.lanes|=s;var Lt=S0(E,_t,s);Qy(E,Lt);break t;case 1:ht=_t;var kt=E.type,jt=E.stateNode;if(!(E.flags&128)&&(typeof kt.getDerivedStateFromError=="function"||jt!==null&&typeof jt.componentDidCatch=="function"&&(eo===null||!eo.has(jt)))){E.flags|=65536,s&=-s,E.lanes|=s;var ue=x0(E,ht,s);Qy(E,ue);break t}}E=E.return}while(E!==null)}r_(l)}catch(Ge){s=Ge,gi===l&&l!==null&&(gi=l=l.return);continue}break}while(!0)}function i_(){var n=ap.current;return ap.current=tp,n===null?tp:n}function Um(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),Ri===null||!(nl&268435455)&&!(op&268435455)||so(Ri,Oi)}function fp(n,s){var l=Tn;Tn|=2;var p=i_();(Ri!==n||Oi!==s)&&(ua=null,sl(n,s));do try{eE();break}catch(y){n_(n,y)}while(!0);if(tm(),Tn=l,ap.current=p,gi!==null)throw Error(e(261));return Ri=null,Oi=0,Ai}function eE(){for(;gi!==null;)s_(gi)}function nE(){for(;gi!==null&&!dc();)s_(gi)}function s_(n){var s=l_(n.alternate,n,Rs);n.memoizedProps=n.pendingProps,s===null?r_(n):gi=s,Fm.current=null}function r_(n){var s=n;do{var l=s.alternate;if(n=s.return,s.flags&32768){if(l=Kb(l,s),l!==null){l.flags&=32767,gi=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ai=6,gi=null;return}}else if(l=Xb(l,s,Rs),l!==null){gi=l;return}if(s=s.sibling,s!==null){gi=s;return}gi=s=n}while(s!==null);Ai===0&&(Ai=5)}function rl(n,s,l){var p=Rn,y=qs.transition;try{qs.transition=null,Rn=1,iE(n,s,l,p)}finally{qs.transition=y,Rn=p}return null}function iE(n,s,l,p){do Gc();while(no!==null);if(Tn&6)throw Error(e(327));l=n.finishedWork;var y=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var E=l.lanes|l.childLanes;if(Lg(n,E),n===Ri&&(gi=Ri=null,Oi=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||cp||(cp=!0,c_(pc,function(){return Gc(),null})),E=(l.flags&15990)!==0,l.subtreeFlags&15990||E){E=qs.transition,qs.transition=null;var W=Rn;Rn=1;var ht=Tn;Tn|=4,Fm.current=null,Qb(n,l),K0(l,n),lh(Ug),ct=!!Bg,Ug=Bg=null,n.current=l,Jb(l),Rg(),Tn=ht,Rn=W,qs.transition=E}else n.current=l;if(cp&&(cp=!1,no=n,up=y),E=n.pendingLanes,E===0&&(eo=null),mf(l.stateNode),gs(n,Zn()),s!==null)for(p=n.onRecoverableError,l=0;l<s.length;l++)y=s[l],p(y.value,{componentStack:y.stack,digest:y.digest});if(lp)throw lp=!1,n=Dm,Dm=null,n;return up&1&&n.tag!==0&&Gc(),E=n.pendingLanes,E&1?n===Om?Rh++:(Rh=0,Om=n):Rh=0,Qa(),null}function Gc(){if(no!==null){var n=_f(up),s=qs.transition,l=Rn;try{if(qs.transition=null,Rn=16>n?16:n,no===null)var p=!1;else{if(n=no,no=null,up=0,Tn&6)throw Error(e(331));var y=Tn;for(Tn|=4,De=n.current;De!==null;){var E=De,W=E.child;if(De.flags&16){var ht=E.deletions;if(ht!==null){for(var _t=0;_t<ht.length;_t++){var Bt=ht[_t];for(De=Bt;De!==null;){var re=De;switch(re.tag){case 0:case 11:case 15:xh(8,re,E)}var oe=re.child;if(oe!==null)oe.return=re,De=oe;else for(;De!==null;){re=De;var ie=re.sibling,Re=re.return;if(V0(re),re===Bt){De=null;break}if(ie!==null){ie.return=Re,De=ie;break}De=Re}}}var je=E.alternate;if(je!==null){var ze=je.child;if(ze!==null){je.child=null;do{var di=ze.sibling;ze.sibling=null,ze=di}while(ze!==null)}}De=E}}if(E.subtreeFlags&2064&&W!==null)W.return=E,De=W;else t:for(;De!==null;){if(E=De,E.flags&2048)switch(E.tag){case 0:case 11:case 15:xh(9,E,E.return)}var Lt=E.sibling;if(Lt!==null){Lt.return=E.return,De=Lt;break t}De=E.return}}var kt=n.current;for(De=kt;De!==null;){W=De;var jt=W.child;if(W.subtreeFlags&2064&&jt!==null)jt.return=W,De=jt;else t:for(W=kt;De!==null;){if(ht=De,ht.flags&2048)try{switch(ht.tag){case 0:case 11:case 15:rp(9,ht)}}catch(Ge){ci(ht,ht.return,Ge)}if(ht===W){De=null;break t}var ue=ht.sibling;if(ue!==null){ue.return=ht.return,De=ue;break t}De=ht.return}}if(Tn=y,Qa(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(gc,n)}catch{}p=!0}return p}finally{Rn=l,qs.transition=s}}return!1}function a_(n,s,l){s=Uc(l,s),s=S0(n,s,1),n=Za(n,s,1),s=ns(),n!==null&&(ta(n,1,s),gs(n,s))}function ci(n,s,l){if(n.tag===3)a_(n,n,l);else for(;s!==null;){if(s.tag===3){a_(s,n,l);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(eo===null||!eo.has(p))){n=Uc(l,n),n=x0(s,n,1),s=Za(s,n,1),n=ns(),s!==null&&(ta(s,1,n),gs(s,n));break}}s=s.return}}function sE(n,s,l){var p=n.pingCache;p!==null&&p.delete(s),s=ns(),n.pingedLanes|=n.suspendedLanes&l,Ri===n&&(Oi&l)===l&&(Ai===4||Ai===3&&(Oi&130023424)===Oi&&500>Zn()-Im?sl(n,0):Lm|=l),gs(n,s)}function o_(n,s){s===0&&(n.mode&1?(s=vc,vc<<=1,!(vc&130023424)&&(vc=4194304)):s=1);var l=ns();n=oa(n,s),n!==null&&(ta(n,s,l),gs(n,l))}function rE(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),o_(n,l)}function aE(n,s){var l=0;switch(n.tag){case 13:var p=n.stateNode,y=n.memoizedState;y!==null&&(l=y.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(e(314))}p!==null&&p.delete(s),o_(n,l)}var l_;l_=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||hs.current)fs=!0;else{if(!(n.lanes&l)&&!(s.flags&128))return fs=!1,qb(n,s,l);fs=!!(n.flags&131072)}else fs=!1,Qn&&s.flags&1048576&&Uy(s,zf,s.index);switch(s.lanes=0,s.tag){case 2:var p=s.type;ip(n,s),n=s.pendingProps;var y=Lc(s,Wi.current);Hc(s,l),y=hm(null,s,p,n,y,l);var E=dm();return s.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ds(p)?(E=!0,Hf(s)):E=!1,s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,sm(s),y.updater=ep,s.stateNode=y,y._reactInternals=s,ym(s,p,n,l),s=Em(null,s,p,!0,E,l)):(s.tag=0,Qn&&E&&Xg(s),es(null,s,y,l),s=s.child),s;case 16:p=s.elementType;t:{switch(ip(n,s),n=s.pendingProps,y=p._init,p=y(p._payload),s.type=p,y=s.tag=lE(p),n=lr(p,n),y){case 0:s=bm(null,s,p,n,l);break t;case 1:s=I0(null,s,p,n,l);break t;case 11:s=k0(null,s,p,n,l);break t;case 14:s=P0(null,s,p,lr(p.type,n),l);break t}throw Error(e(306,p,""))}return s;case 0:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:lr(p,y),bm(n,s,p,y,l);case 1:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:lr(p,y),I0(n,s,p,y,l);case 3:t:{if(D0(s),n===null)throw Error(e(387));p=s.pendingProps,E=s.memoizedState,y=E.element,Yy(n,s),Xf(s,p,null,l);var W=s.memoizedState;if(p=W.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},s.updateQueue.baseState=E,s.memoizedState=E,s.flags&256){y=Uc(Error(e(423)),s),s=O0(n,s,p,l,y);break t}else if(p!==y){y=Uc(Error(e(424)),s),s=O0(n,s,p,l,y);break t}else for(Ts=Xa(s.stateNode.containerInfo.firstChild),Cs=s,Qn=!0,or=null,l=Xy(s,null,p,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Oc(),p===y){s=ca(n,s,l);break t}es(n,s,p,l)}s=s.child}return s;case 5:return Zy(s),n===null&&Qg(s),p=s.type,y=s.pendingProps,E=n!==null?n.memoizedProps:null,W=y.children,zg(p,y)?W=null:E!==null&&zg(p,E)&&(s.flags|=32),L0(n,s),es(n,s,W,l),s.child;case 6:return n===null&&Qg(s),null;case 13:return N0(n,s,l);case 4:return rm(s,s.stateNode.containerInfo),p=s.pendingProps,n===null?s.child=Nc(s,null,p,l):es(n,s,p,l),s.child;case 11:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:lr(p,y),k0(n,s,p,y,l);case 7:return es(n,s,s.pendingProps,l),s.child;case 8:return es(n,s,s.pendingProps.children,l),s.child;case 12:return es(n,s,s.pendingProps.children,l),s.child;case 10:t:{if(p=s.type._context,y=s.pendingProps,E=s.memoizedProps,W=y.value,Vn(Gf,p._currentValue),p._currentValue=W,E!==null)if(us(E.value,W)){if(E.children===y.children&&!hs.current){s=ca(n,s,l);break t}}else for(E=s.child,E!==null&&(E.return=s);E!==null;){var ht=E.dependencies;if(ht!==null){W=E.child;for(var _t=ht.firstContext;_t!==null;){if(_t.context===p){if(E.tag===1){_t=la(-1,l&-l),_t.tag=2;var Bt=E.updateQueue;if(Bt!==null){Bt=Bt.shared;var re=Bt.pending;re===null?_t.next=_t:(_t.next=re.next,re.next=_t),Bt.pending=_t}}E.lanes|=l,_t=E.alternate,_t!==null&&(_t.lanes|=l),nm(E.return,l,s),ht.lanes|=l;break}_t=_t.next}}else if(E.tag===10)W=E.type===s.type?null:E.child;else if(E.tag===18){if(W=E.return,W===null)throw Error(e(341));W.lanes|=l,ht=W.alternate,ht!==null&&(ht.lanes|=l),nm(W,l,s),W=E.sibling}else W=E.child;if(W!==null)W.return=E;else for(W=E;W!==null;){if(W===s){W=null;break}if(E=W.sibling,E!==null){E.return=W.return,W=E;break}W=W.return}E=W}es(n,s,y.children,l),s=s.child}return s;case 9:return y=s.type,p=s.pendingProps.children,Hc(s,l),y=Gs(y),p=p(y),s.flags|=1,es(n,s,p,l),s.child;case 14:return p=s.type,y=lr(p,s.pendingProps),y=lr(p.type,y),P0(n,s,p,y,l);case 15:return M0(n,s,s.type,s.pendingProps,l);case 17:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:lr(p,y),ip(n,s),s.tag=1,ds(p)?(n=!0,Hf(s)):n=!1,Hc(s,l),E0(s,p,y),ym(s,p,y,l),Em(null,s,p,!0,n,l);case 19:return H0(n,s,l);case 22:return F0(n,s,l)}throw Error(e(156,s.tag))};function c_(n,s){return bs(n,s)}function oE(n,s,l,p){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(n,s,l,p){return new oE(n,s,l,p)}function zm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function lE(n){if(typeof n=="function")return zm(n)?1:0;if(n!=null){if(n=n.$$typeof,n===G)return 11;if(n===ot)return 14}return 2}function ro(n,s){var l=n.alternate;return l===null?(l=Xs(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function pp(n,s,l,p,y,E){var W=2;if(p=n,typeof n=="function")zm(n)&&(W=1);else if(typeof n=="string")W=5;else t:switch(n){case k:return al(l.children,y,E,s);case D:W=8,y|=8;break;case j:return n=Xs(12,l,s,y|2),n.elementType=j,n.lanes=E,n;case Q:return n=Xs(13,l,s,y),n.elementType=Q,n.lanes=E,n;case mt:return n=Xs(19,l,s,y),n.elementType=mt,n.lanes=E,n;case et:return gp(l,y,E,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Z:W=10;break t;case O:W=9;break t;case G:W=11;break t;case ot:W=14;break t;case dt:W=16,p=null;break t}throw Error(e(130,n==null?n:typeof n,""))}return s=Xs(W,l,s,y),s.elementType=n,s.type=p,s.lanes=E,s}function al(n,s,l,p){return n=Xs(7,n,p,s),n.lanes=l,n}function gp(n,s,l,p){return n=Xs(22,n,p,s),n.elementType=et,n.lanes=l,n.stateNode={isHidden:!1},n}function Wm(n,s,l){return n=Xs(6,n,null,s),n.lanes=l,n}function Vm(n,s,l){return s=Xs(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function cE(n,s,l,p,y){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sh(0),this.expirationTimes=sh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sh(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Gm(n,s,l,p,y,E,W,ht,_t){return n=new cE(n,s,l,ht,_t),s===1?(s=1,E===!0&&(s|=8)):s=0,E=Xs(3,null,null,s),n.current=E,E.stateNode=n,E.memoizedState={element:p,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},sm(E),n}function uE(n,s,l){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:p==null?null:""+p,children:n,containerInfo:s,implementation:l}}function u_(n){if(!n)return Ya;n=n._reactInternals;t:{if($e(n)!==n||n.tag!==1)throw Error(e(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(ds(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(ds(l))return jy(n,l,s)}return s}function h_(n,s,l,p,y,E,W,ht,_t){return n=Gm(l,p,!0,n,y,E,W,ht,_t),n.context=u_(null),l=n.current,p=ns(),y=io(l),E=la(p,y),E.callback=s??null,Za(l,E,y),n.current.lanes=y,ta(n,y,p),gs(n,p),n}function mp(n,s,l,p){var y=s.current,E=ns(),W=io(y);return l=u_(l),s.context===null?s.context=l:s.pendingContext=l,s=la(E,W),s.payload={element:n},p=p===void 0?null:p,p!==null&&(s.callback=p),n=Za(y,s,W),n!==null&&(hr(n,y,W,E),qf(n,y,W)),W}function vp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function d_(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function $m(n,s){d_(n,s),(n=n.alternate)&&d_(n,s)}var f_=typeof reportError=="function"?reportError:function(n){console.error(n)};function qm(n){this._internalRoot=n}yp.prototype.render=qm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(e(409));mp(n,s,null,null)},yp.prototype.unmount=qm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;il(function(){mp(null,n,null,null)}),s[ia]=null}};function yp(n){this._internalRoot=n}yp.prototype.unstable_scheduleHydration=function(n){if(n){var s=ea();n={blockedOn:null,target:n,priority:s};for(var l=0;l<Bs.length&&s!==0&&s<Bs[l].priority;l++);Bs.splice(l,0,n),l===0&&z(n)}};function Xm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function _p(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function p_(){}function hE(n,s,l,p,y){if(y){if(typeof p=="function"){var E=p;p=function(){var Bt=vp(W);E.call(Bt)}}var W=h_(s,p,n,0,null,!1,!1,"",p_);return n._reactRootContainer=W,n[ia]=W.current,dh(n.nodeType===8?n.parentNode:n),il(),W}for(;y=n.lastChild;)n.removeChild(y);if(typeof p=="function"){var ht=p;p=function(){var Bt=vp(_t);ht.call(Bt)}}var _t=Gm(n,0,!1,null,null,!1,!1,"",p_);return n._reactRootContainer=_t,n[ia]=_t.current,dh(n.nodeType===8?n.parentNode:n),il(function(){mp(s,_t,l,p)}),_t}function Ap(n,s,l,p,y){var E=l._reactRootContainer;if(E){var W=E;if(typeof y=="function"){var ht=y;y=function(){var _t=vp(W);ht.call(_t)}}mp(s,W,n,y)}else W=hE(l,s,n,y,p);return vp(W)}bc=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=Zr(s.pendingLanes);l!==0&&(Ac(s,l|1),gs(s,Zn()),!(Tn&6)&&(Vc=Zn()+500,Qa()))}break;case 13:il(function(){var p=oa(n,1);if(p!==null){var y=ns();hr(p,n,1,y)}}),$m(n,1)}},rh=function(n){if(n.tag===13){var s=oa(n,134217728);if(s!==null){var l=ns();hr(s,n,134217728,l)}$m(n,134217728)}},Af=function(n){if(n.tag===13){var s=io(n),l=oa(n,s);if(l!==null){var p=ns();hr(l,n,s,p)}$m(n,s)}},ea=function(){return Rn},bf=function(n,s){var l=Rn;try{return Rn=n,s()}finally{Rn=l}},Te=function(n,s,l){switch(s){case"input":if(Pt(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var p=l[s];if(p!==n&&p.form===n.form){var y=Nf(p);if(!y)throw Error(e(90));Dt(p),Pt(p,y)}}}break;case"textarea":Ut(n,l);break;case"select":s=l.value,s!=null&&Ct(n,!!l.multiple,s,!1)}},le=Hm,nt=il;var dE={usingClientEntryPoint:!1,Events:[gh,Mc,Nf,ge,ye,Hm]},kh={findFiberByHostInstance:Ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fE={bundleType:kh.bundleType,version:kh.version,rendererPackageName:kh.rendererPackageName,rendererConfig:kh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=jn(n),n===null?null:n.stateNode},findFiberByHostInstance:kh.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bp.isDisabled&&bp.supportsFiber)try{gc=bp.inject(fE),Ji=bp}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dE,reactDom_production_min.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xm(s))throw Error(e(200));return uE(n,s,null,l)},reactDom_production_min.createRoot=function(n,s){if(!Xm(n))throw Error(e(299));var l=!1,p="",y=f_;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=Gm(n,1,!1,null,null,l,!1,p,y),n[ia]=s.current,dh(n.nodeType===8?n.parentNode:n),new qm(s)},reactDom_production_min.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=jn(s),n=n===null?null:n.stateNode,n},reactDom_production_min.flushSync=function(n){return il(n)},reactDom_production_min.hydrate=function(n,s,l){if(!_p(s))throw Error(e(200));return Ap(null,n,s,!0,l)},reactDom_production_min.hydrateRoot=function(n,s,l){if(!Xm(n))throw Error(e(405));var p=l!=null&&l.hydratedSources||null,y=!1,E="",W=f_;if(l!=null&&(l.unstable_strictMode===!0&&(y=!0),l.identifierPrefix!==void 0&&(E=l.identifierPrefix),l.onRecoverableError!==void 0&&(W=l.onRecoverableError)),s=h_(s,null,n,1,l??null,y,!1,E,W),n[ia]=s.current,dh(n),p)for(n=0;n<p.length;n++)l=p[n],y=l._getVersion,y=y(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,y]:s.mutableSourceEagerHydrationData.push(l,y);return new yp(s)},reactDom_production_min.render=function(n,s,l){if(!_p(s))throw Error(e(200));return Ap(null,n,s,!1,l)},reactDom_production_min.unmountComponentAtNode=function(n){if(!_p(n))throw Error(e(40));return n._reactRootContainer?(il(function(){Ap(null,null,n,!1,function(){n._reactRootContainer=null,n[ia]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Hm,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(n,s,l,p){if(!_p(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return Ap(n,s,l,!1,p)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var g=requireReactDom();return client.createRoot=g.createRoot,client.hydrateRoot=g.hydrateRoot,client}var clientExports=requireClient();const store={_origin:"https://api.emailjs.com"},init=(g,t="https://api.emailjs.com")=>{store._userID=g,store._origin=t},validateParams=(g,t,e)=>{if(!g)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class EmailJSResponseStatus{constructor(t){this.status=t.status,this.text=t.responseText}}const sendPost=(g,t,e={})=>new Promise((i,o)=>{const r=new XMLHttpRequest;r.addEventListener("load",({target:c})=>{const u=new EmailJSResponseStatus(c);u.status===200||u.text==="OK"?i(u):o(u)}),r.addEventListener("error",({target:c})=>{o(new EmailJSResponseStatus(c))}),r.open("POST",store._origin+g,!0),Object.keys(e).forEach(c=>{r.setRequestHeader(c,e[c])}),r.send(t)}),send=(g,t,e,i)=>{const o=i||store._userID;return validateParams(o,g,t),sendPost("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:o,service_id:g,template_id:t,template_params:e}),{"Content-type":"application/json"})},findHTMLForm=g=>{let t;if(typeof g=="string"?t=document.querySelector(g):t=g,!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},sendForm=(g,t,e,i)=>{const o=i||store._userID,r=findHTMLForm(e);validateParams(o,g,t);const c=new FormData(r);return c.append("lib_version","3.2.0"),c.append("service_id",g),c.append("template_id",t),c.append("user_id",o),sendPost("/api/v1.0/email/send-form",c)},emailjs={init,send,sendForm},scriptRel="modulepreload",assetsURL=function(g){return"/aawra-landing/"+g},seen={},__vitePreload=function(t,e,i){let o=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(e.map(h=>{if(h=assetsURL(h),h in seen)return;seen[h]=!0;const f=h.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${d}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":scriptRel,f||(m.as="script"),m.crossOrigin="",m.href=h,u&&m.setAttribute("nonce",u),document.head.appendChild(m),f)return new Promise((v,_)=>{m.addEventListener("load",v),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&r(u.reason);return t().catch(r)})};var __webpack_require__={};__webpack_require__.d=(g,t)=>{for(var e in t)__webpack_require__.o(t,e)&&!__webpack_require__.o(g,e)&&Object.defineProperty(g,e,{enumerable:!0,get:t[e]})};__webpack_require__.o=(g,t)=>Object.prototype.hasOwnProperty.call(g,t);var __webpack_exports__=globalThis.pdfjsLib={};__webpack_require__.d(__webpack_exports__,{AbortException:()=>AbortException,AnnotationEditorLayer:()=>AnnotationEditorLayer,AnnotationEditorParamsType:()=>AnnotationEditorParamsType,AnnotationEditorType:()=>AnnotationEditorType,AnnotationEditorUIManager:()=>AnnotationEditorUIManager,AnnotationLayer:()=>AnnotationLayer,AnnotationMode:()=>AnnotationMode,ColorPicker:()=>ColorPicker,DOMSVGFactory:()=>DOMSVGFactory,DrawLayer:()=>DrawLayer,FeatureTest:()=>util_FeatureTest,GlobalWorkerOptions:()=>GlobalWorkerOptions,ImageKind:()=>util_ImageKind,InvalidPDFException:()=>InvalidPDFException,MissingPDFException:()=>MissingPDFException,OPS:()=>OPS,OutputScale:()=>OutputScale,PDFDataRangeTransport:()=>PDFDataRangeTransport,PDFDateString:()=>PDFDateString,PDFWorker:()=>PDFWorker,PasswordResponses:()=>PasswordResponses,PermissionFlag:()=>PermissionFlag,PixelsPerInch:()=>PixelsPerInch,RenderingCancelledException:()=>RenderingCancelledException,TextLayer:()=>TextLayer,UnexpectedResponseException:()=>UnexpectedResponseException,Util:()=>Util,VerbosityLevel:()=>VerbosityLevel,XfaLayer:()=>XfaLayer,build:()=>build,createValidAbsoluteUrl:()=>createValidAbsoluteUrl,fetchData:()=>fetchData,getDocument:()=>getDocument,getFilenameFromUrl:()=>getFilenameFromUrl,getPdfFilenameFromUrl:()=>getPdfFilenameFromUrl,getXfaPageViewport:()=>getXfaPageViewport,isDataScheme:()=>isDataScheme,isPdfFile:()=>isPdfFile,noContextMenu:()=>noContextMenu,normalizeUnicode:()=>normalizeUnicode,setLayerDimensions:()=>setLayerDimensions,shadow:()=>shadow,version:()=>version});const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),IDENTITY_MATRIX=[1,0,0,1,0,0],FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],MAX_IMAGE_SIZE_TO_CACHE=1e7,LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(g){Number.isInteger(g)&&(verbosity=g)}function getVerbosityLevel(){return verbosity}function info(g){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${g}`)}function warn(g){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${g}`)}function unreachable(g){throw new Error(g)}function assert(g,t){g||unreachable(t)}function _isValidProtocol(g){switch(g==null?void 0:g.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(g,t=null,e=null){if(!g)return null;try{if(e&&typeof g=="string"){if(e.addDefaultProtocol&&g.startsWith("www.")){const o=g.match(/\./g);(o==null?void 0:o.length)>=2&&(g=`http://${g}`)}if(e.tryConvertEncoding)try{g=stringToUTF8String(g)}catch{}}const i=t?new URL(g,t):new URL(g);if(_isValidProtocol(i))return i}catch{}return null}function shadow(g,t,e,i=!1){return Object.defineProperty(g,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const BaseException=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class PasswordException extends BaseException{constructor(t,e){super(t,"PasswordException"),this.code=e}}class UnknownErrorException extends BaseException{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class InvalidPDFException extends BaseException{constructor(t){super(t,"InvalidPDFException")}}class MissingPDFException extends BaseException{constructor(t){super(t,"MissingPDFException")}}class UnexpectedResponseException extends BaseException{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class FormatError extends BaseException{constructor(t){super(t,"FormatError")}}class AbortException extends BaseException{constructor(t){super(t,"AbortException")}}function bytesToString(g){(typeof g!="object"||(g==null?void 0:g.length)===void 0)&&unreachable("Invalid argument for bytesToString");const t=g.length,e=8192;if(t<e)return String.fromCharCode.apply(null,g);const i=[];for(let o=0;o<t;o+=e){const r=Math.min(o+e,t),c=g.subarray(o,r);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function stringToBytes(g){typeof g!="string"&&unreachable("Invalid argument for stringToBytes");const t=g.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=g.charCodeAt(i)&255;return e}function string32(g){return String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255)}function objectFromMap(g){const t=Object.create(null);for(const[e,i]of g)t[e]=i;return t}function isLittleEndian(){const g=new Uint8Array(4);return g[0]=1,new Uint32Array(g.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?shadow(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):shadow(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return shadow(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),g=>g.toString(16).padStart(2,"0"));var ja,Ep,Ym;class Util{static makeHexColor(t,e,i){return`#${hexNumbers[t]}${hexNumbers[e]}${hexNumbers[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],o=t[0]*e[1]+t[1]*e[3]+e[5];return[i,o]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],o=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[o,r]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),o=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),c=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],o[0],r[0],c[0]),Math.min(i[1],o[1],r[1],c[1]),Math.max(i[0],o[0],r[0],c[0]),Math.max(i[1],o[1],r[1],c[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],o=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],c=t[2]*e[1]+t[3]*e[3],u=(i+c)/2,h=Math.sqrt((i+c)**2-4*(i*c-r*o))/2,f=u+h||1,d=u-h||1;return[Math.sqrt(f),Math.sqrt(d)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),o=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>o)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>c?null:[i,r,o,c]}static bezierBoundingBox(t,e,i,o,r,c,u,h,f){return f?(f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h)):f=[Math.min(t,u),Math.min(e,h),Math.max(t,u),Math.max(e,h)],w(this,ja,Ym).call(this,t,i,r,u,e,o,c,h,3*(-t+3*(i-r)+u),6*(t-2*i+r),3*(i-t),f),w(this,ja,Ym).call(this,t,i,r,u,e,o,c,h,3*(-e+3*(o-c)+h),6*(e-2*o+c),3*(o-e),f),f}}ja=new WeakSet,Ep=function(t,e,i,o,r,c,u,h,f,d){if(f<=0||f>=1)return;const m=1-f,v=f*f,_=v*f,A=m*(m*(m*t+3*f*e)+3*v*i)+_*o,S=m*(m*(m*r+3*f*c)+3*v*u)+_*h;d[0]=Math.min(d[0],A),d[1]=Math.min(d[1],S),d[2]=Math.max(d[2],A),d[3]=Math.max(d[3],S)},Ym=function(t,e,i,o,r,c,u,h,f,d,m,v){if(Math.abs(f)<1e-12){Math.abs(d)>=1e-12&&w(this,ja,Ep).call(this,t,e,i,o,r,c,u,h,-m/d,v);return}const _=d**2-4*m*f;if(_<0)return;const A=Math.sqrt(_),S=2*f;w(this,ja,Ep).call(this,t,e,i,o,r,c,u,h,(-d+A)/S,v),w(this,ja,Ep).call(this,t,e,i,o,r,c,u,h,(-d-A)/S,v)},M(Util,ja);function stringToUTF8String(g){return decodeURIComponent(escape(g))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(g){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),g.replaceAll(NormalizeRegex,(t,e,i)=>e?e.normalize("NFKC"):NormalizationMap.get(i))}function getUuid(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const g=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(g);else for(let t=0;t<32;t++)g[t]=Math.floor(Math.random()*255);return bytesToString(g)}const AnnotationPrefix="pdfjs_internal_id_",FontRenderOps={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function toBase64Util(g){return Uint8Array.prototype.toBase64?g.toBase64():btoa(bytesToString(g))}const SVG_NS="http://www.w3.org/2000/svg",dl=class dl{};xe(dl,"CSS",96),xe(dl,"PDF",72),xe(dl,"PDF_TO_CSS_UNITS",dl.CSS/dl.PDF);let PixelsPerInch=dl;async function fetchData(g,t="text"){if(isValidFetchUrl(g,document.baseURI)){const e=await fetch(g);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const o=new XMLHttpRequest;o.open("GET",g,!0),o.responseType=t,o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(o.status===200||o.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(o.response);return}e(o.responseText);return}i(new Error(o.statusText))}},o.send(null)})}class PageViewport{constructor({viewBox:t,scale:e,rotation:i,offsetX:o=0,offsetY:r=0,dontFlip:c=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=o,this.offsetY=r;const u=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let f,d,m,v;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,d=0,m=0,v=1;break;case 90:f=0,d=1,m=1,v=0;break;case 270:f=0,d=-1,m=-1,v=0;break;case 0:f=1,d=0,m=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(m=-m,v=-v);let _,A,S,C;f===0?(_=Math.abs(h-t[1])*e+o,A=Math.abs(u-t[0])*e+r,S=(t[3]-t[1])*e,C=(t[2]-t[0])*e):(_=Math.abs(u-t[0])*e+o,A=Math.abs(h-t[1])*e+r,S=(t[2]-t[0])*e,C=(t[3]-t[1])*e),this.transform=[f*e,d*e,m*e,v*e,_-f*e*u-m*e*h,A-d*e*u-v*e*h],this.width=S,this.height=C}get rawDims(){const{viewBox:t}=this;return shadow(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:o=this.offsetY,dontFlip:r=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:o,dontFlip:r})}convertToViewportPoint(t,e){return Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Util.applyTransform([t[0],t[1]],this.transform),i=Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return Util.applyInverseTransform([t,e],this.transform)}}class RenderingCancelledException extends BaseException{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function isDataScheme(g){const t=g.length;let e=0;for(;e<t&&g[e].trim()==="";)e++;return g.substring(e,e+5).toLowerCase()==="data:"}function isPdfFile(g){return typeof g=="string"&&/\.pdf$/i.test(g)}function getFilenameFromUrl(g){return[g]=g.split(/[#?]/,1),g.substring(g.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(g,t="document.pdf"){if(typeof g!="string")return t;if(isDataScheme(g))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=e.exec(g);let r=i.exec(o[1])||i.exec(o[2])||i.exec(o[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||t}class StatTimer{constructor(){xe(this,"started",Object.create(null));xe(this,"times",[])}time(t){t in this.started&&warn(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||warn(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:o,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-o}ms
`);return t.join("")}}function isValidFetchUrl(g,t){try{const{protocol:e}=t?new URL(g,t):new URL(g);return e==="http:"||e==="https:"}catch{return!1}}function noContextMenu(g){g.preventDefault()}function deprecated(g){console.log("Deprecated API usage: "+g)}var Jh;class PDFDateString{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,Jh)||x(this,Jh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Jh).exec(t);if(!e)return null;const i=parseInt(e[1],10);let o=parseInt(e[2],10);o=o>=1&&o<=12?o-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let d=parseInt(e[8],10);d=d>=0&&d<=23?d:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(c+=d,u+=m):f==="+"&&(c-=d,u-=m),new Date(Date.UTC(i,o,r,c,u,h))}}Jh=new WeakMap,M(PDFDateString,Jh);function getXfaPageViewport(g,{scale:t=1,rotation:e=0}){const{width:i,height:o}=g.attributes.style,r=[0,0,parseInt(i),parseInt(o)];return new PageViewport({viewBox:r,scale:t,rotation:e})}function getRGB(g){if(g.startsWith("#")){const t=parseInt(g.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return g.startsWith("rgb(")?g.slice(4,-1).split(",").map(t=>parseInt(t)):g.startsWith("rgba(")?g.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(warn(`Not a valid color format: "${g}"`),[0,0,0])}function getColorValues(g){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of g.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;g.set(e,getRGB(i))}t.remove()}function getCurrentTransform(g){const{a:t,b:e,c:i,d:o,e:r,f:c}=g.getTransform();return[t,e,i,o,r,c]}function getCurrentTransformInverse(g){const{a:t,b:e,c:i,d:o,e:r,f:c}=g.getTransform().invertSelf();return[t,e,i,o,r,c]}function setLayerDimensions(g,t,e=!1,i=!0){if(t instanceof PageViewport){const{pageWidth:o,pageHeight:r}=t.rawDims,{style:c}=g,u=util_FeatureTest.isCSSRoundSupported,h=`var(--scale-factor) * ${o}px`,f=`var(--scale-factor) * ${r}px`,d=u?`round(down, ${h}, var(--scale-round-x, 1px))`:`calc(${h})`,m=u?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=d,c.height=m):(c.width=m,c.height=d)}i&&g.setAttribute("data-main-rotation",t.rotation)}class OutputScale{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var co,pl,fr,gl,Zh,td,hg,v_,rs,y_,__,wp,A_,Qm;const da=class da{constructor(t){M(this,rs);M(this,co,null);M(this,pl,null);M(this,fr);M(this,gl,null);M(this,Zh,null);x(this,fr,t),a(da,td)||x(da,td,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=x(this,co,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,fr)._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.addEventListener("pointerdown",w(da,hg,v_),{signal:e});const i=x(this,gl,document.createElement("div"));i.className="buttons",t.append(i);const o=a(this,fr).toolbarPosition;if(o){const{style:r}=t,c=a(this,fr)._uiManager.direction==="ltr"?1-o[0]:o[0];r.insetInlineEnd=`${100*c}%`,r.top=`calc(${100*o[1]}% + var(--editor-toolbar-vert-offset))`}return w(this,rs,A_).call(this),t}get div(){return a(this,co)}hide(){var t;a(this,co).classList.add("hidden"),(t=a(this,pl))==null||t.hideDropdown()}show(){var t;a(this,co).classList.remove("hidden"),(t=a(this,Zh))==null||t.shown()}async addAltText(t){const e=await t.render();w(this,rs,wp).call(this,e),a(this,gl).prepend(e,a(this,rs,Qm)),x(this,Zh,t)}addColorPicker(t){x(this,pl,t);const e=t.renderButton();w(this,rs,wp).call(this,e),a(this,gl).prepend(e,a(this,rs,Qm))}remove(){var t;a(this,co).remove(),(t=a(this,pl))==null||t.destroy(),x(this,pl,null)}};co=new WeakMap,pl=new WeakMap,fr=new WeakMap,gl=new WeakMap,Zh=new WeakMap,td=new WeakMap,hg=new WeakSet,v_=function(t){t.stopPropagation()},rs=new WeakSet,y_=function(t){a(this,fr)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},__=function(t){a(this,fr)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},wp=function(t){const e=a(this,fr)._uiManager._signal;t.addEventListener("focusin",w(this,rs,y_).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",w(this,rs,__).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",noContextMenu,{signal:e})},A_=function(){const{editorType:t,_uiManager:e}=a(this,fr),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",a(da,td)[t]),w(this,rs,wp).call(this,i),i.addEventListener("click",o=>{e.delete()},{signal:e._signal}),a(this,gl).append(i)},Qm=function(){const t=document.createElement("div");return t.className="divider",t},M(da,hg),M(da,td,null);let EditorToolbar=da;var ed,ml,vl,No,b_,E_,w_;class HighlightToolbar{constructor(t){M(this,No);M(this,ed,null);M(this,ml,null);M(this,vl);x(this,vl,t)}show(t,e,i){const[o,r]=w(this,No,E_).call(this,e,i),{style:c}=a(this,ml)||x(this,ml,w(this,No,b_).call(this));t.append(a(this,ml)),c.insetInlineEnd=`${100*o}%`,c.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,ml).remove()}}ed=new WeakMap,ml=new WeakMap,vl=new WeakMap,No=new WeakSet,b_=function(){const t=x(this,ml,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",noContextMenu,{signal:a(this,vl)._signal});const e=x(this,ed,document.createElement("div"));return e.className="buttons",t.append(e),w(this,No,w_).call(this),t},E_=function(t,e){let i=0,o=0;for(const r of t){const c=r.y+r.height;if(c<i)continue;const u=r.x+(e?r.width:0);if(c>i){o=u,i=c;continue}e?u>o&&(o=u):u<o&&(o=u)}return[e?1-o:o,i]},w_=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=a(this,vl)._signal;t.addEventListener("contextmenu",noContextMenu,{signal:i}),t.addEventListener("click",()=>{a(this,vl).highlightSelection("floating_button")},{signal:i}),a(this,ed).append(t)};function bindEvents(g,t,e){for(const i of e)t.addEventListener(i,g[i].bind(g))}function opacityToHex(g){return Math.round(Math.min(255,Math.max(1,255*g))).toString(16).padStart(2,"0")}var dg;class IdManager{constructor(){M(this,dg,0)}get id(){return`${AnnotationEditorPrefix}${bi(this,dg)._++}`}}dg=new WeakMap;var ru,nd,Xi,au,Sp;const Ty=class Ty{constructor(){M(this,au);M(this,ru,getUuid());M(this,nd,0);M(this,Xi,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),o=new Image;o.src=t;const r=o.decode().then(()=>(i.drawImage(o,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:i,size:o,type:r}=t;return w(this,au,Sp).call(this,`${e}_${i}_${o}_${r}`,t)}async getFromUrl(t){return w(this,au,Sp).call(this,t,t)}async getFromBlob(t,e){const i=await e;return w(this,au,Sp).call(this,t,i)}async getFromId(t){a(this,Xi)||x(this,Xi,new Map);const e=a(this,Xi).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,Xi)||x(this,Xi,new Map);let i=a(this,Xi).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const o=new OffscreenCanvas(e.width,e.height);return o.getContext("2d").drawImage(e,0,0),i={bitmap:o.transferToImageBitmap(),id:`image_${a(this,ru)}_${bi(this,nd)._++}`,refCounter:1,isSvg:!1},a(this,Xi).set(t,i),a(this,Xi).set(i.id,i),i}getSvgUrl(t){const e=a(this,Xi).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var o;a(this,Xi)||x(this,Xi,new Map);const e=a(this,Xi).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}(o=i.close)==null||o.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,ru)}_`)}};ru=new WeakMap,nd=new WeakMap,Xi=new WeakMap,au=new WeakSet,Sp=async function(t,e){a(this,Xi)||x(this,Xi,new Map);let i=a(this,Xi).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,ru)}_${bi(this,nd)._++}`,refCounter:0,isSvg:!1});let o;if(typeof e=="string"?(i.url=e,o=await fetchData(e,"blob")):e instanceof File?o=i.file=e:e instanceof Blob&&(o=e),o.type==="image/svg+xml"){const r=Ty._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((f,d)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,f()},c.onload=async()=>{const m=i.svgUrl=c.result;u.src=await r?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=c.onerror=d});c.readAsDataURL(o),await h}else i.bitmap=await createImageBitmap(o);i.refCounter=1}catch(o){console.error(o),i=null}return a(this,Xi).set(t,i),i&&a(this,Xi).set(i.id,i),i};let ImageManager=Ty;var Pi,uo,id,Mi;class CommandManager{constructor(t=128){M(this,Pi,[]);M(this,uo,!1);M(this,id);M(this,Mi,-1);x(this,id,t)}add({cmd:t,undo:e,post:i,mustExec:o,type:r=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(o&&t(),a(this,uo))return;const h={cmd:t,undo:e,post:i,type:r};if(a(this,Mi)===-1){a(this,Pi).length>0&&(a(this,Pi).length=0),x(this,Mi,0),a(this,Pi).push(h);return}if(c&&a(this,Pi)[a(this,Mi)].type===r){u&&(h.undo=a(this,Pi)[a(this,Mi)].undo),a(this,Pi)[a(this,Mi)]=h;return}const f=a(this,Mi)+1;f===a(this,id)?a(this,Pi).splice(0,1):(x(this,Mi,f),f<a(this,Pi).length&&a(this,Pi).splice(f)),a(this,Pi).push(h)}undo(){if(a(this,Mi)===-1)return;x(this,uo,!0);const{undo:t,post:e}=a(this,Pi)[a(this,Mi)];t(),e==null||e(),x(this,uo,!1),x(this,Mi,a(this,Mi)-1)}redo(){if(a(this,Mi)<a(this,Pi).length-1){x(this,Mi,a(this,Mi)+1),x(this,uo,!0);const{cmd:t,post:e}=a(this,Pi)[a(this,Mi)];t(),e==null||e(),x(this,uo,!1)}}hasSomethingToUndo(){return a(this,Mi)!==-1}hasSomethingToRedo(){return a(this,Mi)<a(this,Pi).length-1}destroy(){x(this,Pi,null)}}Pi=new WeakMap,uo=new WeakMap,id=new WeakMap,Mi=new WeakMap;var fg,S_;class KeyboardManager{constructor(t){M(this,fg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=util_FeatureTest.platform;for(const[i,o,r={}]of t)for(const c of i){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:o,options:r}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:o,options:r}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(w(this,fg,S_).call(this,e));if(!i)return;const{callback:o,options:{bubbles:r=!1,args:c=[],checker:u=null}}=i;u&&!u(t,e)||(o.bind(t,...c,e)(),r||(e.stopPropagation(),e.preventDefault()))}}fg=new WeakSet,S_=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const pg=class pg{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(t),shadow(this,"_colors",t)}convert(t){const e=getRGB(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,o]of this._colors)if(o.every((r,c)=>r===e[c]))return pg._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?Util.makeHexColor(...e):t}};xe(pg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=pg;var ou,ks,wi,ji,lu,pa,cu,pr,ho,uu,yl,Dr,gr,_l,sd,rd,hu,ad,Or,fo,du,po,Nr,gg,go,od,mo,Al,ld,cd,Fi,On,ga,bl,ud,hd,vo,jr,ma,dd,Ys,be,xp,Jm,x_,C_,Cp,T_,R_,k_,Zm,P_,tv,ev,M_,is,oo,F_,L_,nv,I_,Ph,iv;const su=class su{constructor(t,e,i,o,r,c,u,h,f,d,m){M(this,be);M(this,ou,new AbortController);M(this,ks,null);M(this,wi,new Map);M(this,ji,new Map);M(this,lu,null);M(this,pa,null);M(this,cu,null);M(this,pr,new CommandManager);M(this,ho,null);M(this,uu,0);M(this,yl,new Set);M(this,Dr,null);M(this,gr,null);M(this,_l,new Set);M(this,sd,!1);M(this,rd,!1);M(this,hu,!1);M(this,ad,null);M(this,Or,null);M(this,fo,null);M(this,du,null);M(this,po,!1);M(this,Nr,null);M(this,gg,new IdManager);M(this,go,!1);M(this,od,!1);M(this,mo,null);M(this,Al,null);M(this,ld,null);M(this,cd,null);M(this,Fi,AnnotationEditorType.NONE);M(this,On,new Set);M(this,ga,null);M(this,bl,null);M(this,ud,null);M(this,hd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});M(this,vo,[0,0]);M(this,jr,null);M(this,ma,null);M(this,dd,null);M(this,Ys,null);const v=this._signal=a(this,ou).signal;x(this,ma,t),x(this,dd,e),x(this,lu,i),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),w(this,be,T_).call(this),w(this,be,M_).call(this),w(this,be,Zm).call(this),x(this,pa,r.annotationStorage),x(this,ad,r.filterFactory),x(this,bl,c),x(this,du,u||null),x(this,sd,h),x(this,rd,f),x(this,hu,d),x(this,cd,m||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=su.prototype,e=c=>a(c,ma).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},o=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&a(c,ma).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&a(c,ma).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,i,o;(t=a(this,Ys))==null||t.resolve(),x(this,Ys,null),(e=a(this,ou))==null||e.abort(),x(this,ou,null),this._signal=null;for(const r of a(this,ji).values())r.destroy();a(this,ji).clear(),a(this,wi).clear(),a(this,_l).clear(),x(this,ks,null),a(this,On).clear(),a(this,pr).destroy(),(i=a(this,lu))==null||i.destroy(),(o=a(this,Nr))==null||o.hide(),x(this,Nr,null),a(this,Or)&&(clearTimeout(a(this,Or)),x(this,Or,null)),a(this,jr)&&(clearTimeout(a(this,jr)),x(this,jr,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,cd)}get useNewAltTextFlow(){return a(this,rd)}get useNewAltTextWhenAddingImage(){return a(this,hu)}get hcmFilter(){return shadow(this,"hcmFilter",a(this,bl)?a(this,ad).addHCMFilter(a(this,bl).foreground,a(this,bl).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(a(this,ma)).direction)}get highlightColors(){return shadow(this,"highlightColors",a(this,du)?new Map(a(this,du).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){x(this,ld,t)}editAltText(t,e=!1){var i;(i=a(this,lu))==null||i.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,hu,e);break}}onPageChanging({pageNumber:t}){x(this,uu,t-1)}focusMainContainer(){a(this,ma).focus()}findParent(t,e){for(const i of a(this,ji).values()){const{x:o,y:r,width:c,height:u}=i.div.getBoundingClientRect();if(t>=o&&t<=o+c&&e>=r&&e<=r+u)return i}return null}disableUserSelect(t=!1){a(this,dd).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,_l).add(t)}removeShouldRescale(t){a(this,_l).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*PixelsPerInch.PDF_TO_CSS_UNITS;for(const e of a(this,_l))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:o,focusNode:r,focusOffset:c}=e,u=e.toString(),f=w(this,be,xp).call(this,e).closest(".textLayer"),d=this.getSelectionBoxes(f);if(!d)return;e.empty();const m=w(this,be,Jm).call(this,f),v=a(this,Fi)===AnnotationEditorType.NONE,_=()=>{m==null||m.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:i,anchorOffset:o,focusNode:r,focusOffset:c,text:u}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(AnnotationEditorType.HIGHLIGHT,_);return}_()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,pa)&&!a(this,pa).has(t.id)&&a(this,pa).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,po)&&(x(this,po,!1),w(this,be,Cp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,On))if(e.div.contains(t)){x(this,Al,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Al))return;const[t,e]=a(this,Al);x(this,Al,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){w(this,be,Zm).call(this),w(this,be,tv).call(this)}removeEditListeners(){w(this,be,P_).call(this),w(this,be,ev).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of a(this,gr))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of a(this,gr))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=a(this,ks))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const o of a(this,On)){const r=o.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const c of a(this,gr))if(c.isHandlingMimeForPasting(r.type)){c.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){warn(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const o=this.currentLayer;try{const r=[];for(const h of i){const f=await o.deserialize(h);if(!f)return;r.push(f)}const c=()=>{for(const h of r)w(this,be,nv).call(this,h);w(this,be,iv).call(this,r)},u=()=>{for(const h of r)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(r){warn(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,Fi)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&su._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,po)&&(x(this,po,!1),w(this,be,Cp).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(w(this,be,R_).call(this),w(this,be,tv).call(this),w(this,be,is).call(this,{isEditing:a(this,Fi)!==AnnotationEditorType.NONE,isEmpty:w(this,be,Ph).call(this),hasSomethingToUndo:a(this,pr).hasSomethingToUndo(),hasSomethingToRedo:a(this,pr).hasSomethingToRedo(),hasSelectedEditor:!1})):(w(this,be,k_).call(this),w(this,be,ev).call(this),w(this,be,is).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,gr)){x(this,gr,t);for(const e of a(this,gr))w(this,be,oo).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,gg).id}get currentLayer(){return a(this,ji).get(a(this,uu))}getLayer(t){return a(this,ji).get(t)}get currentPageIndex(){return a(this,uu)}addLayer(t){a(this,ji).set(t.pageIndex,t),a(this,go)?t.enable():t.disable()}removeLayer(t){a(this,ji).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){if(a(this,Fi)!==t&&!(a(this,Ys)&&(await a(this,Ys).promise,!a(this,Ys)))){if(x(this,Ys,Promise.withResolvers()),x(this,Fi,t),t===AnnotationEditorType.NONE){this.setEditingState(!1),w(this,be,L_).call(this),a(this,Ys).resolve();return}this.setEditingState(!0),await w(this,be,F_).call(this),this.unselectAll();for(const o of a(this,ji).values())o.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),a(this,Ys).resolve();return}for(const o of a(this,wi).values())o.annotationElementId===e?(this.setSelected(o),o.enterInEditMode()):o.unselect();a(this,Ys).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==a(this,Fi)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(a(this,gr)){switch(t){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(i=a(this,ld))==null||i.updateColor(e);break;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,ud)||x(this,ud,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const o of a(this,On))o.updateParams(t,e);for(const o of a(this,gr))o.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var r;for(const c of a(this,wi).values())c.editorType===t&&c.show(e);(((r=a(this,ud))==null?void 0:r.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==e&&w(this,be,oo).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,od)!==t){x(this,od,t);for(const e of a(this,ji).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of a(this,wi).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return a(this,wi).get(t)}addEditor(t){a(this,wi).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(a(this,Or)&&clearTimeout(a(this,Or)),x(this,Or,setTimeout(()=>{this.focusMainContainer(),x(this,Or,null)},0))),a(this,wi).delete(t.id),this.unselect(t),(!t.annotationElementId||!a(this,yl).has(t.annotationElementId))&&((e=a(this,pa))==null||e.remove(t.id))}addDeletedAnnotationElement(t){a(this,yl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,yl).has(t)}removeDeletedAnnotationElement(t){a(this,yl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,ks)!==t&&(x(this,ks,t),t&&w(this,be,oo).call(this,t.propertiesToUpdate))}updateUI(t){a(this,be,I_)===t&&w(this,be,oo).call(this,t.propertiesToUpdate)}toggleSelected(t){if(a(this,On).has(t)){a(this,On).delete(t),t.unselect(),w(this,be,is).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,On).add(t),t.select(),w(this,be,oo).call(this,t.propertiesToUpdate),w(this,be,is).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of a(this,On))e!==t&&e.unselect();a(this,On).clear(),a(this,On).add(t),t.select(),w(this,be,oo).call(this,t.propertiesToUpdate),w(this,be,is).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,On).has(t)}get firstSelectedEditor(){return a(this,On).values().next().value}unselect(t){t.unselect(),a(this,On).delete(t),w(this,be,is).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,On).size!==0}get isEnterHandled(){return a(this,On).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){a(this,pr).undo(),w(this,be,is).call(this,{hasSomethingToUndo:a(this,pr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:w(this,be,Ph).call(this)})}redo(){a(this,pr).redo(),w(this,be,is).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,pr).hasSomethingToRedo(),isEmpty:w(this,be,Ph).call(this)})}addCommands(t){a(this,pr).add(t),w(this,be,is).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:w(this,be,Ph).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...a(this,On)],e=()=>{for(const o of t)o.remove()},i=()=>{for(const o of t)w(this,be,nv).call(this,o)};this.addCommands({cmd:e,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=a(this,ks))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,ks)||this.hasSelection}selectAll(){for(const t of a(this,On))t.commit();w(this,be,iv).call(this,a(this,wi).values())}unselectAll(){if(!(a(this,ks)&&(a(this,ks).commitOrRemove(),a(this,Fi)!==AnnotationEditorType.NONE))&&this.hasSelection){for(const t of a(this,On))t.unselect();a(this,On).clear(),w(this,be,is).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,vo)[0]+=t,a(this,vo)[1]+=e;const[o,r]=a(this,vo),c=[...a(this,On)],u=1e3;a(this,jr)&&clearTimeout(a(this,jr)),x(this,jr,setTimeout(()=>{x(this,jr,null),a(this,vo)[0]=a(this,vo)[1]=0,this.addCommands({cmd:()=>{for(const h of c)a(this,wi).has(h.id)&&h.translateInPage(o,r)},undo:()=>{for(const h of c)a(this,wi).has(h.id)&&h.translateInPage(-o,-r)},mustExec:!1})},u));for(const h of c)h.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,Dr,new Map);for(const t of a(this,On))a(this,Dr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Dr))return!1;this.disableUserSelect(!1);const t=a(this,Dr);x(this,Dr,null);let e=!1;for(const[{x:o,y:r,pageIndex:c},u]of t)u.newX=o,u.newY=r,u.newPageIndex=c,e||(e=o!==u.savedX||r!==u.savedY||c!==u.savedPageIndex);if(!e)return!1;const i=(o,r,c,u)=>{if(a(this,wi).has(o.id)){const h=a(this,ji).get(u);h?o._setParentAndPosition(h,r,c):(o.pageIndex=u,o.x=r,o.y=c)}};return this.addCommands({cmd:()=>{for(const[o,{newX:r,newY:c,newPageIndex:u}]of t)i(o,r,c,u)},undo:()=>{for(const[o,{savedX:r,savedY:c,savedPageIndex:u}]of t)i(o,r,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Dr))for(const i of a(this,Dr).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,On).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,ks)===t}getActive(){return a(this,ks)}getMode(){return a(this,Fi)}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,d=e.rangeCount;f<d;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:o,width:r,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,d,m,v)=>({x:(d-o)/c,y:1-(f+m-i)/r,width:v/c,height:m/r});break;case"180":u=(f,d,m,v)=>({x:1-(f+m-i)/r,y:1-(d+v-o)/c,width:m/r,height:v/c});break;case"270":u=(f,d,m,v)=>({x:1-(d+v-o)/c,y:(f-i)/r,width:v/c,height:m/r});break;default:u=(f,d,m,v)=>({x:(f-i)/r,y:(d-o)/c,width:m/r,height:v/c});break}const h=[];for(let f=0,d=e.rangeCount;f<d;f++){const m=e.getRangeAt(f);if(!m.collapsed)for(const{x:v,y:_,width:A,height:S}of m.getClientRects())A===0||S===0||h.push(u(v,_,A,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,cu)||x(this,cu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,cu))==null||e.delete(t)}renderAnnotationElement(t){var o;const e=(o=a(this,cu))==null?void 0:o.get(t.data.id);if(!e)return;const i=a(this,pa).getRawValue(e);i&&(a(this,Fi)===AnnotationEditorType.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};ou=new WeakMap,ks=new WeakMap,wi=new WeakMap,ji=new WeakMap,lu=new WeakMap,pa=new WeakMap,cu=new WeakMap,pr=new WeakMap,ho=new WeakMap,uu=new WeakMap,yl=new WeakMap,Dr=new WeakMap,gr=new WeakMap,_l=new WeakMap,sd=new WeakMap,rd=new WeakMap,hu=new WeakMap,ad=new WeakMap,Or=new WeakMap,fo=new WeakMap,du=new WeakMap,po=new WeakMap,Nr=new WeakMap,gg=new WeakMap,go=new WeakMap,od=new WeakMap,mo=new WeakMap,Al=new WeakMap,ld=new WeakMap,cd=new WeakMap,Fi=new WeakMap,On=new WeakMap,ga=new WeakMap,bl=new WeakMap,ud=new WeakMap,hd=new WeakMap,vo=new WeakMap,jr=new WeakMap,ma=new WeakMap,dd=new WeakMap,Ys=new WeakMap,be=new WeakSet,xp=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Jm=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of a(this,ji).values())if(i.hasTextLayer(t))return i;return null},x_=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=w(this,be,xp).call(this,t).closest(".textLayer"),o=this.getSelectionBoxes(i);o&&(a(this,Nr)||x(this,Nr,new HighlightToolbar(this)),a(this,Nr).show(i,o,this.direction==="ltr"))},C_=function(){var r,c,u;const t=document.getSelection();if(!t||t.isCollapsed){a(this,ga)&&((r=a(this,Nr))==null||r.hide(),x(this,ga,null),w(this,be,is).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,ga))return;const o=w(this,be,xp).call(this,t).closest(".textLayer");if(!o){a(this,ga)&&((c=a(this,Nr))==null||c.hide(),x(this,ga,null),w(this,be,is).call(this,{hasSelectedText:!1}));return}if((u=a(this,Nr))==null||u.hide(),x(this,ga,e),w(this,be,is).call(this,{hasSelectedText:!0}),!(a(this,Fi)!==AnnotationEditorType.HIGHLIGHT&&a(this,Fi)!==AnnotationEditorType.NONE)&&(a(this,Fi)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,po,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=a(this,Fi)===AnnotationEditorType.HIGHLIGHT?w(this,be,Jm).call(this,o):null;h==null||h.toggleDrawing();const f=new AbortController,d=this.combinedSignal(f),m=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),h==null||h.toggleDrawing(!0),v.type==="pointerup"&&w(this,be,Cp).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:d}),window.addEventListener("blur",m,{signal:d})}},Cp=function(t=""){a(this,Fi)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(t):a(this,sd)&&w(this,be,x_).call(this)},T_=function(){document.addEventListener("selectionchange",w(this,be,C_).bind(this),{signal:this._signal})},R_=function(){if(a(this,fo))return;x(this,fo,new AbortController);const t=this.combinedSignal(a(this,fo));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},k_=function(){var t;(t=a(this,fo))==null||t.abort(),x(this,fo,null)},Zm=function(){if(a(this,mo))return;x(this,mo,new AbortController);const t=this.combinedSignal(a(this,mo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},P_=function(){var t;(t=a(this,mo))==null||t.abort(),x(this,mo,null)},tv=function(){if(a(this,ho))return;x(this,ho,new AbortController);const t=this.combinedSignal(a(this,ho));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},ev=function(){var t;(t=a(this,ho))==null||t.abort(),x(this,ho,null)},M_=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},is=function(t){Object.entries(t).some(([i,o])=>a(this,hd)[i]!==o)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,hd),t)}),a(this,Fi)===AnnotationEditorType.HIGHLIGHT&&t.hasSelectedEditor===!1&&w(this,be,oo).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},oo=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},F_=async function(){if(!a(this,go)){x(this,go,!0);const t=[];for(const e of a(this,ji).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,wi).values())e.enable()}},L_=function(){if(this.unselectAll(),a(this,go)){x(this,go,!1);for(const t of a(this,ji).values())t.disable();for(const t of a(this,wi).values())t.disable()}},nv=function(t){const e=a(this,ji).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},I_=function(){let t=null;for(t of a(this,On));return t},Ph=function(){if(a(this,wi).size===0)return!0;if(a(this,wi).size===1)for(const t of a(this,wi).values())return t.isEmpty();return!1},iv=function(t){for(const e of a(this,On))e.unselect();a(this,On).clear();for(const e of t)e.isEmpty()||(a(this,On).add(e),e.select());w(this,be,is).call(this,{hasSelectedEditor:this.hasSelection})},xe(su,"TRANSLATE_SMALL",1),xe(su,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=su;var Li,Hr,mr,fu,Br,Ps,pu,Ur,vs,va,El,zr,yo,Cr,Mh,Tp;const ss=class ss{constructor(t){M(this,Cr);M(this,Li,null);M(this,Hr,!1);M(this,mr,null);M(this,fu,null);M(this,Br,null);M(this,Ps,null);M(this,pu,!1);M(this,Ur,null);M(this,vs,null);M(this,va,null);M(this,El,null);M(this,zr,!1);x(this,vs,t),x(this,zr,t._uiManager.useNewAltTextFlow),a(ss,yo)||x(ss,yo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){ss._l10n??(ss._l10n=t)}async render(){const t=x(this,mr,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=x(this,fu,document.createElement("span"));t.append(e),a(this,zr)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(ss,yo).missing),e.setAttribute("data-l10n-id",a(ss,yo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,vs)._uiManager._signal;t.addEventListener("contextmenu",noContextMenu,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const o=r=>{r.preventDefault(),a(this,vs)._uiManager.editAltText(a(this,vs)),a(this,zr)&&a(this,vs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Cr,Mh)}})};return t.addEventListener("click",o,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(x(this,pu,!0),o(r))},{signal:i}),await w(this,Cr,Tp).call(this),t}finish(){a(this,mr)&&(a(this,mr).focus({focusVisible:a(this,pu)}),x(this,pu,!1))}isEmpty(){return a(this,zr)?a(this,Li)===null:!a(this,Li)&&!a(this,Hr)}hasData(){return a(this,zr)?a(this,Li)!==null||!!a(this,va):this.isEmpty()}get guessedText(){return a(this,va)}async setGuessedText(t){a(this,Li)===null&&(x(this,va,t),x(this,El,await ss._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),w(this,Cr,Tp).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,zr)||a(this,Li)){(e=a(this,Ur))==null||e.remove(),x(this,Ur,null);return}if(!a(this,Ur)){const i=x(this,Ur,document.createElement("div"));i.className="noAltTextBadge",a(this,vs).div.append(i)}a(this,Ur).classList.toggle("hidden",!t)}serialize(t){let e=a(this,Li);return!t&&a(this,va)===e&&(e=a(this,El)),{altText:e,decorative:a(this,Hr),guessedText:a(this,va),textWithDisclaimer:a(this,El)}}get data(){return{altText:a(this,Li),decorative:a(this,Hr)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:o,cancel:r=!1}){i&&(x(this,va,i),x(this,El,o)),!(a(this,Li)===t&&a(this,Hr)===e)&&(r||(x(this,Li,t),x(this,Hr,e)),w(this,Cr,Tp).call(this))}toggle(t=!1){a(this,mr)&&(!t&&a(this,Ps)&&(clearTimeout(a(this,Ps)),x(this,Ps,null)),a(this,mr).disabled=!t)}shown(){a(this,vs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Cr,Mh)}})}destroy(){var t,e;(t=a(this,mr))==null||t.remove(),x(this,mr,null),x(this,fu,null),x(this,Br,null),(e=a(this,Ur))==null||e.remove(),x(this,Ur,null)}};Li=new WeakMap,Hr=new WeakMap,mr=new WeakMap,fu=new WeakMap,Br=new WeakMap,Ps=new WeakMap,pu=new WeakMap,Ur=new WeakMap,vs=new WeakMap,va=new WeakMap,El=new WeakMap,zr=new WeakMap,yo=new WeakMap,Cr=new WeakSet,Mh=function(){return a(this,Li)&&"added"||a(this,Li)===null&&this.guessedText&&"review"||"missing"},Tp=async function(){var o,r,c;const t=a(this,mr);if(!t)return;if(a(this,zr)){if(t.classList.toggle("done",!!a(this,Li)),t.setAttribute("data-l10n-id",a(ss,yo)[a(this,Cr,Mh)]),(o=a(this,fu))==null||o.setAttribute("data-l10n-id",a(ss,yo)[`${a(this,Cr,Mh)}-label`]),!a(this,Li)){(r=a(this,Br))==null||r.remove();return}}else{if(!a(this,Li)&&!a(this,Hr)){t.classList.remove("done"),(c=a(this,Br))==null||c.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Br);if(!e){x(this,Br,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,vs).id}`;const u=100,h=a(this,vs)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(a(this,Ps)),x(this,Ps,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,Ps,setTimeout(()=>{x(this,Ps,null),a(this,Br).classList.add("show"),a(this,vs)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:h}),t.addEventListener("mouseleave",()=>{var f;a(this,Ps)&&(clearTimeout(a(this,Ps)),x(this,Ps,null)),(f=a(this,Br))==null||f.classList.remove("show")},{signal:h})}a(this,Hr)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,Li)),e.parentNode||t.append(e);const i=a(this,vs).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},M(ss,yo,null),xe(ss,"_l10n",null);let AltText=ss;var wl,vr,ri,gu,Sl,Hi,xl,_o,fd,Cl,Ao,pd,Tl,ya,Wr,mu,vu,Qs,gd,mg,pn,sv,md,rv,av,D_,O_,ov,lv,cv,N_,uv,j_,H_,B_,hv,Fh;const In=class In{constructor(t){M(this,pn);M(this,wl,null);M(this,vr,null);M(this,ri,null);M(this,gu,!1);M(this,Sl,!1);M(this,Hi,null);M(this,xl,null);M(this,_o,null);M(this,fd,"");M(this,Cl,!1);M(this,Ao,null);M(this,pd,!1);M(this,Tl,!1);M(this,ya,!1);M(this,Wr,null);M(this,mu,0);M(this,vu,0);M(this,Qs,null);xe(this,"_editToolbar",null);xe(this,"_initialOptions",Object.create(null));xe(this,"_initialData",null);xe(this,"_isVisible",!0);xe(this,"_uiManager",null);xe(this,"_focusEventsAllowed",!0);M(this,gd,!1);M(this,mg,In._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:o,pageX:r,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,o],this.pageTranslation=[r,c];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=In.prototype._resizeWithKeyboard,e=AnnotationEditorUIManager.TRANSLATE_SMALL,i=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],In.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new FakeEditor({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(In._l10n??(In._l10n=t),In._l10nResizer||(In._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),In._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);In._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,gd)}set _isDraggable(t){var e;x(this,gd,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,mg)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):w(this,pn,Fh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Cl)?x(this,Cl,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,o){const[r,c]=this.parentDimensions;[i,o]=this.screenToPageTranslation(i,o),this.x=(t+i)/r,this.y=(e+o)/c,this.fixAndSetPosition()}translate(t,e){w(this,pn,sv).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,Ao)||x(this,Ao,[this.x,this.y]),w(this,pn,sv).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){a(this,Ao)||x(this,Ao,[this.x,this.y]);const[i,o]=this.parentDimensions;if(this.x+=t/i,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:c}=this;const[u,h]=this.getBaseTranslation();r+=u,c+=h,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!a(this,Ao)&&(a(this,Ao)[0]!==this.x||a(this,Ao)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=In,o=i/t,r=i/e;switch(this.rotation){case 90:return[-o,r];case 180:return[o,r];case 270:return[o,-r];default:return[-o,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,i]=this.pageDimensions;let{x:o,y:r,width:c,height:u}=this;if(c*=e,u*=i,o*=e,r*=i,this._mustFixPosition)switch(t){case 0:o=Math.max(0,Math.min(e-c,o)),r=Math.max(0,Math.min(i-u,r));break;case 90:o=Math.max(0,Math.min(e-u,o)),r=Math.min(i,Math.max(c,r));break;case 180:o=Math.min(e,Math.max(c,o)),r=Math.min(i,Math.max(u,r));break;case 270:o=Math.min(e,Math.max(u,o)),r=Math.max(0,Math.min(i-c,r));break}this.x=o/=e,this.y=r/=i;const[h,f]=this.getBaseTranslation();o+=h,r+=f;const{style:d}=this.div;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return w(i=In,md,rv).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return w(i=In,md,rv).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,o]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,a(this,Sl)||(this.div.style.height=`${(100*e/o).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,o=i.endsWith("%"),r=!a(this,Sl)&&e.endsWith("%");if(o&&r)return;const[c,u]=this.parentDimensions;o||(t.width=`${(100*parseFloat(i)/c).toFixed(2)}%`),!a(this,Sl)&&!r&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=a(this,ri))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,Tl)?this._editToolbar:(this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render()),a(this,ri)&&await this._editToolbar.addAltText(a(this,ri)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,ri))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,ri)||(AltText.initialize(In._l10n),x(this,ri,new AltText(this)),a(this,wl)&&(a(this,ri).data=a(this,wl),x(this,wl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,ri))==null?void 0:t.data}set altTextData(t){a(this,ri)&&(a(this,ri).data=t)}get guessedAltText(){var t;return(t=a(this,ri))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,ri))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,ri))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,ri)&&!a(this,ri).isEmpty()}hasAltTextData(){var t;return((t=a(this,ri))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=a(this,gu)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),w(this,pn,uv).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,o]=this.getInitialTranslation();return this.translate(i,o),bindEvents(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,Cl,!0),this._isDraggable){w(this,pn,N_).call(this,t);return}w(this,pn,cv).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){a(this,Wr)&&clearTimeout(a(this,Wr)),x(this,Wr,setTimeout(()=>{var t;x(this,Wr,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){const o=this.parentScale,[r,c]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/o,d=e/o,m=this.x*r,v=this.y*c,_=this.width*r,A=this.height*c;switch(i){case 0:return[m+f+u,c-v-d-A+h,m+f+_+u,c-v-d+h];case 90:return[m+d+u,c-v+f+h,m+d+A+u,c-v+f+_+h];case 180:return[m-f-_+u,c-v+d+h,m-f+u,c-v+d+A+h];case 270:return[m-d-A+u,c-v-f-_+h,m-d+u,c-v-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,o,r,c]=t,u=r-i,h=c-o;switch(this.rotation){case 0:return[i,e-c,u,h];case 90:return[i,e-o,h,u];case 180:return[r,e-o,u,h];case 270:return[r,e-c,h,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,Tl,!0)}disableEditMode(){x(this,Tl,!1)}isInEditMode(){return a(this,Tl)}shouldGetKeyboardEvents(){return a(this,ya)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){w(this,pn,uv).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){unreachable("An editor must be serializable")}static async deserialize(t,e,i){const o=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});o.rotation=t.rotation,x(o,wl,t.accessibilityData);const[r,c]=o.pageDimensions,[u,h,f,d]=o.getRectInCurrentCoords(t.rect,c);return o.x=u/r,o.y=h/c,o.width=f/r,o.height=d/c,o}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=a(this,_o))==null||t.abort(),x(this,_o,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,Wr)&&(clearTimeout(a(this,Wr)),x(this,Wr,null)),w(this,pn,Fh).call(this),this.removeEditToolbar(),a(this,Qs)){for(const e of a(this,Qs).values())clearTimeout(e);x(this,Qs,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(w(this,pn,D_).call(this),a(this,Hi).classList.remove("hidden"),bindEvents(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,xl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,Hi).children;if(!a(this,vr)){x(this,vr,Array.from(e));const c=w(this,pn,j_).bind(this),u=w(this,pn,H_).bind(this),h=this._uiManager._signal;for(const f of a(this,vr)){const d=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",w(this,pn,B_).bind(this,d),{signal:h}),f.setAttribute("data-l10n-id",In._l10nResizer[d])}}const i=a(this,vr)[0];let o=0;for(const c of e){if(c===i)break;o++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,vr).length/4);if(r!==o){if(r<o)for(let u=0;u<o-r;u++)a(this,Hi).append(a(this,Hi).firstChild);else if(r>o)for(let u=0;u<r-o;u++)a(this,Hi).firstChild.before(a(this,Hi).lastChild);let c=0;for(const u of e){const f=a(this,vr)[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",In._l10nResizer[f])}}w(this,pn,hv).call(this,0),x(this,ya,!0),a(this,Hi).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,ya)&&w(this,pn,lv).call(this,a(this,fd),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){w(this,pn,Fh).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var o,r;(o=this.div)!=null&&o.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(i=a(this,ri))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,o,r;(t=a(this,Hi))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(o=this._editToolbar)==null||o.hide(),(r=a(this,ri))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return a(this,pd)}set isEditing(t){x(this,pd,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){x(this,Sl,!0);const i=t/e,{style:o}=this.div;o.aspectRatio=i,o.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Qs)||x(this,Qs,new Map);const{action:i}=t;let o=a(this,Qs).get(i);o&&clearTimeout(o),o=setTimeout(()=>{this._reportTelemetry(t),a(this,Qs).delete(i),a(this,Qs).size===0&&x(this,Qs,null)},In._telemetryTimeout),a(this,Qs).set(i,o);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,gu,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,gu,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};wl=new WeakMap,vr=new WeakMap,ri=new WeakMap,gu=new WeakMap,Sl=new WeakMap,Hi=new WeakMap,xl=new WeakMap,_o=new WeakMap,fd=new WeakMap,Cl=new WeakMap,Ao=new WeakMap,pd=new WeakMap,Tl=new WeakMap,ya=new WeakMap,Wr=new WeakMap,mu=new WeakMap,vu=new WeakMap,Qs=new WeakMap,gd=new WeakMap,mg=new WeakMap,pn=new WeakSet,sv=function([t,e],i,o){[i,o]=this.screenToPageTranslation(i,o),this.x+=i/t,this.y+=o/e,this.fixAndSetPosition()},md=new WeakSet,rv=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},av=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},D_=function(){if(a(this,Hi))return;x(this,Hi,document.createElement("div")),a(this,Hi).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const o=document.createElement("div");a(this,Hi).append(o),o.classList.add("resizer",i),o.setAttribute("data-resizer-name",i),o.addEventListener("pointerdown",w(this,pn,O_).bind(this,i),{signal:e}),o.addEventListener("contextmenu",noContextMenu,{signal:e}),o.tabIndex=-1}this.div.prepend(a(this,Hi))},O_=function(t,e){var A;e.preventDefault();const{isMac:i}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&i)return;(A=a(this,ri))==null||A.toggle(!1);const o=this._isDraggable;this._isDraggable=!1;const r=new AbortController,c=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",w(this,pn,lv).bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("contextmenu",noContextMenu,{signal:c});const u=this.x,h=this.y,f=this.width,d=this.height,m=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const _=()=>{var S;r.abort(),this.parent.togglePointerEvents(!0),(S=a(this,ri))==null||S.toggle(!0),this._isDraggable=o,this.parent.div.style.cursor=m,this.div.style.cursor=v,w(this,pn,ov).call(this,u,h,f,d)};window.addEventListener("pointerup",_,{signal:c}),window.addEventListener("blur",_,{signal:c})},ov=function(t,e,i,o){const r=this.x,c=this.y,u=this.width,h=this.height;r===t&&c===e&&u===i&&h===o||this.addCommands({cmd:()=>{this.width=u,this.height=h,this.x=r,this.y=c;const[f,d]=this.parentDimensions;this.setDims(f*u,d*h),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=o,this.x=t,this.y=e;const[f,d]=this.parentDimensions;this.setDims(f*i,d*o),this.fixAndSetPosition()},mustExec:!0})},lv=function(t,e){const[i,o]=this.parentDimensions,r=this.x,c=this.y,u=this.width,h=this.height,f=In.MIN_SIZE/i,d=In.MIN_SIZE/o,m=et=>Math.round(et*1e4)/1e4,v=w(this,pn,av).call(this,this.rotation),_=(et,it)=>[v[0]*et+v[2]*it,v[1]*et+v[3]*it],A=w(this,pn,av).call(this,360-this.rotation),S=(et,it)=>[A[0]*et+A[2]*it,A[1]*et+A[3]*it];let C,b,I=!1,B=!1;switch(t){case"topLeft":I=!0,C=(et,it)=>[0,0],b=(et,it)=>[et,it];break;case"topMiddle":C=(et,it)=>[et/2,0],b=(et,it)=>[et/2,it];break;case"topRight":I=!0,C=(et,it)=>[et,0],b=(et,it)=>[0,it];break;case"middleRight":B=!0,C=(et,it)=>[et,it/2],b=(et,it)=>[0,it/2];break;case"bottomRight":I=!0,C=(et,it)=>[et,it],b=(et,it)=>[0,0];break;case"bottomMiddle":C=(et,it)=>[et/2,it],b=(et,it)=>[et/2,0];break;case"bottomLeft":I=!0,C=(et,it)=>[0,it],b=(et,it)=>[et,0];break;case"middleLeft":B=!0,C=(et,it)=>[0,it/2],b=(et,it)=>[et,it/2];break}const N=C(u,h),T=b(u,h);let L=_(...T);const k=m(r+L[0]),D=m(c+L[1]);let j=1,Z=1,[O,G]=this.screenToPageTranslation(e.movementX,e.movementY);if([O,G]=S(O/i,G/o),I){const et=Math.hypot(u,h);j=Z=Math.max(Math.min(Math.hypot(T[0]-N[0]-O,T[1]-N[1]-G)/et,1/u,1/h),f/u,d/h)}else B?j=Math.max(f,Math.min(1,Math.abs(T[0]-N[0]-O)))/u:Z=Math.max(d,Math.min(1,Math.abs(T[1]-N[1]-G)))/h;const Q=m(u*j),mt=m(h*Z);L=_(...b(Q,mt));const ot=k-L[0],dt=D-L[1];this.width=Q,this.height=mt,this.x=ot,this.y=dt,this.setDims(i*Q,o*mt),this.fixAndSetPosition()},cv=function(t){const{isMac:e}=util_FeatureTest.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},N_=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const i=new AbortController,o=this._uiManager.combinedSignal(i);if(e){this.div.classList.add("moving"),x(this,mu,t.clientX),x(this,vu,t.clientY);const c=u=>{const{clientX:h,clientY:f}=u,[d,m]=this.screenToPageTranslation(h-a(this,mu),f-a(this,vu));x(this,mu,h),x(this,vu,f),this._uiManager.dragSelectedEditors(d,m)};window.addEventListener("pointermove",c,{passive:!0,capture:!0,signal:o})}const r=()=>{i.abort(),e&&this.div.classList.remove("moving"),x(this,Cl,!1),this._uiManager.endDragSession()||w(this,pn,cv).call(this,t)};window.addEventListener("pointerup",r,{signal:o}),window.addEventListener("blur",r,{signal:o})},uv=function(){if(a(this,_o)||!this.div)return;x(this,_o,new AbortController);const t=this._uiManager.combinedSignal(a(this,_o));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},j_=function(t){In._resizerKeyboardManager.exec(this,t)},H_=function(t){var e;a(this,ya)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,Hi)&&w(this,pn,Fh).call(this)},B_=function(t){x(this,fd,a(this,ya)?t:"")},hv=function(t){if(a(this,vr))for(const e of a(this,vr))e.tabIndex=t},Fh=function(){if(x(this,ya,!1),w(this,pn,hv).call(this,-1),a(this,xl)){const{savedX:t,savedY:e,savedWidth:i,savedHeight:o}=a(this,xl);w(this,pn,ov).call(this,t,e,i,o),x(this,xl,null)}},M(In,md),xe(In,"_l10n",null),xe(In,"_l10nResizer",null),xe(In,"_borderLineWidth",-1),xe(In,"_colorManager",new ColorManager),xe(In,"_zIndex",1),xe(In,"_telemetryTimeout",1e3);let AnnotationEditor=In;class FakeEditor extends AnnotationEditor{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(t){this.h1=t?t&4294967295:SEED,this.h2=t?t&4294967295:SEED}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let S=0,C=t.length;S<C;S++){const b=t.charCodeAt(S);b<=255?e[i++]=b:(e[i++]=b>>>8,e[i++]=b&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const o=i>>2,r=i-o*4,c=new Uint32Array(e.buffer,0,o);let u=0,h=0,f=this.h1,d=this.h2;const m=3432918353,v=461845907,_=m&MASK_LOW,A=v&MASK_LOW;for(let S=0;S<o;S++)S&1?(u=c[S],u=u*m&MASK_HIGH|u*_&MASK_LOW,u=u<<15|u>>>17,u=u*v&MASK_HIGH|u*A&MASK_LOW,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=c[S],h=h*m&MASK_HIGH|h*_&MASK_LOW,h=h<<15|h>>>17,h=h*v&MASK_HIGH|h*A&MASK_LOW,d^=h,d=d<<13|d>>>19,d=d*5+3864292196);switch(u=0,r){case 3:u^=e[o*4+2]<<16;case 2:u^=e[o*4+1]<<8;case 1:u^=e[o*4],u=u*m&MASK_HIGH|u*_&MASK_LOW,u=u<<15|u>>>17,u=u*v&MASK_HIGH|u*A&MASK_LOW,o&1?f^=u:d^=u}this.h1=f,this.h2=d}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&MASK_HIGH|t*36045&MASK_LOW,e=e*4283543511&MASK_HIGH|((e<<16|t>>>16)*2950163797&MASK_HIGH)>>>16,t^=e>>>1,t=t*444984403&MASK_HIGH|t*60499&MASK_LOW,e=e*3301882366&MASK_HIGH|((e<<16|t>>>16)*3120437893&MASK_HIGH)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var Rl,kl,Ii,vg,U_;class AnnotationStorage{constructor(){M(this,vg);M(this,Rl,!1);M(this,kl,null);M(this,Ii,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,Ii).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,Ii).get(t)}remove(t){if(a(this,Ii).delete(t),a(this,Ii).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,Ii).values())if(e instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,Ii).get(t);let o=!1;if(i!==void 0)for(const[r,c]of Object.entries(e))i[r]!==c&&(o=!0,i[r]=c);else o=!0,a(this,Ii).set(t,e);o&&w(this,vg,U_).call(this),e instanceof AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,Ii).has(t)}getAll(){return a(this,Ii).size>0?objectFromMap(a(this,Ii)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return a(this,Ii).size}resetModified(){a(this,Rl)&&(x(this,Rl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(a(this,Ii).size===0)return SerializableEmpty;const t=new Map,e=new MurmurHash3_64,i=[],o=Object.create(null);let r=!1;for(const[c,u]of a(this,Ii)){const h=u instanceof AnnotationEditor?u.serialize(!1,o):u;h&&(t.set(c,h),e.update(`${c}:${JSON.stringify(h)}`),r||(r=!!h.bitmap))}if(r)for(const c of t.values())c.bitmap&&i.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:SerializableEmpty}get editorStats(){let t=null;const e=new Map;for(const i of a(this,Ii).values()){if(!(i instanceof AnnotationEditor))continue;const o=i.telemetryFinalData;if(!o)continue;const{type:r}=o;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const c=t[r]||(t[r]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let f=c.get(u);f||(f=new Map,c.set(u,f));const d=f.get(h)??0;f.set(h,d+1)}}for(const[i,o]of e)t[i]=o.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){x(this,kl,null)}get modifiedIds(){if(a(this,kl))return a(this,kl);const t=[];for(const e of a(this,Ii).values())!(e instanceof AnnotationEditor)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return x(this,kl,{ids:new Set(t),hash:t.join(",")})}}Rl=new WeakMap,kl=new WeakMap,Ii=new WeakMap,vg=new WeakSet,U_=function(){a(this,Rl)||(x(this,Rl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var vd;class PrintAnnotationStorage extends AnnotationStorage{constructor(e){super();M(this,vd);const{map:i,hash:o,transfer:r}=e.serializable,c=structuredClone(i,r?{transfer:r}:null);x(this,vd,{map:c,hash:o,transfer:r})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,vd)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}vd=new WeakMap;var yu;class FontLoader{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){M(this,yu,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,yu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||a(this,yu).has(t.loadedName))){if(assert(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:o,style:r}=t,c=new FontFace(i,o,r);this.addNativeFontFace(c);try{await c.load(),a(this,yu).add(i),e==null||e(t)}catch{warn(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(o){throw warn(`Failed to load font '${i.family}': '${o}'.`),t.disableFontFace=!0,o}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const o=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,o)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return shadow(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(isNodeJS||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),shadow(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(assert(!o.done,"completeRequest() cannot be called twice."),o.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,o={done:!1,complete:e,callback:t};return i.push(o),o}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(N,T){return N.charCodeAt(T)<<24|N.charCodeAt(T+1)<<16|N.charCodeAt(T+2)<<8|N.charCodeAt(T+3)&255}function o(N,T,L,k){const D=N.substring(0,T),j=N.substring(T+L);return D+k+j}let r,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function d(N,T){if(++f>30){warn("Load test font never loaded."),T();return}if(h.font="30px "+N,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,N,T))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=o(v,976,m.length,m);const A=16,S=1482184792;let C=i(v,A);for(r=0,c=m.length-3;r<c;r+=4)C=C-S+i(m,r)|0;r<m.length&&(C=C-S+i(m+"XXX",r)|0),v=o(v,A,4,string32(C));const b=`url(data:font/opentype;base64,${btoa(v)});`,I=`@font-face {font-family:"${m}";src:${b}}`;this.insertRule(I);const B=this._document.createElement("div");B.style.visibility="hidden",B.style.width=B.style.height="10px",B.style.position="absolute",B.style.top=B.style.left="0px";for(const N of[t.loadedName,m]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=N,B.append(T)}this._document.body.append(B),d(m,()=>{B.remove(),e.complete()})}}yu=new WeakMap;class FontFaceObject{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const o in t)this[o]=t[o];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let o=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(o+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${o}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(r){warn(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(r,c){};const o=[];for(let r=0,c=i.length;r<c;)switch(i[r++]){case FontRenderOps.BEZIER_CURVE_TO:{const[u,h,f,d,m,v]=i.slice(r,r+6);o.push(_=>_.bezierCurveTo(u,h,f,d,m,v)),r+=6}break;case FontRenderOps.MOVE_TO:{const[u,h]=i.slice(r,r+2);o.push(f=>f.moveTo(u,h)),r+=2}break;case FontRenderOps.LINE_TO:{const[u,h]=i.slice(r,r+2);o.push(f=>f.lineTo(u,h)),r+=2}break;case FontRenderOps.QUADRATIC_CURVE_TO:{const[u,h,f,d]=i.slice(r,r+4);o.push(m=>m.quadraticCurveTo(u,h,f,d)),r+=4}break;case FontRenderOps.RESTORE:o.push(u=>u.restore());break;case FontRenderOps.SAVE:o.push(u=>u.save());break;case FontRenderOps.SCALE:assert(o.length===2,"Scale command is only valid at the third position.");break;case FontRenderOps.TRANSFORM:{const[u,h,f,d,m,v]=i.slice(r,r+6);o.push(_=>_.transform(u,h,f,d,m,v)),r+=6}break;case FontRenderOps.TRANSLATE:{const[u,h]=i.slice(r,r+2);o.push(f=>f.translate(u,h)),r+=2}break}return this.compiledGlyphs[e]=function(c,u){o[0](c),o[1](c),c.scale(u,-u);for(let h=2,f=o.length;h<f;h++)o[h](c)}}}var yd;class BaseCanvasFactory{constructor({enableHWA:t=!1}){M(this,yd,!1);x(this,yd,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,yd)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){unreachable("Abstract method `_createCanvas` called.")}}yd=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class BaseCMapReaderFactory{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){const e=await fetchData(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):stringToBytes(e)}}class BaseFilterFactory{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,o,r){return"none"}destroy(t=!1){}}var Pl,Ml,Vr,_a,Ki,yg,Fl,ke,qi,$c,qc,Rp,Xc,z_,dv,Kc,Lh,Ih,fv,Dh;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:e,ownerDocument:i=globalThis.document}){super();M(this,ke);M(this,Pl);M(this,Ml);M(this,Vr);M(this,_a);M(this,Ki);M(this,yg);M(this,Fl,0);x(this,_a,e),x(this,Ki,i)}addFilter(e){if(!e)return"none";let i=a(this,ke,qi).get(e);if(i)return i;const[o,r,c]=w(this,ke,Rp).call(this,e),u=e.length===1?o:`${o}${r}${c}`;if(i=a(this,ke,qi).get(u),i)return a(this,ke,qi).set(e,i),i;const h=`g_${a(this,_a)}_transfer_map_${bi(this,Fl)._++}`,f=w(this,ke,Xc).call(this,h);a(this,ke,qi).set(e,f),a(this,ke,qi).set(u,f);const d=w(this,ke,Kc).call(this,h);return w(this,ke,Ih).call(this,o,r,c,d),f}addHCMFilter(e,i){var A;const o=`${e}-${i}`,r="base";let c=a(this,ke,$c).get(r);if((c==null?void 0:c.key)===o||(c?((A=c.filter)==null||A.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},a(this,ke,$c).set(r,c)),!e||!i))return c.url;const u=w(this,ke,Dh).call(this,e);e=Util.makeHexColor(...u);const h=w(this,ke,Dh).call(this,i);if(i=Util.makeHexColor(...h),a(this,ke,qc).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return c.url;const f=new Array(256);for(let S=0;S<=255;S++){const C=S/255;f[S]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const d=f.join(","),m=`g_${a(this,_a)}_hcm_filter`,v=c.filter=w(this,ke,Kc).call(this,m);w(this,ke,Ih).call(this,d,d,d,v),w(this,ke,dv).call(this,v);const _=(S,C)=>{const b=u[S]/255,I=h[S]/255,B=new Array(C+1);for(let N=0;N<=C;N++)B[N]=b+N/C*(I-b);return B.join(",")};return w(this,ke,Ih).call(this,_(0,5),_(1,5),_(2,5),v),c.url=w(this,ke,Xc).call(this,m),c.url}addAlphaFilter(e){let i=a(this,ke,qi).get(e);if(i)return i;const[o]=w(this,ke,Rp).call(this,[e]),r=`alpha_${o}`;if(i=a(this,ke,qi).get(r),i)return a(this,ke,qi).set(e,i),i;const c=`g_${a(this,_a)}_alpha_map_${bi(this,Fl)._++}`,u=w(this,ke,Xc).call(this,c);a(this,ke,qi).set(e,u),a(this,ke,qi).set(r,u);const h=w(this,ke,Kc).call(this,c);return w(this,ke,fv).call(this,o,h),u}addLuminosityFilter(e){let i=a(this,ke,qi).get(e||"luminosity");if(i)return i;let o,r;if(e?([o]=w(this,ke,Rp).call(this,[e]),r=`luminosity_${o}`):r="luminosity",i=a(this,ke,qi).get(r),i)return a(this,ke,qi).set(e,i),i;const c=`g_${a(this,_a)}_luminosity_map_${bi(this,Fl)._++}`,u=w(this,ke,Xc).call(this,c);a(this,ke,qi).set(e,u),a(this,ke,qi).set(r,u);const h=w(this,ke,Kc).call(this,c);return w(this,ke,z_).call(this,h),e&&w(this,ke,fv).call(this,o,h),u}addHighlightHCMFilter(e,i,o,r,c){var I;const u=`${i}-${o}-${r}-${c}`;let h=a(this,ke,$c).get(e);if((h==null?void 0:h.key)===u||(h?((I=h.filter)==null||I.remove(),h.key=u,h.url="none",h.filter=null):(h={key:u,url:"none",filter:null},a(this,ke,$c).set(e,h)),!i||!o))return h.url;const[f,d]=[i,o].map(w(this,ke,Dh).bind(this));let m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[_,A]=[r,c].map(w(this,ke,Dh).bind(this));v<m&&([m,v,_,A]=[v,m,A,_]),a(this,ke,qc).style.color="";const S=(B,N,T)=>{const L=new Array(256),k=(v-m)/T,D=B/255,j=(N-B)/(255*T);let Z=0;for(let O=0;O<=T;O++){const G=Math.round(m+O*k),Q=D+O*j;for(let mt=Z;mt<=G;mt++)L[mt]=Q;Z=G+1}for(let O=Z;O<256;O++)L[O]=L[Z-1];return L.join(",")},C=`g_${a(this,_a)}_hcm_${e}_filter`,b=h.filter=w(this,ke,Kc).call(this,C);return w(this,ke,dv).call(this,b),w(this,ke,Ih).call(this,S(_[0],A[0],5),S(_[1],A[1],5),S(_[2],A[2],5),b),h.url=w(this,ke,Xc).call(this,C),h.url}destroy(e=!1){e&&a(this,ke,$c).size!==0||(a(this,Vr)&&(a(this,Vr).parentNode.parentNode.remove(),x(this,Vr,null)),a(this,Ml)&&(a(this,Ml).clear(),x(this,Ml,null)),x(this,Fl,0))}}Pl=new WeakMap,Ml=new WeakMap,Vr=new WeakMap,_a=new WeakMap,Ki=new WeakMap,yg=new WeakMap,Fl=new WeakMap,ke=new WeakSet,qi=function(){return a(this,Ml)||x(this,Ml,new Map)},$c=function(){return a(this,yg)||x(this,yg,new Map)},qc=function(){if(!a(this,Vr)){const e=a(this,Ki).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const o=a(this,Ki).createElementNS(SVG_NS,"svg");o.setAttribute("width",0),o.setAttribute("height",0),x(this,Vr,a(this,Ki).createElementNS(SVG_NS,"defs")),e.append(o),o.append(a(this,Vr)),a(this,Ki).body.append(e)}return a(this,Vr)},Rp=function(e){if(e.length===1){const f=e[0],d=new Array(256);for(let v=0;v<256;v++)d[v]=f[v]/255;const m=d.join(",");return[m,m,m]}const[i,o,r]=e,c=new Array(256),u=new Array(256),h=new Array(256);for(let f=0;f<256;f++)c[f]=i[f]/255,u[f]=o[f]/255,h[f]=r[f]/255;return[c.join(","),u.join(","),h.join(",")]},Xc=function(e){if(a(this,Pl)===void 0){x(this,Pl,"");const i=a(this,Ki).URL;i!==a(this,Ki).baseURI&&(isDataScheme(i)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Pl,i.split("#",1)[0]))}return`url(${a(this,Pl)}#${e})`},z_=function(e){const i=a(this,Ki).createElementNS(SVG_NS,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},dv=function(e){const i=a(this,Ki).createElementNS(SVG_NS,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},Kc=function(e){const i=a(this,Ki).createElementNS(SVG_NS,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,ke,qc).append(i),i},Lh=function(e,i,o){const r=a(this,Ki).createElementNS(SVG_NS,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",o),e.append(r)},Ih=function(e,i,o,r){const c=a(this,Ki).createElementNS(SVG_NS,"feComponentTransfer");r.append(c),w(this,ke,Lh).call(this,c,"feFuncR",e),w(this,ke,Lh).call(this,c,"feFuncG",i),w(this,ke,Lh).call(this,c,"feFuncB",o)},fv=function(e,i){const o=a(this,Ki).createElementNS(SVG_NS,"feComponentTransfer");i.append(o),w(this,ke,Lh).call(this,o,"feFuncA",e)},Dh=function(e){return a(this,ke,qc).style.color=e,getRGB(getComputedStyle(a(this,ke,qc)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){const e=await fetchData(t,"arraybuffer");return new Uint8Array(e)}}if(isNodeJS){var packageCapability=Promise.withResolvers(),packageMap=null;(async()=>{const t=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),[]),e=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),i=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0),o=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal$1),void 0);let r,c;return new Map(Object.entries({fs:t,http:e,https:i,url:o,canvas:r,path2d:c}))})().then(t=>{packageMap=t,packageCapability.resolve()},t=>{warn(`loadPackages: ${t}`),packageMap=new Map,packageCapability.resolve()})}class NodePackages{static get promise(){return packageCapability.promise}static get(t){return packageMap==null?void 0:packageMap.get(t)}}async function node_utils_fetchData(g){const e=await NodePackages.get("fs").promises.readFile(g);return new Uint8Array(e)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(t,e){return NodePackages.get("canvas").createCanvas(t,e)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(t){return node_utils_fetchData(t)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(t){return node_utils_fetchData(t)}}const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(g,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],o=new Path2D;o.rect(t[0],t[1],e,i),g.clip(o)}class BaseShadingPattern{getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,o){let r;if(o===PathType.STROKE||o===PathType.FILL){const c=e.current.getClippedPathBoundingBox(o,getCurrentTransform(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),d=f.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-c[0],-c[1]),i=Util.transform(i,[1,0,0,1,c[0],c[1]]),d.transform(...e.baseTransform),this.matrix&&d.transform(...this.matrix),applyBoundingBox(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=t.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(i);r.setTransform(m)}else applyBoundingBox(t,this._bbox),r=this._createGradient(t);return r}}function drawTriangle(g,t,e,i,o,r,c,u){const h=t.coords,f=t.colors,d=g.data,m=g.width*4;let v;h[e+1]>h[i+1]&&(v=e,e=i,i=v,v=r,r=c,c=v),h[i+1]>h[o+1]&&(v=i,i=o,o=v,v=c,c=u,u=v),h[e+1]>h[i+1]&&(v=e,e=i,i=v,v=r,r=c,c=v);const _=(h[e]+t.offsetX)*t.scaleX,A=(h[e+1]+t.offsetY)*t.scaleY,S=(h[i]+t.offsetX)*t.scaleX,C=(h[i+1]+t.offsetY)*t.scaleY,b=(h[o]+t.offsetX)*t.scaleX,I=(h[o+1]+t.offsetY)*t.scaleY;if(A>=I)return;const B=f[r],N=f[r+1],T=f[r+2],L=f[c],k=f[c+1],D=f[c+2],j=f[u],Z=f[u+1],O=f[u+2],G=Math.round(A),Q=Math.round(I);let mt,ot,dt,et,it,$,tt,V;for(let H=G;H<=Q;H++){if(H<C){const X=H<A?0:(A-H)/(A-C);mt=_-(_-S)*X,ot=B-(B-L)*X,dt=N-(N-k)*X,et=T-(T-D)*X}else{let X;H>I?X=1:C===I?X=0:X=(C-H)/(C-I),mt=S-(S-b)*X,ot=L-(L-j)*X,dt=k-(k-Z)*X,et=D-(D-O)*X}let R;H<A?R=0:H>I?R=1:R=(A-H)/(A-I),it=_-(_-b)*R,$=B-(B-j)*R,tt=N-(N-Z)*R,V=T-(T-O)*R;const F=Math.round(Math.min(mt,it)),U=Math.round(Math.max(mt,it));let K=m*H+F*4;for(let X=F;X<=U;X++)R=(mt-X)/(mt-it),R<0?R=0:R>1&&(R=1),d[K++]=ot-(ot-$)*R|0,d[K++]=dt-(dt-tt)*R|0,d[K++]=et-(et-V)*R|0,d[K++]=255}}function drawFigure(g,t,e){const i=t.coords,o=t.colors;let r,c;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(i.length/u)-1,f=u-1;for(r=0;r<h;r++){let d=r*u;for(let m=0;m<f;m++,d++)drawTriangle(g,e,i[d],i[d+1],i[d+u],o[d],o[d+1],o[d+u]),drawTriangle(g,e,i[d+u+1],i[d+1],i[d+u],o[d+u+1],o[d+1],o[d+u])}break;case"triangles":for(r=0,c=i.length;r<c;r+=3)drawTriangle(g,e,i[r],i[r+1],i[r+2],o[r],o[r+1],o[r+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,d=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(d*t[1]*1.1)),3e3),_=f/m,A=d/v,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/_,scaleY:1/A},C=m+2*2,b=v+2*2,I=i.getCanvas("mesh",C,b),B=I.context,N=B.createImageData(m,v);if(e){const L=N.data;for(let k=0,D=L.length;k<D;k+=4)L[k]=e[0],L[k+1]=e[1],L[k+2]=e[2],L[k+3]=255}for(const L of this._figures)drawFigure(N,L,S);return B.putImageData(N,2,2),{canvas:I.canvas,offsetX:u-2*_,offsetY:h-2*A,scaleX:_,scaleY:A}}getPattern(t,e,i,o){applyBoundingBox(t,this._bbox);let r;if(o===PathType.SHADING)r=Util.singularValueDecompose2dScale(getCurrentTransform(t));else if(r=Util.singularValueDecompose2dScale(e.baseTransform),this.matrix){const u=Util.singularValueDecompose2dScale(this.matrix);r=[r[0]*u[0],r[1]*u[1]]}const c=this._createMeshCanvas(r,o===PathType.SHADING?null:this._background,e.cachedCanvases);return o!==PathType.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(g){switch(g[0]){case"RadialAxial":return new RadialAxialShadingPattern(g);case"Mesh":return new MeshShadingPattern(g);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${g[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},_g=class _g{constructor(t,e,i,o,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=o,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:o,tilingType:r,color:c,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),info("TilingType: "+r);const d=e[0],m=e[1],v=e[2],_=e[3],A=v-d,S=_-m,C=Util.singularValueDecompose2dScale(this.matrix),b=Util.singularValueDecompose2dScale(this.baseTransform),I=C[0]*b[0],B=C[1]*b[1];let N=A,T=S,L=!1,k=!1;const D=Math.ceil(h*I),j=Math.ceil(f*B),Z=Math.ceil(A*I),O=Math.ceil(S*B);D>=Z?N=h:L=!0,j>=O?T=f:k=!0;const G=this.getSizeAndScale(N,this.ctx.canvas.width,I),Q=this.getSizeAndScale(T,this.ctx.canvas.height,B),mt=t.cachedCanvases.getCanvas("pattern",G.size,Q.size),ot=mt.context,dt=u.createCanvasGraphics(ot);if(dt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(dt,o,c),ot.translate(-G.scale*d,-Q.scale*m),dt.transform(G.scale,0,0,Q.scale,0,0),ot.save(),this.clipBbox(dt,d,m,v,_),dt.baseTransform=getCurrentTransform(dt.ctx),dt.executeOperatorList(i),dt.endDrawing(),ot.restore(),L||k){const et=mt.canvas;L&&(N=h),k&&(T=f);const it=this.getSizeAndScale(N,this.ctx.canvas.width,I),$=this.getSizeAndScale(T,this.ctx.canvas.height,B),tt=it.size,V=$.size,H=t.cachedCanvases.getCanvas("pattern-workaround",tt,V),R=H.context,F=L?Math.floor(A/h):0,U=k?Math.floor(S/f):0;for(let K=0;K<=F;K++)for(let X=0;X<=U;X++)R.drawImage(et,tt*K,V*X,tt,V,0,0,tt,V);return{canvas:H.canvas,scaleX:it.scale,scaleY:$.scale,offsetX:d,offsetY:m}}return{canvas:mt.canvas,scaleX:G.scale,scaleY:Q.scale,offsetX:d,offsetY:m}}getSizeAndScale(t,e,i){const o=Math.max(_g.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=o?r=o:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,o,r){const c=o-e,u=r-i;t.ctx.rect(e,i,c,u),t.current.updateRectMinMax(getCurrentTransform(t.ctx),[e,i,o,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const o=t.ctx,r=t.current;switch(e){case PaintType.COLORED:const c=this.ctx;o.fillStyle=c.fillStyle,o.strokeStyle=c.strokeStyle,r.fillColor=c.fillStyle,r.strokeColor=c.strokeStyle;break;case PaintType.UNCOLORED:const u=Util.makeHexColor(i[0],i[1],i[2]);o.fillStyle=u,o.strokeStyle=u,r.fillColor=u,r.strokeColor=u;break;default:throw new FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,o){let r=i;o!==PathType.SHADING&&(r=Util.transform(r,e.baseTransform),this.matrix&&(r=Util.transform(r,this.matrix)));const c=this.createPatternCanvas(e);let u=new DOMMatrix(r);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const h=t.createPattern(c.canvas,"repeat");return h.setTransform(u),h}};xe(_g,"MAX_PATTERN_SIZE",3e3);let TilingPattern=_g;function convertBlackAndWhiteToRGBA({src:g,srcPos:t=0,dest:e,width:i,height:o,nonBlackColor:r=4294967295,inverseDecode:c=!1}){const u=util_FeatureTest.isLittleEndian?4278190080:255,[h,f]=c?[r,u]:[u,r],d=i>>3,m=i&7,v=g.length;e=new Uint32Array(e.buffer);let _=0;for(let A=0;A<o;A++){for(const C=t+d;t<C;t++){const b=t<v?g[t]:255;e[_++]=b&128?f:h,e[_++]=b&64?f:h,e[_++]=b&32?f:h,e[_++]=b&16?f:h,e[_++]=b&8?f:h,e[_++]=b&4?f:h,e[_++]=b&2?f:h,e[_++]=b&1?f:h}if(m===0)continue;const S=t<v?g[t++]:255;for(let C=0;C<m;C++)e[_++]=S&1<<7-C?f:h}return{srcPos:t,destPos:_}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,MAX_SIZE_TO_COMPILE=1e3,FULL_CHUNK_HEIGHT=16;function mirrorContextOperations(g,t){if(g._removeMirroring)throw new Error("Context is already forwarding operations.");g.__originalSave=g.save,g.__originalRestore=g.restore,g.__originalRotate=g.rotate,g.__originalScale=g.scale,g.__originalTranslate=g.translate,g.__originalTransform=g.transform,g.__originalSetTransform=g.setTransform,g.__originalResetTransform=g.resetTransform,g.__originalClip=g.clip,g.__originalMoveTo=g.moveTo,g.__originalLineTo=g.lineTo,g.__originalBezierCurveTo=g.bezierCurveTo,g.__originalRect=g.rect,g.__originalClosePath=g.closePath,g.__originalBeginPath=g.beginPath,g._removeMirroring=()=>{g.save=g.__originalSave,g.restore=g.__originalRestore,g.rotate=g.__originalRotate,g.scale=g.__originalScale,g.translate=g.__originalTranslate,g.transform=g.__originalTransform,g.setTransform=g.__originalSetTransform,g.resetTransform=g.__originalResetTransform,g.clip=g.__originalClip,g.moveTo=g.__originalMoveTo,g.lineTo=g.__originalLineTo,g.bezierCurveTo=g.__originalBezierCurveTo,g.rect=g.__originalRect,g.closePath=g.__originalClosePath,g.beginPath=g.__originalBeginPath,delete g._removeMirroring},g.save=function(){t.save(),this.__originalSave()},g.restore=function(){t.restore(),this.__originalRestore()},g.translate=function(i,o){t.translate(i,o),this.__originalTranslate(i,o)},g.scale=function(i,o){t.scale(i,o),this.__originalScale(i,o)},g.transform=function(i,o,r,c,u,h){t.transform(i,o,r,c,u,h),this.__originalTransform(i,o,r,c,u,h)},g.setTransform=function(i,o,r,c,u,h){t.setTransform(i,o,r,c,u,h),this.__originalSetTransform(i,o,r,c,u,h)},g.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},g.rotate=function(i){t.rotate(i),this.__originalRotate(i)},g.clip=function(i){t.clip(i),this.__originalClip(i)},g.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},g.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},g.bezierCurveTo=function(e,i,o,r,c,u){t.bezierCurveTo(e,i,o,r,c,u),this.__originalBezierCurveTo(e,i,o,r,c,u)},g.rect=function(e,i,o,r){t.rect(e,i,o,r),this.__originalRect(e,i,o,r)},g.closePath=function(){t.closePath(),this.__originalClosePath()},g.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let o;return this.cache[t]!==void 0?(o=this.cache[t],this.canvasFactory.reset(o,e,i)):(o=this.canvasFactory.create(e,i),this.cache[t]=o),o}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function drawImageAtIntegerCoords(g,t,e,i,o,r,c,u,h,f){const[d,m,v,_,A,S]=getCurrentTransform(g);if(m===0&&v===0){const I=c*d+A,B=Math.round(I),N=u*_+S,T=Math.round(N),L=(c+h)*d+A,k=Math.abs(Math.round(L)-B)||1,D=(u+f)*_+S,j=Math.abs(Math.round(D)-T)||1;return g.setTransform(Math.sign(d),0,0,Math.sign(_),B,T),g.drawImage(t,e,i,o,r,0,0,k,j),g.setTransform(d,m,v,_,A,S),[k,j]}if(d===0&&_===0){const I=u*v+A,B=Math.round(I),N=c*m+S,T=Math.round(N),L=(u+f)*v+A,k=Math.abs(Math.round(L)-B)||1,D=(c+h)*m+S,j=Math.abs(Math.round(D)-T)||1;return g.setTransform(0,Math.sign(m),Math.sign(v),0,B,T),g.drawImage(t,e,i,o,r,0,0,j,k),g.setTransform(d,m,v,_,A,S),[j,k]}g.drawImage(t,e,i,o,r,c,u,h,f);const C=Math.hypot(d,m),b=Math.hypot(v,_);return[C*h,b*f]}function compileType3Glyph(g){const{width:t,height:e}=g;if(t>MAX_SIZE_TO_COMPILE||e>MAX_SIZE_TO_COMPILE)return null;const i=1e3,o=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let c=new Uint8Array(r*(e+1)),u,h,f;const d=t+7&-8;let m=new Uint8Array(d*e),v=0;for(const b of g.data){let I=128;for(;I>0;)m[v++]=b&I?0:255,I>>=1}let _=0;for(v=0,m[v]!==0&&(c[0]=1,++_),h=1;h<t;h++)m[v]!==m[v+1]&&(c[h]=m[v]?2:1,++_),v++;for(m[v]!==0&&(c[h]=2,++_),u=1;u<e;u++){v=u*d,f=u*r,m[v-d]!==m[v]&&(c[f]=m[v]?1:8,++_);let b=(m[v]?4:0)+(m[v-d]?8:0);for(h=1;h<t;h++)b=(b>>2)+(m[v+1]?4:0)+(m[v-d+1]?8:0),o[b]&&(c[f+h]=o[b],++_),v++;if(m[v-d]!==m[v]&&(c[f+h]=m[v]?2:4,++_),_>i)return null}for(v=d*(e-1),f=u*r,m[v]!==0&&(c[f]=8,++_),h=1;h<t;h++)m[v]!==m[v+1]&&(c[f+h]=m[v]?4:8,++_),v++;if(m[v]!==0&&(c[f+h]=4,++_),_>i)return null;const A=new Int32Array([0,r,-1,0,-r,0,0,0,1]),S=new Path2D;for(u=0;_&&u<=e;u++){let b=u*r;const I=b+t;for(;b<I&&!c[b];)b++;if(b===I)continue;S.moveTo(b%r,u);const B=b;let N=c[b];do{const T=A[N];do b+=T;while(!c[b]);const L=c[b];L!==5&&L!==10?(N=L,c[b]=0):(N=L&51*N>>4,c[b]&=N>>2|N<<2),S.lineTo(b%r,b/r|0),c[b]||--_}while(B!==b);--u}return m=null,c=null,function(b){b.save(),b.scale(1/t,-1/e),b.translate(0,-e),b.fill(S),b.beginPath(),b.restore()}}class CanvasExtraState{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=Util.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=Util.applyTransform(e,t),o=Util.applyTransform(e.slice(2),t),r=Util.applyTransform([e[0],e[3]],t),c=Util.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],o[0],r[0],c[0]),this.minY=Math.min(this.minY,i[1],o[1],r[1],c[1]),this.maxX=Math.max(this.maxX,i[0],o[0],r[0],c[0]),this.maxY=Math.max(this.maxY,i[1],o[1],r[1],c[1])}updateScalingPathMinMax(t,e){Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,o,r,c,u,h,f,d){const m=Util.bezierBoundingBox(e,i,o,r,c,u,h,f,d);d||this.updateRectMinMax(t,m)}getPathBoundingBox(t=PathType.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===PathType.STROKE){e||unreachable("Stroke bounding box must include transform.");const o=Util.singularValueDecompose2dScale(e),r=o[0]*this.lineWidth/2,c=o[1]*this.lineWidth/2;i[0]-=r,i[1]-=c,i[2]+=r,i[3]+=c}return i}updateClipFromPath(){const t=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=PathType.FILL,e=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function putBinaryImageData(g,t){if(typeof ImageData<"u"&&t instanceof ImageData){g.putImageData(t,0,0);return}const e=t.height,i=t.width,o=e%FULL_CHUNK_HEIGHT,r=(e-o)/FULL_CHUNK_HEIGHT,c=o===0?r:r+1,u=g.createImageData(i,FULL_CHUNK_HEIGHT);let h=0,f;const d=t.data,m=u.data;let v,_,A,S;if(t.kind===util_ImageKind.GRAYSCALE_1BPP){const C=d.byteLength,b=new Uint32Array(m.buffer,0,m.byteLength>>2),I=b.length,B=i+7>>3,N=4294967295,T=util_FeatureTest.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(A=v<r?FULL_CHUNK_HEIGHT:o,f=0,_=0;_<A;_++){const L=C-h;let k=0;const D=L>B?i:L*8-7,j=D&-8;let Z=0,O=0;for(;k<j;k+=8)O=d[h++],b[f++]=O&128?N:T,b[f++]=O&64?N:T,b[f++]=O&32?N:T,b[f++]=O&16?N:T,b[f++]=O&8?N:T,b[f++]=O&4?N:T,b[f++]=O&2?N:T,b[f++]=O&1?N:T;for(;k<D;k++)Z===0&&(O=d[h++],Z=128),b[f++]=O&Z?N:T,Z>>=1}for(;f<I;)b[f++]=0;g.putImageData(u,0,v*FULL_CHUNK_HEIGHT)}}else if(t.kind===util_ImageKind.RGBA_32BPP){for(_=0,S=i*FULL_CHUNK_HEIGHT*4,v=0;v<r;v++)m.set(d.subarray(h,h+S)),h+=S,g.putImageData(u,0,_),_+=FULL_CHUNK_HEIGHT;v<c&&(S=i*o*4,m.set(d.subarray(h,h+S)),g.putImageData(u,0,_))}else if(t.kind===util_ImageKind.RGB_24BPP)for(A=FULL_CHUNK_HEIGHT,S=i*A,v=0;v<c;v++){for(v>=r&&(A=o,S=i*A),f=0,_=S;_--;)m[f++]=d[h++],m[f++]=d[h++],m[f++]=d[h++],m[f++]=255;g.putImageData(u,0,v*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${t.kind}`)}function putBinaryImageMask(g,t){if(t.bitmap){g.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,o=e%FULL_CHUNK_HEIGHT,r=(e-o)/FULL_CHUNK_HEIGHT,c=o===0?r:r+1,u=g.createImageData(i,FULL_CHUNK_HEIGHT);let h=0;const f=t.data,d=u.data;for(let m=0;m<c;m++){const v=m<r?FULL_CHUNK_HEIGHT:o;({srcPos:h}=convertBlackAndWhiteToRGBA({src:f,srcPos:h,dest:d,width:i,height:v,nonBlackColor:0})),g.putImageData(u,0,m*FULL_CHUNK_HEIGHT)}}function copyCtxState(g,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)g[i]!==void 0&&(t[i]=g[i]);g.setLineDash!==void 0&&(t.setLineDash(g.getLineDash()),t.lineDashOffset=g.lineDashOffset)}function resetCtxToDefault(g){if(g.strokeStyle=g.fillStyle="#000000",g.fillRule="nonzero",g.globalAlpha=1,g.lineWidth=1,g.lineCap="butt",g.lineJoin="miter",g.miterLimit=10,g.globalCompositeOperation="source-over",g.font="10px sans-serif",g.setLineDash!==void 0&&(g.setLineDash([]),g.lineDashOffset=0),!isNodeJS){const{filter:t}=g;t!=="none"&&t!==""&&(g.filter="none")}}function getImageSmoothingEnabled(g,t){if(t)return!0;const e=Util.singularValueDecompose2dScale(g);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*PixelsPerInch.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var jo,pv,gv;const Ry=class Ry{constructor(t,e,i,o,r,{optionalContentConfig:c,markedContentStack:u=null},h,f){M(this,jo);this.ctx=t,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=o,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:o=null}){const r=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=o||"#ffffff",this.ctx.fillRect(0,0,r,c),this.ctx.fillStyle=u,i){const h=this.cachedCanvases.getCanvas("transparent",r,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(t,e,i,o){const r=t.argsArray,c=t.fnArray;let u=e||0;const h=r.length;if(h===u)return u;const f=h-u>EXECUTION_STEPS&&typeof i=="function",d=f?Date.now()+EXECUTION_TIME:0;let m=0;const v=this.commonObjs,_=this.objs;let A;for(;;){if(o!==void 0&&u===o.nextBreakPoint)return o.breakIt(u,i),u;if(A=c[u],A!==OPS.dependency)this[A].apply(this,r[u]);else for(const S of r[u]){const C=S.startsWith("g_")?v:_;if(!C.has(S))return C.get(S,i),u}if(u++,u===h)return u;if(f&&++m>EXECUTION_STEPS){if(Date.now()>d)return i(),u;m=0}}}endDrawing(){w(this,jo,pv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),w(this,jo,gv).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,o=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=i,h=o,f="prescale1",d,m;for(;r>2&&u>1||c>2&&h>1;){let v=u,_=h;r>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),r/=u/v),c>2&&h>1&&(_=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/_),d=this.cachedCanvases.getCanvas(f,v,_),m=d.context,m.clearRect(0,0,v,_),m.drawImage(t,0,0,u,h,0,0,v,_),t=d.canvas,u=v,h=_,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:o}=t,r=this.current.fillColor,c=this.current.patternFill,u=getCurrentTransform(e);let h,f,d,m;if((t.bitmap||t.data)&&t.count>1){const D=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),r]),h=this._cachedBitmapsMap.get(D),h||(h=new Map,this._cachedBitmapsMap.set(D,h));const j=h.get(f);if(j&&!c){const Z=Math.round(Math.min(u[0],u[2])+u[4]),O=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:j,offsetX:Z,offsetY:O}}d=j}d||(m=this.cachedCanvases.getCanvas("maskCanvas",i,o),putBinaryImageMask(m.context,t));let v=Util.transform(u,[1/i,0,0,-1/o,0,0]);v=Util.transform(v,[1,0,0,1,0,-o]);const[_,A,S,C]=Util.getAxialAlignedBoundingBox([0,0,i,o],v),b=Math.round(S-_)||1,I=Math.round(C-A)||1,B=this.cachedCanvases.getCanvas("fillCanvas",b,I),N=B.context,T=_,L=A;N.translate(-T,-L),N.transform(...v),d||(d=this._scaleImage(m.canvas,getCurrentTransformInverse(N)),d=d.img,h&&c&&h.set(f,d)),N.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(N),t.interpolate),drawImageAtIntegerCoords(N,d,0,0,d.width,d.height,0,0,i,o),N.globalCompositeOperation="source-in";const k=Util.transform(getCurrentTransformInverse(N),[1,0,0,1,-T,-L]);return N.fillStyle=c?r.getPattern(e,this,k,PathType.FILL):r,N.fillRect(0,0,i,o),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,B.canvas)),{canvas:B.canvas,offsetX:Math.round(T),offsetY:Math.round(L)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=LINE_CAP_STYLES[t]}setLineJoin(t){this.ctx.lineJoin=LINE_JOIN_STYLES[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=o.context;const r=this.ctx;r.setTransform(...getCurrentTransform(this.suspendedCtx)),copyCtxState(this.suspendedCtx,r),mirrorContextOperations(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,o){const r=o[0],c=o[1],u=o[2]-r,h=o[3]-c;u===0||h===0||(this.genericComposeSMask(e.context,i,u,h,e.subtype,e.backdrop,e.transferMap,r,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,o,r,c,u,h,f,d,m){let v=t.canvas,_=h-d,A=f-m;if(c){const C=Util.makeHexColor(...c);if(_<0||A<0||_+i>v.width||A+o>v.height){const b=this.cachedCanvases.getCanvas("maskExtension",i,o),I=b.context;I.drawImage(v,-_,-A),I.globalCompositeOperation="destination-atop",I.fillStyle=C,I.fillRect(0,0,i,o),I.globalCompositeOperation="source-over",v=b.canvas,_=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(_,A,i,o),t.clip(b),t.globalCompositeOperation="destination-atop",t.fillStyle=C,t.fillRect(_,A,i,o),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,f,i,o),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(v,_,A,i,o,h,f,i,o),e.restore()}save(){this.inSMaskMode?(copyCtxState(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),copyCtxState(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,o,r,c){this.ctx.transform(t,e,i,o,r,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const o=this.ctx,r=this.current;let c=r.x,u=r.y,h,f;const d=getCurrentTransform(o),m=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,v=m?i.slice(0):null;for(let _=0,A=0,S=t.length;_<S;_++)switch(t[_]|0){case OPS.rectangle:c=e[A++],u=e[A++];const C=e[A++],b=e[A++],I=c+C,B=u+b;o.moveTo(c,u),C===0||b===0?o.lineTo(I,B):(o.lineTo(I,u),o.lineTo(I,B),o.lineTo(c,B)),m||r.updateRectMinMax(d,[c,u,I,B]),o.closePath();break;case OPS.moveTo:c=e[A++],u=e[A++],o.moveTo(c,u),m||r.updatePathMinMax(d,c,u);break;case OPS.lineTo:c=e[A++],u=e[A++],o.lineTo(c,u),m||r.updatePathMinMax(d,c,u);break;case OPS.curveTo:h=c,f=u,c=e[A+4],u=e[A+5],o.bezierCurveTo(e[A],e[A+1],e[A+2],e[A+3],c,u),r.updateCurvePathMinMax(d,h,f,e[A],e[A+1],e[A+2],e[A+3],c,u,v),A+=6;break;case OPS.curveTo2:h=c,f=u,o.bezierCurveTo(c,u,e[A],e[A+1],e[A+2],e[A+3]),r.updateCurvePathMinMax(d,h,f,c,u,e[A],e[A+1],e[A+2],e[A+3],v),c=e[A+2],u=e[A+3],A+=4;break;case OPS.curveTo3:h=c,f=u,c=e[A+2],u=e[A+3],o.bezierCurveTo(e[A],e[A+1],c,u,c,u),r.updateCurvePathMinMax(d,h,f,e[A],e[A+1],c,u,c,u,v),A+=4;break;case OPS.closePath:o.closePath();break}m&&r.updateScalingPathMinMax(d,v),r.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,getCurrentTransformInverse(e),PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let r=!1;o&&(e.save(),e.fillStyle=i.getPattern(e,this,getCurrentTransformInverse(e),PathType.FILL),r=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var d;const i=this.commonObjs.get(t),o=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=i.fontMatrix||FONT_IDENTITY_MATRIX,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+t),e<0?(e=-e,o.fontDirection=-1):o.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",c=((d=i.systemFontInfo)==null?void 0:d.css)||`"${r}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const h=i.italic?"italic":"normal";let f=e;e<MIN_FONT_SIZE?f=MIN_FONT_SIZE:e>MAX_FONT_SIZE&&(f=MAX_FONT_SIZE),this.current.fontSizeScale=e/f,this.ctx.font=`${h} ${u} ${f}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,o,r,c){this.current.textMatrix=[t,e,i,o,r,c],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,o){const r=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,f=c.fontSize/c.fontSizeScale,d=h&TextRenderingMode.FILL_STROKE_MASK,m=!!(h&TextRenderingMode.ADD_TO_PATH_FLAG),v=c.patternFill&&!u.missingFile;let _;(u.disableFontFace||m||v)&&(_=u.getPathGenerator(this.commonObjs,t)),u.disableFontFace||v?(r.save(),r.translate(e,i),r.beginPath(),_(r,f),o&&r.setTransform(...o),(d===TextRenderingMode.FILL||d===TextRenderingMode.FILL_STROKE)&&r.fill(),(d===TextRenderingMode.STROKE||d===TextRenderingMode.FILL_STROKE)&&r.stroke(),r.restore()):((d===TextRenderingMode.FILL||d===TextRenderingMode.FILL_STROKE)&&r.fillText(t,e,i),(d===TextRenderingMode.STROKE||d===TextRenderingMode.FILL_STROKE)&&r.strokeText(t,e,i)),m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(r),x:e,y:i,fontSize:f,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let o=3;o<e.length;o+=4)if(e[o]>0&&e[o]<255){i=!0;break}return shadow(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const o=e.fontSize;if(o===0)return;const r=this.ctx,c=e.fontSizeScale,u=e.charSpacing,h=e.wordSpacing,f=e.fontDirection,d=e.textHScale*f,m=t.length,v=i.vertical,_=v?1:-1,A=i.defaultVMetrics,S=o*e.fontMatrix[0],C=e.textRenderingMode===TextRenderingMode.FILL&&!i.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),f>0?r.scale(d,-1):r.scale(d,1);let b;if(e.patternFill){r.save();const L=e.fillColor.getPattern(r,this,getCurrentTransformInverse(r),PathType.FILL);b=getCurrentTransform(r),r.restore(),r.fillStyle=L}let I=e.lineWidth;const B=e.textMatrixScale;if(B===0||I===0){const L=e.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(L===TextRenderingMode.STROKE||L===TextRenderingMode.FILL_STROKE)&&(I=this.getSinglePixelWidth())}else I/=B;if(c!==1&&(r.scale(c,c),I/=c),r.lineWidth=I,i.isInvalidPDFjsFont){const L=[];let k=0;for(const D of t)L.push(D.unicode),k+=D.width;r.fillText(L.join(""),0,0),e.x+=k*S*d,r.restore(),this.compose();return}let N=0,T;for(T=0;T<m;++T){const L=t[T];if(typeof L=="number"){N+=_*L*o/1e3;continue}let k=!1;const D=(L.isSpace?h:0)+u,j=L.fontChar,Z=L.accent;let O,G,Q=L.width;if(v){const ot=L.vmetric||A,dt=-(L.vmetric?ot[1]:Q*.5)*S,et=ot[2]*S;Q=ot?-ot[0]:Q,O=dt/c,G=(N+et)/c}else O=N/c,G=0;if(i.remeasure&&Q>0){const ot=r.measureText(j).width*1e3/o*c;if(Q<ot&&this.isFontSubpixelAAEnabled){const dt=Q/ot;k=!0,r.save(),r.scale(dt,1),O/=dt}else Q!==ot&&(O+=(Q-ot)/2e3*o/c)}if(this.contentVisible&&(L.isInFont||i.missingFile)){if(C&&!Z)r.fillText(j,O,G);else if(this.paintChar(j,O,G,b),Z){const ot=O+o*Z.offset.x/c,dt=G-o*Z.offset.y/c;this.paintChar(Z.fontChar,ot,dt,b)}}const mt=v?Q*S-D*f:Q*S+D*f;N+=mt,k&&r.restore()}v?e.y-=N:e.x+=N*d,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,o=i.font,r=i.fontSize,c=i.fontDirection,u=o.vertical?1:-1,h=i.charSpacing,f=i.wordSpacing,d=i.textHScale*c,m=i.fontMatrix||FONT_IDENTITY_MATRIX,v=t.length,_=i.textRenderingMode===TextRenderingMode.INVISIBLE;let A,S,C,b;if(!(_||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(d,c),A=0;A<v;++A){if(S=t[A],typeof S=="number"){b=u*S*r/1e3,this.ctx.translate(b,0),i.x+=b*d;continue}const I=(S.isSpace?f:0)+h,B=o.charProcOperatorList[S.operatorListId];if(!B){warn(`Type3 character "${S.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=S,this.save(),e.scale(r,r),e.transform(...m),this.executeOperatorList(B),this.restore()),C=Util.applyTransform([S.width,0],m)[0]*r+I,e.translate(C,0),i.x+=C*d}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,o,r,c){this.ctx.rect(i,o,r-i,c-o),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],o=this.baseTransform||getCurrentTransform(this.ctx),r={createCanvasGraphics:c=>new Ry(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new TilingPattern(t,i,this.ctx,r,o)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=Util.makeHexColor(t,e,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=Util.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=getShadingPattern(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,getCurrentTransformInverse(e),PathType.SHADING);const o=getCurrentTransformInverse(e);{const{width:r,height:c}=e.canvas,[u,h,f,d]=Util.getAxialAlignedBoundingBox([0,0,r,c],o);this.ctx.fillRect(u,h,f-u,d-h)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=getCurrentTransform(this.ctx),e)){const i=e[2]-e[0],o=e[3]-e[1];this.ctx.rect(e[0],e[1],i,o),this.current.updateRectMinMax(getCurrentTransform(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||info("TODO: Support non-isolated groups."),t.knockout&&warn("Knockout groups not supported.");const i=getCurrentTransform(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=Util.getAxialAlignedBoundingBox(t.bbox,getCurrentTransform(e));const r=[0,0,e.canvas.width,e.canvas.height];o=Util.intersect(o,r)||[0,0,0,0];const c=Math.floor(o[0]),u=Math.floor(o[1]),h=Math.max(Math.ceil(o[2])-c,1),f=Math.max(Math.ceil(o[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,f]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(d,h,f),v=m.context;v.translate(-c,-u),v.transform(...i),t.smask?this.smaskStack.push({canvas:m.canvas,context:v,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(c,u),e.save()),copyCtxState(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const o=getCurrentTransform(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...o);const r=Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],o);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,i,o,r){if(w(this,jo,pv).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const c=e[2]-e[0],u=e[3]-e[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=c,e[3]=u;const[h,f]=Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx)),{viewportScale:d}=this,m=Math.ceil(c*this.outputScaleX*d),v=Math.ceil(u*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(m,v);const{canvas:_,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(t,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(h,0,0,-f,0,u*f),resetCtxToDefault(this.ctx)}else resetCtxToDefault(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],c,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...o)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),w(this,jo,gv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,o=this.processingType3;if(o&&(o.compiled===void 0&&(o.compiled=compileType3Glyph(t)),o.compiled)){o.compiled(i);return}const r=this._createMaskCanvas(t),c=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,o=0,r,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const h=getCurrentTransform(u);u.transform(e,i,o,r,0,0);const f=this._createMaskCanvas(t);u.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]);for(let d=0,m=c.length;d<m;d+=2){const v=Util.transform(h,[e,i,o,r,c[d],c[d+1]]),[_,A]=Util.applyTransform([0,0],v);u.drawImage(f.canvas,_,A)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,o=this.current.patternFill;for(const r of t){const{data:c,width:u,height:h,transform:f}=r,d=this.cachedCanvases.getCanvas("maskCanvas",u,h),m=d.context;m.save();const v=this.getObject(c,r);putBinaryImageMask(m,v),m.globalCompositeOperation="source-in",m.fillStyle=o?i.getPattern(m,this,getCurrentTransformInverse(e),PathType.FILL):i,m.fillRect(0,0,u,h),m.restore(),e.save(),e.transform(...f),e.scale(1,-1),drawImageAtIntegerCoords(e,d.canvas,0,0,u,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,o){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){warn("Dependent image isn't ready yet");return}const c=r.width,u=r.height,h=[];for(let f=0,d=o.length;f<d;f+=2)h.push({transform:[e,0,0,i,o[f],o[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(r,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:o}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,o),c=r.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,o=this.ctx;if(this.save(),!isNodeJS){const{filter:u}=o;u!=="none"&&u!==""&&(o.filter="none")}o.scale(1/e,-1/i);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,i).context;putBinaryImageData(h,t),r=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(r,getCurrentTransformInverse(o));o.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(o),t.interpolate),drawImageAtIntegerCoords(o,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const r=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",r,c).context;putBinaryImageData(h,t),o=this.applyTransferMapsToCanvas(h)}for(const r of e)i.save(),i.transform(...r.transform),i.scale(1,-1),drawImageAtIntegerCoords(i,o,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===EO_CLIP?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=getCurrentTransform(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),o=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,o)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:o,d:r}=this.ctx.getTransform();let c,u;if(i===0&&o===0){const h=Math.abs(e),f=Math.abs(r);if(h===f)if(t===0)c=u=1/h;else{const d=h*t;c=u=d<1?1/d:1}else if(t===0)c=1/h,u=1/f;else{const d=h*t,m=f*t;c=d<1?1/d:1,u=m<1?1/m:1}}else{const h=Math.abs(e*r-i*o),f=Math.hypot(e,i),d=Math.hypot(o,r);if(t===0)c=d/h,u=f/h;else{const m=t*h;c=d>m?d/m:1,u=f>m?f/m:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[o,r]=this.getScaleForStroking();if(e.lineWidth=i||1,o===1&&r===1){e.stroke();return}const c=e.getLineDash();if(t&&e.save(),e.scale(o,r),c.length>0){const u=Math.max(o,r);e.setLineDash(c.map(h=>h/u)),e.lineDashOffset/=u}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};jo=new WeakSet,pv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},gv=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let CanvasGraphics=Ry;for(const g in OPS)CanvasGraphics.prototype[g]!==void 0&&(CanvasGraphics.prototype[OPS[g]]=CanvasGraphics.prototype[g]);var _d,Ad;class GlobalWorkerOptions{static get workerPort(){return a(this,_d)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,_d,t)}static get workerSrc(){return a(this,Ad)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,Ad,t)}}_d=new WeakMap,Ad=new WeakMap,M(GlobalWorkerOptions,_d,null),M(GlobalWorkerOptions,Ad,"");const CallbackKind={UNKNOWN:0,DATA:1,ERROR:2},StreamKind={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wrapReason(g){switch(g instanceof Error||typeof g=="object"&&g!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new AbortException(g.message);case"MissingPDFException":return new MissingPDFException(g.message);case"PasswordException":return new PasswordException(g.message,g.code);case"UnexpectedResponseException":return new UnexpectedResponseException(g.message,g.status);case"UnknownErrorException":return new UnknownErrorException(g.message,g.details);default:return new UnknownErrorException(g.message,g.toString())}}var _u,ir,W_,V_,G_,kp;class MessageHandler{constructor(t,e,i){M(this,ir);M(this,_u,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",w(this,ir,W_).bind(this),{signal:a(this,_u).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const o=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[o]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:o,data:e},i)}catch(c){r.reject(c)}return r.promise}sendWithStream(t,e,i,o){const r=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:f,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:t,streamId:r,data:e,desiredSize:f.desiredSize},o),d.promise},pull:f=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,h.postMessage({sourceName:c,targetName:u,stream:StreamKind.PULL,streamId:r,desiredSize:f.desiredSize}),d.promise},cancel:f=>{assert(f instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:StreamKind.CANCEL,streamId:r,reason:wrapReason(f)}),d.promise}},i)}destroy(){var t;(t=a(this,_u))==null||t.abort(),x(this,_u,null)}}_u=new WeakMap,ir=new WeakSet,W_=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){w(this,ir,G_).call(this,t);return}if(t.callback){const i=t.callbackId,o=this.callbackCapabilities[i];if(!o)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===CallbackKind.DATA)o.resolve(t.data);else if(t.callback===CallbackKind.ERROR)o.reject(wrapReason(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,o=t.sourceName,r=this.comObj;new Promise(function(c){c(e(t.data))}).then(function(c){r.postMessage({sourceName:i,targetName:o,callback:CallbackKind.DATA,callbackId:t.callbackId,data:c})},function(c){r.postMessage({sourceName:i,targetName:o,callback:CallbackKind.ERROR,callbackId:t.callbackId,reason:wrapReason(c)})});return}if(t.streamId){w(this,ir,V_).call(this,t);return}e(t.data)},V_=function(t){const e=t.streamId,i=this.sourceName,o=t.sourceName,r=this.comObj,c=this,u=this.actionHandler[t.action],h={enqueue(f,d=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=d,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:o,stream:StreamKind.ENQUEUE,streamId:e,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:o,stream:StreamKind.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){assert(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:o,stream:StreamKind.ERROR,streamId:e,reason:wrapReason(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,new Promise(function(f){f(u(t.data,h))}).then(function(){r.postMessage({sourceName:i,targetName:o,stream:StreamKind.START_COMPLETE,streamId:e,success:!0})},function(f){r.postMessage({sourceName:i,targetName:o,stream:StreamKind.START_COMPLETE,streamId:e,reason:wrapReason(f)})})},G_=function(t){const e=t.streamId,i=this.sourceName,o=t.sourceName,r=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case StreamKind.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(wrapReason(t.reason));break;case StreamKind.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(wrapReason(t.reason));break;case StreamKind.PULL:if(!u){r.postMessage({sourceName:i,targetName:o,stream:StreamKind.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,new Promise(function(h){var f;h((f=u.onPull)==null?void 0:f.call(u))}).then(function(){r.postMessage({sourceName:i,targetName:o,stream:StreamKind.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:i,targetName:o,stream:StreamKind.PULL_COMPLETE,streamId:e,reason:wrapReason(h)})});break;case StreamKind.ENQUEUE:if(assert(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case StreamKind.CLOSE:if(assert(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),w(this,ir,kp).call(this,c,e);break;case StreamKind.ERROR:assert(c,"error should have stream controller"),c.controller.error(wrapReason(t.reason)),w(this,ir,kp).call(this,c,e);break;case StreamKind.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(wrapReason(t.reason)),w(this,ir,kp).call(this,c,e);break;case StreamKind.CANCEL:if(!u)break;new Promise(function(h){var f;h((f=u.onCancel)==null?void 0:f.call(u,wrapReason(t.reason)))}).then(function(){r.postMessage({sourceName:i,targetName:o,stream:StreamKind.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:i,targetName:o,stream:StreamKind.CANCEL_COMPLETE,streamId:e,reason:wrapReason(h)})}),u.sinkCapability.reject(wrapReason(t.reason)),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},kp=async function(t,e){var i,o,r;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(o=t.pullCall)==null?void 0:o.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Ll,bd;class Metadata{constructor({parsedData:t,rawData:e}){M(this,Ll);M(this,bd);x(this,Ll,t),x(this,bd,e)}getRaw(){return a(this,bd)}get(t){return a(this,Ll).get(t)??null}getAll(){return objectFromMap(a(this,Ll))}has(t){return a(this,Ll).has(t)}}Ll=new WeakMap,bd=new WeakMap;const INTERNAL=Symbol("INTERNAL");var Ed,wd,Sd,Au;class OptionalContentGroup{constructor(t,{name:e,intent:i,usage:o,rbGroups:r}){M(this,Ed,!1);M(this,wd,!1);M(this,Sd,!1);M(this,Au,!0);x(this,Ed,!!(t&RenderingIntentFlag.DISPLAY)),x(this,wd,!!(t&RenderingIntentFlag.PRINT)),this.name=e,this.intent=i,this.usage=o,this.rbGroups=r}get visible(){if(a(this,Sd))return a(this,Au);if(!a(this,Au))return!1;const{print:t,view:e}=this.usage;return a(this,Ed)?(e==null?void 0:e.viewState)!=="OFF":a(this,wd)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==INTERNAL&&unreachable("Internal method `_setVisible` called."),x(this,Sd,i),x(this,Au,e)}}Ed=new WeakMap,wd=new WeakMap,Sd=new WeakMap,Au=new WeakMap;var bo,Nn,bu,Eu,xd,mv;class OptionalContentConfig{constructor(t,e=RenderingIntentFlag.DISPLAY){M(this,xd);M(this,bo,null);M(this,Nn,new Map);M(this,bu,null);M(this,Eu,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,Eu,t.order);for(const i of t.groups)a(this,Nn).set(i.id,new OptionalContentGroup(e,i));if(t.baseState==="OFF")for(const i of a(this,Nn).values())i._setVisible(INTERNAL,!1);for(const i of t.on)a(this,Nn).get(i)._setVisible(INTERNAL,!0);for(const i of t.off)a(this,Nn).get(i)._setVisible(INTERNAL,!1);x(this,bu,this.getHash())}}isVisible(t){if(a(this,Nn).size===0)return!0;if(!t)return info("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Nn).has(t.id)?a(this,Nn).get(t.id).visible:(warn(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return w(this,xd,mv).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Nn).has(e))return warn(`Optional content group not found: ${e}`),!0;if(a(this,Nn).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Nn).has(e))return warn(`Optional content group not found: ${e}`),!0;if(!a(this,Nn).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Nn).has(e))return warn(`Optional content group not found: ${e}`),!0;if(!a(this,Nn).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Nn).has(e))return warn(`Optional content group not found: ${e}`),!0;if(a(this,Nn).get(e).visible)return!1}return!0}return warn(`Unknown optional content policy ${t.policy}.`),!0}return warn(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var r;const o=a(this,Nn).get(t);if(!o){warn(`Optional content group not found: ${t}`);return}if(i&&e&&o.rbGroups.length)for(const c of o.rbGroups)for(const u of c)u!==t&&((r=a(this,Nn).get(u))==null||r._setVisible(INTERNAL,!1,!0));o._setVisible(INTERNAL,!!e,!0),x(this,bo,null)}setOCGState({state:t,preserveRB:e}){let i;for(const o of t){switch(o){case"ON":case"OFF":case"Toggle":i=o;continue}const r=a(this,Nn).get(o);if(r)switch(i){case"ON":this.setVisibility(o,!0,e);break;case"OFF":this.setVisibility(o,!1,e);break;case"Toggle":this.setVisibility(o,!r.visible,e);break}}x(this,bo,null)}get hasInitialVisibility(){return a(this,bu)===null||this.getHash()===a(this,bu)}getOrder(){return a(this,Nn).size?a(this,Eu)?a(this,Eu).slice():[...a(this,Nn).keys()]:null}getGroups(){return a(this,Nn).size>0?objectFromMap(a(this,Nn)):null}getGroup(t){return a(this,Nn).get(t)||null}getHash(){if(a(this,bo)!==null)return a(this,bo);const t=new MurmurHash3_64;for(const[e,i]of a(this,Nn))t.update(`${e}:${i.visible}`);return x(this,bo,t.hexdigest())}}bo=new WeakMap,Nn=new WeakMap,bu=new WeakMap,Eu=new WeakMap,xd=new WeakSet,mv=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let o=1;o<e;o++){const r=t[o];let c;if(Array.isArray(r))c=w(this,xd,mv).call(this,r);else if(a(this,Nn).has(r))c=a(this,Nn).get(r).visible;else return warn(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"};class PDFDataTransportStream{constructor(t,{disableRange:e=!1,disableStream:i=!1}){assert(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:o,initialData:r,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,(r==null?void 0:r.length)>0){const h=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=o,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const o=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});assert(o,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,o,r;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(r=(o=this._fullRequestReader)==null?void 0:o.onProgress)==null||r.call(o,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new PDFDataTransportStreamRangeReader(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(t,e,i=!1,o=null){this._stream=t,this._done=i||!1,this._filename=isPdfFile(o)?o:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(g){let t=!0,e=i("filename\\*","i").exec(g);if(e){e=e[1];let d=u(e);return d=unescape(d),d=h(d),d=f(d),r(d)}if(e=c(g),e){const d=f(e);return r(d)}if(e=i("filename","i").exec(g),e){e=e[1];let d=u(e);return d=f(d),r(d)}function i(d,m){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function o(d,m){if(d){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(d,{fatal:!0}),_=stringToBytes(m);m=v.decode(_),t=!1}catch{}}return m}function r(d){return t&&/[\x80-\xff]/.test(d)&&(d=o("utf-8",d),t&&(d=o("iso-8859-1",d))),d}function c(d){const m=[];let v;const _=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(d))!==null;){let[,S,C,b]=v;if(S=parseInt(S,10),S in m){if(S===0)break;continue}m[S]=[C,b]}const A=[];for(let S=0;S<m.length&&S in m;++S){let[C,b]=m[S];b=u(b),C&&(b=unescape(b),S===0&&(b=h(b))),A.push(b)}return A.join("")}function u(d){if(d.startsWith('"')){const m=d.slice(1).split('\\"');for(let v=0;v<m.length;++v){const _=m[v].indexOf('"');_!==-1&&(m[v]=m[v].slice(0,_),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}d=m.join('"')}return d}function h(d){const m=d.indexOf("'");if(m===-1)return d;const v=d.slice(0,m),A=d.slice(m+1).replace(/^[^']*'/,"");return o(v,A)}function f(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,_,A){if(_==="q"||_==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),o(v,A);try{A=atob(A)}catch{}return o(v,A)})}return""}function createHeaders(g,t){const e=new Headers;if(!g||!t||typeof t!="object")return e;for(const i in t){const o=t[i];o!==void 0&&e.append(i,o)}return e}function validateRangeRequestCapabilities({responseHeaders:g,isHttp:t,rangeChunkSize:e,disableRange:i}){const o={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(g.get("Content-Length"),10);return!Number.isInteger(r)||(o.suggestedLength=r,r<=2*e)||i||!t||g.get("Accept-Ranges")!=="bytes"||(g.get("Content-Encoding")||"identity")!=="identity"||(o.allowRangeRequests=!0),o}function extractFilenameFromHeader(g){const t=g.get("Content-Disposition");if(t){let e=getFilenameFromContentDispositionHeader(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(isPdfFile(e))return e}return null}function createResponseStatusError(g,t){return g===404||g===0&&t.startsWith("file:")?new MissingPDFException('Missing PDF "'+t+'".'):new UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${t}".`,g)}function validateResponseStatus(g){return g===200||g===206}function createFetchOptions(g,t,e){return{method:"GET",headers:g,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:(warn(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class PDFFetchStream{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=createHeaders(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new PDFFetchStreamRangeReader(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class PDFFetchStreamReader{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),o=e.url;fetch(o,createFetchOptions(i,this._withCredentials,this._abortController)).then(r=>{if(!validateResponseStatus(r.status))throw createResponseStatusError(r.status,o);this._reader=r.body.getReader(),this._headersCapability.resolve();const c=r.headers,{allowRangeRequests:u,suggestedLength:h}=validateRangeRequestCapabilities({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=extractFilenameFromHeader(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const o=t.source;this._withCredentials=o.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${i-1}`);const c=o.url;fetch(c,createFetchOptions(r,this._withCredentials,this._abortController)).then(u=>{if(!validateResponseStatus(u.status))throw createResponseStatusError(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:getArrayBuffer(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(g){const t=g.response;return typeof t!="string"?t:stringToBytes(t).buffer}class NetworkManager{constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=createHeaders(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const o={begin:t,end:e};for(const r in i)o[r]=i[r];return this.request(o)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,o=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,c]of this.headers)e.setRequestHeader(r,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),o.expectedStatus=PARTIAL_CONTENT_RESPONSE):o.expectedStatus=OK_RESPONSE,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),o.onHeadersReceived=t.onHeadersReceived,o.onDone=t.onDone,o.onError=t.onError,o.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var o;const i=this.pendingRequests[t];i&&((o=i.onProgress)==null||o.call(i,e))}onStateChange(t,e){var h,f,d;const i=this.pendingRequests[t];if(!i)return;const o=i.xhr;if(o.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),o.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],o.status===0&&this.isHttp){(h=i.onError)==null||h.call(i,o.status);return}const r=o.status||OK_RESPONSE;if(!(r===OK_RESPONSE&&i.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&r!==i.expectedStatus){(f=i.onError)==null||f.call(i,o.status);return}const u=network_getArrayBuffer(o);if(r===PARTIAL_CONTENT_RESPONSE){const m=o.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(m);i.onDone({begin:parseInt(v[1],10),chunk:u})}else u?i.onDone({begin:0,chunk:u}):(d=i.onError)==null||d.call(i,o.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class PDFNetworkStream{constructor(t){this._source=t,this._manager=new NetworkManager(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new PDFNetworkStreamRangeRequestReader(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class PDFNetworkStreamFullRequestReader{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(c=>{const[u,...h]=c.split(": ");return[u,h.join(": ")]})),{allowRangeRequests:o,suggestedLength:r}=validateRangeRequestCapabilities({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=extractFilenameFromHeader(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=createResponseStatusError(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(t,e,i){this._manager=t;const o={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,o),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=createResponseStatusError(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(g){if(urlRegex.test(g))return new URL(g);const t=NodePackages.get("url");return new URL(t.pathToFileURL(g))}function createRequest(g,t,e){return g.protocol==="http:"?NodePackages.get("http").request(g,{headers:t},e):NodePackages.get("https").request(g,{headers:t},e)}class PDFNodeStream{constructor(t){this.source=t,this.url=parseUrlOrPath(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=createHeaders(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,t,e):new PDFNodeStreamRangeReader(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class BaseFullReader{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(t){super(t);const e=Object.fromEntries(t.headers),i=o=>{if(o.statusCode===404){const h=new MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=h,this._headersCapability.reject(h);return}this._headersCapability.resolve(),this._setReadableStream(o);const r=new Headers(this._readableStream.headers),{allowRangeRequests:c,suggestedLength:u}=validateRangeRequestCapabilities({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=extractFilenameFromHeader(r)};this._request=createRequest(this._url,e,i),this._request.on("error",o=>{this._storedError=o,this._headersCapability.reject(o)}),this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(t,e,i){super(t);const o=Object.fromEntries(t.headers);o.Range=`bytes=${e}-${i-1}`;const r=c=>{if(c.statusCode===404){const u=new MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(c)};this._request=createRequest(this._url,o,r),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(t){super(t);const e=NodePackages.get("fs");e.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new MissingPDFException(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(t,e,i){super(t);const o=NodePackages.get("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:i-1}))}}const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30,DEFAULT_FONT_ASCENT=.8;var m_,Eo,ys,Cd,Td,Il,Aa,Rd,kd,Dl,wu,Su,wo,xu,Pd,Cu,Ol,Md,Fd,Nl,jl,Ld,So,Tu,Ba,$_,q_,vv,js,Pp,yv,X_,K_;const Ei=class Ei{constructor({textContentSource:t,container:e,viewport:i}){M(this,Ba);M(this,Eo,Promise.withResolvers());M(this,ys,null);M(this,Cd,!1);M(this,Td,!!((m_=globalThis.FontInspector)!=null&&m_.enabled));M(this,Il,null);M(this,Aa,null);M(this,Rd,0);M(this,kd,0);M(this,Dl,null);M(this,wu,null);M(this,Su,0);M(this,wo,0);M(this,xu,Object.create(null));M(this,Pd,[]);M(this,Cu,null);M(this,Ol,[]);M(this,Md,new WeakMap);M(this,Fd,null);var h;if(t instanceof ReadableStream)x(this,Cu,t);else if(typeof t=="object")x(this,Cu,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,ys,x(this,wu,e)),x(this,wo,i.scale*(globalThis.devicePixelRatio||1)),x(this,Su,i.rotation),x(this,Aa,{div:null,properties:null,ctx:null});const{pageWidth:o,pageHeight:r,pageX:c,pageY:u}=i.rawDims;x(this,Fd,[1,0,0,-1,-c,u+r]),x(this,kd,o),x(this,Rd,r),w(h=Ei,js,X_).call(h),setLayerDimensions(e,i),a(this,Eo).promise.finally(()=>{a(Ei,Tu).delete(this),x(this,Aa,null),x(this,xu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Dl).read().then(({value:e,done:i})=>{if(i){a(this,Eo).resolve();return}a(this,Il)??x(this,Il,e.lang),Object.assign(a(this,xu),e.styles),w(this,Ba,$_).call(this,e.items),t()},a(this,Eo).reject)};return x(this,Dl,a(this,Cu).getReader()),a(Ei,Tu).add(this),t(),a(this,Eo).promise}update({viewport:t,onBefore:e=null}){var r;const i=t.scale*(globalThis.devicePixelRatio||1),o=t.rotation;if(o!==a(this,Su)&&(e==null||e(),x(this,Su,o),setLayerDimensions(a(this,wu),{rotation:o})),i!==a(this,wo)){e==null||e(),x(this,wo,i);const c={div:null,properties:null,ctx:w(r=Ei,js,Pp).call(r,a(this,Il))};for(const u of a(this,Ol))c.properties=a(this,Md).get(u),c.div=u,w(this,Ba,vv).call(this,c)}}cancel(){var e;const t=new AbortException("TextLayer task cancelled.");(e=a(this,Dl))==null||e.cancel(t).catch(()=>{}),x(this,Dl,null),a(this,Eo).reject(t)}get textDivs(){return a(this,Ol)}get textContentItemsStr(){return a(this,Pd)}static cleanup(){if(!(a(this,Tu).size>0)){a(this,Nl).clear();for(const{canvas:t}of a(this,jl).values())t.remove();a(this,jl).clear()}}};Eo=new WeakMap,ys=new WeakMap,Cd=new WeakMap,Td=new WeakMap,Il=new WeakMap,Aa=new WeakMap,Rd=new WeakMap,kd=new WeakMap,Dl=new WeakMap,wu=new WeakMap,Su=new WeakMap,wo=new WeakMap,xu=new WeakMap,Pd=new WeakMap,Cu=new WeakMap,Ol=new WeakMap,Md=new WeakMap,Fd=new WeakMap,Nl=new WeakMap,jl=new WeakMap,Ld=new WeakMap,So=new WeakMap,Tu=new WeakMap,Ba=new WeakSet,$_=function(t){var o,r;if(a(this,Cd))return;(r=a(this,Aa)).ctx??(r.ctx=w(o=Ei,js,Pp).call(o,a(this,Il)));const e=a(this,Ol),i=a(this,Pd);for(const c of t){if(e.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),x(this,Cd,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=a(this,ys);x(this,ys,document.createElement("span")),a(this,ys).classList.add("markedContent"),c.id!==null&&a(this,ys).setAttribute("id",`${c.id}`),u.append(a(this,ys))}else c.type==="endMarkedContent"&&x(this,ys,a(this,ys).parentNode);continue}i.push(c.str),w(this,Ba,q_).call(this,c)}},q_=function(t){var S;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Ol).push(e);const o=Util.transform(a(this,Fd),t.transform);let r=Math.atan2(o[1],o[0]);const c=a(this,xu)[t.fontName];c.vertical&&(r+=Math.PI/2);let u=a(this,Td)&&c.fontSubstitution||c.fontFamily;u=Ei.fontFamilyMap.get(u)||u;const h=Math.hypot(o[2],o[3]),f=h*w(S=Ei,js,K_).call(S,u,a(this,Il));let d,m;r===0?(d=o[4],m=o[5]-f):(d=o[4]+f*Math.sin(r),m=o[5]-f*Math.cos(r));const v="calc(var(--scale-factor)*",_=e.style;a(this,ys)===a(this,wu)?(_.left=`${(100*d/a(this,kd)).toFixed(2)}%`,_.top=`${(100*m/a(this,Rd)).toFixed(2)}%`):(_.left=`${v}${d.toFixed(2)}px)`,_.top=`${v}${m.toFixed(2)}px)`),_.fontSize=`${v}${(a(Ei,So)*h).toFixed(2)}px)`,_.fontFamily=u,i.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Td)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const C=Math.abs(t.transform[0]),b=Math.abs(t.transform[3]);C!==b&&Math.max(C,b)/Math.min(C,b)>1.5&&(A=!0)}if(A&&(i.canvasWidth=c.vertical?t.height:t.width),a(this,Md).set(e,i),a(this,Aa).div=e,a(this,Aa).properties=i,w(this,Ba,vv).call(this,a(this,Aa)),i.hasText&&a(this,ys).append(e),i.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),a(this,ys).append(C)}},vv=function(t){var u;const{div:e,properties:i,ctx:o}=t,{style:r}=e;let c="";if(a(Ei,So)>1&&(c=`scale(${1/a(Ei,So)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:h}=r,{canvasWidth:f,fontSize:d}=i;w(u=Ei,js,yv).call(u,o,d*a(this,wo),h);const{width:m}=o.measureText(e.textContent);m>0&&(c=`scaleX(${f*a(this,wo)/m}) ${c}`)}i.angle!==0&&(c=`rotate(${i.angle}deg) ${c}`),c.length>0&&(r.transform=c)},js=new WeakSet,Pp=function(t=null){let e=a(this,jl).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,jl).set(t,e),a(this,Ld).set(e,{size:0,family:""})}return e},yv=function(t,e,i){const o=a(this,Ld).get(t);e===o.size&&i===o.family||(t.font=`${e}px ${i}`,o.size=e,o.family=i)},X_=function(){if(a(this,So)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,So,t.getBoundingClientRect().height),t.remove()},K_=function(t,e){const i=a(this,Nl).get(t);if(i)return i;const o=w(this,js,Pp).call(this,e);o.canvas.width=o.canvas.height=DEFAULT_FONT_SIZE,w(this,js,yv).call(this,o,DEFAULT_FONT_SIZE,t);const r=o.measureText("");let c=r.fontBoundingBoxAscent,u=Math.abs(r.fontBoundingBoxDescent);if(c){const d=c/(c+u);return a(this,Nl).set(t,d),o.canvas.width=o.canvas.height=0,d}o.strokeStyle="red",o.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),o.strokeText("g",0,0);let h=o.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data;u=0;for(let d=h.length-1-3;d>=0;d-=4)if(h[d]>0){u=Math.ceil(d/4/DEFAULT_FONT_SIZE);break}o.clearRect(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE),o.strokeText("A",0,DEFAULT_FONT_SIZE),h=o.getImageData(0,0,DEFAULT_FONT_SIZE,DEFAULT_FONT_SIZE).data,c=0;for(let d=0,m=h.length;d<m;d+=4)if(h[d]>0){c=DEFAULT_FONT_SIZE-Math.floor(d/4/DEFAULT_FONT_SIZE);break}o.canvas.width=o.canvas.height=0;const f=c?c/(c+u):DEFAULT_FONT_ASCENT;return a(this,Nl).set(t,f),f},M(Ei,js),M(Ei,Nl,new Map),M(Ei,jl,new Map),M(Ei,Ld,new WeakMap),M(Ei,So,null),M(Ei,Tu,new Set);let TextLayer=Ei;class XfaText{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function o(r){var h;if(!r)return;let c=null;const u=r.name;if(u==="#text")c=r.value;else if(XfaText.shouldBuildText(u))(h=r==null?void 0:r.attributes)!=null&&h.textContent?c=r.attributes.textContent:r.value&&(c=r.value);else return;if(c!==null&&e.push({str:c}),!!r.children)for(const f of r.children)o(f)}return o(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=isNodeJS?NodeCanvasFactory:DOMCanvasFactory,DefaultCMapReaderFactory=isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory,DefaultFilterFactory=isNodeJS?NodeFilterFactory:DOMFilterFactory,DefaultStandardFontDataFactory=isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory;function getDocument(g={}){typeof g=="string"||g instanceof URL?g={url:g}:(g instanceof ArrayBuffer||ArrayBuffer.isView(g))&&(g={data:g});const t=new PDFDocumentLoadingTask,{docId:e}=t,i=g.url?getUrlProp(g.url):null,o=g.data?getDataProp(g.data):null,r=g.httpHeaders||null,c=g.withCredentials===!0,u=g.password??null,h=g.range instanceof PDFDataRangeTransport?g.range:null,f=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let d=g.worker instanceof PDFWorker?g.worker:null;const m=g.verbosity,v=typeof g.docBaseUrl=="string"&&!isDataScheme(g.docBaseUrl)?g.docBaseUrl:null,_=typeof g.cMapUrl=="string"?g.cMapUrl:null,A=g.cMapPacked!==!1,S=g.CMapReaderFactory||DefaultCMapReaderFactory,C=typeof g.standardFontDataUrl=="string"?g.standardFontDataUrl:null,b=g.StandardFontDataFactory||DefaultStandardFontDataFactory,I=g.stopAtErrors!==!0,B=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,N=g.isEvalSupported!==!1,T=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!isNodeJS,L=typeof g.isChrome=="boolean"?g.isChrome:!util_FeatureTest.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),k=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,D=typeof g.disableFontFace=="boolean"?g.disableFontFace:isNodeJS,j=g.fontExtraProperties===!0,Z=g.enableXfa===!0,O=g.ownerDocument||globalThis.document,G=g.disableRange===!0,Q=g.disableStream===!0,mt=g.disableAutoFetch===!0,ot=g.pdfBug===!0,dt=g.CanvasFactory||DefaultCanvasFactory,et=g.FilterFactory||DefaultFilterFactory,it=g.enableHWA===!0,$=h?h.length:g.length??NaN,tt=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!isNodeJS&&!D,V=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:S===DOMCMapReaderFactory&&b===DOMStandardFontDataFactory&&_&&C&&isValidFetchUrl(_,document.baseURI)&&isValidFetchUrl(C,document.baseURI);g.canvasFactory&&deprecated("`canvasFactory`-instance option, please use `CanvasFactory` instead."),g.filterFactory&&deprecated("`filterFactory`-instance option, please use `FilterFactory` instead.");const H=null;setVerbosityLevel(m);const R={canvasFactory:new dt({ownerDocument:O,enableHWA:it}),filterFactory:new et({docId:e,ownerDocument:O}),cMapReaderFactory:V?null:new S({baseUrl:_,isCompressed:A}),standardFontDataFactory:V?null:new b({baseUrl:C})};if(!d){const K={verbosity:m,port:GlobalWorkerOptions.workerPort};d=K.port?PDFWorker.fromPort(K):new PDFWorker(K),t._worker=d}const F={docId:e,apiVersion:"4.8.69",data:o,password:u,disableAutoFetch:mt,rangeChunkSize:f,length:$,docBaseUrl:v,enableXfa:Z,evaluatorOptions:{maxImageSize:B,disableFontFace:D,ignoreErrors:I,isEvalSupported:N,isOffscreenCanvasSupported:T,isChrome:L,canvasMaxAreaInBytes:k,fontExtraProperties:j,useSystemFonts:tt,cMapUrl:V?_:null,standardFontDataUrl:V?C:null}},U={disableFontFace:D,fontExtraProperties:j,ownerDocument:O,pdfBug:ot,styleElement:H,loadingParams:{disableAutoFetch:mt,enableXfa:Z}};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const K=d.messageHandler.sendWithPromise("GetDocRequest",F,o?[o.buffer]:null);let X;if(h)X=new PDFDataTransportStream(h,{disableRange:G,disableStream:Q});else if(!o){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Y;isNodeJS?Y=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&isValidFetchUrl(i)?PDFFetchStream:PDFNodeStream:Y=isValidFetchUrl(i)?PDFFetchStream:PDFNetworkStream,X=new Y({url:i,length:$,httpHeaders:r,withCredentials:c,rangeChunkSize:f,disableRange:G,disableStream:Q})}return K.then(Y=>{if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ut=new MessageHandler(e,Y,d.port),wt=new WorkerTransport(ut,t,X,U,R);t._transport=wt,ut.send("Ready",null)})}).catch(t._capability.reject),t}function getUrlProp(g){if(g instanceof URL)return g.href;try{return new URL(g,window.location).href}catch{if(isNodeJS&&typeof g=="string")return g}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(g){if(isNodeJS&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return stringToBytes(g);if(g instanceof ArrayBuffer||ArrayBuffer.isView(g)||typeof g=="object"&&!isNaN(g==null?void 0:g.length))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function isRefProxy(g){return typeof g=="object"&&Number.isInteger(g==null?void 0:g.num)&&g.num>=0&&Number.isInteger(g==null?void 0:g.gen)&&g.gen>=0}var Ag;const bg=class bg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${bi(bg,Ag)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,o}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Ag=new WeakMap,M(bg,Ag,0);let PDFDocumentLoadingTask=bg;class PDFDataRangeTransport{constructor(t,e,i=!1,o=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var xo,ba,er,Yc,Mp;class PDFPageProxy{constructor(t,e,i,o=!1){M(this,er);M(this,xo,null);M(this,ba,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=o?new StatTimer:null,this._pdfBug=o,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:o=0,dontFlip:r=!1}={}){return new PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:o,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:o=AnnotationMode.ENABLE,transform:r=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:d=null,isEditing:m=!1}){var N,T;(N=this._stats)==null||N.time("Overall");const v=this._transport.getRenderingIntent(i,o,d,m),{renderingIntent:_,cacheKey:A}=v;x(this,ba,!1),w(this,er,Mp).call(this),u||(u=this._transport.getOptionalContentConfig(_));let S=this._intentStates.get(A);S||(S=Object.create(null),this._intentStates.set(A,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const C=!!(_&RenderingIntentFlag.PRINT);S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(v));const b=L=>{var k;S.renderTasks.delete(I),(this._maybeCleanupAfterRender||C)&&x(this,ba,!0),w(this,er,Yc).call(this,!C),L?(I.capability.reject(L),this._abortOperatorList({intentState:S,reason:L instanceof Error?L:new Error(L)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new InternalRenderTask({callback:b,params:{canvasContext:t,viewport:e,transform:r,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:f});(S.renderTasks||(S.renderTasks=new Set)).add(I);const B=I.task;return Promise.all([S.displayReadyCapability.promise,u]).then(([L,k])=>{var D;if(this.destroyed){b();return}if((D=this._stats)==null||D.time("Rendering"),!(k.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:L,optionalContentConfig:k}),I.operatorListChanged()}).catch(b),B}getOperatorList({intent:t="display",annotationMode:e=AnnotationMode.ENABLE,printAnnotationStorage:i=null,isEditing:o=!1}={}){var f;function r(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(t,e,i,o,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=r,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(o){return o.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>XfaText.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,o){function r(){c.read().then(function({value:h,done:f}){if(f){i(u);return}u.lang??(u.lang=h.lang),Object.assign(u.styles,h.styles),u.items.push(...h.items),r()},o)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),x(this,ba,!1),w(this,er,Mp).call(this),Promise.all(t)}cleanup(t=!1){x(this,ba,!0);const e=w(this,er,Yc).call(this,!1);return t&&e&&this._stats&&(this._stats=new StatTimer),e}_startRenderPage(t,e){var o,r;const i=this._intentStates.get(e);i&&((o=this._stats)==null||o.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let i=0,o=t.length;i<o;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&w(this,er,Yc).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:o}){const{map:r,transfer:c}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:o},c).getReader(),f=this._intentStates.get(e);f.streamReader=h;const d=()=>{h.read().then(({value:m,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),d())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();w(this,er,Yc).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};d()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof RenderingCancelledException){let o=RENDERING_CANCELLED_TIMEOUT;e.extraDelay>0&&e.extraDelay<1e3&&(o+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},o);return}}if(t.streamReader.cancel(new AbortException(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[o,r]of this._intentStates)if(r===t){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}xo=new WeakMap,ba=new WeakMap,er=new WeakSet,Yc=function(t=!1){if(w(this,er,Mp).call(this),!a(this,ba)||this.destroyed)return!1;if(t)return x(this,xo,setTimeout(()=>{x(this,xo,null),w(this,er,Yc).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,ba,!1),!0},Mp=function(){a(this,xo)&&(clearTimeout(a(this,xo)),x(this,xo,null))};var Ea,Eg;class LoopbackPort{constructor(){M(this,Ea,new Map);M(this,Eg,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,Eg).then(()=>{for(const[o]of a(this,Ea))o.call(this,i)})}addEventListener(t,e,i=null){let o=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);o=()=>r.removeEventListener("abort",c),r.addEventListener("abort",c)}a(this,Ea).set(e,o)}removeEventListener(t,e){const i=a(this,Ea).get(e);i==null||i(),a(this,Ea).delete(e)}terminate(){for(const[,t]of a(this,Ea))t==null||t();a(this,Ea).clear()}}Ea=new WeakMap,Eg=new WeakMap;var wg,Hl,Bl,Ru,Fp,ku,Lp;const Jn=class Jn{constructor({name:t=null,port:e=null,verbosity:i=getVerbosityLevel()}={}){M(this,Ru);var o;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((o=a(Jn,Bl))!=null&&o.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(a(Jn,Bl)||x(Jn,Bl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return isNodeJS?Promise.all([NodePackages.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),w(this,Ru,Fp).call(this)}_initialize(){if(a(Jn,Hl)||a(Jn,ku,Lp)){this._setupFakeWorker();return}let{workerSrc:t}=Jn;try{Jn._isSameOrigin(window.location.href,t)||(t=Jn._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new MessageHandler("main","worker",e),o=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||o()},{signal:r.signal}),i.on("test",u=>{if(r.abort(),this.destroyed||!u){o();return}this._messageHandler=i,this._port=e,this._webWorker=e,w(this,Ru,Fp).call(this)}),i.on("ready",u=>{if(r.abort(),this.destroyed){o();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};c();return}catch{info("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){a(Jn,Hl)||(warn("Setting up fake worker."),x(Jn,Hl,!0)),Jn._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const i=`fake${bi(Jn,wg)._++}`,o=new MessageHandler(i+"_worker",i,e);t.setup(o,e),this._messageHandler=new MessageHandler(i,i+"_worker",e),w(this,Ru,Fp).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=a(Jn,Bl))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=a(this,Bl))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Jn(t)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>a(this,ku,Lp)?a(this,ku,Lp):(await import(this.workerSrc)).WorkerMessageHandler)())}};wg=new WeakMap,Hl=new WeakMap,Bl=new WeakMap,Ru=new WeakSet,Fp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},ku=new WeakSet,Lp=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},M(Jn,ku),M(Jn,wg,0),M(Jn,Hl,!1),M(Jn,Bl),isNodeJS&&(x(Jn,Hl,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),Jn._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const o=new URL(e,i);return i.origin===o.origin},Jn._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let PDFWorker=Jn;var wa,Gr,Pu,Mu,$r,Ul,Oh;class WorkerTransport{constructor(t,e,i,o,r){M(this,Ul);M(this,wa,new Map);M(this,Gr,new Map);M(this,Pu,new Map);M(this,Mu,new Map);M(this,$r,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this.loadingParams=o.loadingParams,this._params=o,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(t,e=AnnotationMode.ENABLE,i=null,o=!1,r=!1){let c=RenderingIntentFlag.DISPLAY,u=SerializableEmpty;switch(t){case"any":c=RenderingIntentFlag.ANY;break;case"display":break;case"print":c=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${t}`)}const h=c&RenderingIntentFlag.PRINT&&i instanceof PrintAnnotationStorage?i:this.annotationStorage;switch(e){case AnnotationMode.DISABLE:c+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:c+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:c+=RenderingIntentFlag.ANNOTATIONS_STORAGE,u=h.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${e}`)}o&&(c+=RenderingIntentFlag.IS_EDITING),r&&(c+=RenderingIntentFlag.OPLIST);const{ids:f,hash:d}=h.modifiedIds,m=[c,u.hash,d];return{renderingIntent:c,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,$r))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const o of a(this,Gr).values())t.push(o._destroy());a(this,Gr).clear(),a(this,Pu).clear(),a(this,Mu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var o;this.commonObjs.clear(),this.fontLoader.clear(),a(this,wa).clear(),this.filterFactory.destroy(),TextLayer.cleanup(),(o=this._networkStream)==null||o.cancelAllRequests(new AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,o)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},o.onPull=()=>{this._fullReader.read().then(function({value:r,done:c}){if(c){o.close();return}assert(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{o.error(r)})},o.onCancel=r=>{this._fullReader.cancel(r),o.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async i=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:o,isRangeSupported:r,contentLength:c}=this._fullReader;return(!o||!r)&&(this._lastProgress&&((u=e.onProgress)==null||u.call(e,this._lastProgress)),this._fullReader.onProgress=h=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:o,isRangeSupported:r,contentLength:c}}),t.on("GetRangeReader",(i,o)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){o.close();return}o.onPull=()=>{r.read().then(function({value:c,done:u}){if(u){o.close();return}assert(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{o.error(c)})},o.onCancel=c=>{r.cancel(c),o.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(i,this))}),t.on("DocException",function(i){let o;switch(i.name){case"PasswordException":o=new PasswordException(i.message,i.code);break;case"InvalidPDFException":o=new InvalidPDFException(i.message);break;case"MissingPDFException":o=new MissingPDFException(i.message);break;case"UnexpectedResponseException":o=new UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":o=new UnknownErrorException(i.message,i.details);break;default:unreachable("DocException - expected a valid Error.")}e._capability.reject(o)}),t.on("PasswordRequest",i=>{if(x(this,$r,Promise.withResolvers()),e.onPassword){const o=r=>{r instanceof Error?a(this,$r).reject(r):a(this,$r).resolve({password:r})};try{e.onPassword(o,i.code)}catch(r){a(this,$r).reject(r)}}else a(this,$r).reject(new PasswordException(i.message,i.code));return a(this,$r).promise}),t.on("DataLoaded",i=>{var o;(o=e.onProgress)==null||o.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,Gr).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,o,r])=>{var c;if(this.destroyed||this.commonObjs.has(i))return null;switch(o){case"Font":const{disableFontFace:u,fontExtraProperties:h,pdfBug:f}=this._params;if("error"in r){const _=r.error;warn(`Error during font loading: ${_}`),this.commonObjs.resolve(i,_);break}const d=f&&((c=globalThis.FontInspector)!=null&&c.enabled)?(_,A)=>globalThis.FontInspector.fontAdded(_,A):null,m=new FontFaceObject(r,{disableFontFace:u,inspectFont:d});this.fontLoader.bind(m).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h&&m.data&&(m.data=null),this.commonObjs.resolve(i,m)});break;case"CopyLocalImage":const{imageRef:v}=r;assert(v,"The imageRef must be defined.");for(const _ of a(this,Gr).values())for(const[,A]of _.objs)if((A==null?void 0:A.ref)===v)return A.dataLen?(this.commonObjs.resolve(i,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${o}`)}return null}),t.on("obj",([i,o,r,c])=>{var h;if(this.destroyed)return;const u=a(this,Gr).get(o);if(!u.objs.has(i)){if(u._intentStates.size===0){(h=c==null?void 0:c.bitmap)==null||h.close();return}switch(r){case"Image":u.objs.resolve(i,c),(c==null?void 0:c.dataLen)>MAX_IMAGE_SIZE_TO_CACHE&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{var o;this.destroyed||(o=e.onProgress)==null||o.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,Pu).get(e);if(i)return i;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,Mu).set(r.refStr,t);const c=new PDFPageProxy(e,r,this,this._params.pdfBug);return a(this,Gr).set(e,c),c});return a(this,Pu).set(e,o),o}getPageIndex(t){return isRefProxy(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return w(this,Ul,Oh).call(this,"GetFieldObjects")}hasJSActions(){return w(this,Ul,Oh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return w(this,Ul,Oh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return w(this,Ul,Oh).call(this,"GetOptionalContentConfig").then(e=>new OptionalContentConfig(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,wa).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(o=>{var r,c;return{info:o[0],metadata:o[1]?new Metadata(o[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return a(this,wa).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Gr).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,wa).clear(),this.filterFactory.destroy(!0),TextLayer.cleanup()}}cachedPageNumber(t){if(!isRefProxy(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Mu).get(e)??null}}wa=new WeakMap,Gr=new WeakMap,Pu=new WeakMap,Mu=new WeakMap,$r=new WeakMap,Ul=new WeakSet,Oh=function(t,e=null){const i=a(this,wa).get(t);if(i)return i;const o=this.messageHandler.sendWithPromise(t,e);return a(this,wa).set(t,o),o};const INITIAL_DATA=Symbol("INITIAL_DATA");var yr,Id,_v;class PDFObjects{constructor(){M(this,Id);M(this,yr,Object.create(null))}get(t,e=null){if(e){const o=w(this,Id,_v).call(this,t);return o.promise.then(()=>e(o.data)),null}const i=a(this,yr)[t];if(!i||i.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=a(this,yr)[t];return!!e&&e.data!==INITIAL_DATA}resolve(t,e=null){const i=w(this,Id,_v).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,yr)){const{data:i}=a(this,yr)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}x(this,yr,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,yr)){const{data:e}=a(this,yr)[t];e!==INITIAL_DATA&&(yield[t,e])}}}yr=new WeakMap,Id=new WeakSet,_v=function(t){var e;return(e=a(this,yr))[t]||(e[t]={...Promise.withResolvers(),data:INITIAL_DATA})};var Co;class RenderTask{constructor(t){M(this,Co,null);x(this,Co,t),this.onContinue=null}get promise(){return a(this,Co).capability.promise}cancel(t=0){a(this,Co).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Co).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Co);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Co=new WeakMap;var To,zl;const fl=class fl{constructor({callback:t,params:e,objs:i,commonObjs:o,annotationCanvasMap:r,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:d=!1,pdfBug:m=!1,pageColors:v=null}){M(this,To,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=o,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var u,h;if(this.cancelled)return;if(this._canvas){if(a(fl,zl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(fl,zl).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:o,transform:r,background:c}=this.params;this.gfx=new CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:o,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,To)&&(window.cancelAnimationFrame(a(this,To)),x(this,To,null)),a(fl,zl).delete(this._canvas),this.callback(t||new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,To,window.requestAnimationFrame(()=>{x(this,To,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(fl,zl).delete(this._canvas),this.callback())))}};To=new WeakMap,zl=new WeakMap,M(fl,zl,new WeakSet);let InternalRenderTask=fl;const version="4.8.69",build="3634dab10";function makeColorComp(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function scaleAndClamp(g){return Math.max(0,Math.min(255,255*g))}class ColorConverters{static CMYK_G([t,e,i,o]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+o)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=scaleAndClamp(t),[t,t,t]}static G_HTML([t]){const e=makeColorComp(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(scaleAndClamp)}static RGB_HTML(t){return`#${t.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,o]){return["RGB",1-Math.min(1,t+o),1-Math.min(1,i+o),1-Math.min(1,e+o)]}static CMYK_rgb([t,e,i,o]){return[scaleAndClamp(1-Math.min(1,t+o)),scaleAndClamp(1-Math.min(1,i+o)),scaleAndClamp(1-Math.min(1,e+o))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const o=1-t,r=1-e,c=1-i,u=Math.min(o,r,c);return["CMYK",o,r,c,u]}}class BaseSVGFactory{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const o=this._createSVG("svg:svg");return o.setAttribute("version","1.1"),i||(o.setAttribute("width",`${t}px`),o.setAttribute("height",`${e}px`)),o.setAttribute("preserveAspectRatio","none"),o.setAttribute("viewBox",`0 0 ${t} ${e}`),o}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(t){return document.createElementNS(SVG_NS,t)}}class XfaLayer{static setupStorage(t,e,i,o,r){const c=o.getValue(e,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),r==="print")break;t.addEventListener("input",u=>{o.setValue(e,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",u=>{o.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),r==="print")break;t.addEventListener("input",u=>{o.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of i.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;o.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:o,linkService:r}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${o}`);for(const[h,f]of Object.entries(c))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&r.addLinkAttributes(t,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(t,c.dataId,e,i)}static render(t){var m,v;const e=t.annotationStorage,i=t.linkService,o=t.xfaHtml,r=t.intent||"display",c=document.createElement(o.name);o.attributes&&this.setAttributes({html:c,element:o,intent:r,linkService:i});const u=r!=="richText",h=t.div;if(h.append(c),t.viewport){const _=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=_}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(o.children.length===0){if(o.value){const _=document.createTextNode(o.value);c.append(_),u&&XfaText.shouldBuildText(o.name)&&f.push(_)}return{textDivs:f}}const d=[[o,-1,c]];for(;d.length>0;){const[_,A,S]=d.at(-1);if(A+1===_.children.length){d.pop();continue}const C=_.children[++d.at(-1)[1]];if(C===null)continue;const{name:b}=C;if(b==="#text"){const B=document.createTextNode(C.value);f.push(B),S.append(B);continue}const I=(m=C==null?void 0:C.attributes)!=null&&m.xmlns?document.createElementNS(C.attributes.xmlns,b):document.createElement(b);if(S.append(I),C.attributes&&this.setAttributes({html:I,element:C,storage:e,intent:r,linkService:i}),((v=C.children)==null?void 0:v.length)>0)d.push([C,-1,I]);else if(C.value){const B=document.createTextNode(C.value);u&&XfaText.shouldBuildText(b)&&f.push(B),I.append(B)}}for(const _ of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const DEFAULT_TAB_INDEX=1e3,annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;function getRectDims(g){return{width:g[2]-g[0],height:g[3]-g[1]}}class AnnotationElementFactory{static create(t){switch(t.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(t);case AnnotationType.TEXT:return new TextAnnotationElement(t);case AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(t);case"Btn":return t.data.radioButton?new RadioButtonWidgetAnnotationElement(t):t.data.checkBox?new CheckboxWidgetAnnotationElement(t):new PushButtonWidgetAnnotationElement(t);case"Ch":return new ChoiceWidgetAnnotationElement(t);case"Sig":return new SignatureWidgetAnnotationElement(t)}return new WidgetAnnotationElement(t);case AnnotationType.POPUP:return new PopupAnnotationElement(t);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(t);case AnnotationType.LINE:return new LineAnnotationElement(t);case AnnotationType.SQUARE:return new SquareAnnotationElement(t);case AnnotationType.CIRCLE:return new CircleAnnotationElement(t);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(t);case AnnotationType.CARET:return new CaretAnnotationElement(t);case AnnotationType.INK:return new InkAnnotationElement(t);case AnnotationType.POLYGON:return new PolygonAnnotationElement(t);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(t);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(t);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(t);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(t);case AnnotationType.STAMP:return new StampAnnotationElement(t);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(t);default:return new AnnotationElement(t)}}}var Wl,Fu,Lu,Dd,Av;const ky=class ky{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:o=!1}={}){M(this,Dd);M(this,Wl,null);M(this,Fu,!1);M(this,Lu,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),o&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ky._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;a(this,Wl)||x(this,Wl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&w(this,Dd,Av).call(this,e),(i=a(this,Lu))==null||i.popup.updateEdited(t)}resetEdited(){var t;a(this,Wl)&&(w(this,Dd,Av).call(this,a(this,Wl).rect),(t=a(this,Lu))==null||t.popup.resetEdited(),x(this,Wl,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:o}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof WidgetAnnotationElement||(r.tabIndex=DEFAULT_TAB_INDEX);const{style:c}=r;if(c.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof PopupAnnotationElement){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,r),r}const{width:u,height:h}=getRectDims(e.rect);if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(S>0||C>0){const I=`calc(${S}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;c.borderRadius=I}else if(this instanceof RadioButtonWidgetAnnotationElement){const I=`calc(${u}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`;c.borderRadius=I}switch(e.borderStyle.style){case AnnotationBorderStyleType.SOLID:c.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:c.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:c.borderBottomStyle="solid";break}const b=e.borderColor||null;b?(x(this,Fu,!0),c.borderColor=Util.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):c.borderWidth=0}const f=Util.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:m,pageX:v,pageY:_}=o.rawDims;c.left=`${100*(f[0]-v)/d}%`,c.top=`${100*(f[1]-_)/m}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(c.width=`${100*u/d}%`,c.height=`${100*h/m}%`):this.setRotation(A,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:o}=this.parent.viewport.rawDims,{width:r,height:c}=getRectDims(this.data.rect);let u,h;t%180===0?(u=100*r/i,h=100*c/o):(u=100*c/i,h=100*r/o),e.style.width=`${u}%`,e.style.height=`${h}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,o)=>{const r=o.detail[e],c=r[0],u=r.slice(1);o.target.style[i]=ColorConverters[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:ColorConverters[`${c}_rgb`](u)})};return shadow(this,"_commonActions",{display:e=>{const{display:i}=e.detail,o=i%2===1;this.container.style.visibility=o?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:o,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const o of Object.keys(e.detail)){const r=t[o]||i[o];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[o,r]of Object.entries(e)){const c=i[o];if(c){const u={detail:{[o]:r},target:t};c(u),delete e[o]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,o,r]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,C,b,I]=t.subarray(2,6);if(o===S&&r===C&&e===b&&i===I)return}const{style:c}=this.container;let u;if(a(this,Fu)){const{borderColor:S,borderWidth:C}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const h=o-e,f=r-i,{svgFactory:d}=this,m=d.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0);const v=d.createElement("defs");m.append(v);const _=d.createElement("clipPath"),A=`clippath_${this.data.id}`;_.setAttribute("id",A),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let S=2,C=t.length;S<C;S+=8){const b=t[S],I=t[S+1],B=t[S+2],N=t[S+3],T=d.createElement("rect"),L=(B-e)/h,k=(r-I)/f,D=(b-B)/h,j=(I-N)/f;T.setAttribute("x",L),T.setAttribute("y",k),T.setAttribute("width",D),T.setAttribute("height",j),_.append(T),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${k}" width="${D}" height="${j}"/>`)}a(this,Fu)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{data:t}=this,e=x(this,Lu,new PopupAnnotationElement({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const o=this._fieldObjects[t];if(o)for(const{page:r,id:c,exportValues:u}of o){if(r===-1||c===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!GetElementsByNameSet.has(f)){warn(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:h,domElement:f})}return i}for(const o of document.getElementsByName(t)){const{exportValue:r}=o,c=o.getAttribute("data-element-id");c!==e&&GetElementsByNameSet.has(o)&&i.push({id:c,exportValue:r,domElement:o})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Wl=new WeakMap,Fu=new WeakMap,Lu=new WeakMap,Dd=new WeakSet,Av=function(t){const{container:{style:e},data:{rect:i,rotation:o},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:c,pageX:u,pageY:h}}}}=this;i==null||i.splice(0,4,...t);const{width:f,height:d}=getRectDims(t);e.left=`${100*(t[0]-u)/r}%`,e.top=`${100*(c-t[3]+h)/c}%`,o===0?(e.width=`${100*f/r}%`,e.height=`${100*d/c}%`):this.setRotation(o)};let AnnotationElement=ky;var Ns,ol,Y_,Q_;class LinkAnnotationElement extends AnnotationElement{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});M(this,Ns);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,o=document.createElement("a");o.setAttribute("data-element-id",e.id);let r=!1;return e.url?(i.addLinkAttributes(o,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(o,e.action),r=!0):e.attachment?(w(this,Ns,Y_).call(this,o,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(w(this,Ns,Q_).call(this,o,e.setOCGState),r=!0):e.dest?(this._bindLink(o,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(o,e),r=!0),e.resetForm?(this._bindResetFormAction(o,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(o,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(o),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&w(this,Ns,ol).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),w(this,Ns,ol).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const o=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const c=o.get(r);c&&(e[c]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),w(this,Ns,ol).call(this)}_bindResetFormAction(e,i){const o=e.onclick;if(o||(e.href=this.linkService.getAnchorUrl("")),w(this,Ns,ol).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),o||(e.onclick=()=>!1);return}e.onclick=()=>{var m;o==null||o();const{fields:r,refs:c,include:u}=i,h=[];if(r.length!==0||c.length!==0){const v=new Set(c);for(const _ of r){const A=this._fieldObjects[_]||[];for(const{id:S}of A)v.add(S)}for(const _ of Object.values(this._fieldObjects))for(const A of _)v.has(A.id)===u&&h.push(A)}else for(const v of Object.values(this._fieldObjects))h.push(...v);const f=this.annotationStorage,d=[];for(const v of h){const{id:_}=v;switch(d.push(_),v.type){case"text":{const S=v.defaultValue||"";f.setValue(_,{value:S});break}case"checkbox":case"radiobutton":{const S=v.defaultValue===v.exportValues;f.setValue(_,{value:S});break}case"combobox":case"listbox":{const S=v.defaultValue||"";f.setValue(_,{value:S});break}default:continue}const A=document.querySelector(`[data-element-id="${_}"]`);if(A){if(!GetElementsByNameSet.has(A)){warn(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Ns=new WeakSet,ol=function(){this.container.setAttribute("data-internal-link","")},Y_=function(e,i,o=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(i.content,i.filename,o),!1},w(this,Ns,ol).call(this)},Q_=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),w(this,Ns,ol).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return util_FeatureTest.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,o,r){i.includes("mouse")?t.addEventListener(i,c=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:r(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(i,c=>{var u;if(i==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:o,value:r(c)}}))})}_setEventListeners(t,e,i,o){var r,c,u;for(const[h,f]of i)(f==="Action"||(r=this.data.actions)!=null&&r[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,f,o),f==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,o=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,r=t.style;let c;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),d=Math.round(f/(LINE_FACTOR*o))||1,m=f/d;c=Math.min(o,h(m/LINE_FACTOR))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(o,h(f/LINE_FACTOR))}r.fontSize=`calc(${c}px * var(--scale-factor))`,r.color=Util.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,o){const r=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=i),r.setValue(c.id,{[o]:i})}render(){var o,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let u=c.value||"";const h=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;h&&u.length>h&&(u=u.slice(0,h));let f=c.formattedValue||((o=this.data.textContent)==null?void 0:o.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const d={userValue:u,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=f??u,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",f??u),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),GetElementsByNameSet.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(i,this.data.required),h&&(i.maxLength=h),i.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(i,"value",v.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",v=>{const _=this.data.defaultFieldValue??"";i.value=d.userValue=_,d.formattedValue=null});let m=v=>{const{formattedValue:_}=d;_!=null&&(v.target.value=_),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",_=>{var S;if(d.focused)return;const{target:A}=_;d.userValue&&(A.value=d.userValue),d.lastCommittedValue=A.value,d.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const A={value(S){d.userValue=S.detail.value??"",t.setValue(e,{value:d.userValue.toString()}),S.target.value=d.userValue},formattedValue(S){const{formattedValue:C}=S.detail;d.formattedValue=C,C!=null&&S.target!==document.activeElement&&(S.target.value=C),t.setValue(e,{formattedValue:C})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var B;const{charLimit:C}=S.detail,{target:b}=S;if(C===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",C);let I=d.userValue;!I||I.length<=C||(I=I.slice(0,C),b.value=d.userValue=I,t.setValue(e,{value:I}),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(A,_)}),i.addEventListener("keydown",_=>{var C;d.commitKey=1;let A=-1;if(_.key==="Escape"?A=0:_.key==="Enter"&&!this.data.multiLine?A=2:_.key==="Tab"&&(d.commitKey=3),A===-1)return;const{value:S}=_.target;d.lastCommittedValue!==S&&(d.lastCommittedValue=S,d.userValue=S,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:A,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const v=m;m=null,i.addEventListener("blur",_=>{var S,C;if(!d.focused||!_.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(d.focused=!1);const{value:A}=_.target;d.userValue=A,d.lastCommittedValue!==A&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:d.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),v(_)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",_=>{var T;d.lastCommittedValue=null;const{data:A,target:S}=_,{value:C,selectionStart:b,selectionEnd:I}=S;let B=b,N=I;switch(_.inputType){case"deleteWordBackward":{const L=C.substring(0,b).match(/\w*[^\w]*$/);L&&(B-=L[0].length);break}case"deleteWordForward":{const L=C.substring(b).match(/^[^\w]*\w*/);L&&(N+=L[0].length);break}case"deleteContentBackward":b===I&&(B-=1);break;case"deleteContentForward":b===I&&(N+=1);break}_.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:A||"",willCommit:!1,selStart:B,selEnd:N}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(m&&i.addEventListener("blur",m),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/h;i.classList.add("comb"),i.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let o=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof o=="string"&&(o=o!=="Off",t.setValue(i,{value:o})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return GetElementsByNameSet.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,o&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=DEFAULT_TAB_INDEX,r.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,i)){const d=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=d),t.setValue(f.id,{value:d})}t.setValue(i,{value:h})}),r.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let o=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof o=="string"&&(o=o!==e.buttonValue,t.setValue(i,{value:o})),o)for(const c of this._getElementsByName(e.fieldName,i))t.setValue(c.id,{value:!1});const r=document.createElement("input");if(GetElementsByNameSet.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,o&&r.setAttribute("checked",!0),r.tabIndex=DEFAULT_TAB_INDEX,r.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:h})}),r.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;r.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const d=c===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const v=d&&m.id===i;m.domElement&&(m.domElement.checked=v),t.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),o=document.createElement("select");GetElementsByNameSet.add(o),o.setAttribute("data-element-id",e),o.disabled=this.data.readOnly,this._setRequired(o,this.data.required),o.name=this.data.fieldName,o.tabIndex=DEFAULT_TAB_INDEX;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(o.size=this.data.options.length,this.data.multiSelect&&(o.multiple=!0)),o.addEventListener("resetform",d=>{const m=this.data.defaultFieldValue;for(const v of o.options)v.selected=v.value===m});for(const d of this.data.options){const m=document.createElement("option");m.textContent=d.displayValue,m.value=d.exportValue,i.value.includes(d.exportValue)&&(m.setAttribute("selected",!0),r=!1),o.append(m)}let c=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),o.prepend(d),c=()=>{d.remove(),o.removeEventListener("input",c),c=null},o.addEventListener("input",c)}const u=d=>{const m=d?"value":"textContent",{options:v,multiple:_}=o;return _?Array.prototype.filter.call(v,A=>A.selected).map(A=>A[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let h=u(!1);const f=d=>{const m=d.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(o.addEventListener("updatefromsandbox",d=>{const m={value(v){c==null||c();const _=v.detail.value,A=new Set(Array.isArray(_)?_:[_]);for(const S of o.options)S.selected=A.has(S.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(v){o.multiple=!0},remove(v){const _=o.options,A=v.detail.remove;_[A].selected=!1,o.remove(A),_.length>0&&Array.prototype.findIndex.call(_,C=>C.selected)===-1&&(_[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},clear(v){for(;o.length!==0;)o.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(v){const{index:_,displayValue:A,exportValue:S}=v.detail.insert,C=o.children[_],b=document.createElement("option");b.textContent=A,b.value=S,C?C.before(b):o.append(b),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},items(v){const{items:_}=v.detail;for(;o.length!==0;)o.remove(0);for(const A of _){const{displayValue:S,exportValue:C}=A,b=document.createElement("option");b.textContent=S,b.value=C,o.append(b)}o.options.length>0&&(o.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},indices(v){const _=new Set(v.detail.indices);for(const A of v.target.options)A.selected=_.has(A.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,d)}),o.addEventListener("input",d=>{var _;const m=u(!0),v=u(!1);t.setValue(e,{value:m}),d.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(o,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):o.addEventListener("input",function(d){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(o),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:AnnotationElement._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${AnnotationPrefix}${i}`).join(",")),this.container}}var Iu,Sg,xg,Du,Vl,ui,Sa,Ou,Od,Nd,Nu,xa,_r,Ca,jd,Ta,Hd,Gl,$l,zn,Ip,bv,J_,Z_,tA,eA,Dp,Op,Ev;class PopupElement{constructor({container:t,color:e,elements:i,titleObj:o,modificationDate:r,contentsObj:c,richText:u,parent:h,rect:f,parentRect:d,open:m}){M(this,zn);M(this,Iu,w(this,zn,tA).bind(this));M(this,Sg,w(this,zn,Ev).bind(this));M(this,xg,w(this,zn,Op).bind(this));M(this,Du,w(this,zn,Dp).bind(this));M(this,Vl,null);M(this,ui,null);M(this,Sa,null);M(this,Ou,null);M(this,Od,null);M(this,Nd,null);M(this,Nu,null);M(this,xa,!1);M(this,_r,null);M(this,Ca,null);M(this,jd,null);M(this,Ta,null);M(this,Hd,null);M(this,Gl,null);M(this,$l,!1);var v;x(this,ui,t),x(this,Hd,o),x(this,Sa,c),x(this,Ta,u),x(this,Nd,h),x(this,Vl,e),x(this,jd,f),x(this,Nu,d),x(this,Od,i),x(this,Ou,PDFDateString.toDateObject(r)),this.trigger=i.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",a(this,Du)),_.addEventListener("mouseenter",a(this,xg)),_.addEventListener("mouseleave",a(this,Sg)),_.classList.add("popupTriggerArea");for(const _ of i)(v=_.container)==null||v.addEventListener("keydown",a(this,Iu));a(this,ui).hidden=!0,m&&w(this,zn,Dp).call(this)}render(){if(a(this,_r))return;const t=x(this,_r,document.createElement("div"));if(t.className="popup",a(this,Vl)){const r=t.style.outlineColor=Util.makeHexColor(...a(this,Vl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=Util.makeHexColor(...a(this,Vl).map(u=>Math.floor(.7*(255-u)+u)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=a(this,Hd),t.append(e),a(this,Ou)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Ou).valueOf()})),e.append(r)}const o=a(this,zn,Ip);if(o)XfaLayer.render({xfaHtml:o,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,Sa));t.append(r)}a(this,ui).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const o=t.split(/(?:\r\n?|\n)/);for(let r=0,c=o.length;r<c;++r){const u=o[r];i.append(document.createTextNode(u)),r<c-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;a(this,Gl)||x(this,Gl,{contentsObj:a(this,Sa),richText:a(this,Ta)}),t&&x(this,Ca,null),e&&(x(this,Ta,w(this,zn,Z_).call(this,e)),x(this,Sa,null)),(i=a(this,_r))==null||i.remove(),x(this,_r,null)}resetEdited(){var t;a(this,Gl)&&({contentsObj:bi(this,Sa)._,richText:bi(this,Ta)._}=a(this,Gl),x(this,Gl,null),(t=a(this,_r))==null||t.remove(),x(this,_r,null),x(this,Ca,null))}forceHide(){x(this,$l,this.isVisible),a(this,$l)&&(a(this,ui).hidden=!0)}maybeShow(){a(this,$l)&&(a(this,_r)||w(this,zn,Op).call(this),x(this,$l,!1),a(this,ui).hidden=!1)}get isVisible(){return a(this,ui).hidden===!1}}Iu=new WeakMap,Sg=new WeakMap,xg=new WeakMap,Du=new WeakMap,Vl=new WeakMap,ui=new WeakMap,Sa=new WeakMap,Ou=new WeakMap,Od=new WeakMap,Nd=new WeakMap,Nu=new WeakMap,xa=new WeakMap,_r=new WeakMap,Ca=new WeakMap,jd=new WeakMap,Ta=new WeakMap,Hd=new WeakMap,Gl=new WeakMap,$l=new WeakMap,zn=new WeakSet,Ip=function(){const t=a(this,Ta),e=a(this,Sa);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Ta).html||null},bv=function(){var t,e,i;return((i=(e=(t=a(this,zn,Ip))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},J_=function(){var t,e,i;return((i=(e=(t=a(this,zn,Ip))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},Z_=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},o={style:{color:a(this,zn,J_),fontSize:a(this,zn,bv)?`calc(${a(this,zn,bv)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:o});return i},tA=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,xa))&&w(this,zn,Dp).call(this)},eA=function(){if(a(this,Ca)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:o,pageY:r}}}=a(this,Nd);let c=!!a(this,Nu),u=c?a(this,Nu):a(this,jd);for(const A of a(this,Od))if(!u||Util.intersect(A.data.rect,u)!==null){u=A.data.rect,c=!0;break}const h=Util.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),d=c?u[2]-u[0]+5:0,m=h[0]+d,v=h[1];x(this,Ca,[100*(m-o)/e,100*(v-r)/i]);const{style:_}=a(this,ui);_.left=`${a(this,Ca)[0]}%`,_.top=`${a(this,Ca)[1]}%`},Dp=function(){x(this,xa,!a(this,xa)),a(this,xa)?(w(this,zn,Op).call(this),a(this,ui).addEventListener("click",a(this,Du)),a(this,ui).addEventListener("keydown",a(this,Iu))):(w(this,zn,Ev).call(this),a(this,ui).removeEventListener("click",a(this,Du)),a(this,ui).removeEventListener("keydown",a(this,Iu)))},Op=function(){a(this,_r)||this.render(),this.isVisible?a(this,xa)&&a(this,ui).classList.add("focused"):(w(this,zn,eA).call(this),a(this,ui).hidden=!1,a(this,ui).style.zIndex=parseInt(a(this,ui).style.zIndex)+1e3)},Ev=function(){a(this,ui).classList.remove("focused"),!(a(this,xa)||!this.isVisible)&&(a(this,ui).hidden=!0,a(this,ui).style.zIndex=parseInt(a(this,ui).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Bd;class LineAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Bd,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:o}=getRectDims(e.rect),r=this.svgFactory.create(i,o,!0),c=x(this,Bd,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bd=new WeakMap;var Ud;class SquareAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Ud,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:o}=getRectDims(e.rect),r=this.svgFactory.create(i,o,!0),c=e.borderStyle.width,u=x(this,Ud,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",i-c),u.setAttribute("height",o-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),r.append(u),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ud)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ud=new WeakMap;var zd;class CircleAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,zd,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:o}=getRectDims(e.rect),r=this.svgFactory.create(i,o,!0),c=e.borderStyle.width,u=x(this,zd,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",i/2),u.setAttribute("cy",o/2),u.setAttribute("rx",i/2-c/2),u.setAttribute("ry",o/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),r.append(u),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,zd)}addHighlightArea(){this.container.classList.add("highlightArea")}}zd=new WeakMap;var Wd;class PolylineAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Wd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:o,popupRef:r}}=this;if(!i)return this.container;const{width:c,height:u}=getRectDims(e),h=this.svgFactory.create(c,u,!0);let f=[];for(let m=0,v=i.length;m<v;m+=2){const _=i[m]-e[0],A=e[3]-i[m+1];f.push(`${_},${A}`)}f=f.join(" ");const d=x(this,Wd,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",f),d.setAttribute("stroke-width",o.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),h.append(d),this.container.append(h),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Wd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wd=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Vd;class InkAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,Vd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:i,borderStyle:o,popupRef:r}}=this,{width:c,height:u}=getRectDims(e),h=this.svgFactory.create(c,u,!0);for(const f of i){let d=[];for(let v=0,_=f.length;v<_;v+=2){const A=f[v]-e[0],S=e[3]-f[v+1];d.push(`${A},${S}`)}d=d.join(" ");const m=this.svgFactory.createElement(this.svgElementName);a(this,Vd).push(m),m.setAttribute("points",d),m.setAttribute("stroke-width",o.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),h.append(m)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return a(this,Vd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vd=new WeakMap;class HighlightAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Gd,$d,wv;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(e){var o;super(e,{isRenderable:!0});M(this,$d);M(this,Gd,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(o=this.linkService.eventBus)==null||o.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let o;i.hasAppearance||i.fillAlpha===0?o=document.createElement("div"):(o=document.createElement("img"),o.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(o.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),o.addEventListener("dblclick",w(this,$d,wv).bind(this)),x(this,Gd,o);const{isMac:r}=util_FeatureTest.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(r?c.metaKey:c.ctrlKey)&&w(this,$d,wv).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():o.classList.add("popupTriggerArea"),e.append(o),e}getElementsToTriggerPopup(){return a(this,Gd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gd=new WeakMap,$d=new WeakSet,wv=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var qd,ql,Xl,Xd,uc,nA,Sv;class AnnotationLayer{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:o,page:r,viewport:c,structTreeLayer:u}){M(this,uc);M(this,qd,null);M(this,ql,null);M(this,Xl,new Map);M(this,Xd,null);this.div=t,x(this,qd,e),x(this,ql,i),x(this,Xd,u||null),this.page=r,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=o}hasEditableAnnotations(){return a(this,Xl).size>0}async render(t){var c;const{annotations:e}=t,i=this.div;setLayerDimensions(i,this.viewport);const o=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:t.annotationStorage||new AnnotationStorage,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const h=u.annotationType===AnnotationType.POPUP;if(h){const m=o.get(u.id);if(!m)continue;r.elements=m}else{const{width:m,height:v}=getRectDims(u.rect);if(m<=0||v<=0)continue}r.data=u;const f=AnnotationElementFactory.create(r);if(!f.isRenderable)continue;if(!h&&u.popupRef){const m=o.get(u.popupRef);m?m.push(f):o.set(u.popupRef,[f])}const d=f.render();u.hidden&&(d.style.visibility="hidden"),await w(this,uc,nA).call(this,d,u.id),f._isEditable&&(a(this,Xl).set(f.data.id,f),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(f))}w(this,uc,Sv).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,setLayerDimensions(e,{rotation:t.rotation}),w(this,uc,Sv).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Xl).values())}getEditableAnnotation(t){return a(this,Xl).get(t)}}qd=new WeakMap,ql=new WeakMap,Xl=new WeakMap,Xd=new WeakMap,uc=new WeakSet,nA=async function(t,e){var c,u;const i=t.firstChild||t,o=i.id=`${AnnotationPrefix}${e}`,r=await((c=a(this,Xd))==null?void 0:c.getAriaAttributes(o));if(r)for(const[h,f]of r)i.setAttribute(h,f);this.div.append(t),(u=a(this,qd))==null||u.moveElementInDOM(this.div,t,i,!1)},Sv=function(){if(!a(this,ql))return;const t=this.div;for(const[e,i]of a(this,ql)){const o=t.querySelector(`[data-annotation-id="${e}"]`);if(!o)continue;i.className="annotationContent";const{firstChild:r}=o;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):o.append(i)}a(this,ql).clear()};const EOL_PATTERN=/\r\n?|\n/g;var Ar,Ms,Kd,Kl,Fs,vi,iA,sA,rA,Np,Ha,jp,Hp,aA,xv,oA;const Gn=class Gn extends AnnotationEditor{constructor(e){super({...e,name:"freeTextEditor"});M(this,vi);M(this,Ar);M(this,Ms,"");M(this,Kd,`${this.id}-editor`);M(this,Kl,null);M(this,Fs);x(this,Ar,e.color||Gn._defaultColor||AnnotationEditor._defaultLineColor),x(this,Fs,e.fontSize||Gn._defaultFontSize)}static get _keyboardManager(){const e=Gn.prototype,i=c=>c.isEmpty(),o=AnnotationEditorUIManager.TRANSLATE_SMALL,r=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[o,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,o],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(e,i){AnnotationEditor.initialize(e,i);const o=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(o.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case AnnotationEditorParamsType.FREETEXT_SIZE:Gn._defaultFontSize=i;break;case AnnotationEditorParamsType.FREETEXT_COLOR:Gn._defaultColor=i;break}}updateParams(e,i){switch(e){case AnnotationEditorParamsType.FREETEXT_SIZE:w(this,vi,iA).call(this,i);break;case AnnotationEditorParamsType.FREETEXT_COLOR:w(this,vi,sA).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Gn._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,Gn._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,a(this,Fs)],[AnnotationEditorParamsType.FREETEXT_COLOR,a(this,Ar)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Gn._internalPadding*e,-(Gn._internalPadding+a(this,Fs))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,Kl,new AbortController);const e=this._uiManager.combinedSignal(a(this,Kl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Kd)),this._isDraggable=!0,(e=a(this,Kl))==null||e.abort(),x(this,Kl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,Ms),i=x(this,Ms,w(this,vi,rA).call(this).trimEnd());if(e===i)return;const o=r=>{if(x(this,Ms,r),!r){this.remove();return}w(this,vi,Hp).call(this),this._uiManager.rebuild(this),w(this,vi,Np).call(this)};this.addCommands({cmd:()=>{o(i)},undo:()=>{o(e)},mustExec:!1}),w(this,vi,Np).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Gn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Kd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:o}=this.editorDiv;if(o.fontSize=`calc(${a(this,Fs)}px * var(--scale-factor))`,o.color=a(this,Ar),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bindEvents(this,this.div,["dblclick","keydown"]),this.width){const[r,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[d,m]=this.pageDimensions,[v,_]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=e+(u[0]-v)/d,S=i+this.height-(u[1]-_)/m;break;case 90:A=e+(u[0]-v)/d,S=i-(u[1]-_)/m,[h,f]=[f,-h];break;case 180:A=e-this.width+(u[0]-v)/d,S=i-(u[1]-_)/m,[h,f]=[-h,-f];break;case 270:A=e+(u[0]-v-this.height*m)/d,S=i+(u[1]-_-this.width*d)/m,[h,f]=[-f,h];break}this.setAt(A*r,S*c,h,f)}else this.setAt(e*r,i*c,this.width*r,this.height*c);w(this,vi,Hp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var A,S,C;const i=e.clipboardData||window.clipboardData,{types:o}=i;if(o.length===1&&o[0]==="text/plain")return;e.preventDefault();const r=w(A=Gn,Ha,xv).call(A,i.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!r)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!r.includes(`
`)){u.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:h,startOffset:f}=u,d=[],m=[];if(h.nodeType===Node.TEXT_NODE){const b=h.parentElement;if(m.push(h.nodeValue.slice(f).replaceAll(EOL_PATTERN,"")),b!==this.editorDiv){let I=d;for(const B of this.editorDiv.childNodes){if(B===b){I=m;continue}I.push(w(S=Gn,Ha,jp).call(S,B))}}d.push(h.nodeValue.slice(0,f).replaceAll(EOL_PATTERN,""))}else if(h===this.editorDiv){let b=d,I=0;for(const B of this.editorDiv.childNodes)I++===f&&(b=m),b.push(w(C=Gn,Ha,jp).call(C,B))}x(this,Ms,`${d.join(`
`)}${r}${m.join(`
`)}`),w(this,vi,Hp).call(this);const v=new Range;let _=d.reduce((b,I)=>b+I.length,0);for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const I=b.nodeValue.length;if(_<=I){v.setStart(b,_),v.setEnd(b,_);break}_-=I}c.removeAllRanges(),c.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,o){var u;let r=null;if(e instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:h,fontColor:f},rect:d,rotation:m,id:v,popupRef:_},textContent:A,textPosition:S,parent:{page:{pageNumber:C}}}=e;if(!A||A.length===0)return null;r=e={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(f),fontSize:h,value:A.join(`
`),position:S,pageIndex:C-1,rect:d.slice(0),rotation:m,id:v,deleted:!1,popupRef:_}}const c=await super.deserialize(e,i,o);return x(c,Fs,e.fontSize),x(c,Ar,Util.makeHexColor(...e.color)),x(c,Ms,w(u=Gn,Ha,xv).call(u,e.value)),c.annotationElementId=e.id||null,c._initialData=r,c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Gn._internalPadding*this.parentScale,o=this.getRect(i,i),r=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,Ar)),c={annotationType:AnnotationEditorType.FREETEXT,color:r,fontSize:a(this,Fs),value:w(this,vi,aA).call(this),pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!w(this,vi,oA).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:o}=i;o.fontSize=`calc(${a(this,Fs)}px * var(--scale-factor))`,o.color=a(this,Ar),i.replaceChildren();for(const c of a(this,Ms).split(`
`)){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),i.append(u)}const r=Gn._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:a(this,Ms)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Ar=new WeakMap,Ms=new WeakMap,Kd=new WeakMap,Kl=new WeakMap,Fs=new WeakMap,vi=new WeakSet,iA=function(e){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-a(this,Fs))*this.parentScale),x(this,Fs,r),w(this,vi,Np).call(this)},o=a(this,Fs);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},sA=function(e){const i=r=>{x(this,Ar,this.editorDiv.style.color=r)},o=a(this,Ar);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},rA=function(){var o;const e=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(w(o=Gn,Ha,jp).call(o,r)),i=r);return e.join(`
`)},Np=function(){const[e,i]=this.parentDimensions;let o;if(this.isAttachedToDOM)o=this.div.getBoundingClientRect();else{const{currentLayer:r,div:c}=this,u=c.style.display,h=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",r.div.append(this.div),o=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=o.width/e,this.height=o.height/i):(this.width=o.height/e,this.height=o.width/i),this.fixAndSetPosition()},Ha=new WeakSet,jp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(EOL_PATTERN,"")},Hp=function(){if(this.editorDiv.replaceChildren(),!!a(this,Ms))for(const e of a(this,Ms).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},aA=function(){return a(this,Ms).replaceAll(""," ")},xv=function(e){return e.replaceAll(" ","")},oA=function(e){const{value:i,fontSize:o,color:r,pageIndex:c}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==o||e.color.some((u,h)=>u!==r[h])||e.pageIndex!==c},M(Gn,Ha),xe(Gn,"_freeTextDefaultContent",""),xe(Gn,"_internalPadding",0),xe(Gn,"_defaultColor",null),xe(Gn,"_defaultFontSize",10),xe(Gn,"_type","freetext"),xe(Gn,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=Gn;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(t,e){unreachable("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){unreachable("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){unreachable("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Ls,br,ju,Hu,qr,yn,Yl,Ql,Yd,Qd,Bu,Uu,Ro,Jd,Cg,Tg,Ci,Nh,lA,cA,uA,hA,dA,fA;const fa=class fa{constructor({x:t,y:e},i,o,r,c,u=0){M(this,Ci);M(this,Ls);M(this,br,[]);M(this,ju);M(this,Hu);M(this,qr,[]);M(this,yn,new Float64Array(18));M(this,Yl);M(this,Ql);M(this,Yd);M(this,Qd);M(this,Bu);M(this,Uu);M(this,Ro,[]);x(this,Ls,i),x(this,Uu,r*o),x(this,Hu,c),a(this,yn).set([NaN,NaN,NaN,NaN,t,e],6),x(this,ju,u),x(this,Qd,a(fa,Jd)*o),x(this,Yd,a(fa,Tg)*o),x(this,Bu,o),a(this,Ro).push(t,e)}isEmpty(){return isNaN(a(this,yn)[8])}add({x:t,y:e}){var j;x(this,Yl,t),x(this,Ql,e);const[i,o,r,c]=a(this,Ls);let[u,h,f,d]=a(this,yn).subarray(8,12);const m=t-f,v=e-d,_=Math.hypot(m,v);if(_<a(this,Yd))return!1;const A=_-a(this,Qd),S=A/_,C=S*m,b=S*v;let I=u,B=h;u=f,h=d,f+=C,d+=b,(j=a(this,Ro))==null||j.push(t,e);const N=-b/A,T=C/A,L=N*a(this,Uu),k=T*a(this,Uu);return a(this,yn).set(a(this,yn).subarray(2,8),0),a(this,yn).set([f+L,d+k],4),a(this,yn).set(a(this,yn).subarray(14,18),12),a(this,yn).set([f-L,d-k],16),isNaN(a(this,yn)[6])?(a(this,qr).length===0&&(a(this,yn).set([u+L,h+k],2),a(this,qr).push(NaN,NaN,NaN,NaN,(u+L-i)/r,(h+k-o)/c),a(this,yn).set([u-L,h-k],14),a(this,br).push(NaN,NaN,NaN,NaN,(u-L-i)/r,(h-k-o)/c)),a(this,yn).set([I,B,u,h,f,d],6),!this.isEmpty()):(a(this,yn).set([I,B,u,h,f,d],6),Math.abs(Math.atan2(B-h,I-u)-Math.atan2(b,C))<Math.PI/2?([u,h,f,d]=a(this,yn).subarray(2,6),a(this,qr).push(NaN,NaN,NaN,NaN,((u+f)/2-i)/r,((h+d)/2-o)/c),[u,h,I,B]=a(this,yn).subarray(14,18),a(this,br).push(NaN,NaN,NaN,NaN,((I+u)/2-i)/r,((B+h)/2-o)/c),!0):([I,B,u,h,f,d]=a(this,yn).subarray(0,6),a(this,qr).push(((I+5*u)/6-i)/r,((B+5*h)/6-o)/c,((5*u+f)/6-i)/r,((5*h+d)/6-o)/c,((u+f)/2-i)/r,((h+d)/2-o)/c),[f,d,u,h,I,B]=a(this,yn).subarray(12,18),a(this,br).push(((I+5*u)/6-i)/r,((B+5*h)/6-o)/c,((5*u+f)/6-i)/r,((5*h+d)/6-o)/c,((u+f)/2-i)/r,((h+d)/2-o)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,qr),e=a(this,br);if(isNaN(a(this,yn)[6])&&!this.isEmpty())return w(this,Ci,lA).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let o=6;o<t.length;o+=6)isNaN(t[o])?i.push(`L${t[o+4]} ${t[o+5]}`):i.push(`C${t[o]} ${t[o+1]} ${t[o+2]} ${t[o+3]} ${t[o+4]} ${t[o+5]}`);w(this,Ci,uA).call(this,i);for(let o=e.length-6;o>=6;o-=6)isNaN(e[o])?i.push(`L${e[o+4]} ${e[o+5]}`):i.push(`C${e[o]} ${e[o+1]} ${e[o+2]} ${e[o+3]} ${e[o+4]} ${e[o+5]}`);return w(this,Ci,cA).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,o,r,c){return new FreeDrawOutline(t,e,i,o,r,c)}getOutlines(){var m;const t=a(this,qr),e=a(this,br),i=a(this,yn),[o,r,c,u]=a(this,Ls),h=new Float64Array((((m=a(this,Ro))==null?void 0:m.length)??0)+2);for(let v=0,_=h.length-2;v<_;v+=2)h[v]=(a(this,Ro)[v]-o)/c,h[v+1]=(a(this,Ro)[v+1]-r)/u;if(h[h.length-2]=(a(this,Yl)-o)/c,h[h.length-1]=(a(this,Ql)-r)/u,isNaN(i[6])&&!this.isEmpty())return w(this,Ci,hA).call(this,h);const f=new Float64Array(a(this,qr).length+24+a(this,br).length);let d=t.length;for(let v=0;v<d;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}d=w(this,Ci,fA).call(this,f,d);for(let v=e.length-6;v>=6;v-=6)for(let _=0;_<6;_+=2){if(isNaN(e[v+_])){f[d]=f[d+1]=NaN,d+=2;continue}f[d]=e[v+_],f[d+1]=e[v+_+1],d+=2}return w(this,Ci,dA).call(this,f,d),this.newFreeDrawOutline(f,h,a(this,Ls),a(this,Bu),a(this,ju),a(this,Hu))}};Ls=new WeakMap,br=new WeakMap,ju=new WeakMap,Hu=new WeakMap,qr=new WeakMap,yn=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,Yd=new WeakMap,Qd=new WeakMap,Bu=new WeakMap,Uu=new WeakMap,Ro=new WeakMap,Jd=new WeakMap,Cg=new WeakMap,Tg=new WeakMap,Ci=new WeakSet,Nh=function(){const t=a(this,yn).subarray(4,6),e=a(this,yn).subarray(16,18),[i,o,r,c]=a(this,Ls);return[(a(this,Yl)+(t[0]-e[0])/2-i)/r,(a(this,Ql)+(t[1]-e[1])/2-o)/c,(a(this,Yl)+(e[0]-t[0])/2-i)/r,(a(this,Ql)+(e[1]-t[1])/2-o)/c]},lA=function(){const[t,e,i,o]=a(this,Ls),[r,c,u,h]=w(this,Ci,Nh).call(this);return`M${(a(this,yn)[2]-t)/i} ${(a(this,yn)[3]-e)/o} L${(a(this,yn)[4]-t)/i} ${(a(this,yn)[5]-e)/o} L${r} ${c} L${u} ${h} L${(a(this,yn)[16]-t)/i} ${(a(this,yn)[17]-e)/o} L${(a(this,yn)[14]-t)/i} ${(a(this,yn)[15]-e)/o} Z`},cA=function(t){const e=a(this,br);t.push(`L${e[4]} ${e[5]} Z`)},uA=function(t){const[e,i,o,r]=a(this,Ls),c=a(this,yn).subarray(4,6),u=a(this,yn).subarray(16,18),[h,f,d,m]=w(this,Ci,Nh).call(this);t.push(`L${(c[0]-e)/o} ${(c[1]-i)/r} L${h} ${f} L${d} ${m} L${(u[0]-e)/o} ${(u[1]-i)/r}`)},hA=function(t){const e=a(this,yn),[i,o,r,c]=a(this,Ls),[u,h,f,d]=w(this,Ci,Nh).call(this),m=new Float64Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-i)/r,(e[3]-o)/c,NaN,NaN,NaN,NaN,(e[4]-i)/r,(e[5]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,d,NaN,NaN,NaN,NaN,(e[16]-i)/r,(e[17]-o)/c,NaN,NaN,NaN,NaN,(e[14]-i)/r,(e[15]-o)/c],0),this.newFreeDrawOutline(m,t,a(this,Ls),a(this,Bu),a(this,ju),a(this,Hu))},dA=function(t,e){const i=a(this,br);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},fA=function(t,e){const i=a(this,yn).subarray(4,6),o=a(this,yn).subarray(16,18),[r,c,u,h]=a(this,Ls),[f,d,m,v]=w(this,Ci,Nh).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-r)/u,(i[1]-c)/h,NaN,NaN,NaN,NaN,f,d,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(o[0]-r)/u,(o[1]-c)/h],e),e+=24},M(fa,Jd,8),M(fa,Cg,2),M(fa,Tg,a(fa,Jd)+a(fa,Cg));let FreeDrawOutliner=fa;var zu,Jl,Ra,Zd,Is,tf,fi,As,jh,Hh,pA;class FreeDrawOutline extends Outline{constructor(e,i,o,r,c,u){super();M(this,As);M(this,zu);M(this,Jl,null);M(this,Ra);M(this,Zd);M(this,Is);M(this,tf);M(this,fi);x(this,fi,e),x(this,Is,i),x(this,zu,o),x(this,tf,r),x(this,Ra,c),x(this,Zd,u),w(this,As,pA).call(this,u);const{x:h,y:f,width:d,height:m}=a(this,Jl);for(let v=0,_=e.length;v<_;v+=2)e[v]=(e[v]-h)/d,e[v+1]=(e[v+1]-f)/m;for(let v=0,_=i.length;v<_;v+=2)i[v]=(i[v]-h)/d,i[v+1]=(i[v+1]-f)/m}toSVGPath(){const e=[`M${a(this,fi)[4]} ${a(this,fi)[5]}`];for(let i=6,o=a(this,fi).length;i<o;i+=6){if(isNaN(a(this,fi)[i])){e.push(`L${a(this,fi)[i+4]} ${a(this,fi)[i+5]}`);continue}e.push(`C${a(this,fi)[i]} ${a(this,fi)[i+1]} ${a(this,fi)[i+2]} ${a(this,fi)[i+3]} ${a(this,fi)[i+4]} ${a(this,fi)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,o,r],c){const u=o-e,h=r-i;let f,d;switch(c){case 0:f=w(this,As,jh).call(this,a(this,fi),e,r,u,-h),d=w(this,As,jh).call(this,a(this,Is),e,r,u,-h);break;case 90:f=w(this,As,Hh).call(this,a(this,fi),e,i,u,h),d=w(this,As,Hh).call(this,a(this,Is),e,i,u,h);break;case 180:f=w(this,As,jh).call(this,a(this,fi),o,i,-u,h),d=w(this,As,jh).call(this,a(this,Is),o,i,-u,h);break;case 270:f=w(this,As,Hh).call(this,a(this,fi),o,r,-u,-h),d=w(this,As,Hh).call(this,a(this,Is),o,r,-u,-h);break}return{outline:Array.from(f),points:[Array.from(d)]}}get box(){return a(this,Jl)}newOutliner(e,i,o,r,c,u=0){return new FreeDrawOutliner(e,i,o,r,c,u)}getNewOutline(e,i){const{x:o,y:r,width:c,height:u}=a(this,Jl),[h,f,d,m]=a(this,zu),v=c*d,_=u*m,A=o*d+h,S=r*m+f,C=this.newOutliner({x:a(this,Is)[0]*v+A,y:a(this,Is)[1]*_+S},a(this,zu),a(this,tf),e,a(this,Zd),i??a(this,Ra));for(let b=2;b<a(this,Is).length;b+=2)C.add({x:a(this,Is)[b]*v+A,y:a(this,Is)[b+1]*_+S});return C.getOutlines()}get mustRemoveSelfIntersections(){return!0}}zu=new WeakMap,Jl=new WeakMap,Ra=new WeakMap,Zd=new WeakMap,Is=new WeakMap,tf=new WeakMap,fi=new WeakMap,As=new WeakSet,jh=function(e,i,o,r,c){const u=new Float64Array(e.length);for(let h=0,f=e.length;h<f;h+=2)u[h]=i+e[h]*r,u[h+1]=o+e[h+1]*c;return u},Hh=function(e,i,o,r,c){const u=new Float64Array(e.length);for(let h=0,f=e.length;h<f;h+=2)u[h]=i+e[h+1]*r,u[h+1]=o+e[h]*c;return u},pA=function(e){const i=a(this,fi);let o=i[4],r=i[5],c=o,u=r,h=o,f=r,d=o,m=r;const v=e?Math.max:Math.min;for(let b=6,I=i.length;b<I;b+=6){if(isNaN(i[b]))c=Math.min(c,i[b+4]),u=Math.min(u,i[b+5]),h=Math.max(h,i[b+4]),f=Math.max(f,i[b+5]),m<i[b+5]?(d=i[b+4],m=i[b+5]):m===i[b+5]&&(d=v(d,i[b+4]));else{const B=Util.bezierBoundingBox(o,r,...i.slice(b,b+6));c=Math.min(c,B[0]),u=Math.min(u,B[1]),h=Math.max(h,B[2]),f=Math.max(f,B[3]),m<B[3]?(d=B[2],m=B[3]):m===B[3]&&(d=v(d,B[2]))}o=i[b+4],r=i[b+5]}const _=c-a(this,Ra),A=u-a(this,Ra),S=h-c+2*a(this,Ra),C=f-u+2*a(this,Ra);x(this,Jl,{x:_,y:A,width:S,height:C,lastPoint:[d,m]})};var ef,ko,Er,as,gA,Bp,mA,vA,Cv;class HighlightOutliner{constructor(t,e=0,i=0,o=!0){M(this,as);M(this,ef);M(this,ko,[]);M(this,Er,[]);let r=1/0,c=-1/0,u=1/0,h=-1/0;const f=10**-4;for(const{x:C,y:b,width:I,height:B}of t){const N=Math.floor((C-e)/f)*f,T=Math.ceil((C+I+e)/f)*f,L=Math.floor((b-e)/f)*f,k=Math.ceil((b+B+e)/f)*f,D=[N,L,k,!0],j=[T,L,k,!1];a(this,ko).push(D,j),r=Math.min(r,N),c=Math.max(c,T),u=Math.min(u,L),h=Math.max(h,k)}const d=c-r+2*i,m=h-u+2*i,v=r-i,_=u-i,A=a(this,ko).at(o?-1:-2),S=[A[0],A[2]];for(const C of a(this,ko)){const[b,I,B]=C;C[0]=(b-v)/d,C[1]=(I-_)/m,C[2]=(B-_)/m}x(this,ef,{x:v,y:_,width:d,height:m,lastPoint:S})}getOutlines(){a(this,ko).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,ko))e[3]?(t.push(...w(this,as,Cv).call(this,e)),w(this,as,mA).call(this,e)):(w(this,as,vA).call(this,e),t.push(...w(this,as,Cv).call(this,e)));return w(this,as,gA).call(this,t)}}ef=new WeakMap,ko=new WeakMap,Er=new WeakMap,as=new WeakSet,gA=function(t){const e=[],i=new Set;for(const c of t){const[u,h,f]=c;e.push([u,h,c],[u,f,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const h=e[c][2],f=e[c+1][2];h.push(f),f.push(h),i.add(h),i.add(f)}const o=[];let r;for(;i.size>0;){const c=i.values().next().value;let[u,h,f,d,m]=c;i.delete(c);let v=u,_=h;for(r=[u,f],o.push(r);;){let A;if(i.has(d))A=d;else if(i.has(m))A=m;else break;i.delete(A),[u,h,f,d,m]=A,v!==u&&(r.push(v,_,u,_===h?h:f),v=u),_=_===h?f:h}r.push(v,_)}return new HighlightOutline(o,a(this,ef))},Bp=function(t){const e=a(this,Er);let i=0,o=e.length-1;for(;i<=o;){const r=i+o>>1,c=e[r][0];if(c===t)return r;c<t?i=r+1:o=r-1}return o+1},mA=function([,t,e]){const i=w(this,as,Bp).call(this,t);a(this,Er).splice(i,0,[t,e])},vA=function([,t,e]){const i=w(this,as,Bp).call(this,t);for(let o=i;o<a(this,Er).length;o++){const[r,c]=a(this,Er)[o];if(r!==t)break;if(r===t&&c===e){a(this,Er).splice(o,1);return}}for(let o=i-1;o>=0;o--){const[r,c]=a(this,Er)[o];if(r!==t)break;if(r===t&&c===e){a(this,Er).splice(o,1);return}}},Cv=function(t){const[e,i,o]=t,r=[[e,i,o]],c=w(this,as,Bp).call(this,o);for(let u=0;u<c;u++){const[h,f]=a(this,Er)[u];for(let d=0,m=r.length;d<m;d++){const[,v,_]=r[d];if(!(f<=v||_<=h)){if(v>=h){if(_>f)r[d][1]=f;else{if(m===1)return[];r.splice(d,1),d--,m--}continue}r[d][2]=h,_>f&&r.push([e,f,_])}}}return r};var nf,Wu;class HighlightOutline extends Outline{constructor(e,i){super();M(this,nf);M(this,Wu);x(this,Wu,e),x(this,nf,i)}toSVGPath(){const e=[];for(const i of a(this,Wu)){let[o,r]=i;e.push(`M${o} ${r}`);for(let c=2;c<i.length;c+=2){const u=i[c],h=i[c+1];u===o?(e.push(`V${h}`),r=h):h===r&&(e.push(`H${u}`),o=u)}e.push("Z")}return e.join(" ")}serialize([e,i,o,r],c){const u=[],h=o-e,f=r-i;for(const d of a(this,Wu)){const m=new Array(d.length);for(let v=0;v<d.length;v+=2)m[v]=e+d[v]*h,m[v+1]=r-d[v+1]*f;u.push(m)}return u}get box(){return a(this,nf)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}nf=new WeakMap,Wu=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(t,e,i,o,r,c){return new FreeHighlightOutline(t,e,i,o,r,c)}get classNamesForDrawing(){return["highlight","free"]}}class FreeHighlightOutline extends FreeDrawOutline{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,i,o,r,c=0){return new FreeHighlightOutliner(t,e,i,o,r,c)}}var wr,Zl,Vu,Si,sf,Gu,rf,af,Po,Sr,$u,of,Un,Tv,Rv,kv,ll,yA,lo;const ms=class ms{constructor({editor:t=null,uiManager:e=null}){M(this,Un);M(this,wr,null);M(this,Zl,null);M(this,Vu);M(this,Si,null);M(this,sf,!1);M(this,Gu,!1);M(this,rf,null);M(this,af);M(this,Po,null);M(this,Sr,null);M(this,$u);var i;t?(x(this,Gu,!1),x(this,$u,AnnotationEditorParamsType.HIGHLIGHT_COLOR),x(this,rf,t)):(x(this,Gu,!0),x(this,$u,AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),x(this,Sr,(t==null?void 0:t._uiManager)||e),x(this,af,a(this,Sr)._eventBus),x(this,Vu,(t==null?void 0:t.color)||((i=a(this,Sr))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),a(ms,of)||x(ms,of,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],ms.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ms.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ms.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ms.prototype._moveToPrevious],[["Home","mac+Home"],ms.prototype._moveToBeginning],[["End","mac+End"],ms.prototype._moveToEnd]]))}renderButton(){const t=x(this,wr,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,Sr)._signal;t.addEventListener("click",w(this,Un,ll).bind(this),{signal:e}),t.addEventListener("keydown",w(this,Un,kv).bind(this),{signal:e});const i=x(this,Zl,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=a(this,Vu),t.append(i),t}renderMainDropdown(){const t=x(this,Si,w(this,Un,Tv).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,wr)){w(this,Un,ll).call(this,t);return}const e=t.target.getAttribute("data-color");e&&w(this,Un,Rv).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,Un,lo)){w(this,Un,ll).call(this,t);return}if(t.target===a(this,wr)){(e=a(this,Si).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,Si))==null?void 0:e.firstChild)||t.target===a(this,wr)){a(this,Un,lo)&&this._hideDropdownFromKeyboard();return}a(this,Un,lo)||w(this,Un,ll).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,Un,lo)){w(this,Un,ll).call(this,t);return}(e=a(this,Si).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,Un,lo)){w(this,Un,ll).call(this,t);return}(e=a(this,Si).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,Si))==null||t.classList.add("hidden"),(e=a(this,Po))==null||e.abort(),x(this,Po,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,Gu)){if(!a(this,Un,lo)){(t=a(this,rf))==null||t.unselect();return}this.hideDropdown(),a(this,wr).focus({preventScroll:!0,focusVisible:a(this,sf)})}}updateColor(t){if(a(this,Zl)&&(a(this,Zl).style.backgroundColor=t),!a(this,Si))return;const e=a(this,Sr).highlightColors.values();for(const i of a(this,Si).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,wr))==null||t.remove(),x(this,wr,null),x(this,Zl,null),(e=a(this,Si))==null||e.remove(),x(this,Si,null)}};wr=new WeakMap,Zl=new WeakMap,Vu=new WeakMap,Si=new WeakMap,sf=new WeakMap,Gu=new WeakMap,rf=new WeakMap,af=new WeakMap,Po=new WeakMap,Sr=new WeakMap,$u=new WeakMap,of=new WeakMap,Un=new WeakSet,Tv=function(){const t=document.createElement("div"),e=a(this,Sr)._signal;t.addEventListener("contextmenu",noContextMenu,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,o]of a(this,Sr).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",o),r.title=i,r.setAttribute("data-l10n-id",a(ms,of)[i]);const c=document.createElement("span");r.append(c),c.className="swatch",c.style.backgroundColor=o,r.setAttribute("aria-selected",o===a(this,Vu)),r.addEventListener("click",w(this,Un,Rv).bind(this,o),{signal:e}),t.append(r)}return t.addEventListener("keydown",w(this,Un,kv).bind(this),{signal:e}),t},Rv=function(t,e){e.stopPropagation(),a(this,af).dispatch("switchannotationeditorparams",{source:this,type:a(this,$u),value:t})},kv=function(t){ms._keyboardManager.exec(this,t)},ll=function(t){if(a(this,Un,lo)){this.hideDropdown();return}if(x(this,sf,t.detail===0),a(this,Po)||(x(this,Po,new AbortController),window.addEventListener("pointerdown",w(this,Un,yA).bind(this),{signal:a(this,Sr).combinedSignal(a(this,Po))})),a(this,Si)){a(this,Si).classList.remove("hidden");return}const e=x(this,Si,w(this,Un,Tv).call(this));a(this,wr).append(e)},yA=function(t){var e;(e=a(this,Si))!=null&&e.contains(t.target)||this.hideDropdown()},lo=function(){return a(this,Si)&&!a(this,Si).classList.contains("hidden")},M(ms,of,null);let ColorPicker=ms;var qu,lf,ka,tc,Xu,Js,cf,uf,ec,xr,Yi,_s,Ku,Pa,xi,Yu,Zs,hf,fn,Pv,Up,_A,AA,bA,Mv,cl,nr,Qc,EA,zp,Bh,wA,SA,xA,CA,TA;const Fn=class Fn extends AnnotationEditor{constructor(e){super({...e,name:"highlightEditor"});M(this,fn);M(this,qu,null);M(this,lf,0);M(this,ka);M(this,tc,null);M(this,Xu,null);M(this,Js,null);M(this,cf,null);M(this,uf,0);M(this,ec,null);M(this,xr,null);M(this,Yi,null);M(this,_s,!1);M(this,Ku,null);M(this,Pa);M(this,xi,null);M(this,Yu,"");M(this,Zs);M(this,hf,"");this.color=e.color||Fn._defaultColor,x(this,Zs,e.thickness||Fn._defaultThickness),x(this,Pa,e.opacity||Fn._defaultOpacity),x(this,ka,e.boxes||null),x(this,hf,e.methodOfCreation||""),x(this,Yu,e.text||""),this._isDraggable=!1,e.highlightId>-1?(x(this,_s,!0),w(this,fn,Up).call(this,e),w(this,fn,cl).call(this)):a(this,ka)&&(x(this,qu,e.anchorNode),x(this,lf,e.anchorOffset),x(this,cf,e.focusNode),x(this,uf,e.focusOffset),w(this,fn,Pv).call(this),w(this,fn,cl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Fn.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,_s)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,Zs),methodOfCreation:a(this,hf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var o;AnnotationEditor.initialize(e,i),Fn._defaultColor||(Fn._defaultColor=((o=i.highlightColors)==null?void 0:o.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:Fn._defaultColor=i;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Fn._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,Ku)}updateParams(e,i){switch(e){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:w(this,fn,_A).call(this,i);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:w(this,fn,AA).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,Fn._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Fn._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||Fn._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,a(this,Zs)||Fn._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,a(this,_s)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,Xu,new ColorPicker({editor:this})),e.addColorPicker(a(this,Xu))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(w(this,fn,Bh).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,w(this,fn,Bh).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){w(this,fn,Mv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(w(this,fn,cl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var o;let i=!1;this.parent&&!e?w(this,fn,Mv).call(this):e&&(w(this,fn,cl).call(this,e),i=!this.parent&&((o=this.div)==null?void 0:o.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var r,c,u;const{drawLayer:i}=this.parent;let o;a(this,_s)?(e=(e-this.rotation+360)%360,o=w(r=Fn,nr,Qc).call(r,a(this,xr).box,e)):o=w(c=Fn,nr,Qc).call(c,this,e),i.rotate(a(this,Yi),e),i.rotate(a(this,xi),e),i.updateBox(a(this,Yi),o),i.updateBox(a(this,xi),w(u=Fn,nr,Qc).call(u,a(this,Js).box,e))}render(){if(this.div)return this.div;const e=super.render();a(this,Yu)&&(e.setAttribute("aria-label",a(this,Yu)),e.setAttribute("role","mark")),a(this,_s)?e.classList.add("free"):this.div.addEventListener("keydown",w(this,fn,EA).bind(this),{signal:this._uiManager._signal});const i=x(this,ec,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,tc);const[o,r]=this.parentDimensions;return this.setDims(this.width*o,this.height*r),bindEvents(this,a(this,ec),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(a(this,xi),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(a(this,xi),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:w(this,fn,zp).call(this,!0);break;case 1:case 3:w(this,fn,zp).call(this,!1);break}}select(){var e,i;super.select(),a(this,xi)&&((e=this.parent)==null||e.drawLayer.removeClass(a(this,xi),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(a(this,xi),"selected"))}unselect(){var e;super.unselect(),a(this,xi)&&((e=this.parent)==null||e.drawLayer.removeClass(a(this,xi),"selected"),a(this,_s)||w(this,fn,zp).call(this,!1))}get _mustFixPosition(){return!a(this,_s)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(a(this,Yi),e),this.parent.drawLayer.show(a(this,xi),e))}static startHighlighting(e,i,{target:o,x:r,y:c}){const{x:u,y:h,width:f,height:d}=o.getBoundingClientRect(),m=new AbortController,v=e.combinedSignal(m),_=S=>{S.preventDefault(),S.stopPropagation()},A=S=>{m.abort(),w(this,nr,CA).call(this,e,S)};window.addEventListener("blur",A,{signal:v}),window.addEventListener("pointerup",A,{signal:v}),window.addEventListener("pointerdown",_,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",noContextMenu,{signal:v}),o.addEventListener("pointermove",w(this,nr,xA).bind(this,e),{signal:v}),this._freeHighlight=new FreeHighlightOutliner({x:r,y:c},[u,h,f,d],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(e,i,o){var S,C,b,I;let r=null;if(e instanceof HighlightAnnotationElement){const{data:{quadPoints:B,rect:N,rotation:T,id:L,color:k,opacity:D,popupRef:j},parent:{page:{pageNumber:Z}}}=e;r=e={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(k),opacity:D,quadPoints:B,boxes:null,pageIndex:Z-1,rect:N.slice(0),rotation:T,id:L,deleted:!1,popupRef:j}}else if(e instanceof InkAnnotationElement){const{data:{inkLists:B,rect:N,rotation:T,id:L,color:k,borderStyle:{rawWidth:D},popupRef:j},parent:{page:{pageNumber:Z}}}=e;r=e={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(k),thickness:D,inkLists:B,boxes:null,pageIndex:Z-1,rect:N.slice(0),rotation:T,id:L,deleted:!1,popupRef:j}}const{color:c,quadPoints:u,inkLists:h,opacity:f}=e,d=await super.deserialize(e,i,o);d.color=Util.makeHexColor(...c),x(d,Pa,f||1),h&&x(d,Zs,e.thickness),d.annotationElementId=e.id||null,d._initialData=r;const[m,v]=d.pageDimensions,[_,A]=d.pageTranslation;if(u){const B=x(d,ka,[]);for(let N=0;N<u.length;N+=8)B.push({x:(u[N]-_)/m,y:1-(u[N+1]-A)/v,width:(u[N+2]-u[N])/m,height:(u[N+1]-u[N+5])/v});w(S=d,fn,Pv).call(S),w(C=d,fn,cl).call(C),d.rotate(d.rotation)}else if(h){x(d,_s,!0);const B=h[0],N={x:B[0]-_,y:v-(B[1]-A)},T=new FreeHighlightOutliner(N,[0,0,m,v],1,a(d,Zs)/2,!0,.001);for(let D=0,j=B.length;D<j;D+=2)N.x=B[D]-_,N.y=v-(B[D+1]-A),T.add(N);const{id:L,clipPathId:k}=i.drawLayer.draw(T,d.color,d._defaultOpacity,!0);w(b=d,fn,Up).call(b,{highlightOutlines:T.getOutlines(),highlightId:L,clipPathId:k}),w(I=d,fn,cl).call(I)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),o=AnnotationEditor._colorManager.convert(this.color),r={annotationType:AnnotationEditorType.HIGHLIGHT,color:o,opacity:a(this,Pa),thickness:a(this,Zs),quadPoints:w(this,fn,wA).call(this),outlines:w(this,fn,SA).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:w(this,fn,Bh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!w(this,fn,TA).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};qu=new WeakMap,lf=new WeakMap,ka=new WeakMap,tc=new WeakMap,Xu=new WeakMap,Js=new WeakMap,cf=new WeakMap,uf=new WeakMap,ec=new WeakMap,xr=new WeakMap,Yi=new WeakMap,_s=new WeakMap,Ku=new WeakMap,Pa=new WeakMap,xi=new WeakMap,Yu=new WeakMap,Zs=new WeakMap,hf=new WeakMap,fn=new WeakSet,Pv=function(){const e=new HighlightOutliner(a(this,ka),.001);x(this,xr,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=a(this,xr).box;const i=new HighlightOutliner(a(this,ka),.0025,.001,this._uiManager.direction==="ltr");x(this,Js,i.getOutlines());const{lastPoint:o}=a(this,Js).box;x(this,Ku,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Up=function({highlightOutlines:e,highlightId:i,clipPathId:o}){var m,v;if(x(this,xr,e),x(this,Js,e.getNewOutline(a(this,Zs)/2+1.5,.0025)),i>=0)x(this,Yi,i),x(this,tc,o),this.parent.drawLayer.finalizeLine(i,e),x(this,xi,this.parent.drawLayer.drawOutline(a(this,Js)));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(a(this,Yi),e),this.parent.drawLayer.updateBox(a(this,Yi),w(m=Fn,nr,Qc).call(m,a(this,xr).box,(_-this.rotation+360)%360)),this.parent.drawLayer.updateLine(a(this,xi),a(this,Js)),this.parent.drawLayer.updateBox(a(this,xi),w(v=Fn,nr,Qc).call(v,a(this,Js).box,_))}const{x:c,y:u,width:h,height:f}=e.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=h,this.height=f;break;case 90:{const[_,A]=this.parentDimensions;this.x=u,this.y=1-c,this.width=h*A/_,this.height=f*_/A;break}case 180:this.x=1-c,this.y=1-u,this.width=h,this.height=f;break;case 270:{const[_,A]=this.parentDimensions;this.x=1-u,this.y=c,this.width=h*A/_,this.height=f*_/A;break}}const{lastPoint:d}=a(this,Js).box;x(this,Ku,[(d[0]-c)/h,(d[1]-u)/f])},_A=function(e){const i=(c,u)=>{var h,f,d;this.color=c,(h=this.parent)==null||h.drawLayer.changeColor(a(this,Yi),c),(f=a(this,Xu))==null||f.updateColor(c),x(this,Pa,u),(d=this.parent)==null||d.drawLayer.changeOpacity(a(this,Yi),u)},o=this.color,r=a(this,Pa);this.addCommands({cmd:i.bind(this,e,Fn._defaultOpacity),undo:i.bind(this,o,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},AA=function(e){const i=a(this,Zs),o=r=>{x(this,Zs,r),w(this,fn,bA).call(this,r)};this.addCommands({cmd:o.bind(this,e),undo:o.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},bA=function(e){if(!a(this,_s))return;w(this,fn,Up).call(this,{highlightOutlines:a(this,xr).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,o]=this.parentDimensions;this.setDims(this.width*i,this.height*o)},Mv=function(){a(this,Yi)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Yi)),x(this,Yi,null),this.parent.drawLayer.remove(a(this,xi)),x(this,xi,null))},cl=function(e=this.parent){a(this,Yi)===null&&({id:bi(this,Yi)._,clipPathId:bi(this,tc)._}=e.drawLayer.draw(a(this,xr),this.color,a(this,Pa)),x(this,xi,e.drawLayer.drawOutline(a(this,Js))),a(this,ec)&&(a(this,ec).style.clipPath=a(this,tc)))},nr=new WeakSet,Qc=function({x:e,y:i,width:o,height:r},c){switch(c){case 90:return{x:1-i-r,y:e,width:r,height:o};case 180:return{x:1-e-o,y:1-i-r,width:o,height:r};case 270:return{x:i,y:1-e-o,width:r,height:o}}return{x:e,y:i,width:o,height:r}},EA=function(e){Fn._keyboardManager.exec(this,e)},zp=function(e){if(!a(this,qu))return;const i=window.getSelection();e?i.setPosition(a(this,qu),a(this,lf)):i.setPosition(a(this,cf),a(this,uf))},Bh=function(){return a(this,_s)?this.rotation:0},wA=function(){if(a(this,_s))return null;const[e,i]=this.pageDimensions,[o,r]=this.pageTranslation,c=a(this,ka),u=new Float32Array(c.length*8);let h=0;for(const{x:f,y:d,width:m,height:v}of c){const _=f*e+o,A=(1-d-v)*i+r;u[h]=u[h+4]=_,u[h+1]=u[h+3]=A,u[h+2]=u[h+6]=_+m*e,u[h+5]=u[h+7]=A+v*i,h+=8}return u},SA=function(e){return a(this,xr).serialize(e,w(this,fn,Bh).call(this))},xA=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},CA=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},TA=function(e){const{color:i}=this._initialData;return e.color.some((o,r)=>o!==i[r])},M(Fn,nr),xe(Fn,"_defaultColor",null),xe(Fn,"_defaultOpacity",1),xe(Fn,"_defaultThickness",12),xe(Fn,"_type","highlight"),xe(Fn,"_editorType",AnnotationEditorType.HIGHLIGHT),xe(Fn,"_freeHighlightId",-1),xe(Fn,"_freeHighlight",null),xe(Fn,"_freeHighlightClipId","");let HighlightEditor=Fn;var nc,ic,Xr,Ma,tr,sc,rc,ac,Fa,Qu,oc,lc,Mo,_e,RA,kA,PA,MA,Fv,FA,Lv,LA,IA,DA,OA,NA,ul,Iv,Dv,Ov,Wp,Vp,Jc,Nv,Gp,Ua,jA,jv,HA,BA,Hv,$p,Uh;const si=class si extends AnnotationEditor{constructor(e){super({...e,name:"inkEditor"});M(this,_e);M(this,nc,0);M(this,ic,0);M(this,Xr,null);M(this,Ma,new Path2D);M(this,tr,!1);M(this,sc,null);M(this,rc,!1);M(this,ac,!1);M(this,Fa,null);M(this,Qu,null);M(this,oc,0);M(this,lc,0);M(this,Mo,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,i){AnnotationEditor.initialize(e,i)}static updateDefaultParams(e,i){switch(e){case AnnotationEditorParamsType.INK_THICKNESS:si._defaultThickness=i;break;case AnnotationEditorParamsType.INK_COLOR:si._defaultColor=i;break;case AnnotationEditorParamsType.INK_OPACITY:si._defaultOpacity=i/100;break}}updateParams(e,i){switch(e){case AnnotationEditorParamsType.INK_THICKNESS:w(this,_e,RA).call(this,i);break;case AnnotationEditorParamsType.INK_COLOR:w(this,_e,kA).call(this,i);break;case AnnotationEditorParamsType.INK_OPACITY:w(this,_e,PA).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,si._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,si._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(si._defaultOpacity*100)]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.INK_THICKNESS,this.thickness||si._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,this.color||si._defaultColor||AnnotationEditor._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??si._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(w(this,_e,Wp).call(this),w(this,_e,Vp).call(this)),this.isAttachedToDOM||(this.parent.add(this),w(this,_e,Jc).call(this)),w(this,_e,Uh).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,Xr)&&(clearTimeout(a(this,Xr)),x(this,Xr,null)),(e=a(this,Fa))==null||e.disconnect(),x(this,Fa,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,i]=this.parentDimensions,o=this.width*e,r=this.height*i;this.setDimensions(o,r)}enableEditMode(){a(this,tr)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,w(this,_e,Iv).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),w(this,_e,Dv).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,tr)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,tr,!0),this.div.classList.add("disabled"),w(this,_e,Uh).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||a(this,tr)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),w(this,_e,FA).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),w(this,_e,Lv).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),w(this,_e,Ov).call(this,e)}canvasPointerleave(e){w(this,_e,Ov).call(this,e)}get isResizable(){return!this.isEmpty()&&a(this,tr)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[o,r,c,u]=w(this,_e,MA).call(this);if(this.setAt(o,r,0,0),this.setDims(c,u),w(this,_e,Wp).call(this),this.width){const[h,f]=this.parentDimensions;this.setAspectRatio(this.width*h,this.height*f),this.setAt(e*h,i*f,this.width*h,this.height*f),x(this,ac,!0),w(this,_e,Jc).call(this),this.setDims(this.width*h,this.height*f),w(this,_e,ul).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return w(this,_e,Vp).call(this),this.div}setDimensions(e,i){const o=Math.round(e),r=Math.round(i);if(a(this,oc)===o&&a(this,lc)===r)return;x(this,oc,o),x(this,lc,r),this.canvas.style.visibility="hidden";const[c,u]=this.parentDimensions;this.width=e/c,this.height=i/u,this.fixAndSetPosition(),a(this,tr)&&w(this,_e,Nv).call(this,e,i),w(this,_e,Jc).call(this),w(this,_e,ul).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,i,o){var C,b,I;if(e instanceof InkAnnotationElement)return null;const r=await super.deserialize(e,i,o);r.thickness=e.thickness,r.color=Util.makeHexColor(...e.color),r.opacity=e.opacity;const[c,u]=r.pageDimensions,h=r.width*c,f=r.height*u,d=r.parentScale,m=e.thickness/2;x(r,tr,!0),x(r,oc,Math.round(h)),x(r,lc,Math.round(f));const{paths:v,rect:_,rotation:A}=e;for(let{bezier:B}of v){B=w(C=si,Ua,HA).call(C,B,_,A);const N=[];r.paths.push(N);let T=d*(B[0]-m),L=d*(B[1]-m);for(let D=2,j=B.length;D<j;D+=6){const Z=d*(B[D]-m),O=d*(B[D+1]-m),G=d*(B[D+2]-m),Q=d*(B[D+3]-m),mt=d*(B[D+4]-m),ot=d*(B[D+5]-m);N.push([[T,L],[Z,O],[G,Q],[mt,ot]]),T=mt,L=ot}const k=w(this,Ua,jA).call(this,N);r.bezierPath2D.push(k)}const S=w(b=r,_e,Hv).call(b);return x(r,ic,Math.max(AnnotationEditor.MIN_SIZE,S[2]-S[0])),x(r,nc,Math.max(AnnotationEditor.MIN_SIZE,S[3]-S[1])),w(I=r,_e,Nv).call(I,h,f),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),i=AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:AnnotationEditorType.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:w(this,_e,BA).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};nc=new WeakMap,ic=new WeakMap,Xr=new WeakMap,Ma=new WeakMap,tr=new WeakMap,sc=new WeakMap,rc=new WeakMap,ac=new WeakMap,Fa=new WeakMap,Qu=new WeakMap,oc=new WeakMap,lc=new WeakMap,Mo=new WeakMap,_e=new WeakSet,RA=function(e){const i=r=>{this.thickness=r,w(this,_e,Uh).call(this)},o=this.thickness;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},kA=function(e){const i=r=>{this.color=r,w(this,_e,ul).call(this)},o=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},PA=function(e){const i=r=>{this.opacity=r,w(this,_e,ul).call(this)};e/=100;const o=this.opacity;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},MA=function(){const{parentRotation:e,parentDimensions:[i,o]}=this;switch(e){case 90:return[0,o,o,i];case 180:return[i,o,i,o];case 270:return[i,0,o,i];default:return[0,0,i,o]}},Fv=function(){const{ctx:e,color:i,opacity:o,thickness:r,parentScale:c,scaleFactor:u}=this;e.lineWidth=r*c/u,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${i}${opacityToHex(o)}`},FA=function(e,i){this.canvas.addEventListener("contextmenu",noContextMenu,{signal:this._uiManager._signal}),w(this,_e,Dv).call(this),x(this,sc,new AbortController);const o=this._uiManager.combinedSignal(a(this,sc));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:o}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:o}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:o}),this.isEditing=!0,a(this,ac)||(x(this,ac,!0),w(this,_e,Jc).call(this),this.thickness||(this.thickness=si._defaultThickness),this.color||(this.color=si._defaultColor||AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=si._defaultOpacity)),this.currentPath.push([e,i]),x(this,rc,!1),w(this,_e,Fv).call(this),x(this,Mo,()=>{w(this,_e,DA).call(this),a(this,Mo)&&window.requestAnimationFrame(a(this,Mo))}),window.requestAnimationFrame(a(this,Mo))},Lv=function(e,i){const[o,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===o&&i===r)return;const c=this.currentPath;let u=a(this,Ma);if(c.push([e,i]),x(this,rc,!0),c.length<=2){u.moveTo(...c[0]),u.lineTo(e,i);return}c.length===3&&(x(this,Ma,u=new Path2D),u.moveTo(...c[0])),w(this,_e,OA).call(this,u,...c.at(-3),...c.at(-2),e,i)},LA=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);a(this,Ma).lineTo(...e)},IA=function(e,i){x(this,Mo,null),e=Math.min(Math.max(e,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),w(this,_e,Lv).call(this,e,i),w(this,_e,LA).call(this);let o;if(this.currentPath.length!==1)o=w(this,_e,NA).call(this);else{const f=[e,i];o=[[f,f.slice(),f.slice(),f]]}const r=a(this,Ma),c=this.currentPath;this.currentPath=[],x(this,Ma,new Path2D);const u=()=>{this.allRawPaths.push(c),this.paths.push(o),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},h=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(w(this,_e,Wp).call(this),w(this,_e,Vp).call(this)),w(this,_e,Uh).call(this))};this.addCommands({cmd:u,undo:h,mustExec:!0})},DA=function(){if(!a(this,rc))return;x(this,rc,!1);const e=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),o=i.map(u=>u[0]),r=i.map(u=>u[1]);Math.min(...o)-e,Math.max(...o)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)c.stroke(u);c.stroke(a(this,Ma)),c.restore()},OA=function(e,i,o,r,c,u,h){const f=(i+r)/2,d=(o+c)/2,m=(r+u)/2,v=(c+h)/2;e.bezierCurveTo(f+2*(r-f)/3,d+2*(c-d)/3,m+2*(r-m)/3,v+2*(c-v)/3,m,v)},NA=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const i=[];let o,[r,c]=e[0];for(o=1;o<e.length-2;o++){const[_,A]=e[o],[S,C]=e[o+1],b=(_+S)/2,I=(A+C)/2,B=[r+2*(_-r)/3,c+2*(A-c)/3],N=[b+2*(_-b)/3,I+2*(A-I)/3];i.push([[r,c],B,N,[b,I]]),[r,c]=[b,I]}const[u,h]=e[o],[f,d]=e[o+1],m=[r+2*(u-r)/3,c+2*(h-c)/3],v=[f+2*(u-f)/3,d+2*(h-d)/3];return i.push([[r,c],m,v,[f,d]]),i},ul=function(){if(this.isEmpty()){w(this,_e,Gp).call(this);return}w(this,_e,Fv).call(this);const{canvas:e,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),w(this,_e,Gp).call(this);for(const o of this.bezierPath2D)i.stroke(o)},Iv=function(){if(a(this,Qu))return;x(this,Qu,new AbortController);const e=this._uiManager.combinedSignal(a(this,Qu));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})},Dv=function(){var e;(e=this.pointerdownAC)==null||e.abort(),this.pointerdownAC=null},Ov=function(e){var i;(i=a(this,sc))==null||i.abort(),x(this,sc,null),w(this,_e,Iv).call(this),a(this,Xr)&&clearTimeout(a(this,Xr)),x(this,Xr,setTimeout(()=>{x(this,Xr,null),this.canvas.removeEventListener("contextmenu",noContextMenu)},10)),w(this,_e,IA).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Wp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Vp=function(){x(this,Fa,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),a(this,Fa).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=a(this,Fa))==null||e.disconnect(),x(this,Fa,null)},{once:!0})},Jc=function(){if(!a(this,ac))return;const[e,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*i),w(this,_e,Gp).call(this)},Nv=function(e,i){const o=w(this,_e,$p).call(this),r=(e-o)/a(this,ic),c=(i-o)/a(this,nc);this.scaleFactor=Math.min(r,c)},Gp=function(){const e=w(this,_e,$p).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},Ua=new WeakSet,jA=function(e){const i=new Path2D;for(let o=0,r=e.length;o<r;o++){const[c,u,h,f]=e[o];o===0&&i.moveTo(...c),i.bezierCurveTo(u[0],u[1],h[0],h[1],f[0],f[1])}return i},jv=function(e,i,o){const[r,c,u,h]=i;switch(o){case 0:for(let f=0,d=e.length;f<d;f+=2)e[f]+=r,e[f+1]=h-e[f+1];break;case 90:for(let f=0,d=e.length;f<d;f+=2){const m=e[f];e[f]=e[f+1]+r,e[f+1]=m+c}break;case 180:for(let f=0,d=e.length;f<d;f+=2)e[f]=u-e[f],e[f+1]+=c;break;case 270:for(let f=0,d=e.length;f<d;f+=2){const m=e[f];e[f]=u-e[f+1],e[f+1]=h-m}break;default:throw new Error("Invalid rotation")}return e},HA=function(e,i,o){const[r,c,u,h]=i;switch(o){case 0:for(let f=0,d=e.length;f<d;f+=2)e[f]-=r,e[f+1]=h-e[f+1];break;case 90:for(let f=0,d=e.length;f<d;f+=2){const m=e[f];e[f]=e[f+1]-c,e[f+1]=m-r}break;case 180:for(let f=0,d=e.length;f<d;f+=2)e[f]=u-e[f],e[f+1]-=c;break;case 270:for(let f=0,d=e.length;f<d;f+=2){const m=e[f];e[f]=h-e[f+1],e[f+1]=u-m}break;default:throw new Error("Invalid rotation")}return e},BA=function(e,i,o,r){var d,m;const c=[],u=this.thickness/2,h=e*i+u,f=e*o+u;for(const v of this.paths){const _=[],A=[];for(let S=0,C=v.length;S<C;S++){const[b,I,B,N]=v[S];if(b[0]===N[0]&&b[1]===N[1]&&C===1){const Q=e*b[0]+h,mt=e*b[1]+f;_.push(Q,mt),A.push(Q,mt);break}const T=e*b[0]+h,L=e*b[1]+f,k=e*I[0]+h,D=e*I[1]+f,j=e*B[0]+h,Z=e*B[1]+f,O=e*N[0]+h,G=e*N[1]+f;S===0&&(_.push(T,L),A.push(T,L)),_.push(k,D,j,Z,O,G),A.push(k,D),S===C-1&&A.push(O,G)}c.push({bezier:w(d=si,Ua,jv).call(d,_,r,this.rotation),points:w(m=si,Ua,jv).call(m,A,r,this.rotation)})}return c},Hv=function(){let e=1/0,i=-1/0,o=1/0,r=-1/0;for(const c of this.paths)for(const[u,h,f,d]of c){const m=Util.bezierBoundingBox(...u,...h,...f,...d);e=Math.min(e,m[0]),o=Math.min(o,m[1]),i=Math.max(i,m[2]),r=Math.max(r,m[3])}return[e,o,i,r]},$p=function(){return a(this,tr)?Math.ceil(this.thickness*this.parentScale):0},Uh=function(e=!1){if(this.isEmpty())return;if(!a(this,tr)){w(this,_e,ul).call(this);return}const i=w(this,_e,Hv).call(this),o=w(this,_e,$p).call(this);x(this,ic,Math.max(AnnotationEditor.MIN_SIZE,i[2]-i[0])),x(this,nc,Math.max(AnnotationEditor.MIN_SIZE,i[3]-i[1]));const r=Math.ceil(o+a(this,ic)*this.scaleFactor),c=Math.ceil(o+a(this,nc)*this.scaleFactor),[u,h]=this.parentDimensions;this.width=r/u,this.height=c/h,this.setAspectRatio(r,c);const f=this.translationX,d=this.translationY;this.translationX=-i[0],this.translationY=-i[1],w(this,_e,Jc).call(this),w(this,_e,ul).call(this),x(this,oc,r),x(this,lc,c),this.setDims(r,c);const m=e?o/this.scaleFactor/2:0;this.translate(f-this.translationX-m,d-this.translationY-m)},M(si,Ua),xe(si,"_defaultColor",null),xe(si,"_defaultOpacity",1),xe(si,"_defaultThickness",1),xe(si,"_type","ink"),xe(si,"_editorType",AnnotationEditorType.INK);let InkEditor=si;var ai,Bi,Fo,La,Lo,Ju,Kr,Ia,Yr,Ds,Zu,wn,zh,Wh,qp,Bv,UA,Xp,Uv,Kp,zA,WA;const Qh=class Qh extends AnnotationEditor{constructor(e){super({...e,name:"stampEditor"});M(this,wn);M(this,ai,null);M(this,Bi,null);M(this,Fo,null);M(this,La,null);M(this,Lo,null);M(this,Ju,"");M(this,Kr,null);M(this,Ia,null);M(this,Yr,null);M(this,Ds,!1);M(this,Zu,!1);x(this,La,e.bitmapUrl),x(this,Lo,e.bitmapFile)}static initialize(e,i){AnnotationEditor.initialize(e,i)}static get supportedTypes(){return shadow(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return shadow(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:o}=this._uiManager;if(!o)throw new Error("No ML.");if(!await o.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:c,height:u}=e||this.copyCanvas(null,null,!0).imageData,h=await o.guess({name:"altText",request:{data:r,width:c,height:u,channels:r.length/(c*u)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),i&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e,i;a(this,Bi)&&(x(this,ai,null),this._uiManager.imageManager.deleteId(a(this,Bi)),(e=a(this,Kr))==null||e.remove(),x(this,Kr,null),(i=a(this,Ia))==null||i.disconnect(),x(this,Ia,null),a(this,Yr)&&(clearTimeout(a(this,Yr)),x(this,Yr,null))),super.remove()}rebuild(){if(!this.parent){a(this,Bi)&&w(this,wn,qp).call(this);return}super.rebuild(),this.div!==null&&(a(this,Bi)&&a(this,Kr)===null&&w(this,wn,qp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,Fo)||a(this,ai)||a(this,La)||a(this,Lo)||a(this,Bi))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),a(this,ai)?w(this,wn,Bv).call(this):w(this,wn,qp).call(this),this.width&&!this.annotationElementId){const[o,r]=this.parentDimensions;this.setAt(e*o,i*r,this.width*o,this.height*r)}return this.div}copyCanvas(e,i,o=!1){var _;e||(e=224);const{width:r,height:c}=a(this,ai),u=new OutputScale;let h=a(this,ai),f=r,d=c,m=null;if(i){if(r>i||c>i){const D=Math.min(i/r,i/c);f=Math.floor(r*D),d=Math.floor(c*D)}m=document.createElement("canvas");const A=m.width=Math.ceil(f*u.sx),S=m.height=Math.ceil(d*u.sy);a(this,Ds)||(h=w(this,wn,Xp).call(this,A,S));const C=m.getContext("2d");C.filter=this._uiManager.hcmFilter;let b="white",I="#cfcfd8";this._uiManager.hcmFilter!=="none"?I="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(b="#8f8f9d",I="#42414d");const B=15,N=B*u.sx,T=B*u.sy,L=new OffscreenCanvas(N*2,T*2),k=L.getContext("2d");k.fillStyle=b,k.fillRect(0,0,N*2,T*2),k.fillStyle=I,k.fillRect(0,0,N,T),k.fillRect(N,T,N,T),C.fillStyle=C.createPattern(L,"repeat"),C.fillRect(0,0,A,S),C.drawImage(h,0,0,h.width,h.height,0,0,A,S)}let v=null;if(o){let A,S;if(u.symmetric&&h.width<e&&h.height<e)A=h.width,S=h.height;else if(h=a(this,ai),r>e||c>e){const I=Math.min(e/r,e/c);A=Math.floor(r*I),S=Math.floor(c*I),a(this,Ds)||(h=w(this,wn,Xp).call(this,A,S))}const b=new OffscreenCanvas(A,S).getContext("2d",{willReadFrequently:!0});b.drawImage(h,0,0,h.width,h.height,0,0,A,S),v={width:A,height:S,data:b.getImageData(0,0,A,S).data}}return{canvas:m,width:f,height:d,imageData:v}}getImageForAltText(){return a(this,Kr)}static async deserialize(e,i,o){var S;let r=null;if(e instanceof StampAnnotationElement){const{data:{rect:C,rotation:b,id:I,structParent:B,popupRef:N},container:T,parent:{page:{pageNumber:L}}}=e,k=T.querySelector("canvas"),D=o.imageManager.getFromCanvas(T.id,k);k.remove();const j=((S=await i._structTree.getAriaAttributes(`${AnnotationPrefix}${I}`))==null?void 0:S.get("aria-label"))||"";r=e={annotationType:AnnotationEditorType.STAMP,bitmapId:D.id,bitmap:D.bitmap,pageIndex:L-1,rect:C.slice(0),rotation:b,id:I,deleted:!1,accessibilityData:{decorative:!1,altText:j},isSvg:!1,structParent:B,popupRef:N}}const c=await super.deserialize(e,i,o),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:d,isSvg:m,accessibilityData:v}=e;d&&o.imageManager.isValidId(d)?(x(c,Bi,d),h&&x(c,ai,h)):x(c,La,f),x(c,Ds,m);const[_,A]=c.pageDimensions;return c.width=(u[2]-u[0])/_,c.height=(u[3]-u[1])/A,c.annotationElementId=e.id||null,v&&(c.altTextData=v),c._initialData=r,x(c,Zu,!!r),c}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const o={annotationType:AnnotationEditorType.STAMP,bitmapId:a(this,Bi),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,Ds),structTreeParentId:this._structTreeParentId};if(e)return o.bitmapUrl=w(this,wn,Kp).call(this,!0),o.accessibilityData=this.serializeAltText(!0),o;const{decorative:r,altText:c}=this.serializeAltText(!1);if(!r&&c&&(o.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const h=w(this,wn,WA).call(this,o);if(h.isSame)return null;h.isSameAltText?delete o.accessibilityData:o.accessibilityData.structParent=this._initialData.structParent??-1}if(o.id=this.annotationElementId,i===null)return o;i.stamps||(i.stamps=new Map);const u=a(this,Ds)?(o.rect[2]-o.rect[0])*(o.rect[3]-o.rect[1]):null;if(!i.stamps.has(a(this,Bi)))i.stamps.set(a(this,Bi),{area:u,serialized:o}),o.bitmap=w(this,wn,Kp).call(this,!1);else if(a(this,Ds)){const h=i.stamps.get(a(this,Bi));u>h.area&&(h.area=u,h.serialized.bitmap.close(),h.serialized.bitmap=w(this,wn,Kp).call(this,!1))}return o}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};ai=new WeakMap,Bi=new WeakMap,Fo=new WeakMap,La=new WeakMap,Lo=new WeakMap,Ju=new WeakMap,Kr=new WeakMap,Ia=new WeakMap,Yr=new WeakMap,Ds=new WeakMap,Zu=new WeakMap,wn=new WeakSet,zh=function(e,i=!1){if(!e){this.remove();return}x(this,ai,e.bitmap),i||(x(this,Bi,e.id),x(this,Ds,e.isSvg)),e.file&&x(this,Ju,e.file.name),w(this,wn,Bv).call(this)},Wh=function(){if(x(this,Fo,null),this._uiManager.enableWaiting(!1),!!a(this,Kr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ai)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ai)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},qp=function(){if(a(this,Bi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Bi)).then(o=>w(this,wn,zh).call(this,o,!0)).finally(()=>w(this,wn,Wh).call(this));return}if(a(this,La)){const o=a(this,La);x(this,La,null),this._uiManager.enableWaiting(!0),x(this,Fo,this._uiManager.imageManager.getFromUrl(o).then(r=>w(this,wn,zh).call(this,r)).finally(()=>w(this,wn,Wh).call(this)));return}if(a(this,Lo)){const o=a(this,Lo);x(this,Lo,null),this._uiManager.enableWaiting(!0),x(this,Fo,this._uiManager.imageManager.getFromFile(o).then(r=>w(this,wn,zh).call(this,r)).finally(()=>w(this,wn,Wh).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Qh.supportedTypesStr;const i=this._uiManager._signal;x(this,Fo,new Promise(o=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),w(this,wn,zh).call(this,r)}o()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),o()},{signal:i})}).finally(()=>w(this,wn,Wh).call(this))),e.click()},Bv=function(){const{div:e}=this;let{width:i,height:o}=a(this,ai);const[r,c]=this.pageDimensions,u=.75;if(this.width)i=this.width*r,o=this.height*c;else if(i>u*r||o>u*c){const m=Math.min(u*r/i,u*c/o);i*=m,o*=m}const[h,f]=this.parentDimensions;this.setDims(i*h/r,o*f/c),this._uiManager.enableWaiting(!1);const d=x(this,Kr,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),w(this,wn,Uv).call(this,i,o),w(this,wn,zA).call(this),a(this,Zu)||(this.parent.addUndoableEditor(this),x(this,Zu,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Ju)&&d.setAttribute("aria-label",a(this,Ju))},UA=function(e,i){var u;const[o,r]=this.parentDimensions;this.width=e/o,this.height=i/r,(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,Yr)!==null&&clearTimeout(a(this,Yr)),x(this,Yr,setTimeout(()=>{x(this,Yr,null),w(this,wn,Uv).call(this,e,i)},200))},Xp=function(e,i){const{width:o,height:r}=a(this,ai);let c=o,u=r,h=a(this,ai);for(;c>2*e||u>2*i;){const f=c,d=u;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*i&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const m=new OffscreenCanvas(c,u);m.getContext("2d").drawImage(h,0,0,f,d,0,0,c,u),h=m.transferToImageBitmap()}return h},Uv=function(e,i){const o=new OutputScale,r=Math.ceil(e*o.sx),c=Math.ceil(i*o.sy),u=a(this,Kr);if(!u||u.width===r&&u.height===c)return;u.width=r,u.height=c;const h=a(this,Ds)?a(this,ai):w(this,wn,Xp).call(this,r,c),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,r,c)},Kp=function(e){if(e){if(a(this,Ds)){const r=this._uiManager.imageManager.getSvgUrl(a(this,Bi));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,ai),i.getContext("2d").drawImage(a(this,ai),0,0),i.toDataURL()}if(a(this,Ds)){const[i,o]=this.pageDimensions,r=Math.round(this.width*i*PixelsPerInch.PDF_TO_CSS_UNITS),c=Math.round(this.height*o*PixelsPerInch.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(r,c);return u.getContext("2d").drawImage(a(this,ai),0,0,a(this,ai).width,a(this,ai).height,0,0,r,c),u.transferToImageBitmap()}return structuredClone(a(this,ai))},zA=function(){this._uiManager._signal&&(x(this,Ia,new ResizeObserver(e=>{const i=e[0].contentRect;i.width&&i.height&&w(this,wn,UA).call(this,i.width,i.height)})),a(this,Ia).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=a(this,Ia))==null||e.disconnect(),x(this,Ia,null)},{once:!0}))},WA=function(e){var f;const{rect:i,pageIndex:o,accessibilityData:{altText:r}}=this._initialData,c=e.rect.every((d,m)=>Math.abs(d-i[m])<1),u=e.pageIndex===o,h=(((f=e.accessibilityData)==null?void 0:f.alt)||"")===r;return{isSame:c&&u&&h,isSameAltText:h}},xe(Qh,"_type","stamp"),xe(Qh,"_editorType",AnnotationEditorType.STAMP);let StampEditor=Qh;var cc,th,Qr,Io,Da,Os,Do,eh,nh,Qi,Oa,Je,Oo,Ui,VA,zv,Wv,Vv,Yp;const dr=class dr{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:o,accessibilityManager:r,annotationLayer:c,drawLayer:u,textLayer:h,viewport:f,l10n:d}){M(this,Ui);M(this,cc);M(this,th,!1);M(this,Qr,null);M(this,Io,null);M(this,Da,null);M(this,Os,new Map);M(this,Do,!1);M(this,eh,!1);M(this,nh,!1);M(this,Qi,null);M(this,Oa,null);M(this,Je);const m=[...a(dr,Oo).values()];if(!dr._initialized){dr._initialized=!0;for(const v of m)v.initialize(d,t)}t.registerEditorTypes(m),x(this,Je,t),this.pageIndex=e,this.div=i,x(this,cc,r),x(this,Qr,c),this.viewport=f,x(this,Qi,h),this.drawLayer=u,this._structTree=o,a(this,Je).addLayer(this)}get isEmpty(){return a(this,Os).size===0}get isInvisible(){return this.isEmpty&&a(this,Je).getMode()===AnnotationEditorType.NONE}updateToolbar(t){a(this,Je).updateToolbar(t)}updateMode(t=a(this,Je).getMode()){switch(w(this,Ui,Yp).call(this),t){case AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of a(dr,Oo).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,Qi))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(a(this,Je).getMode()!==AnnotationEditorType.INK)return;if(!t){for(const i of a(this,Os).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){a(this,Je).setEditingState(t)}addCommands(t){a(this,Je).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,Qr))==null||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of a(this,Os).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(a(this,Je).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!a(this,Qr))return;const e=a(this,Qr).getEditableAnnotations();for(const i of e){if(i.hide(),a(this,Je).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const o=await this.deserialize(i);o&&(this.addOrRebuild(o),o.enableEditing())}}disable(){var o;x(this,nh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of a(this,Os).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(o=this.getEditableAnnotation(r.annotationElementId))==null||o.show(),r.remove()}if(a(this,Qr)){const r=a(this,Qr).getEditableAnnotations();for(const c of r){const{id:u}=c.data;if(a(this,Je).isDeletedAnnotationElement(u))continue;let h=e.get(u);if(h){h.resetAnnotationElement(c),h.show(!1),c.show();continue}h=t.get(u),h&&(a(this,Je).addChangedExistingAnnotation(h),h.renderAnnotationElement(c)&&h.show(!1)),c.show()}}w(this,Ui,Yp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of a(dr,Oo).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,nh,!1)}getEditableAnnotation(t){var e;return((e=a(this,Qr))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,Je).getActive()!==t&&a(this,Je).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,Qi))!=null&&t.div&&!a(this,Oa)){x(this,Oa,new AbortController);const e=a(this,Je).combinedSignal(a(this,Oa));a(this,Qi).div.addEventListener("pointerdown",w(this,Ui,VA).bind(this),{signal:e}),a(this,Qi).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,Qi))!=null&&t.div&&a(this,Oa)&&(a(this,Oa).abort(),x(this,Oa,null),a(this,Qi).div.classList.remove("highlighting"))}enableClick(){if(a(this,Io))return;x(this,Io,new AbortController);const t=a(this,Je).combinedSignal(a(this,Io));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=a(this,Io))==null||t.abort(),x(this,Io,null)}attach(t){a(this,Os).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,Je).isDeletedAnnotationElement(e)&&a(this,Je).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Os).delete(t.id),(e=a(this,cc))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,nh)&&t.annotationElementId&&a(this,Je).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,Je).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,a(this,eh)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,Je).addDeletedAnnotationElement(t.annotationElementId),AnnotationEditor.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,Je).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),a(this,Je).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Da)&&(t._focusEventsAllowed=!1,x(this,Da,setTimeout(()=>{x(this,Da,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,Je)._signal}),e.focus())},0))),t._structTreeParentId=(i=a(this,cc))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return a(this,Je).getId()}combinedSignal(t){return a(this,Je).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,Ui,zv))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){a(this,Je).updateToolbar(t),a(this,Je).updateMode(t);const{offsetX:i,offsetY:o}=w(this,Ui,Vv).call(this),r=this.getNextId(),c=w(this,Ui,Wv).call(this,{parent:this,id:r,x:i,y:o,uiManager:a(this,Je),isCentered:!0,...e});c&&this.add(c)}async deserialize(t){var e;return await((e=a(dr,Oo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,Je)))||null}createAndAddNewEditor(t,e,i={}){const o=this.getNextId(),r=w(this,Ui,Wv).call(this,{parent:this,id:o,x:t.offsetX,y:t.offsetY,uiManager:a(this,Je),isCentered:e,...i});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(w(this,Ui,Vv).call(this),!0)}setSelected(t){a(this,Je).setSelected(t)}toggleSelected(t){a(this,Je).toggleSelected(t)}unselect(t){a(this,Je).unselect(t)}pointerup(t){const{isMac:e}=util_FeatureTest.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&a(this,Do)){if(x(this,Do,!1),!a(this,th)){x(this,th,!0);return}if(a(this,Je).getMode()===AnnotationEditorType.STAMP){a(this,Je).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(a(this,Je).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),a(this,Do)){x(this,Do,!1);return}const{isMac:e}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;x(this,Do,!0);const i=a(this,Je).getActive();x(this,th,!i||i.isEmpty())}findNewParent(t,e,i){const o=a(this,Je).findParent(e,i);return o===null||o===this?!1:(o.changeParent(t),!0)}destroy(){var t,e;((t=a(this,Je).getActive())==null?void 0:t.parent)===this&&(a(this,Je).commitOrRemove(),a(this,Je).setActiveEditor(null)),a(this,Da)&&(clearTimeout(a(this,Da)),x(this,Da,null));for(const i of a(this,Os).values())(e=a(this,cc))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,Os).clear(),a(this,Je).removeLayer(this)}render({viewport:t}){this.viewport=t,setLayerDimensions(this.div,t);for(const e of a(this,Je).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,Je).commitOrRemove(),w(this,Ui,Yp).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,setLayerDimensions(this.div,{rotation:i}),e!==i)for(const o of a(this,Os).values())o.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,Je).viewParameters.realScale}};cc=new WeakMap,th=new WeakMap,Qr=new WeakMap,Io=new WeakMap,Da=new WeakMap,Os=new WeakMap,Do=new WeakMap,eh=new WeakMap,nh=new WeakMap,Qi=new WeakMap,Oa=new WeakMap,Je=new WeakMap,Oo=new WeakMap,Ui=new WeakSet,VA=function(t){a(this,Je).unselectAll();const{target:e}=t;if(e===a(this,Qi).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,Qi).div.contains(e)){const{isMac:i}=util_FeatureTest.platform;if(t.button!==0||t.ctrlKey&&i)return;a(this,Je).showAllEditors("highlight",!0,!0),a(this,Qi).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,a(this,Je).direction==="ltr",{target:a(this,Qi).div,x:t.x,y:t.y}),a(this,Qi).div.addEventListener("pointerup",()=>{a(this,Qi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,Je)._signal}),t.preventDefault()}},zv=function(){return a(dr,Oo).get(a(this,Je).getMode())},Wv=function(t){const e=a(this,Ui,zv);return e?new e.prototype.constructor(t):null},Vv=function(){const{x:t,y:e,width:i,height:o}=this.div.getBoundingClientRect(),r=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+i),h=Math.min(window.innerHeight,e+o),f=(r+u)/2-t,d=(c+h)/2-e,[m,v]=this.viewport.rotation%180===0?[f,d]:[d,f];return{offsetX:m,offsetY:v}},Yp=function(){x(this,eh,!0);for(const t of a(this,Os).values())t.isEmpty()&&t.remove();x(this,eh,!1)},xe(dr,"_initialized",!1),M(dr,Oo,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor].map(t=>[t._editorType,t])));let AnnotationEditorLayer=dr;var Jr,df,mi,Na,ff,Gv,hc,$v,GA;const Ni=class Ni{constructor({pageIndex:t}){M(this,hc);M(this,Jr,null);M(this,df,0);M(this,mi,new Map);M(this,Na,new Map);this.pageIndex=t}setParent(t){if(!a(this,Jr)){x(this,Jr,t);return}if(a(this,Jr)!==t){if(a(this,mi).size>0)for(const e of a(this,mi).values())e.remove(),t.append(e);x(this,Jr,t)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(t,e,i,o=!1){const r=bi(this,df)._++,c=w(this,hc,$v).call(this,t.box);c.classList.add(...t.classNamesForDrawing);const u=Ni._svgFactory.createElement("defs");c.append(u);const h=Ni._svgFactory.createElement("path");u.append(h);const f=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",f),h.setAttribute("d",t.toSVGPath()),o&&a(this,Na).set(r,h);const d=w(this,hc,GA).call(this,u,f),m=Ni._svgFactory.createElement("use");return c.append(m),c.setAttribute("fill",e),c.setAttribute("fill-opacity",i),m.setAttribute("href",`#${f}`),a(this,mi).set(r,c),{id:r,clipPathId:`url(#${d})`}}drawOutline(t){const e=bi(this,df)._++,i=w(this,hc,$v).call(this,t.box);i.classList.add(...t.classNamesForOutlining);const o=Ni._svgFactory.createElement("defs");i.append(o);const r=Ni._svgFactory.createElement("path");o.append(r);const c=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",c),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let u;if(t.mustRemoveSelfIntersections){const d=Ni._svgFactory.createElement("mask");o.append(d),u=`mask_p${this.pageIndex}_${e}`,d.setAttribute("id",u),d.setAttribute("maskUnits","objectBoundingBox");const m=Ni._svgFactory.createElement("rect");d.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const v=Ni._svgFactory.createElement("use");d.append(v),v.setAttribute("href",`#${c}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const h=Ni._svgFactory.createElement("use");i.append(h),h.setAttribute("href",`#${c}`),u&&h.setAttribute("mask",`url(#${u})`);const f=h.cloneNode();return i.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),a(this,mi).set(e,i),e}finalizeLine(t,e){const i=a(this,Na).get(t);a(this,Na).delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){a(this,mi).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){a(this,Na).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var i;w(i=Ni,ff,Gv).call(i,a(this,mi).get(t),e)}show(t,e){a(this,mi).get(t).classList.toggle("hidden",!e)}rotate(t,e){a(this,mi).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){a(this,mi).get(t).setAttribute("fill",e)}changeOpacity(t,e){a(this,mi).get(t).setAttribute("fill-opacity",e)}addClass(t,e){a(this,mi).get(t).classList.add(e)}removeClass(t,e){a(this,mi).get(t).classList.remove(e)}getSVGRoot(t){return a(this,mi).get(t)}remove(t){a(this,Na).delete(t),a(this,Jr)!==null&&(a(this,mi).get(t).remove(),a(this,mi).delete(t))}destroy(){x(this,Jr,null);for(const t of a(this,mi).values())t.remove();a(this,mi).clear(),a(this,Na).clear()}};Jr=new WeakMap,df=new WeakMap,mi=new WeakMap,Na=new WeakMap,ff=new WeakSet,Gv=function(t,{x:e=0,y:i=0,width:o=1,height:r=1}={}){const{style:c}=t;c.top=`${100*i}%`,c.left=`${100*e}%`,c.width=`${100*o}%`,c.height=`${100*r}%`},hc=new WeakSet,$v=function(t){var i;const e=Ni._svgFactory.create(1,1,!0);return a(this,Jr).append(e),e.setAttribute("aria-hidden",!0),w(i=Ni,ff,Gv).call(i,e,t),e},GA=function(t,e){const i=Ni._svgFactory.createElement("clipPath");t.append(i);const o=`clip_${e}`;i.setAttribute("id",o),i.setAttribute("clipPathUnits","objectBoundingBox");const r=Ni._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),o},M(Ni,ff);let DrawLayer=Ni;__webpack_exports__.AbortException;__webpack_exports__.AnnotationEditorLayer;__webpack_exports__.AnnotationEditorParamsType;__webpack_exports__.AnnotationEditorType;__webpack_exports__.AnnotationEditorUIManager;__webpack_exports__.AnnotationLayer;__webpack_exports__.AnnotationMode;__webpack_exports__.ColorPicker;__webpack_exports__.DOMSVGFactory;__webpack_exports__.DrawLayer;__webpack_exports__.FeatureTest;__webpack_exports__.GlobalWorkerOptions;__webpack_exports__.ImageKind;__webpack_exports__.InvalidPDFException;__webpack_exports__.MissingPDFException;__webpack_exports__.OPS;__webpack_exports__.OutputScale;__webpack_exports__.PDFDataRangeTransport;__webpack_exports__.PDFDateString;__webpack_exports__.PDFWorker;__webpack_exports__.PasswordResponses;__webpack_exports__.PermissionFlag;__webpack_exports__.PixelsPerInch;__webpack_exports__.RenderingCancelledException;__webpack_exports__.TextLayer;__webpack_exports__.UnexpectedResponseException;__webpack_exports__.Util;__webpack_exports__.VerbosityLevel;__webpack_exports__.XfaLayer;__webpack_exports__.build;__webpack_exports__.createValidAbsoluteUrl;__webpack_exports__.fetchData;__webpack_exports__.getDocument;__webpack_exports__.getFilenameFromUrl;__webpack_exports__.getPdfFilenameFromUrl;__webpack_exports__.getXfaPageViewport;__webpack_exports__.isDataScheme;__webpack_exports__.isPdfFile;__webpack_exports__.noContextMenu;__webpack_exports__.normalizeUnicode;__webpack_exports__.setLayerDimensions;__webpack_exports__.shadow;var __webpack_exports__version=__webpack_exports__.version,lib={exports:{}},core_min={};function commonjsRequire(g){throw new Error('Could not dynamically require "'+g+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(t,e){module.exports=t.pdfjsLib=e()})(globalThis,()=>(()=>{var __webpack_modules__=[,(g,t)=>{var dn;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=$,t.bytesToString=It,t.createValidAbsoluteUrl=V,t.getModificationDate=Qt,t.getUuid=Ee,t.getVerbosityLevel=ot,t.info=dt,t.isArrayBuffer=yt,t.isArrayEqual=ne,t.isNodeJS=void 0,t.normalizeUnicode=ce,t.objectFromMap=Gt,t.objectSize=Vt,t.setVerbosityLevel=mt,t.shadow=H,t.string32=Ht,t.stringToBytes=Dt,t.stringToPDFString=Ot,t.stringToUTF8String=qt,t.unreachable=it,t.utf8StringToString=Ut,t.warn=et;const e=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=e;const i=[1,0,0,1,0,0];t.IDENTITY_MATRIX=i;const o=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=o;const r=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=r;const c=1.35;t.LINE_FACTOR=c;const u=.35;t.LINE_DESCENT_FACTOR=u;const h=u/c;t.BASELINE_FACTOR=h;const f={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=f;const d={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=d;const m="pdfjs_internal_editor_";t.AnnotationEditorPrefix=m;const v={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=v;const _={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=_;const A={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=A;const S={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=S;const C={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=C;const b={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=b;const I={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=I;const B={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=B;const N={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=N;const T={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=T;const L={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=L;const k={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=k;const D={O:"PageOpen",C:"PageClose"};t.PageActionEventType=D;const j={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=j;const Z={NONE:0,BINARY:1};t.CMapCompressionType=Z;const O={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=O;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=G;let Q=j.WARNINGS;function mt(zt){Number.isInteger(zt)&&(Q=zt)}function ot(){return Q}function dt(zt){Q>=j.INFOS&&console.log(`Info: ${zt}`)}function et(zt){Q>=j.WARNINGS&&console.log(`Warning: ${zt}`)}function it(zt){throw new Error(zt)}function $(zt,bt){zt||it(bt)}function tt(zt){switch(zt==null?void 0:zt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function V(zt,bt=null,Et=null){if(!zt)return null;try{if(Et&&typeof zt=="string"){if(Et.addDefaultProtocol&&zt.startsWith("www.")){const pe=zt.match(/\./g);(pe==null?void 0:pe.length)>=2&&(zt=`http://${zt}`)}if(Et.tryConvertEncoding)try{zt=qt(zt)}catch{}}const he=bt?new URL(zt,bt):new URL(zt);if(tt(he))return he}catch{}return null}function H(zt,bt,Et,he=!1){return Object.defineProperty(zt,bt,{value:Et,enumerable:!he,configurable:!0,writable:!1}),Et}const R=function(){function bt(Et,he){this.constructor===bt&&it("Cannot initialize BaseException."),this.message=Et,this.name=he}return bt.prototype=new Error,bt.constructor=bt,bt}();t.BaseException=R;class F extends R{constructor(bt,Et){super(bt,"PasswordException"),this.code=Et}}t.PasswordException=F;class U extends R{constructor(bt,Et){super(bt,"UnknownErrorException"),this.details=Et}}t.UnknownErrorException=U;class K extends R{constructor(bt){super(bt,"InvalidPDFException")}}t.InvalidPDFException=K;class X extends R{constructor(bt){super(bt,"MissingPDFException")}}t.MissingPDFException=X;class Y extends R{constructor(bt,Et){super(bt,"UnexpectedResponseException"),this.status=Et}}t.UnexpectedResponseException=Y;class ut extends R{constructor(bt){super(bt,"FormatError")}}t.FormatError=ut;class wt extends R{constructor(bt){super(bt,"AbortException")}}t.AbortException=wt;function It(zt){(typeof zt!="object"||(zt==null?void 0:zt.length)===void 0)&&it("Invalid argument for bytesToString");const bt=zt.length,Et=8192;if(bt<Et)return String.fromCharCode.apply(null,zt);const he=[];for(let pe=0;pe<bt;pe+=Et){const Te=Math.min(pe+Et,bt),rt=zt.subarray(pe,Te);he.push(String.fromCharCode.apply(null,rt))}return he.join("")}function Dt(zt){typeof zt!="string"&&it("Invalid argument for stringToBytes");const bt=zt.length,Et=new Uint8Array(bt);for(let he=0;he<bt;++he)Et[he]=zt.charCodeAt(he)&255;return Et}function Ht(zt){return String.fromCharCode(zt>>24&255,zt>>16&255,zt>>8&255,zt&255)}function Vt(zt){return Object.keys(zt).length}function Gt(zt){const bt=Object.create(null);for(const[Et,he]of zt)bt[Et]=he;return bt}function xt(){const zt=new Uint8Array(4);return zt[0]=1,new Uint32Array(zt.buffer,0,1)[0]===1}function Pt(){try{return new Function(""),!0}catch{return!1}}class q{static get isLittleEndian(){return H(this,"isLittleEndian",xt())}static get isEvalSupported(){return H(this,"isEvalSupported",Pt())}static get isOffscreenCanvasSupported(){return H(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?H(this,"platform",{isWin:!1,isMac:!1}):H(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var bt,Et;return H(this,"isCSSRoundSupported",(Et=(bt=globalThis.CSS)==null?void 0:bt.supports)==null?void 0:Et.call(bt,"width: round(1.5px, 1px)"))}}t.FeatureTest=q;const st=[...Array(256).keys()].map(zt=>zt.toString(16).padStart(2,"0"));class vt{static makeHexColor(bt,Et,he){return`#${st[bt]}${st[Et]}${st[he]}`}static scaleMinMax(bt,Et){let he;bt[0]?(bt[0]<0&&(he=Et[0],Et[0]=Et[1],Et[1]=he),Et[0]*=bt[0],Et[1]*=bt[0],bt[3]<0&&(he=Et[2],Et[2]=Et[3],Et[3]=he),Et[2]*=bt[3],Et[3]*=bt[3]):(he=Et[0],Et[0]=Et[2],Et[2]=he,he=Et[1],Et[1]=Et[3],Et[3]=he,bt[1]<0&&(he=Et[2],Et[2]=Et[3],Et[3]=he),Et[2]*=bt[1],Et[3]*=bt[1],bt[2]<0&&(he=Et[0],Et[0]=Et[1],Et[1]=he),Et[0]*=bt[2],Et[1]*=bt[2]),Et[0]+=bt[4],Et[1]+=bt[4],Et[2]+=bt[5],Et[3]+=bt[5]}static transform(bt,Et){return[bt[0]*Et[0]+bt[2]*Et[1],bt[1]*Et[0]+bt[3]*Et[1],bt[0]*Et[2]+bt[2]*Et[3],bt[1]*Et[2]+bt[3]*Et[3],bt[0]*Et[4]+bt[2]*Et[5]+bt[4],bt[1]*Et[4]+bt[3]*Et[5]+bt[5]]}static applyTransform(bt,Et){const he=bt[0]*Et[0]+bt[1]*Et[2]+Et[4],pe=bt[0]*Et[1]+bt[1]*Et[3]+Et[5];return[he,pe]}static applyInverseTransform(bt,Et){const he=Et[0]*Et[3]-Et[1]*Et[2],pe=(bt[0]*Et[3]-bt[1]*Et[2]+Et[2]*Et[5]-Et[4]*Et[3])/he,Te=(-bt[0]*Et[1]+bt[1]*Et[0]+Et[4]*Et[1]-Et[5]*Et[0])/he;return[pe,Te]}static getAxialAlignedBoundingBox(bt,Et){const he=this.applyTransform(bt,Et),pe=this.applyTransform(bt.slice(2,4),Et),Te=this.applyTransform([bt[0],bt[3]],Et),rt=this.applyTransform([bt[2],bt[1]],Et);return[Math.min(he[0],pe[0],Te[0],rt[0]),Math.min(he[1],pe[1],Te[1],rt[1]),Math.max(he[0],pe[0],Te[0],rt[0]),Math.max(he[1],pe[1],Te[1],rt[1])]}static inverseTransform(bt){const Et=bt[0]*bt[3]-bt[1]*bt[2];return[bt[3]/Et,-bt[1]/Et,-bt[2]/Et,bt[0]/Et,(bt[2]*bt[5]-bt[4]*bt[3])/Et,(bt[4]*bt[1]-bt[5]*bt[0])/Et]}static singularValueDecompose2dScale(bt){const Et=[bt[0],bt[2],bt[1],bt[3]],he=bt[0]*Et[0]+bt[1]*Et[2],pe=bt[0]*Et[1]+bt[1]*Et[3],Te=bt[2]*Et[0]+bt[3]*Et[2],rt=bt[2]*Et[1]+bt[3]*Et[3],Nt=(he+rt)/2,ee=Math.sqrt((he+rt)**2-4*(he*rt-Te*pe))/2,ge=Nt+ee||1,ye=Nt-ee||1;return[Math.sqrt(ge),Math.sqrt(ye)]}static normalizeRect(bt){const Et=bt.slice(0);return bt[0]>bt[2]&&(Et[0]=bt[2],Et[2]=bt[0]),bt[1]>bt[3]&&(Et[1]=bt[3],Et[3]=bt[1]),Et}static intersect(bt,Et){const he=Math.max(Math.min(bt[0],bt[2]),Math.min(Et[0],Et[2])),pe=Math.min(Math.max(bt[0],bt[2]),Math.max(Et[0],Et[2]));if(he>pe)return null;const Te=Math.max(Math.min(bt[1],bt[3]),Math.min(Et[1],Et[3])),rt=Math.min(Math.max(bt[1],bt[3]),Math.max(Et[1],Et[3]));return Te>rt?null:[he,Te,pe,rt]}static bezierBoundingBox(bt,Et,he,pe,Te,rt,Nt,ee){const ge=[],ye=[[],[]];let le,nt,J,pt,Mt,Ft,Wt,Yt;for(let Ve=0;Ve<2;++Ve){if(Ve===0?(nt=6*bt-12*he+6*Te,le=-3*bt+9*he-9*Te+3*Nt,J=3*he-3*bt):(nt=6*Et-12*pe+6*rt,le=-3*Et+9*pe-9*rt+3*ee,J=3*pe-3*Et),Math.abs(le)<1e-12){if(Math.abs(nt)<1e-12)continue;pt=-J/nt,0<pt&&pt<1&&ge.push(pt);continue}Wt=nt*nt-4*J*le,Yt=Math.sqrt(Wt),!(Wt<0)&&(Mt=(-nt+Yt)/(2*le),0<Mt&&Mt<1&&ge.push(Mt),Ft=(-nt-Yt)/(2*le),0<Ft&&Ft<1&&ge.push(Ft))}let fe=ge.length,de;const se=fe;for(;fe--;)pt=ge[fe],de=1-pt,ye[0][fe]=de*de*de*bt+3*de*de*pt*he+3*de*pt*pt*Te+pt*pt*pt*Nt,ye[1][fe]=de*de*de*Et+3*de*de*pt*pe+3*de*pt*pt*rt+pt*pt*pt*ee;return ye[0][se]=bt,ye[1][se]=Et,ye[0][se+1]=Nt,ye[1][se+1]=ee,ye[0].length=ye[1].length=se+2,[Math.min(...ye[0]),Math.min(...ye[1]),Math.max(...ye[0]),Math.max(...ye[1])]}}t.Util=vt;const Ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ot(zt){if(zt[0]>=""){let Et;if(zt[0]===""&&zt[1]===""?Et="utf-16be":zt[0]===""&&zt[1]===""?Et="utf-16le":zt[0]===""&&zt[1]===""&&zt[2]===""&&(Et="utf-8"),Et)try{const he=new TextDecoder(Et,{fatal:!0}),pe=Dt(zt);return he.decode(pe)}catch(he){et(`stringToPDFString: "${he}".`)}}const bt=[];for(let Et=0,he=zt.length;Et<he;Et++){const pe=Ct[zt.charCodeAt(Et)];bt.push(pe?String.fromCharCode(pe):zt.charAt(Et))}return bt.join("")}function qt(zt){return decodeURIComponent(escape(zt))}function Ut(zt){return unescape(encodeURIComponent(zt))}function yt(zt){return typeof zt=="object"&&(zt==null?void 0:zt.byteLength)!==void 0}function ne(zt,bt){if(zt.length!==bt.length)return!1;for(let Et=0,he=zt.length;Et<he;Et++)if(zt[Et]!==bt[Et])return!1;return!0}function Qt(zt=new Date){return[zt.getUTCFullYear().toString(),(zt.getUTCMonth()+1).toString().padStart(2,"0"),zt.getUTCDate().toString().padStart(2,"0"),zt.getUTCHours().toString().padStart(2,"0"),zt.getUTCMinutes().toString().padStart(2,"0"),zt.getUTCSeconds().toString().padStart(2,"0")].join("")}class He{constructor(){M(this,dn,!1);this.promise=new Promise((bt,Et)=>{this.resolve=he=>{x(this,dn,!0),bt(he)},this.reject=he=>{x(this,dn,!0),Et(he)}})}get settled(){return a(this,dn)}}dn=new WeakMap,t.PromiseCapability=He;let Pe=null,Qe=null;function ce(zt){return Pe||(Pe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Qe=new Map([["","t"]])),zt.replaceAll(Pe,(bt,Et,he)=>Et?Et.normalize("NFKC"):Qe.get(he))}function Ee(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const zt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(zt);else for(let bt=0;bt<32;bt++)zt[bt]=Math.floor(Math.random()*255);return It(zt)}const Xe="pdfjs_internal_id_";t.AnnotationPrefix=Xe},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var g,e,i,o,Zc,Qp,u,h,f,d,m,v,_,A,S,Jp,b,I,qv,N,T;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(k){if(typeof k=="string"||k instanceof URL?k={url:k}:(0,_util.isArrayBuffer)(k)&&(k={data:k}),typeof k!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!k.url&&!k.data&&!k.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const D=new PDFDocumentLoadingTask,{docId:j}=D,Z=k.url?getUrlProp(k.url):null,O=k.data?getDataProp(k.data):null,G=k.httpHeaders||null,Q=k.withCredentials===!0,mt=k.password??null,ot=k.range instanceof PDFDataRangeTransport?k.range:null,dt=Number.isInteger(k.rangeChunkSize)&&k.rangeChunkSize>0?k.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let et=k.worker instanceof PDFWorker?k.worker:null;const it=k.verbosity,$=typeof k.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(k.docBaseUrl)?k.docBaseUrl:null,tt=typeof k.cMapUrl=="string"?k.cMapUrl:null,V=k.cMapPacked!==!1,H=k.CMapReaderFactory||DefaultCMapReaderFactory,R=typeof k.standardFontDataUrl=="string"?k.standardFontDataUrl:null,F=k.StandardFontDataFactory||DefaultStandardFontDataFactory,U=k.stopAtErrors!==!0,K=Number.isInteger(k.maxImageSize)&&k.maxImageSize>-1?k.maxImageSize:-1,X=k.isEvalSupported!==!1,Y=typeof k.isOffscreenCanvasSupported=="boolean"?k.isOffscreenCanvasSupported:!_util.isNodeJS,ut=Number.isInteger(k.canvasMaxAreaInBytes)?k.canvasMaxAreaInBytes:-1,wt=typeof k.disableFontFace=="boolean"?k.disableFontFace:_util.isNodeJS,It=k.fontExtraProperties===!0,Dt=k.enableXfa===!0,Ht=k.ownerDocument||globalThis.document,Vt=k.disableRange===!0,Gt=k.disableStream===!0,xt=k.disableAutoFetch===!0,Pt=k.pdfBug===!0,q=ot?ot.length:k.length??NaN,st=typeof k.useSystemFonts=="boolean"?k.useSystemFonts:!_util.isNodeJS&&!wt,vt=typeof k.useWorkerFetch=="boolean"?k.useWorkerFetch:H===_display_utils.DOMCMapReaderFactory&&F===_display_utils.DOMStandardFontDataFactory&&tt&&R&&(0,_display_utils.isValidFetchUrl)(tt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(R,document.baseURI),Ct=k.canvasFactory||new DefaultCanvasFactory({ownerDocument:Ht}),Ot=k.filterFactory||new DefaultFilterFactory({docId:j,ownerDocument:Ht}),qt=null;(0,_util.setVerbosityLevel)(it);const Ut={canvasFactory:Ct,filterFactory:Ot};if(vt||(Ut.cMapReaderFactory=new H({baseUrl:tt,isCompressed:V}),Ut.standardFontDataFactory=new F({baseUrl:R})),!et){const Qt={verbosity:it,port:_worker_options.GlobalWorkerOptions.workerPort};et=Qt.port?PDFWorker.fromPort(Qt):new PDFWorker(Qt),D._worker=et}const yt={docId:j,apiVersion:"3.11.174",data:O,password:mt,disableAutoFetch:xt,rangeChunkSize:dt,length:q,docBaseUrl:$,enableXfa:Dt,evaluatorOptions:{maxImageSize:K,disableFontFace:wt,ignoreErrors:U,isEvalSupported:X,isOffscreenCanvasSupported:Y,canvasMaxAreaInBytes:ut,fontExtraProperties:It,useSystemFonts:st,cMapUrl:vt?tt:null,standardFontDataUrl:vt?R:null}},ne={ignoreErrors:U,isEvalSupported:X,disableFontFace:wt,fontExtraProperties:It,enableXfa:Dt,ownerDocument:Ht,disableAutoFetch:xt,pdfBug:Pt,styleElement:qt};return et.promise.then(function(){if(D.destroyed)throw new Error("Loading aborted");const Qt=_fetchDocument(et,yt),He=new Promise(function(Pe){let Qe;ot?Qe=new _transport_stream.PDFDataTransportStream({length:q,initialData:ot.initialData,progressiveDone:ot.progressiveDone,contentDispositionFilename:ot.contentDispositionFilename,disableRange:Vt,disableStream:Gt},ot):O||(Qe=(Ee=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ee):(0,_display_utils.isValidFetchUrl)(Ee.url)?new _displayFetch_stream.PDFFetchStream(Ee):new _displayNetwork.PDFNetworkStream(Ee))({url:Z,length:q,httpHeaders:G,withCredentials:Q,rangeChunkSize:dt,disableRange:Vt,disableStream:Gt})),Pe(Qe)});return Promise.all([Qt,He]).then(function([Pe,Qe]){if(D.destroyed)throw new Error("Loading aborted");const ce=new _message_handler.MessageHandler(j,Pe,et.port),Ee=new WorkerTransport(ce,D,Qe,ne,Ut);D._transport=Ee,ce.send("Ready",null)})}).catch(D._capability.reject),D}async function _fetchDocument(k,D){if(k.destroyed)throw new Error("Worker was destroyed");const j=await k.messageHandler.sendWithPromise("GetDocRequest",D,D.data?[D.data.buffer]:null);if(k.destroyed)throw new Error("Worker was destroyed");return j}function getUrlProp(k){if(k instanceof URL)return k.href;try{return new URL(k,window.location).href}catch{if(_util.isNodeJS&&typeof k=="string")return k}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(k){if(_util.isNodeJS&&typeof Buffer<"u"&&k instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(k instanceof Uint8Array&&k.byteLength===k.buffer.byteLength)return k;if(typeof k=="string")return(0,_util.stringToBytes)(k);if(typeof k=="object"&&!isNaN(k==null?void 0:k.length)||(0,_util.isArrayBuffer)(k))return new Uint8Array(k);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${bi(t,g)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var D,j,Z;this.destroyed=!0;try{(D=this._worker)!=null&&D.port&&(this._worker._pendingDestroy=!0),await((j=this._transport)==null?void 0:j.destroy())}catch(O){throw(Z=this._worker)!=null&&Z.port&&delete this._worker._pendingDestroy,O}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};g=new WeakMap,M(t,g,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(D,j,Z=!1,O=null){this.length=D,this.initialData=j,this.progressiveDone=Z,this.contentDispositionFilename=O,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(D){this._rangeListeners.push(D)}addProgressListener(D){this._progressListeners.push(D)}addProgressiveReadListener(D){this._progressiveReadListeners.push(D)}addProgressiveDoneListener(D){this._progressiveDoneListeners.push(D)}onDataRange(D,j){for(const Z of this._rangeListeners)Z(D,j)}onDataProgress(D,j){this._readyCapability.promise.then(()=>{for(const Z of this._progressListeners)Z(D,j)})}onDataProgressiveRead(D){this._readyCapability.promise.then(()=>{for(const j of this._progressiveReadListeners)j(D)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const D of this._progressiveDoneListeners)D()})}transportReady(){this._readyCapability.resolve()}requestDataRange(D,j){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(D,j){this._pdfInfo=D,this._transport=j,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Z=>{if(!Z)return Z;const O=[];for(const G in Z)O.push(...Z[G]);return O}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(D){return this._transport.getPage(D)}getPageIndex(D){return this._transport.getPageIndex(D)}getDestinations(){return this._transport.getDestinations()}getDestination(D){return this._transport.getDestination(D)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(D=!1){return this._transport.startCleanup(D||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(D,j,Z,O=!1){M(this,o);M(this,e,null);M(this,i,!1);this._pageIndex=D,this._pageInfo=j,this._transport=Z,this._stats=O?new _display_utils.StatTimer:null,this._pdfBug=O,this.commonObjs=Z.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:D,rotation:j=this.rotate,offsetX:Z=0,offsetY:O=0,dontFlip:G=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:D,rotation:j,offsetX:Z,offsetY:O,dontFlip:G})}getAnnotations({intent:D="display"}={}){const j=this._transport.getRenderingIntent(D);return this._transport.getAnnotations(this._pageIndex,j.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var D;return((D=this._transport._htmlForXfa)==null?void 0:D.children[this._pageIndex])||null}render({canvasContext:D,viewport:j,intent:Z="display",annotationMode:O=_util.AnnotationMode.ENABLE,transform:G=null,background:Q=null,optionalContentConfigPromise:mt=null,annotationCanvasMap:ot=null,pageColors:dt=null,printAnnotationStorage:et=null}){var F,U;(F=this._stats)==null||F.time("Overall");const it=this._transport.getRenderingIntent(Z,O,et);x(this,i,!1),w(this,o,Qp).call(this),mt||(mt=this._transport.getOptionalContentConfig());let $=this._intentStates.get(it.cacheKey);$||($=Object.create(null),this._intentStates.set(it.cacheKey,$)),$.streamReaderCancelTimeout&&(clearTimeout($.streamReaderCancelTimeout),$.streamReaderCancelTimeout=null);const tt=!!(it.renderingIntent&_util.RenderingIntentFlag.PRINT);$.displayReadyCapability||($.displayReadyCapability=new _util.PromiseCapability,$.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(U=this._stats)==null||U.time("Page Request"),this._pumpOperatorList(it));const V=K=>{var X,Y;$.renderTasks.delete(H),(this._maybeCleanupAfterRender||tt)&&x(this,i,!0),w(this,o,Zc).call(this,!tt),K?(H.capability.reject(K),this._abortOperatorList({intentState:$,reason:K instanceof Error?K:new Error(K)})):H.capability.resolve(),(X=this._stats)==null||X.timeEnd("Rendering"),(Y=this._stats)==null||Y.timeEnd("Overall")},H=new InternalRenderTask({callback:V,params:{canvasContext:D,viewport:j,transform:G,background:Q},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ot,operatorList:$.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!tt,pdfBug:this._pdfBug,pageColors:dt});($.renderTasks||($.renderTasks=new Set)).add(H);const R=H.task;return Promise.all([$.displayReadyCapability.promise,mt]).then(([K,X])=>{var Y;if(this.destroyed){V();return}(Y=this._stats)==null||Y.time("Rendering"),H.initializeGraphics({transparency:K,optionalContentConfig:X}),H.operatorListChanged()}).catch(V),R}getOperatorList({intent:D="display",annotationMode:j=_util.AnnotationMode.ENABLE,printAnnotationStorage:Z=null}={}){var ot;function O(){Q.operatorList.lastChunk&&(Q.opListReadCapability.resolve(Q.operatorList),Q.renderTasks.delete(mt))}const G=this._transport.getRenderingIntent(D,j,Z,!0);let Q=this._intentStates.get(G.cacheKey);Q||(Q=Object.create(null),this._intentStates.set(G.cacheKey,Q));let mt;return Q.opListReadCapability||(mt=Object.create(null),mt.operatorListChanged=O,Q.opListReadCapability=new _util.PromiseCapability,(Q.renderTasks||(Q.renderTasks=new Set)).add(mt),Q.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ot=this._stats)==null||ot.time("Page Request"),this._pumpOperatorList(G)),Q.opListReadCapability.promise}streamTextContent({includeMarkedContent:D=!1,disableNormalization:j=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:D===!0,disableNormalization:j===!0},{highWaterMark:100,size(O){return O.items.length}})}getTextContent(D={}){if(this._transport._htmlForXfa)return this.getXfa().then(Z=>_xfa_text.XfaText.textContent(Z));const j=this.streamTextContent(D);return new Promise(function(Z,O){function G(){Q.read().then(function({value:ot,done:dt}){if(dt){Z(mt);return}Object.assign(mt.styles,ot.styles),mt.items.push(...ot.items),G()},O)}const Q=j.getReader(),mt={items:[],styles:Object.create(null)};G()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const D=[];for(const j of this._intentStates.values())if(this._abortOperatorList({intentState:j,reason:new Error("Page was destroyed."),force:!0}),!j.opListReadCapability)for(const Z of j.renderTasks)D.push(Z.completed),Z.cancel();return this.objs.clear(),x(this,i,!1),w(this,o,Qp).call(this),Promise.all(D)}cleanup(D=!1){x(this,i,!0);const j=w(this,o,Zc).call(this,!1);return D&&j&&this._stats&&(this._stats=new _display_utils.StatTimer),j}_startRenderPage(D,j){var O,G;const Z=this._intentStates.get(j);Z&&((O=this._stats)==null||O.timeEnd("Page Request"),(G=Z.displayReadyCapability)==null||G.resolve(D))}_renderPageChunk(D,j){for(let Z=0,O=D.length;Z<O;Z++)j.operatorList.fnArray.push(D.fnArray[Z]),j.operatorList.argsArray.push(D.argsArray[Z]);j.operatorList.lastChunk=D.lastChunk,j.operatorList.separateAnnots=D.separateAnnots;for(const Z of j.renderTasks)Z.operatorListChanged();D.lastChunk&&w(this,o,Zc).call(this,!0)}_pumpOperatorList({renderingIntent:D,cacheKey:j,annotationStorageSerializable:Z}){const{map:O,transfers:G}=Z,mt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:D,cacheKey:j,annotationStorage:O},G).getReader(),ot=this._intentStates.get(j);ot.streamReader=mt;const dt=()=>{mt.read().then(({value:et,done:it})=>{if(it){ot.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(et,ot),dt())},et=>{if(ot.streamReader=null,!this._transport.destroyed){if(ot.operatorList){ot.operatorList.lastChunk=!0;for(const it of ot.renderTasks)it.operatorListChanged();w(this,o,Zc).call(this,!0)}if(ot.displayReadyCapability)ot.displayReadyCapability.reject(et);else if(ot.opListReadCapability)ot.opListReadCapability.reject(et);else throw et}})};dt()}_abortOperatorList({intentState:D,reason:j,force:Z=!1}){if(D.streamReader){if(D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null),!Z){if(D.renderTasks.size>0)return;if(j instanceof _display_utils.RenderingCancelledException){let O=RENDERING_CANCELLED_TIMEOUT;j.extraDelay>0&&j.extraDelay<1e3&&(O+=j.extraDelay),D.streamReaderCancelTimeout=setTimeout(()=>{D.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:D,reason:j,force:!0})},O);return}}if(D.streamReader.cancel(new _util.AbortException(j.message)).catch(()=>{}),D.streamReader=null,!this._transport.destroyed){for(const[O,G]of this._intentStates)if(G===D){this._intentStates.delete(O);break}this.cleanup()}}}get stats(){return this._stats}}e=new WeakMap,i=new WeakMap,o=new WeakSet,Zc=function(D=!1){if(w(this,o,Qp).call(this),!a(this,i)||this.destroyed)return!1;if(D)return x(this,e,setTimeout(()=>{x(this,e,null),w(this,o,Zc).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:j,operatorList:Z}of this._intentStates.values())if(j.size>0||!Z.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,i,!1),!0},Qp=function(){a(this,e)&&(clearTimeout(a(this,e)),x(this,e,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){M(this,u,new Set);M(this,h,Promise.resolve())}postMessage(D,j){const Z={data:structuredClone(D,j?{transfer:j}:null)};a(this,h).then(()=>{for(const O of a(this,u))O.call(this,Z)})}addEventListener(D,j){a(this,u).add(j)}removeEventListener(D,j){a(this,u).delete(j)}terminate(){a(this,u).clear()}}u=new WeakMap,h=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const k=(f=document==null?void 0:document.currentScript)==null?void 0:f.src;k&&(PDFWorkerUtil.fallbackWorkerSrc=k.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(k,D){let j;try{if(j=new URL(k),!j.origin||j.origin==="null")return!1}catch{return!1}const Z=new URL(D,j);return j.origin===Z.origin},PDFWorkerUtil.createCDNWrapper=function(k){const D=`importScripts("${k}");`;return URL.createObjectURL(new Blob([D]))}}const _PDFWorker=class _PDFWorker{constructor({name:k=null,port:D=null,verbosity:j=(0,_util.getVerbosityLevel)()}={}){var Z;if(this.name=k,this.destroyed=!1,this.verbosity=j,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,D){if((Z=a(_PDFWorker,d))!=null&&Z.has(D))throw new Error("Cannot use more than one PDFWorker per port.");(a(_PDFWorker,d)||x(_PDFWorker,d,new WeakMap)).set(D,this),this._initializeFromPort(D);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(k){this._port=k,this._messageHandler=new _message_handler.MessageHandler("main","worker",k),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:k}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,k)||(k=PDFWorkerUtil.createCDNWrapper(new URL(k,window.location).href));const D=new Worker(k),j=new _message_handler.MessageHandler("main","worker",D),Z=()=>{D.removeEventListener("error",O),j.destroy(),D.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},O=()=>{this._webWorker||Z()};D.addEventListener("error",O),j.on("test",Q=>{if(D.removeEventListener("error",O),this.destroyed){Z();return}Q?(this._messageHandler=j,this._port=D,this._webWorker=D,this._readyCapability.resolve(),j.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),j.destroy(),D.terminate())}),j.on("ready",Q=>{if(D.removeEventListener("error",O),this.destroyed){Z();return}try{G()}catch{this._setupFakeWorker()}});const G=()=>{const Q=new Uint8Array;j.send("test",Q,[Q.buffer])};G();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(k=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const D=new LoopbackPort;this._port=D;const j=`fake${PDFWorkerUtil.fakeWorkerId++}`,Z=new _message_handler.MessageHandler(j+"_worker",j,D);k.setup(Z,D);const O=new _message_handler.MessageHandler(j,j+"_worker",D);this._messageHandler=O,this._readyCapability.resolve(),O.send("configure",{verbosity:this.verbosity})}).catch(k=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${k.message}".`))})}destroy(){var k;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(k=a(_PDFWorker,d))==null||k.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(k){var j;if(!(k!=null&&k.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const D=(j=a(this,d))==null?void 0:j.get(k.port);if(D){if(D._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return D}return new _PDFWorker(k)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var k;try{return((k=globalThis.pdfjsWorker)==null?void 0:k.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};d=new WeakMap,M(_PDFWorker,d);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(D,j,Z,O,G){M(this,S);M(this,m,new Map);M(this,v,new Map);M(this,_,new Map);M(this,A,null);this.messageHandler=D,this.loadingTask=j,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:O.ownerDocument,styleElement:O.styleElement}),this._params=O,this.canvasFactory=G.canvasFactory,this.filterFactory=G.filterFactory,this.cMapReaderFactory=G.cMapReaderFactory,this.standardFontDataFactory=G.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Z,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(D,j=_util.AnnotationMode.ENABLE,Z=null,O=!1){let G=_util.RenderingIntentFlag.DISPLAY,Q=_annotation_storage.SerializableEmpty;switch(D){case"any":G=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":G=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${D}`)}switch(j){case _util.AnnotationMode.DISABLE:G+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:G+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:G+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Q=(G&_util.RenderingIntentFlag.PRINT&&Z instanceof _annotation_storage.PrintAnnotationStorage?Z:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${j}`)}return O&&(G+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:G,cacheKey:`${G}_${Q.hash}`,annotationStorageSerializable:Q}}destroy(){var Z;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Z=a(this,A))==null||Z.reject(new Error("Worker was destroyed during onPassword callback"));const D=[];for(const O of a(this,v).values())D.push(O._destroy());a(this,v).clear(),a(this,_).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const j=this.messageHandler.sendWithPromise("Terminate",null);return D.push(j),Promise.all(D).then(()=>{var O;this.commonObjs.clear(),this.fontLoader.clear(),a(this,m).clear(),this.filterFactory.destroy(),(O=this._networkStream)==null||O.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:D,loadingTask:j}=this;D.on("GetReader",(Z,O)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=G=>{this._lastProgress={loaded:G.loaded,total:G.total}},O.onPull=()=>{this._fullReader.read().then(function({value:G,done:Q}){if(Q){O.close();return}(0,_util.assert)(G instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(G),1,[G])}).catch(G=>{O.error(G)})},O.onCancel=G=>{this._fullReader.cancel(G),O.ready.catch(Q=>{if(!this.destroyed)throw Q})}}),D.on("ReaderHeadersReady",Z=>{const O=new _util.PromiseCapability,G=this._fullReader;return G.headersReady.then(()=>{var Q;(!G.isStreamingSupported||!G.isRangeSupported)&&(this._lastProgress&&((Q=j.onProgress)==null||Q.call(j,this._lastProgress)),G.onProgress=mt=>{var ot;(ot=j.onProgress)==null||ot.call(j,{loaded:mt.loaded,total:mt.total})}),O.resolve({isStreamingSupported:G.isStreamingSupported,isRangeSupported:G.isRangeSupported,contentLength:G.contentLength})},O.reject),O.promise}),D.on("GetRangeReader",(Z,O)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const G=this._networkStream.getRangeReader(Z.begin,Z.end);if(!G){O.close();return}O.onPull=()=>{G.read().then(function({value:Q,done:mt}){if(mt){O.close();return}(0,_util.assert)(Q instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),O.enqueue(new Uint8Array(Q),1,[Q])}).catch(Q=>{O.error(Q)})},O.onCancel=Q=>{G.cancel(Q),O.ready.catch(mt=>{if(!this.destroyed)throw mt})}}),D.on("GetDoc",({pdfInfo:Z})=>{this._numPages=Z.numPages,this._htmlForXfa=Z.htmlForXfa,delete Z.htmlForXfa,j._capability.resolve(new PDFDocumentProxy(Z,this))}),D.on("DocException",function(Z){let O;switch(Z.name){case"PasswordException":O=new _util.PasswordException(Z.message,Z.code);break;case"InvalidPDFException":O=new _util.InvalidPDFException(Z.message);break;case"MissingPDFException":O=new _util.MissingPDFException(Z.message);break;case"UnexpectedResponseException":O=new _util.UnexpectedResponseException(Z.message,Z.status);break;case"UnknownErrorException":O=new _util.UnknownErrorException(Z.message,Z.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}j._capability.reject(O)}),D.on("PasswordRequest",Z=>{if(x(this,A,new _util.PromiseCapability),j.onPassword){const O=G=>{G instanceof Error?a(this,A).reject(G):a(this,A).resolve({password:G})};try{j.onPassword(O,Z.code)}catch(G){a(this,A).reject(G)}}else a(this,A).reject(new _util.PasswordException(Z.message,Z.code));return a(this,A).promise}),D.on("DataLoaded",Z=>{var O;(O=j.onProgress)==null||O.call(j,{loaded:Z.length,total:Z.length}),this.downloadInfoCapability.resolve(Z)}),D.on("StartRenderPage",Z=>{if(this.destroyed)return;a(this,v).get(Z.pageIndex)._startRenderPage(Z.transparency,Z.cacheKey)}),D.on("commonobj",([Z,O,G])=>{var Q;if(!this.destroyed&&!this.commonObjs.has(Z))switch(O){case"Font":const mt=this._params;if("error"in G){const et=G.error;(0,_util.warn)(`Error during font loading: ${et}`),this.commonObjs.resolve(Z,et);break}const ot=mt.pdfBug&&((Q=globalThis.FontInspector)!=null&&Q.enabled)?(et,it)=>globalThis.FontInspector.fontAdded(et,it):null,dt=new _font_loader.FontFaceObject(G,{isEvalSupported:mt.isEvalSupported,disableFontFace:mt.disableFontFace,ignoreErrors:mt.ignoreErrors,inspectFont:ot});this.fontLoader.bind(dt).catch(et=>D.sendWithPromise("FontFallback",{id:Z})).finally(()=>{!mt.fontExtraProperties&&dt.data&&(dt.data=null),this.commonObjs.resolve(Z,dt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Z,G);break;default:throw new Error(`Got unknown common object type ${O}`)}}),D.on("obj",([Z,O,G,Q])=>{var ot;if(this.destroyed)return;const mt=a(this,v).get(O);if(!mt.objs.has(Z))switch(G){case"Image":if(mt.objs.resolve(Z,Q),Q){let dt;if(Q.bitmap){const{width:et,height:it}=Q;dt=et*it*4}else dt=((ot=Q.data)==null?void 0:ot.length)||0;dt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(mt._maybeCleanupAfterRender=!0)}break;case"Pattern":mt.objs.resolve(Z,Q);break;default:throw new Error(`Got unknown object type ${G}`)}}),D.on("DocProgress",Z=>{var O;this.destroyed||(O=j.onProgress)==null||O.call(j,{loaded:Z.loaded,total:Z.total})}),D.on("FetchBuiltInCMap",Z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Z):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),D.on("FetchStandardFontData",Z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Z):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Z;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:D,transfers:j}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:D,filename:((Z=this._fullReader)==null?void 0:Z.filename)??null},j).finally(()=>{this.annotationStorage.resetModified()})}getPage(D){if(!Number.isInteger(D)||D<=0||D>this._numPages)return Promise.reject(new Error("Invalid page request."));const j=D-1,Z=a(this,_).get(j);if(Z)return Z;const O=this.messageHandler.sendWithPromise("GetPage",{pageIndex:j}).then(G=>{if(this.destroyed)throw new Error("Transport destroyed");const Q=new PDFPageProxy(j,G,this,this._params.pdfBug);return a(this,v).set(j,Q),Q});return a(this,_).set(j,O),O}getPageIndex(D){return typeof D!="object"||D===null||!Number.isInteger(D.num)||D.num<0||!Number.isInteger(D.gen)||D.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:D.num,gen:D.gen})}getAnnotations(D,j){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:D,intent:j})}getFieldObjects(){return w(this,S,Jp).call(this,"GetFieldObjects")}hasJSActions(){return w(this,S,Jp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(D){return typeof D!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:D})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return w(this,S,Jp).call(this,"GetDocJSActions")}getPageJSActions(D){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:D})}getStructTree(D){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:D})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(D=>new _optional_content_config.OptionalContentConfig(D))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const D="GetMetadata",j=a(this,m).get(D);if(j)return j;const Z=this.messageHandler.sendWithPromise(D,null).then(O=>{var G,Q;return{info:O[0],metadata:O[1]?new _metadata.Metadata(O[1]):null,contentDispositionFilename:((G=this._fullReader)==null?void 0:G.filename)??null,contentLength:((Q=this._fullReader)==null?void 0:Q.contentLength)??null}});return a(this,m).set(D,Z),Z}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(D=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const j of a(this,v).values())if(!j.cleanup())throw new Error(`startCleanup: Page ${j.pageNumber} is currently rendering.`);this.commonObjs.clear(),D||this.fontLoader.clear(),a(this,m).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:D,enableXfa:j}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:D,enableXfa:j})}}m=new WeakMap,v=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakSet,Jp=function(D,j=null){const Z=a(this,m).get(D);if(Z)return Z;const O=this.messageHandler.sendWithPromise(D,j);return a(this,m).set(D,O),O};class PDFObjects{constructor(){M(this,I);M(this,b,Object.create(null))}get(D,j=null){if(j){const O=w(this,I,qv).call(this,D);return O.capability.promise.then(()=>j(O.data)),null}const Z=a(this,b)[D];if(!(Z!=null&&Z.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${D}.`);return Z.data}has(D){const j=a(this,b)[D];return(j==null?void 0:j.capability.settled)||!1}resolve(D,j=null){const Z=w(this,I,qv).call(this,D);Z.data=j,Z.capability.resolve()}clear(){var D;for(const j in a(this,b)){const{data:Z}=a(this,b)[j];(D=Z==null?void 0:Z.bitmap)==null||D.close()}x(this,b,Object.create(null))}}b=new WeakMap,I=new WeakSet,qv=function(D){var j;return(j=a(this,b))[D]||(j[D]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(D){M(this,N,null);x(this,N,D),this.onContinue=null}get promise(){return a(this,N).capability.promise}cancel(D=0){a(this,N).cancel(null,D)}get separateAnnots(){const{separateAnnots:D}=a(this,N).operatorList;if(!D)return!1;const{annotationCanvasMap:j}=a(this,N);return D.form||D.canvas&&(j==null?void 0:j.size)>0}}N=new WeakMap,exports.RenderTask=RenderTask;const L=class L{constructor({callback:D,params:j,objs:Z,commonObjs:O,annotationCanvasMap:G,operatorList:Q,pageIndex:mt,canvasFactory:ot,filterFactory:dt,useRequestAnimationFrame:et=!1,pdfBug:it=!1,pageColors:$=null}){this.callback=D,this.params=j,this.objs=Z,this.commonObjs=O,this.annotationCanvasMap=G,this.operatorListIdx=null,this.operatorList=Q,this._pageIndex=mt,this.canvasFactory=ot,this.filterFactory=dt,this._pdfBug=it,this.pageColors=$,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=et===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=j.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:D=!1,optionalContentConfig:j}){var mt,ot;if(this.cancelled)return;if(this._canvas){if(a(L,T).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(L,T).add(this._canvas)}this._pdfBug&&((mt=globalThis.StepperManager)!=null&&mt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Z,viewport:O,transform:G,background:Q}=this.params;this.gfx=new _canvas.CanvasGraphics(Z,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:j},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:G,viewport:O,transparency:D,background:Q}),this.operatorListIdx=0,this.graphicsReady=!0,(ot=this.graphicsReadyCallback)==null||ot.call(this)}cancel(D=null,j=0){var Z;this.running=!1,this.cancelled=!0,(Z=this.gfx)==null||Z.endDrawing(),a(L,T).delete(this._canvas),this.callback(D||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,j))}operatorListChanged(){var D;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(D=this.stepper)==null||D.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(L,T).delete(this._canvas),this.callback())))}};T=new WeakMap,M(L,T,new WeakSet);let InternalRenderTask=L;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(g,t,e)=>{var f,d,m,$A,_;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var i=e(1),o=e(4),r=e(8);const c=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=c;class u{constructor(){M(this,m);M(this,f,!1);M(this,d,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(S,C){const b=a(this,d).get(S);return b===void 0?C:Object.assign(C,b)}getRawValue(S){return a(this,d).get(S)}remove(S){if(a(this,d).delete(S),a(this,d).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const C of a(this,d).values())if(C instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(S,C){const b=a(this,d).get(S);let I=!1;if(b!==void 0)for(const[B,N]of Object.entries(C))b[B]!==N&&(I=!0,b[B]=N);else I=!0,a(this,d).set(S,C);I&&w(this,m,$A).call(this),C instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(C.constructor._type)}has(S){return a(this,d).has(S)}getAll(){return a(this,d).size>0?(0,i.objectFromMap)(a(this,d)):null}setAll(S){for(const[C,b]of Object.entries(S))this.setValue(C,b)}get size(){return a(this,d).size}resetModified(){a(this,f)&&(x(this,f,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(a(this,d).size===0)return c;const S=new Map,C=new r.MurmurHash3_64,b=[],I=Object.create(null);let B=!1;for(const[N,T]of a(this,d)){const L=T instanceof o.AnnotationEditor?T.serialize(!1,I):T;L&&(S.set(N,L),C.update(`${N}:${JSON.stringify(L)}`),B||(B=!!L.bitmap))}if(B)for(const N of S.values())N.bitmap&&b.push(N.bitmap);return S.size>0?{map:S,hash:C.hexdigest(),transfers:b}:c}}f=new WeakMap,d=new WeakMap,m=new WeakSet,$A=function(){a(this,f)||(x(this,f,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=u;class h extends u{constructor(C){super();M(this,_);const{map:b,hash:I,transfers:B}=C.serializable,N=structuredClone(b,B?{transfer:B}:null);x(this,_,{map:N,hash:I,transfers:B})}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,_)}}_=new WeakMap,t.PrintAnnotationStorage=h},(g,t,e)=>{var h,f,d,m,v,_,A,S,C,b,I,B,N,T,L,Xv,Kv,j,Yv,Qv,qA,XA,KA,Jv,YA;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var i=e(5),o=e(1),r=e(6);const et=class et{constructor($){M(this,L);M(this,h,"");M(this,f,!1);M(this,d,null);M(this,m,null);M(this,v,null);M(this,_,!1);M(this,A,null);M(this,S,this.focusin.bind(this));M(this,C,this.focusout.bind(this));M(this,b,!1);M(this,I,!1);M(this,B,!1);xe(this,"_initialOptions",Object.create(null));xe(this,"_uiManager",null);xe(this,"_focusEventsAllowed",!0);xe(this,"_l10nPromise",null);M(this,N,!1);M(this,T,et._zIndex++);this.constructor===et&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=$.parent,this.id=$.id,this.width=this.height=null,this.pageIndex=$.parent.pageIndex,this.name=$.name,this.div=null,this._uiManager=$.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=$.isCentered,this._structTreeParentId=null;const{rotation:tt,rawDims:{pageWidth:V,pageHeight:H,pageX:R,pageY:F}}=this.parent.viewport;this.rotation=tt,this.pageRotation=(360+tt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[V,H],this.pageTranslation=[R,F];const[U,K]=this.parentDimensions;this.x=$.x/U,this.y=$.y/K,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement($){const tt=new u({id:$.parent.getNextId(),parent:$.parent,uiManager:$._uiManager});tt.annotationElementId=$.annotationElementId,tt.deleted=!0,tt._uiManager.addToAnnotationStorage(tt)}static initialize($,tt=null){if(et._l10nPromise||(et._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(H=>[H,$.get(H)]))),tt!=null&&tt.strings)for(const H of tt.strings)et._l10nPromise.set(H,$.get(H));if(et._borderLineWidth!==-1)return;const V=getComputedStyle(document.documentElement);et._borderLineWidth=parseFloat(V.getPropertyValue("--outline-width"))||0}static updateDefaultParams($,tt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting($){return!1}static paste($,tt){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,N)}set _isDraggable($){var tt;x(this,N,$),(tt=this.div)==null||tt.classList.toggle("draggable",$)}center(){const[$,tt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*tt/($*2),this.y+=this.width*$/(tt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*tt/($*2),this.y-=this.width*$/(tt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands($){this._uiManager.addCommands($)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,T)}setParent($){$!==null&&(this.pageIndex=$.pageIndex,this.pageDimensions=$.pageDimensions),this.parent=$}focusin($){this._focusEventsAllowed&&(a(this,b)?x(this,b,!1):this.parent.setSelected(this))}focusout($){var V;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const tt=$.relatedTarget;tt!=null&&tt.closest(`#${this.id}`)||($.preventDefault(),(V=this.parent)!=null&&V.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt($,tt,V,H){const[R,F]=this.parentDimensions;[V,H]=this.screenToPageTranslation(V,H),this.x=($+V)/R,this.y=(tt+H)/F,this.fixAndSetPosition()}translate($,tt){w(this,L,Xv).call(this,this.parentDimensions,$,tt)}translateInPage($,tt){w(this,L,Xv).call(this,this.pageDimensions,$,tt),this.div.scrollIntoView({block:"nearest"})}drag($,tt){const[V,H]=this.parentDimensions;if(this.x+=$/V,this.y+=tt/H,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:X,y:Y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,X,Y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:R,y:F}=this;const[U,K]=w(this,L,Kv).call(this);R+=U,F+=K,this.div.style.left=`${(100*R).toFixed(2)}%`,this.div.style.top=`${(100*F).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[$,tt]=this.pageDimensions;let{x:V,y:H,width:R,height:F}=this;switch(R*=$,F*=tt,V*=$,H*=tt,this.rotation){case 0:V=Math.max(0,Math.min($-R,V)),H=Math.max(0,Math.min(tt-F,H));break;case 90:V=Math.max(0,Math.min($-F,V)),H=Math.min(tt,Math.max(R,H));break;case 180:V=Math.min($,Math.max(R,V)),H=Math.min(tt,Math.max(F,H));break;case 270:V=Math.min($,Math.max(F,V)),H=Math.max(0,Math.min(tt-R,H));break}this.x=V/=$,this.y=H/=tt;const[U,K]=w(this,L,Kv).call(this);V+=U,H+=K;const{style:X}=this.div;X.left=`${(100*V).toFixed(2)}%`,X.top=`${(100*H).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation($,tt){var V;return w(V=et,j,Yv).call(V,$,tt,this.parentRotation)}pageTranslationToScreen($,tt){var V;return w(V=et,j,Yv).call(V,$,tt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:$,pageDimensions:[tt,V]}=this,H=tt*$,R=V*$;return o.FeatureTest.isCSSRoundSupported?[Math.round(H),Math.round(R)]:[H,R]}setDims($,tt){var R;const[V,H]=this.parentDimensions;this.div.style.width=`${(100*$/V).toFixed(2)}%`,a(this,_)||(this.div.style.height=`${(100*tt/H).toFixed(2)}%`),(R=a(this,d))==null||R.classList.toggle("small",$<et.SMALL_EDITOR_SIZE||tt<et.SMALL_EDITOR_SIZE)}fixDims(){const{style:$}=this.div,{height:tt,width:V}=$,H=V.endsWith("%"),R=!a(this,_)&&tt.endsWith("%");if(H&&R)return;const[F,U]=this.parentDimensions;H||($.width=`${(100*parseFloat(V)/F).toFixed(2)}%`),!a(this,_)&&!R&&($.height=`${(100*parseFloat(tt)/U).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(a(this,d))return;const $=x(this,d,document.createElement("button"));$.className="altText";const tt=await et._l10nPromise.get("editor_alt_text_button_label");$.textContent=tt,$.setAttribute("aria-label",tt),$.tabIndex="0",$.addEventListener("contextmenu",r.noContextMenu),$.addEventListener("pointerdown",V=>V.stopPropagation()),$.addEventListener("click",V=>{V.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),$.addEventListener("keydown",V=>{V.target===$&&V.key==="Enter"&&(V.preventDefault(),this._uiManager.editAltText(this))}),w(this,L,Jv).call(this),this.div.append($),et.SMALL_EDITOR_SIZE||(et.SMALL_EDITOR_SIZE=Math.min(128,Math.round($.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:a(this,h),decorative:a(this,f)}}set altTextData({altText:$,decorative:tt}){a(this,h)===$&&a(this,f)===tt||(x(this,h,$),x(this,f,tt),w(this,L,Jv).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",a(this,S)),this.div.addEventListener("focusout",a(this,C));const[$,tt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*tt/$).toFixed(2)}%`,this.div.style.maxHeight=`${(100*$/tt).toFixed(2)}%`);const[V,H]=this.getInitialTranslation();return this.translate(V,H),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown($){const{isMac:tt}=o.FeatureTest.platform;if($.button!==0||$.ctrlKey&&tt){$.preventDefault();return}x(this,b,!0),w(this,L,YA).call(this,$)}moveInDOM(){var $;($=this.parent)==null||$.moveEditorInDOM(this)}_setParentAndPosition($,tt,V){$.changeParent(this),this.x=tt,this.y=V,this.fixAndSetPosition()}getRect($,tt){const V=this.parentScale,[H,R]=this.pageDimensions,[F,U]=this.pageTranslation,K=$/V,X=tt/V,Y=this.x*H,ut=this.y*R,wt=this.width*H,It=this.height*R;switch(this.rotation){case 0:return[Y+K+F,R-ut-X-It+U,Y+K+wt+F,R-ut-X+U];case 90:return[Y+X+F,R-ut+K+U,Y+X+It+F,R-ut+K+wt+U];case 180:return[Y-K-wt+F,R-ut+X+U,Y-K+F,R-ut+X+It+U];case 270:return[Y-X-It+F,R-ut-K-wt+U,Y-X+F,R-ut-K+U];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords($,tt){const[V,H,R,F]=$,U=R-V,K=F-H;switch(this.rotation){case 0:return[V,tt-F,U,K];case 90:return[V,tt-H,K,U];case 180:return[R,tt-H,U,K];case 270:return[R,tt-F,K,U];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,B,!0)}disableEditMode(){x(this,B,!1)}isInEditMode(){return a(this,B)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var $,tt;($=this.div)==null||$.addEventListener("focusin",a(this,S)),(tt=this.div)==null||tt.addEventListener("focusout",a(this,C))}serialize($=!1,tt=null){(0,o.unreachable)("An editor must be serializable")}static deserialize($,tt,V){const H=new this.prototype.constructor({parent:tt,id:tt.getNextId(),uiManager:V});H.rotation=$.rotation;const[R,F]=H.pageDimensions,[U,K,X,Y]=H.getRectInCurrentCoords($.rect,F);return H.x=U/R,H.y=K/F,H.width=X/R,H.height=Y/F,H}remove(){var $;this.div.removeEventListener("focusin",a(this,S)),this.div.removeEventListener("focusout",a(this,C)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),($=a(this,d))==null||$.remove(),x(this,d,null),x(this,m,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(w(this,L,qA).call(this),a(this,A).classList.remove("hidden"))}select(){var $;this.makeResizable(),($=this.div)==null||$.classList.add("selectedEditor")}unselect(){var $,tt,V;($=a(this,A))==null||$.classList.add("hidden"),(tt=this.div)==null||tt.classList.remove("selectedEditor"),(V=this.div)!=null&&V.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams($,tt){}disableEditing(){a(this,d)&&(a(this,d).hidden=!0)}enableEditing(){a(this,d)&&(a(this,d).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return a(this,I)}set isEditing($){x(this,I,$),this.parent&&($?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio($,tt){x(this,_,!0);const V=$/tt,{style:H}=this.div;H.aspectRatio=V,H.height="auto"}static get MIN_SIZE(){return 16}};h=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakMap,C=new WeakMap,b=new WeakMap,I=new WeakMap,B=new WeakMap,N=new WeakMap,T=new WeakMap,L=new WeakSet,Xv=function([$,tt],V,H){[V,H]=this.screenToPageTranslation(V,H),this.x+=V/$,this.y+=H/tt,this.fixAndSetPosition()},Kv=function(){const[$,tt]=this.parentDimensions,{_borderLineWidth:V}=et,H=V/$,R=V/tt;switch(this.rotation){case 90:return[-H,R];case 180:return[H,R];case 270:return[H,-R];default:return[-H,-R]}},j=new WeakSet,Yv=function($,tt,V){switch(V){case 90:return[tt,-$];case 180:return[-$,-tt];case 270:return[-tt,$];default:return[$,tt]}},Qv=function($){switch($){case 90:{const[tt,V]=this.pageDimensions;return[0,-tt/V,V/tt,0]}case 180:return[-1,0,0,-1];case 270:{const[tt,V]=this.pageDimensions;return[0,tt/V,-V/tt,0]}default:return[1,0,0,1]}},qA=function(){if(a(this,A))return;x(this,A,document.createElement("div")),a(this,A).classList.add("resizers");const $=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||$.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const tt of $){const V=document.createElement("div");a(this,A).append(V),V.classList.add("resizer",tt),V.addEventListener("pointerdown",w(this,L,XA).bind(this,tt)),V.addEventListener("contextmenu",r.noContextMenu)}this.div.prepend(a(this,A))},XA=function($,tt){tt.preventDefault();const{isMac:V}=o.FeatureTest.platform;if(tt.button!==0||tt.ctrlKey&&V)return;const H=w(this,L,KA).bind(this,$),R=this._isDraggable;this._isDraggable=!1;const F={passive:!0,capture:!0};window.addEventListener("pointermove",H,F);const U=this.x,K=this.y,X=this.width,Y=this.height,ut=this.parent.div.style.cursor,wt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(tt.target).cursor;const It=()=>{this._isDraggable=R,window.removeEventListener("pointerup",It),window.removeEventListener("blur",It),window.removeEventListener("pointermove",H,F),this.parent.div.style.cursor=ut,this.div.style.cursor=wt;const Dt=this.x,Ht=this.y,Vt=this.width,Gt=this.height;Dt===U&&Ht===K&&Vt===X&&Gt===Y||this.addCommands({cmd:()=>{this.width=Vt,this.height=Gt,this.x=Dt,this.y=Ht;const[xt,Pt]=this.parentDimensions;this.setDims(xt*Vt,Pt*Gt),this.fixAndSetPosition()},undo:()=>{this.width=X,this.height=Y,this.x=U,this.y=K;const[xt,Pt]=this.parentDimensions;this.setDims(xt*X,Pt*Y),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",It),window.addEventListener("blur",It)},KA=function($,tt){const[V,H]=this.parentDimensions,R=this.x,F=this.y,U=this.width,K=this.height,X=et.MIN_SIZE/V,Y=et.MIN_SIZE/H,ut=ce=>Math.round(ce*1e4)/1e4,wt=w(this,L,Qv).call(this,this.rotation),It=(ce,Ee)=>[wt[0]*ce+wt[2]*Ee,wt[1]*ce+wt[3]*Ee],Dt=w(this,L,Qv).call(this,360-this.rotation),Ht=(ce,Ee)=>[Dt[0]*ce+Dt[2]*Ee,Dt[1]*ce+Dt[3]*Ee];let Vt,Gt,xt=!1,Pt=!1;switch($){case"topLeft":xt=!0,Vt=(ce,Ee)=>[0,0],Gt=(ce,Ee)=>[ce,Ee];break;case"topMiddle":Vt=(ce,Ee)=>[ce/2,0],Gt=(ce,Ee)=>[ce/2,Ee];break;case"topRight":xt=!0,Vt=(ce,Ee)=>[ce,0],Gt=(ce,Ee)=>[0,Ee];break;case"middleRight":Pt=!0,Vt=(ce,Ee)=>[ce,Ee/2],Gt=(ce,Ee)=>[0,Ee/2];break;case"bottomRight":xt=!0,Vt=(ce,Ee)=>[ce,Ee],Gt=(ce,Ee)=>[0,0];break;case"bottomMiddle":Vt=(ce,Ee)=>[ce/2,Ee],Gt=(ce,Ee)=>[ce/2,0];break;case"bottomLeft":xt=!0,Vt=(ce,Ee)=>[0,Ee],Gt=(ce,Ee)=>[ce,0];break;case"middleLeft":Pt=!0,Vt=(ce,Ee)=>[0,Ee/2],Gt=(ce,Ee)=>[ce,Ee/2];break}const q=Vt(U,K),st=Gt(U,K);let vt=It(...st);const Ct=ut(R+vt[0]),Ot=ut(F+vt[1]);let qt=1,Ut=1,[yt,ne]=this.screenToPageTranslation(tt.movementX,tt.movementY);if([yt,ne]=Ht(yt/V,ne/H),xt){const ce=Math.hypot(U,K);qt=Ut=Math.max(Math.min(Math.hypot(st[0]-q[0]-yt,st[1]-q[1]-ne)/ce,1/U,1/K),X/U,Y/K)}else Pt?qt=Math.max(X,Math.min(1,Math.abs(st[0]-q[0]-yt)))/U:Ut=Math.max(Y,Math.min(1,Math.abs(st[1]-q[1]-ne)))/K;const Qt=ut(U*qt),He=ut(K*Ut);vt=It(...Gt(Qt,He));const Pe=Ct-vt[0],Qe=Ot-vt[1];this.width=Qt,this.height=He,this.x=Pe,this.y=Qe,this.setDims(V*Qt,H*He),this.fixAndSetPosition()},Jv=async function(){var V;const $=a(this,d);if(!$)return;if(!a(this,h)&&!a(this,f)){$.classList.remove("done"),(V=a(this,m))==null||V.remove();return}et._l10nPromise.get("editor_alt_text_edit_button_label").then(H=>{$.setAttribute("aria-label",H)});let tt=a(this,m);if(!tt){x(this,m,tt=document.createElement("span")),tt.className="tooltip",tt.setAttribute("role","tooltip");const H=tt.id=`alt-text-tooltip-${this.id}`;$.setAttribute("aria-describedby",H);const R=100;$.addEventListener("mouseenter",()=>{x(this,v,setTimeout(()=>{x(this,v,null),a(this,m).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},R))}),$.addEventListener("mouseleave",()=>{var F;clearTimeout(a(this,v)),x(this,v,null),(F=a(this,m))==null||F.classList.remove("show")})}$.classList.add("done"),tt.innerText=a(this,f)?await et._l10nPromise.get("editor_alt_text_decorative_tooltip"):a(this,h),tt.parentNode||$.append(tt)},YA=function($){if(!this._isDraggable)return;const tt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let V,H;tt&&(V={passive:!0,capture:!0},H=F=>{const[U,K]=this.screenToPageTranslation(F.movementX,F.movementY);this._uiManager.dragSelectedEditors(U,K)},window.addEventListener("pointermove",H,V));const R=()=>{if(window.removeEventListener("pointerup",R),window.removeEventListener("blur",R),tt&&window.removeEventListener("pointermove",H,V),x(this,b,!1),!this._uiManager.endDragSession()){const{isMac:F}=o.FeatureTest.platform;$.ctrlKey&&!F||$.shiftKey||$.metaKey&&F?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",R),window.addEventListener("blur",R)},M(et,j),xe(et,"_borderLineWidth",-1),xe(et,"_colorManager",new i.ColorManager),xe(et,"_zIndex",1),xe(et,"SMALL_EDITOR_SIZE",0);let c=et;t.AnnotationEditor=c;class u extends c{constructor($){super($),this.annotationElementId=$.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(g,t,e)=>{var _,A,S,C,b,Zv,N,T,L,k,D,QA,O,G,Q,mt,ot,dt,et,it,$,tt,V,H,R,F,U,K,X,Y,ut,wt,It,Dt,Ht,Vt,Gt,xt,Pt,q,st,vt,Ct,Ot,qt,Ut,yt,JA,ty,ey,Zp,ny,iy,Ks,Vh,ZA,tb,sy,Gh,ry;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=r,t.opacityToHex=c;var i=e(1),o=e(6);function r(Te,rt,Nt){for(const ee of Nt)rt.addEventListener(ee,Te[ee].bind(Te))}function c(Te){return Math.round(Math.min(255,Math.max(1,255*Te))).toString(16).padStart(2,"0")}class u{constructor(){M(this,_,0)}getId(){return`${i.AnnotationEditorPrefix}${bi(this,_)._++}`}}_=new WeakMap;const B=class B{constructor(){M(this,b);M(this,A,(0,i.getUuid)());M(this,S,0);M(this,C,null)}static get _isSVGFittingCanvas(){const rt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ee=new OffscreenCanvas(1,3).getContext("2d"),ge=new Image;ge.src=rt;const ye=ge.decode().then(()=>(ee.drawImage(ge,0,0,1,1,0,0,1,3),new Uint32Array(ee.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,i.shadow)(this,"_isSVGFittingCanvas",ye)}async getFromFile(rt){const{lastModified:Nt,name:ee,size:ge,type:ye}=rt;return w(this,b,Zv).call(this,`${Nt}_${ee}_${ge}_${ye}`,rt)}async getFromUrl(rt){return w(this,b,Zv).call(this,rt,rt)}async getFromId(rt){a(this,C)||x(this,C,new Map);const Nt=a(this,C).get(rt);return Nt?Nt.bitmap?(Nt.refCounter+=1,Nt):Nt.file?this.getFromFile(Nt.file):this.getFromUrl(Nt.url):null}getSvgUrl(rt){const Nt=a(this,C).get(rt);return Nt!=null&&Nt.isSvg?Nt.svgUrl:null}deleteId(rt){a(this,C)||x(this,C,new Map);const Nt=a(this,C).get(rt);Nt&&(Nt.refCounter-=1,Nt.refCounter===0&&(Nt.bitmap=null))}isValidId(rt){return rt.startsWith(`image_${a(this,A)}_`)}};A=new WeakMap,S=new WeakMap,C=new WeakMap,b=new WeakSet,Zv=async function(rt,Nt){a(this,C)||x(this,C,new Map);let ee=a(this,C).get(rt);if(ee===null)return null;if(ee!=null&&ee.bitmap)return ee.refCounter+=1,ee;try{ee||(ee={bitmap:null,id:`image_${a(this,A)}_${bi(this,S)._++}`,refCounter:0,isSvg:!1});let ge;if(typeof Nt=="string"){ee.url=Nt;const ye=await fetch(Nt);if(!ye.ok)throw new Error(ye.statusText);ge=await ye.blob()}else ge=ee.file=Nt;if(ge.type==="image/svg+xml"){const ye=B._isSVGFittingCanvas,le=new FileReader,nt=new Image,J=new Promise((pt,Mt)=>{nt.onload=()=>{ee.bitmap=nt,ee.isSvg=!0,pt()},le.onload=async()=>{const Ft=ee.svgUrl=le.result;nt.src=await ye?`${Ft}#svgView(preserveAspectRatio(none))`:Ft},nt.onerror=le.onerror=Mt});le.readAsDataURL(ge),await J}else ee.bitmap=await createImageBitmap(ge);ee.refCounter=1}catch(ge){console.error(ge),ee=null}return a(this,C).set(rt,ee),ee&&a(this,C).set(ee.id,ee),ee};let h=B;class f{constructor(rt=128){M(this,N,[]);M(this,T,!1);M(this,L);M(this,k,-1);x(this,L,rt)}add({cmd:rt,undo:Nt,mustExec:ee,type:ge=NaN,overwriteIfSameType:ye=!1,keepUndo:le=!1}){if(ee&&rt(),a(this,T))return;const nt={cmd:rt,undo:Nt,type:ge};if(a(this,k)===-1){a(this,N).length>0&&(a(this,N).length=0),x(this,k,0),a(this,N).push(nt);return}if(ye&&a(this,N)[a(this,k)].type===ge){le&&(nt.undo=a(this,N)[a(this,k)].undo),a(this,N)[a(this,k)]=nt;return}const J=a(this,k)+1;J===a(this,L)?a(this,N).splice(0,1):(x(this,k,J),J<a(this,N).length&&a(this,N).splice(J)),a(this,N).push(nt)}undo(){a(this,k)!==-1&&(x(this,T,!0),a(this,N)[a(this,k)].undo(),x(this,T,!1),x(this,k,a(this,k)-1))}redo(){a(this,k)<a(this,N).length-1&&(x(this,k,a(this,k)+1),x(this,T,!0),a(this,N)[a(this,k)].cmd(),x(this,T,!1))}hasSomethingToUndo(){return a(this,k)!==-1}hasSomethingToRedo(){return a(this,k)<a(this,N).length-1}destroy(){x(this,N,null)}}N=new WeakMap,T=new WeakMap,L=new WeakMap,k=new WeakMap,t.CommandManager=f;class d{constructor(rt){M(this,D);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Nt}=i.FeatureTest.platform;for(const[ee,ge,ye={}]of rt)for(const le of ee){const nt=le.startsWith("mac+");Nt&&nt?(this.callbacks.set(le.slice(4),{callback:ge,options:ye}),this.allKeys.add(le.split("+").at(-1))):!Nt&&!nt&&(this.callbacks.set(le,{callback:ge,options:ye}),this.allKeys.add(le.split("+").at(-1)))}}exec(rt,Nt){if(!this.allKeys.has(Nt.key))return;const ee=this.callbacks.get(w(this,D,QA).call(this,Nt));if(!ee)return;const{callback:ge,options:{bubbles:ye=!1,args:le=[],checker:nt=null}}=ee;nt&&!nt(rt,Nt)||(ge.bind(rt,...le)(),ye||(Nt.stopPropagation(),Nt.preventDefault()))}}D=new WeakSet,QA=function(rt){rt.altKey&&this.buffer.push("alt"),rt.ctrlKey&&this.buffer.push("ctrl"),rt.metaKey&&this.buffer.push("meta"),rt.shiftKey&&this.buffer.push("shift"),this.buffer.push(rt.key);const Nt=this.buffer.join("+");return this.buffer.length=0,Nt},t.KeyboardManager=d;const Z=class Z{get _colors(){const rt=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(rt),(0,i.shadow)(this,"_colors",rt)}convert(rt){const Nt=(0,o.getRGB)(rt);if(!window.matchMedia("(forced-colors: active)").matches)return Nt;for(const[ee,ge]of this._colors)if(ge.every((ye,le)=>ye===Nt[le]))return Z._colorsMapping.get(ee);return Nt}getHexCode(rt){const Nt=this._colors.get(rt);return Nt?i.Util.makeHexColor(...Nt):rt}};xe(Z,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let m=Z;t.ColorManager=m;const pe=class pe{constructor(rt,Nt,ee,ge,ye,le){M(this,yt);M(this,O,null);M(this,G,new Map);M(this,Q,new Map);M(this,mt,null);M(this,ot,null);M(this,dt,new f);M(this,et,0);M(this,it,new Set);M(this,$,null);M(this,tt,null);M(this,V,new Set);M(this,H,null);M(this,R,new u);M(this,F,!1);M(this,U,!1);M(this,K,null);M(this,X,i.AnnotationEditorType.NONE);M(this,Y,new Set);M(this,ut,null);M(this,wt,this.blur.bind(this));M(this,It,this.focus.bind(this));M(this,Dt,this.copy.bind(this));M(this,Ht,this.cut.bind(this));M(this,Vt,this.paste.bind(this));M(this,Gt,this.keydown.bind(this));M(this,xt,this.onEditingAction.bind(this));M(this,Pt,this.onPageChanging.bind(this));M(this,q,this.onScaleChanging.bind(this));M(this,st,this.onRotationChanging.bind(this));M(this,vt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});M(this,Ct,[0,0]);M(this,Ot,null);M(this,qt,null);M(this,Ut,null);x(this,qt,rt),x(this,Ut,Nt),x(this,mt,ee),this._eventBus=ge,this._eventBus._on("editingaction",a(this,xt)),this._eventBus._on("pagechanging",a(this,Pt)),this._eventBus._on("scalechanging",a(this,q)),this._eventBus._on("rotationchanging",a(this,st)),x(this,ot,ye.annotationStorage),x(this,H,ye.filterFactory),x(this,ut,le),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const rt=pe.prototype,Nt=ye=>{const{activeElement:le}=document;return le&&a(ye,qt).contains(le)&&ye.hasSomethingToControl()},ee=this.TRANSLATE_SMALL,ge=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new d([[["ctrl+a","mac+meta+a"],rt.selectAll],[["ctrl+z","mac+meta+z"],rt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],rt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],rt.delete],[["Escape","mac+Escape"],rt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],rt.translateSelectedEditors,{args:[-ee,0],checker:Nt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],rt.translateSelectedEditors,{args:[-ge,0],checker:Nt}],[["ArrowRight","mac+ArrowRight"],rt.translateSelectedEditors,{args:[ee,0],checker:Nt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],rt.translateSelectedEditors,{args:[ge,0],checker:Nt}],[["ArrowUp","mac+ArrowUp"],rt.translateSelectedEditors,{args:[0,-ee],checker:Nt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],rt.translateSelectedEditors,{args:[0,-ge],checker:Nt}],[["ArrowDown","mac+ArrowDown"],rt.translateSelectedEditors,{args:[0,ee],checker:Nt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],rt.translateSelectedEditors,{args:[0,ge],checker:Nt}]]))}destroy(){w(this,yt,Zp).call(this),w(this,yt,ty).call(this),this._eventBus._off("editingaction",a(this,xt)),this._eventBus._off("pagechanging",a(this,Pt)),this._eventBus._off("scalechanging",a(this,q)),this._eventBus._off("rotationchanging",a(this,st));for(const rt of a(this,Q).values())rt.destroy();a(this,Q).clear(),a(this,G).clear(),a(this,V).clear(),x(this,O,null),a(this,Y).clear(),a(this,dt).destroy(),a(this,mt).destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",a(this,ut)?a(this,H).addHCMFilter(a(this,ut).foreground,a(this,ut).background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(a(this,qt)).direction)}editAltText(rt){var Nt;(Nt=a(this,mt))==null||Nt.editAltText(this,rt)}onPageChanging({pageNumber:rt}){x(this,et,rt-1)}focusMainContainer(){a(this,qt).focus()}findParent(rt,Nt){for(const ee of a(this,Q).values()){const{x:ge,y:ye,width:le,height:nt}=ee.div.getBoundingClientRect();if(rt>=ge&&rt<=ge+le&&Nt>=ye&&Nt<=ye+nt)return ee}return null}disableUserSelect(rt=!1){a(this,Ut).classList.toggle("noUserSelect",rt)}addShouldRescale(rt){a(this,V).add(rt)}removeShouldRescale(rt){a(this,V).delete(rt)}onScaleChanging({scale:rt}){this.commitOrRemove(),this.viewParameters.realScale=rt*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Nt of a(this,V))Nt.onScaleChanging()}onRotationChanging({pagesRotation:rt}){this.commitOrRemove(),this.viewParameters.rotation=rt}addToAnnotationStorage(rt){!rt.isEmpty()&&a(this,ot)&&!a(this,ot).has(rt.id)&&a(this,ot).setValue(rt.id,rt)}blur(){if(!this.hasSelection)return;const{activeElement:rt}=document;for(const Nt of a(this,Y))if(Nt.div.contains(rt)){x(this,K,[Nt,rt]),Nt._focusEventsAllowed=!1;break}}focus(){if(!a(this,K))return;const[rt,Nt]=a(this,K);x(this,K,null),Nt.addEventListener("focusin",()=>{rt._focusEventsAllowed=!0},{once:!0}),Nt.focus()}addEditListeners(){w(this,yt,ey).call(this),w(this,yt,ny).call(this)}removeEditListeners(){w(this,yt,Zp).call(this),w(this,yt,iy).call(this)}copy(rt){var ee;if(rt.preventDefault(),(ee=a(this,O))==null||ee.commitOrRemove(),!this.hasSelection)return;const Nt=[];for(const ge of a(this,Y)){const ye=ge.serialize(!0);ye&&Nt.push(ye)}Nt.length!==0&&rt.clipboardData.setData("application/pdfjs",JSON.stringify(Nt))}cut(rt){this.copy(rt),this.delete()}paste(rt){rt.preventDefault();const{clipboardData:Nt}=rt;for(const ye of Nt.items)for(const le of a(this,tt))if(le.isHandlingMimeForPasting(ye.type)){le.paste(ye,this.currentLayer);return}let ee=Nt.getData("application/pdfjs");if(!ee)return;try{ee=JSON.parse(ee)}catch(ye){(0,i.warn)(`paste: "${ye.message}".`);return}if(!Array.isArray(ee))return;this.unselectAll();const ge=this.currentLayer;try{const ye=[];for(const J of ee){const pt=ge.deserialize(J);if(!pt)return;ye.push(pt)}const le=()=>{for(const J of ye)w(this,yt,sy).call(this,J);w(this,yt,ry).call(this,ye)},nt=()=>{for(const J of ye)J.remove()};this.addCommands({cmd:le,undo:nt,mustExec:!0})}catch(ye){(0,i.warn)(`paste: "${ye.message}".`)}}keydown(rt){var Nt;(Nt=this.getActive())!=null&&Nt.shouldGetKeyboardEvents()||pe._keyboardManager.exec(this,rt)}onEditingAction(rt){["undo","redo","delete","selectAll"].includes(rt.name)&&this[rt.name]()}setEditingState(rt){rt?(w(this,yt,JA).call(this),w(this,yt,ey).call(this),w(this,yt,ny).call(this),w(this,yt,Ks).call(this,{isEditing:a(this,X)!==i.AnnotationEditorType.NONE,isEmpty:w(this,yt,Gh).call(this),hasSomethingToUndo:a(this,dt).hasSomethingToUndo(),hasSomethingToRedo:a(this,dt).hasSomethingToRedo(),hasSelectedEditor:!1})):(w(this,yt,ty).call(this),w(this,yt,Zp).call(this),w(this,yt,iy).call(this),w(this,yt,Ks).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(rt){if(!a(this,tt)){x(this,tt,rt);for(const Nt of a(this,tt))w(this,yt,Vh).call(this,Nt.defaultPropertiesToUpdate)}}getId(){return a(this,R).getId()}get currentLayer(){return a(this,Q).get(a(this,et))}getLayer(rt){return a(this,Q).get(rt)}get currentPageIndex(){return a(this,et)}addLayer(rt){a(this,Q).set(rt.pageIndex,rt),a(this,F)?rt.enable():rt.disable()}removeLayer(rt){a(this,Q).delete(rt.pageIndex)}updateMode(rt,Nt=null){if(a(this,X)!==rt){if(x(this,X,rt),rt===i.AnnotationEditorType.NONE){this.setEditingState(!1),w(this,yt,tb).call(this);return}this.setEditingState(!0),w(this,yt,ZA).call(this),this.unselectAll();for(const ee of a(this,Q).values())ee.updateMode(rt);if(Nt){for(const ee of a(this,G).values())if(ee.annotationElementId===Nt){this.setSelected(ee),ee.enterInEditMode();break}}}}updateToolbar(rt){rt!==a(this,X)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:rt})}updateParams(rt,Nt){if(a(this,tt)){if(rt===i.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(rt);return}for(const ee of a(this,Y))ee.updateParams(rt,Nt);for(const ee of a(this,tt))ee.updateDefaultParams(rt,Nt)}}enableWaiting(rt=!1){if(a(this,U)!==rt){x(this,U,rt);for(const Nt of a(this,Q).values())rt?Nt.disableClick():Nt.enableClick(),Nt.div.classList.toggle("waiting",rt)}}getEditors(rt){const Nt=[];for(const ee of a(this,G).values())ee.pageIndex===rt&&Nt.push(ee);return Nt}getEditor(rt){return a(this,G).get(rt)}addEditor(rt){a(this,G).set(rt.id,rt)}removeEditor(rt){var Nt;a(this,G).delete(rt.id),this.unselect(rt),(!rt.annotationElementId||!a(this,it).has(rt.annotationElementId))&&((Nt=a(this,ot))==null||Nt.remove(rt.id))}addDeletedAnnotationElement(rt){a(this,it).add(rt.annotationElementId),rt.deleted=!0}isDeletedAnnotationElement(rt){return a(this,it).has(rt)}removeDeletedAnnotationElement(rt){a(this,it).delete(rt.annotationElementId),rt.deleted=!1}setActiveEditor(rt){a(this,O)!==rt&&(x(this,O,rt),rt&&w(this,yt,Vh).call(this,rt.propertiesToUpdate))}toggleSelected(rt){if(a(this,Y).has(rt)){a(this,Y).delete(rt),rt.unselect(),w(this,yt,Ks).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Y).add(rt),rt.select(),w(this,yt,Vh).call(this,rt.propertiesToUpdate),w(this,yt,Ks).call(this,{hasSelectedEditor:!0})}setSelected(rt){for(const Nt of a(this,Y))Nt!==rt&&Nt.unselect();a(this,Y).clear(),a(this,Y).add(rt),rt.select(),w(this,yt,Vh).call(this,rt.propertiesToUpdate),w(this,yt,Ks).call(this,{hasSelectedEditor:!0})}isSelected(rt){return a(this,Y).has(rt)}unselect(rt){rt.unselect(),a(this,Y).delete(rt),w(this,yt,Ks).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Y).size!==0}undo(){a(this,dt).undo(),w(this,yt,Ks).call(this,{hasSomethingToUndo:a(this,dt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:w(this,yt,Gh).call(this)})}redo(){a(this,dt).redo(),w(this,yt,Ks).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,dt).hasSomethingToRedo(),isEmpty:w(this,yt,Gh).call(this)})}addCommands(rt){a(this,dt).add(rt),w(this,yt,Ks).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:w(this,yt,Gh).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const rt=[...a(this,Y)],Nt=()=>{for(const ge of rt)ge.remove()},ee=()=>{for(const ge of rt)w(this,yt,sy).call(this,ge)};this.addCommands({cmd:Nt,undo:ee,mustExec:!0})}commitOrRemove(){var rt;(rt=a(this,O))==null||rt.commitOrRemove()}hasSomethingToControl(){return a(this,O)||this.hasSelection}selectAll(){for(const rt of a(this,Y))rt.commit();w(this,yt,ry).call(this,a(this,G).values())}unselectAll(){if(a(this,O)){a(this,O).commitOrRemove();return}if(this.hasSelection){for(const rt of a(this,Y))rt.unselect();a(this,Y).clear(),w(this,yt,Ks).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(rt,Nt,ee=!1){if(ee||this.commitOrRemove(),!this.hasSelection)return;a(this,Ct)[0]+=rt,a(this,Ct)[1]+=Nt;const[ge,ye]=a(this,Ct),le=[...a(this,Y)],nt=1e3;a(this,Ot)&&clearTimeout(a(this,Ot)),x(this,Ot,setTimeout(()=>{x(this,Ot,null),a(this,Ct)[0]=a(this,Ct)[1]=0,this.addCommands({cmd:()=>{for(const J of le)a(this,G).has(J.id)&&J.translateInPage(ge,ye)},undo:()=>{for(const J of le)a(this,G).has(J.id)&&J.translateInPage(-ge,-ye)},mustExec:!1})},nt));for(const J of le)J.translateInPage(rt,Nt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,$,new Map);for(const rt of a(this,Y))a(this,$).set(rt,{savedX:rt.x,savedY:rt.y,savedPageIndex:rt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,$))return!1;this.disableUserSelect(!1);const rt=a(this,$);x(this,$,null);let Nt=!1;for(const[{x:ge,y:ye,pageIndex:le},nt]of rt)nt.newX=ge,nt.newY=ye,nt.newPageIndex=le,Nt||(Nt=ge!==nt.savedX||ye!==nt.savedY||le!==nt.savedPageIndex);if(!Nt)return!1;const ee=(ge,ye,le,nt)=>{if(a(this,G).has(ge.id)){const J=a(this,Q).get(nt);J?ge._setParentAndPosition(J,ye,le):(ge.pageIndex=nt,ge.x=ye,ge.y=le)}};return this.addCommands({cmd:()=>{for(const[ge,{newX:ye,newY:le,newPageIndex:nt}]of rt)ee(ge,ye,le,nt)},undo:()=>{for(const[ge,{savedX:ye,savedY:le,savedPageIndex:nt}]of rt)ee(ge,ye,le,nt)},mustExec:!0}),!0}dragSelectedEditors(rt,Nt){if(a(this,$))for(const ee of a(this,$).keys())ee.drag(rt,Nt)}rebuild(rt){if(rt.parent===null){const Nt=this.getLayer(rt.pageIndex);Nt?(Nt.changeParent(rt),Nt.addOrRebuild(rt)):(this.addEditor(rt),this.addToAnnotationStorage(rt),rt.rebuild())}else rt.parent.addOrRebuild(rt)}isActive(rt){return a(this,O)===rt}getActive(){return a(this,O)}getMode(){return a(this,X)}get imageManager(){return(0,i.shadow)(this,"imageManager",new h)}};O=new WeakMap,G=new WeakMap,Q=new WeakMap,mt=new WeakMap,ot=new WeakMap,dt=new WeakMap,et=new WeakMap,it=new WeakMap,$=new WeakMap,tt=new WeakMap,V=new WeakMap,H=new WeakMap,R=new WeakMap,F=new WeakMap,U=new WeakMap,K=new WeakMap,X=new WeakMap,Y=new WeakMap,ut=new WeakMap,wt=new WeakMap,It=new WeakMap,Dt=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,Gt=new WeakMap,xt=new WeakMap,Pt=new WeakMap,q=new WeakMap,st=new WeakMap,vt=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,qt=new WeakMap,Ut=new WeakMap,yt=new WeakSet,JA=function(){window.addEventListener("focus",a(this,It)),window.addEventListener("blur",a(this,wt))},ty=function(){window.removeEventListener("focus",a(this,It)),window.removeEventListener("blur",a(this,wt))},ey=function(){window.addEventListener("keydown",a(this,Gt),{capture:!0})},Zp=function(){window.removeEventListener("keydown",a(this,Gt),{capture:!0})},ny=function(){document.addEventListener("copy",a(this,Dt)),document.addEventListener("cut",a(this,Ht)),document.addEventListener("paste",a(this,Vt))},iy=function(){document.removeEventListener("copy",a(this,Dt)),document.removeEventListener("cut",a(this,Ht)),document.removeEventListener("paste",a(this,Vt))},Ks=function(rt){Object.entries(rt).some(([ee,ge])=>a(this,vt)[ee]!==ge)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,vt),rt)})},Vh=function(rt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:rt})},ZA=function(){if(!a(this,F)){x(this,F,!0);for(const rt of a(this,Q).values())rt.enable()}},tb=function(){if(this.unselectAll(),a(this,F)){x(this,F,!1);for(const rt of a(this,Q).values())rt.disable()}},sy=function(rt){const Nt=a(this,Q).get(rt.pageIndex);Nt?Nt.addOrRebuild(rt):this.addEditor(rt)},Gh=function(){if(a(this,G).size===0)return!0;if(a(this,G).size===1)for(const rt of a(this,G).values())return rt.isEmpty();return!1},ry=function(rt){a(this,Y).clear();for(const Nt of rt)Nt.isEmpty()||(a(this,Y).add(Nt),Nt.select());w(this,yt,Ks).call(this,{hasSelectedEditor:!0})},xe(pe,"TRANSLATE_SMALL",1),xe(pe,"TRANSLATE_BIG",10);let v=pe;t.AnnotationEditorUIManager=v},(g,t,e)=>{var et,it,$,tt,V,H,R,F,U,K,X,Y,tu,eu,ay,tg,eg,$h,qh;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=k,t.getColorValues=G,t.getCurrentTransform=Q,t.getCurrentTransformInverse=mt,t.getFilenameFromUrl=b,t.getPdfFilenameFromUrl=I,t.getRGB=O,t.getXfaPageViewport=Z,t.isDataScheme=S,t.isPdfFile=C,t.isValidFetchUrl=N,t.loadScript=L,t.noContextMenu=T,t.setLayerDimensions=ot;var i=e(7),o=e(1);const r="http://www.w3.org/2000/svg",dt=class dt{};xe(dt,"CSS",96),xe(dt,"PDF",72),xe(dt,"PDF_TO_CSS_UNITS",dt.CSS/dt.PDF);let c=dt;t.PixelsPerInch=c;class u extends i.BaseFilterFactory{constructor({docId:q,ownerDocument:st=globalThis.document}={}){super();M(this,Y);M(this,et);M(this,it);M(this,$);M(this,tt);M(this,V);M(this,H);M(this,R);M(this,F);M(this,U);M(this,K);M(this,X,0);x(this,$,q),x(this,tt,st)}addFilter(q){if(!q)return"none";let st=a(this,Y,tu).get(q);if(st)return st;let vt,Ct,Ot,qt;if(q.length===1){const Qt=q[0],He=new Array(256);for(let Pe=0;Pe<256;Pe++)He[Pe]=Qt[Pe]/255;qt=vt=Ct=Ot=He.join(",")}else{const[Qt,He,Pe]=q,Qe=new Array(256),ce=new Array(256),Ee=new Array(256);for(let Xe=0;Xe<256;Xe++)Qe[Xe]=Qt[Xe]/255,ce[Xe]=He[Xe]/255,Ee[Xe]=Pe[Xe]/255;vt=Qe.join(","),Ct=ce.join(","),Ot=Ee.join(","),qt=`${vt}${Ct}${Ot}`}if(st=a(this,Y,tu).get(qt),st)return a(this,Y,tu).set(q,st),st;const Ut=`g_${a(this,$)}_transfer_map_${bi(this,X)._++}`,yt=`url(#${Ut})`;a(this,Y,tu).set(q,yt),a(this,Y,tu).set(qt,yt);const ne=w(this,Y,tg).call(this,Ut);return w(this,Y,$h).call(this,vt,Ct,Ot,ne),yt}addHCMFilter(q,st){var He;const vt=`${q}-${st}`;if(a(this,H)===vt)return a(this,R);if(x(this,H,vt),x(this,R,"none"),(He=a(this,V))==null||He.remove(),!q||!st)return a(this,R);const Ct=w(this,Y,qh).call(this,q);q=o.Util.makeHexColor(...Ct);const Ot=w(this,Y,qh).call(this,st);if(st=o.Util.makeHexColor(...Ot),a(this,Y,eu).style.color="",q==="#000000"&&st==="#ffffff"||q===st)return a(this,R);const qt=new Array(256);for(let Pe=0;Pe<=255;Pe++){const Qe=Pe/255;qt[Pe]=Qe<=.03928?Qe/12.92:((Qe+.055)/1.055)**2.4}const Ut=qt.join(","),yt=`g_${a(this,$)}_hcm_filter`,ne=x(this,F,w(this,Y,tg).call(this,yt));w(this,Y,$h).call(this,Ut,Ut,Ut,ne),w(this,Y,ay).call(this,ne);const Qt=(Pe,Qe)=>{const ce=Ct[Pe]/255,Ee=Ot[Pe]/255,Xe=new Array(Qe+1);for(let dn=0;dn<=Qe;dn++)Xe[dn]=ce+dn/Qe*(Ee-ce);return Xe.join(",")};return w(this,Y,$h).call(this,Qt(0,5),Qt(1,5),Qt(2,5),ne),x(this,R,`url(#${yt})`),a(this,R)}addHighlightHCMFilter(q,st,vt,Ct){var Ee;const Ot=`${q}-${st}-${vt}-${Ct}`;if(a(this,U)===Ot)return a(this,K);if(x(this,U,Ot),x(this,K,"none"),(Ee=a(this,F))==null||Ee.remove(),!q||!st)return a(this,K);const[qt,Ut]=[q,st].map(w(this,Y,qh).bind(this));let yt=Math.round(.2126*qt[0]+.7152*qt[1]+.0722*qt[2]),ne=Math.round(.2126*Ut[0]+.7152*Ut[1]+.0722*Ut[2]),[Qt,He]=[vt,Ct].map(w(this,Y,qh).bind(this));ne<yt&&([yt,ne,Qt,He]=[ne,yt,He,Qt]),a(this,Y,eu).style.color="";const Pe=(Xe,dn,zt)=>{const bt=new Array(256),Et=(ne-yt)/zt,he=Xe/255,pe=(dn-Xe)/(255*zt);let Te=0;for(let rt=0;rt<=zt;rt++){const Nt=Math.round(yt+rt*Et),ee=he+rt*pe;for(let ge=Te;ge<=Nt;ge++)bt[ge]=ee;Te=Nt+1}for(let rt=Te;rt<256;rt++)bt[rt]=bt[Te-1];return bt.join(",")},Qe=`g_${a(this,$)}_hcm_highlight_filter`,ce=x(this,F,w(this,Y,tg).call(this,Qe));return w(this,Y,ay).call(this,ce),w(this,Y,$h).call(this,Pe(Qt[0],He[0],5),Pe(Qt[1],He[1],5),Pe(Qt[2],He[2],5),ce),x(this,K,`url(#${Qe})`),a(this,K)}destroy(q=!1){q&&(a(this,R)||a(this,K))||(a(this,it)&&(a(this,it).parentNode.parentNode.remove(),x(this,it,null)),a(this,et)&&(a(this,et).clear(),x(this,et,null)),x(this,X,0))}}et=new WeakMap,it=new WeakMap,$=new WeakMap,tt=new WeakMap,V=new WeakMap,H=new WeakMap,R=new WeakMap,F=new WeakMap,U=new WeakMap,K=new WeakMap,X=new WeakMap,Y=new WeakSet,tu=function(){return a(this,et)||x(this,et,new Map)},eu=function(){if(!a(this,it)){const q=a(this,tt).createElement("div"),{style:st}=q;st.visibility="hidden",st.contain="strict",st.width=st.height=0,st.position="absolute",st.top=st.left=0,st.zIndex=-1;const vt=a(this,tt).createElementNS(r,"svg");vt.setAttribute("width",0),vt.setAttribute("height",0),x(this,it,a(this,tt).createElementNS(r,"defs")),q.append(vt),vt.append(a(this,it)),a(this,tt).body.append(q)}return a(this,it)},ay=function(q){const st=a(this,tt).createElementNS(r,"feColorMatrix");st.setAttribute("type","matrix"),st.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),q.append(st)},tg=function(q){const st=a(this,tt).createElementNS(r,"filter");return st.setAttribute("color-interpolation-filters","sRGB"),st.setAttribute("id",q),a(this,Y,eu).append(st),st},eg=function(q,st,vt){const Ct=a(this,tt).createElementNS(r,st);Ct.setAttribute("type","discrete"),Ct.setAttribute("tableValues",vt),q.append(Ct)},$h=function(q,st,vt,Ct){const Ot=a(this,tt).createElementNS(r,"feComponentTransfer");Ct.append(Ot),w(this,Y,eg).call(this,Ot,"feFuncR",q),w(this,Y,eg).call(this,Ot,"feFuncG",st),w(this,Y,eg).call(this,Ot,"feFuncB",vt)},qh=function(q){return a(this,Y,eu).style.color=q,O(getComputedStyle(a(this,Y,eu)).getPropertyValue("color"))},t.DOMFilterFactory=u;class h extends i.BaseCanvasFactory{constructor({ownerDocument:Pt=globalThis.document}={}){super(),this._document=Pt}_createCanvas(Pt,q){const st=this._document.createElement("canvas");return st.width=Pt,st.height=q,st}}t.DOMCanvasFactory=h;async function f(xt,Pt=!1){if(N(xt,document.baseURI)){const q=await fetch(xt);if(!q.ok)throw new Error(q.statusText);return Pt?new Uint8Array(await q.arrayBuffer()):(0,o.stringToBytes)(await q.text())}return new Promise((q,st)=>{const vt=new XMLHttpRequest;vt.open("GET",xt,!0),Pt&&(vt.responseType="arraybuffer"),vt.onreadystatechange=()=>{if(vt.readyState===XMLHttpRequest.DONE){if(vt.status===200||vt.status===0){let Ct;if(Pt&&vt.response?Ct=new Uint8Array(vt.response):!Pt&&vt.responseText&&(Ct=(0,o.stringToBytes)(vt.responseText)),Ct){q(Ct);return}}st(new Error(vt.statusText))}},vt.send(null)})}class d extends i.BaseCMapReaderFactory{_fetchData(Pt,q){return f(Pt,this.isCompressed).then(st=>({cMapData:st,compressionType:q}))}}t.DOMCMapReaderFactory=d;class m extends i.BaseStandardFontDataFactory{_fetchData(Pt){return f(Pt,!0)}}t.DOMStandardFontDataFactory=m;class v extends i.BaseSVGFactory{_createSVG(Pt){return document.createElementNS(r,Pt)}}t.DOMSVGFactory=v;class _{constructor({viewBox:Pt,scale:q,rotation:st,offsetX:vt=0,offsetY:Ct=0,dontFlip:Ot=!1}){this.viewBox=Pt,this.scale=q,this.rotation=st,this.offsetX=vt,this.offsetY=Ct;const qt=(Pt[2]+Pt[0])/2,Ut=(Pt[3]+Pt[1])/2;let yt,ne,Qt,He;switch(st%=360,st<0&&(st+=360),st){case 180:yt=-1,ne=0,Qt=0,He=1;break;case 90:yt=0,ne=1,Qt=1,He=0;break;case 270:yt=0,ne=-1,Qt=-1,He=0;break;case 0:yt=1,ne=0,Qt=0,He=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ot&&(Qt=-Qt,He=-He);let Pe,Qe,ce,Ee;yt===0?(Pe=Math.abs(Ut-Pt[1])*q+vt,Qe=Math.abs(qt-Pt[0])*q+Ct,ce=(Pt[3]-Pt[1])*q,Ee=(Pt[2]-Pt[0])*q):(Pe=Math.abs(qt-Pt[0])*q+vt,Qe=Math.abs(Ut-Pt[1])*q+Ct,ce=(Pt[2]-Pt[0])*q,Ee=(Pt[3]-Pt[1])*q),this.transform=[yt*q,ne*q,Qt*q,He*q,Pe-yt*q*qt-Qt*q*Ut,Qe-ne*q*qt-He*q*Ut],this.width=ce,this.height=Ee}get rawDims(){const{viewBox:Pt}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:Pt[2]-Pt[0],pageHeight:Pt[3]-Pt[1],pageX:Pt[0],pageY:Pt[1]})}clone({scale:Pt=this.scale,rotation:q=this.rotation,offsetX:st=this.offsetX,offsetY:vt=this.offsetY,dontFlip:Ct=!1}={}){return new _({viewBox:this.viewBox.slice(),scale:Pt,rotation:q,offsetX:st,offsetY:vt,dontFlip:Ct})}convertToViewportPoint(Pt,q){return o.Util.applyTransform([Pt,q],this.transform)}convertToViewportRectangle(Pt){const q=o.Util.applyTransform([Pt[0],Pt[1]],this.transform),st=o.Util.applyTransform([Pt[2],Pt[3]],this.transform);return[q[0],q[1],st[0],st[1]]}convertToPdfPoint(Pt,q){return o.Util.applyInverseTransform([Pt,q],this.transform)}}t.PageViewport=_;class A extends o.BaseException{constructor(Pt,q=0){super(Pt,"RenderingCancelledException"),this.extraDelay=q}}t.RenderingCancelledException=A;function S(xt){const Pt=xt.length;let q=0;for(;q<Pt&&xt[q].trim()==="";)q++;return xt.substring(q,q+5).toLowerCase()==="data:"}function C(xt){return typeof xt=="string"&&/\.pdf$/i.test(xt)}function b(xt,Pt=!1){return Pt||([xt]=xt.split(/[#?]/,1)),xt.substring(xt.lastIndexOf("/")+1)}function I(xt,Pt="document.pdf"){if(typeof xt!="string")return Pt;if(S(xt))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Pt;const q=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,st=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,vt=q.exec(xt);let Ct=st.exec(vt[1])||st.exec(vt[2])||st.exec(vt[3]);if(Ct&&(Ct=Ct[0],Ct.includes("%")))try{Ct=st.exec(decodeURIComponent(Ct))[0]}catch{}return Ct||Pt}class B{constructor(){xe(this,"started",Object.create(null));xe(this,"times",[])}time(Pt){Pt in this.started&&(0,o.warn)(`Timer is already running for ${Pt}`),this.started[Pt]=Date.now()}timeEnd(Pt){Pt in this.started||(0,o.warn)(`Timer has not been started for ${Pt}`),this.times.push({name:Pt,start:this.started[Pt],end:Date.now()}),delete this.started[Pt]}toString(){const Pt=[];let q=0;for(const{name:st}of this.times)q=Math.max(st.length,q);for(const{name:st,start:vt,end:Ct}of this.times)Pt.push(`${st.padEnd(q)} ${Ct-vt}ms
`);return Pt.join("")}}t.StatTimer=B;function N(xt,Pt){try{const{protocol:q}=Pt?new URL(xt,Pt):new URL(xt);return q==="http:"||q==="https:"}catch{return!1}}function T(xt){xt.preventDefault()}function L(xt,Pt=!1){return new Promise((q,st)=>{const vt=document.createElement("script");vt.src=xt,vt.onload=function(Ct){Pt&&vt.remove(),q(Ct)},vt.onerror=function(){st(new Error(`Cannot load script at: ${vt.src}`))},(document.head||document.documentElement).append(vt)})}function k(xt){console.log("Deprecated API usage: "+xt)}let D;class j{static toDateObject(Pt){if(!Pt||typeof Pt!="string")return null;D||(D=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const q=D.exec(Pt);if(!q)return null;const st=parseInt(q[1],10);let vt=parseInt(q[2],10);vt=vt>=1&&vt<=12?vt-1:0;let Ct=parseInt(q[3],10);Ct=Ct>=1&&Ct<=31?Ct:1;let Ot=parseInt(q[4],10);Ot=Ot>=0&&Ot<=23?Ot:0;let qt=parseInt(q[5],10);qt=qt>=0&&qt<=59?qt:0;let Ut=parseInt(q[6],10);Ut=Ut>=0&&Ut<=59?Ut:0;const yt=q[7]||"Z";let ne=parseInt(q[8],10);ne=ne>=0&&ne<=23?ne:0;let Qt=parseInt(q[9],10)||0;return Qt=Qt>=0&&Qt<=59?Qt:0,yt==="-"?(Ot+=ne,qt+=Qt):yt==="+"&&(Ot-=ne,qt-=Qt),new Date(Date.UTC(st,vt,Ct,Ot,qt,Ut))}}t.PDFDateString=j;function Z(xt,{scale:Pt=1,rotation:q=0}){const{width:st,height:vt}=xt.attributes.style,Ct=[0,0,parseInt(st),parseInt(vt)];return new _({viewBox:Ct,scale:Pt,rotation:q})}function O(xt){if(xt.startsWith("#")){const Pt=parseInt(xt.slice(1),16);return[(Pt&16711680)>>16,(Pt&65280)>>8,Pt&255]}return xt.startsWith("rgb(")?xt.slice(4,-1).split(",").map(Pt=>parseInt(Pt)):xt.startsWith("rgba(")?xt.slice(5,-1).split(",").map(Pt=>parseInt(Pt)).slice(0,3):((0,o.warn)(`Not a valid color format: "${xt}"`),[0,0,0])}function G(xt){const Pt=document.createElement("span");Pt.style.visibility="hidden",document.body.append(Pt);for(const q of xt.keys()){Pt.style.color=q;const st=window.getComputedStyle(Pt).color;xt.set(q,O(st))}Pt.remove()}function Q(xt){const{a:Pt,b:q,c:st,d:vt,e:Ct,f:Ot}=xt.getTransform();return[Pt,q,st,vt,Ct,Ot]}function mt(xt){const{a:Pt,b:q,c:st,d:vt,e:Ct,f:Ot}=xt.getTransform().invertSelf();return[Pt,q,st,vt,Ct,Ot]}function ot(xt,Pt,q=!1,st=!0){if(Pt instanceof _){const{pageWidth:vt,pageHeight:Ct}=Pt.rawDims,{style:Ot}=xt,qt=o.FeatureTest.isCSSRoundSupported,Ut=`var(--scale-factor) * ${vt}px`,yt=`var(--scale-factor) * ${Ct}px`,ne=qt?`round(${Ut}, 1px)`:`calc(${Ut})`,Qt=qt?`round(${yt}, 1px)`:`calc(${yt})`;!q||Pt.rotation%180===0?(Ot.width=ne,Ot.height=Qt):(Ot.width=Qt,Ot.height=ne)}st&&xt.setAttribute("data-main-rotation",Pt.rotation)}},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var i=e(1);class o{constructor(){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(d){return"none"}addHCMFilter(d,m){return"none"}addHighlightHCMFilter(d,m,v,_){return"none"}destroy(d=!1){}}t.BaseFilterFactory=o;class r{constructor(){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,m){if(d<=0||m<=0)throw new Error("Invalid canvas size");const v=this._createCanvas(d,m);return{canvas:v,context:v.getContext("2d")}}reset(d,m,v){if(!d.canvas)throw new Error("Canvas is not specified");if(m<=0||v<=0)throw new Error("Invalid canvas size");d.canvas.width=m,d.canvas.height=v}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,m){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=r;class c{constructor({baseUrl:d=null,isCompressed:m=!0}){this.constructor===c&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=m}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const m=this.baseUrl+d+(this.isCompressed?".bcmap":""),v=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(m,v).catch(_=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${m}`)})}_fetchData(d,m){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=c;class u{constructor({baseUrl:d=null}){this.constructor===u&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const m=`${this.baseUrl}${d}`;return this._fetchData(m).catch(v=>{throw new Error(`Unable to load font data at: ${m}`)})}_fetchData(d){(0,i.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=u;class h{constructor(){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,m,v=!1){if(d<=0||m<=0)throw new Error("Invalid SVG dimensions");const _=this._createSVG("svg:svg");return _.setAttribute("version","1.1"),v||(_.setAttribute("width",`${d}px`),_.setAttribute("height",`${m}px`)),_.setAttribute("preserveAspectRatio","none"),_.setAttribute("viewBox",`0 0 ${d} ${m}`),_}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,i.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=h},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var i=e(1);const o=3285377520,r=4294901760,c=65535;class u{constructor(f){this.h1=f?f&4294967295:o,this.h2=f?f&4294967295:o}update(f){let d,m;if(typeof f=="string"){d=new Uint8Array(f.length*2),m=0;for(let k=0,D=f.length;k<D;k++){const j=f.charCodeAt(k);j<=255?d[m++]=j:(d[m++]=j>>>8,d[m++]=j&255)}}else if((0,i.isArrayBuffer)(f))d=f.slice(),m=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const v=m>>2,_=m-v*4,A=new Uint32Array(d.buffer,0,v);let S=0,C=0,b=this.h1,I=this.h2;const B=3432918353,N=461845907,T=B&c,L=N&c;for(let k=0;k<v;k++)k&1?(S=A[k],S=S*B&r|S*T&c,S=S<<15|S>>>17,S=S*N&r|S*L&c,b^=S,b=b<<13|b>>>19,b=b*5+3864292196):(C=A[k],C=C*B&r|C*T&c,C=C<<15|C>>>17,C=C*N&r|C*L&c,I^=C,I=I<<13|I>>>19,I=I*5+3864292196);switch(S=0,_){case 3:S^=d[v*4+2]<<16;case 2:S^=d[v*4+1]<<8;case 1:S^=d[v*4],S=S*B&r|S*T&c,S=S<<15|S>>>17,S=S*N&r|S*L&c,v&1?b^=S:I^=S}this.h1=b,this.h2=I}hexdigest(){let f=this.h1,d=this.h2;return f^=d>>>1,f=f*3981806797&r|f*36045&c,d=d*4283543511&r|((d<<16|f>>>16)*2950163797&r)>>>16,f^=d>>>1,f=f*444984403&r|f*60499&c,d=d*3301882366&r|((d<<16|f>>>16)*3120437893&r)>>>16,f^=d>>>1,(f>>>0).toString(16).padStart(8,"0")+(d>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=u},(g,t,e)=>{var c;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var i=e(1);class o{constructor({ownerDocument:h=globalThis.document,styleElement:f=null}){M(this,c,new Set);this._document=h,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(h){this.nativeFontFaces.add(h),this._document.fonts.add(h)}removeNativeFontFace(h){this.nativeFontFaces.delete(h),this._document.fonts.delete(h)}insertRule(h){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const f=this.styleElement.sheet;f.insertRule(h,f.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.clear(),a(this,c).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(h){if(!(!h||a(this,c).has(h.loadedName))){if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:f,src:d,style:m}=h,v=new FontFace(f,d,m);this.addNativeFontFace(v);try{await v.load(),a(this,c).add(f)}catch{(0,i.warn)(`Cannot load system font: ${h.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(v)}return}(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(h){if(h.attached||h.missingFile&&!h.systemFontInfo)return;if(h.attached=!0,h.systemFontInfo){await this.loadSystemFont(h.systemFontInfo);return}if(this.isFontLoadingAPISupported){const d=h.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(m){throw(0,i.warn)(`Failed to load font '${d.family}': '${m}'.`),h.disableFontFace=!0,m}}return}const f=h.createFontFaceRule();if(f){if(this.insertRule(f),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const m=this._queueLoadingCallback(d);this._prepareFontLoadEvent(h,m)})}}get isFontLoadingAPISupported(){var f;const h=!!((f=this._document)!=null&&f.fonts);return(0,i.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){let h=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(h=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function f(){for((0,i.assert)(!m.done,"completeRequest() cannot be called twice."),m.done=!0;d.length>0&&d[0].done;){const v=d.shift();setTimeout(v.callback,0)}}const{loadingRequests:d}=this,m={done:!1,complete:f,callback:h};return d.push(m),m}get _loadTestFont(){const h=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",h)}_prepareFontLoadEvent(h,f){function d(O,G){return O.charCodeAt(G)<<24|O.charCodeAt(G+1)<<16|O.charCodeAt(G+2)<<8|O.charCodeAt(G+3)&255}function m(O,G,Q,mt){const ot=O.substring(0,G),dt=O.substring(G+Q);return ot+mt+dt}let v,_;const A=this._document.createElement("canvas");A.width=1,A.height=1;const S=A.getContext("2d");let C=0;function b(O,G){if(++C>30){(0,i.warn)("Load test font never loaded."),G();return}if(S.font="30px "+O,S.fillText(".",0,20),S.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(b.bind(null,O,G))}const I=`lt${Date.now()}${this.loadTestFontId++}`;let B=this._loadTestFont;B=m(B,976,I.length,I);const T=16,L=1482184792;let k=d(B,T);for(v=0,_=I.length-3;v<_;v+=4)k=k-L+d(I,v)|0;v<I.length&&(k=k-L+d(I+"XXX",v)|0),B=m(B,T,4,(0,i.string32)(k));const D=`url(data:font/opentype;base64,${btoa(B)});`,j=`@font-face {font-family:"${I}";src:${D}}`;this.insertRule(j);const Z=this._document.createElement("div");Z.style.visibility="hidden",Z.style.width=Z.style.height="10px",Z.style.position="absolute",Z.style.top=Z.style.left="0px";for(const O of[h.loadedName,I]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=O,Z.append(G)}this._document.body.append(Z),b(I,()=>{Z.remove(),f.complete()})}}c=new WeakMap,t.FontLoader=o;class r{constructor(h,{isEvalSupported:f=!0,disableFontFace:d=!1,ignoreErrors:m=!1,inspectFont:v=null}){this.compiledGlyphs=Object.create(null);for(const _ in h)this[_]=h[_];this.isEvalSupported=f!==!1,this.disableFontFace=d===!0,this.ignoreErrors=m===!0,this._inspectFont=v}createNativeFontFace(){var f;if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return(f=this._inspectFont)==null||f.call(this,this),h}createFontFaceRule(){var m;if(!this.data||this.disableFontFace)return null;const h=(0,i.bytesToString)(this.data),f=`url(data:${this.mimetype};base64,${btoa(h)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${f}}`;else{let v=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(v+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${v}src:${f}}`}return(m=this._inspectFont)==null||m.call(this,this,f),d}getPathGenerator(h,f){if(this.compiledGlyphs[f]!==void 0)return this.compiledGlyphs[f];let d;try{d=h.get(this.loadedName+"_path_"+f)}catch(m){if(!this.ignoreErrors)throw m;return(0,i.warn)(`getPathGenerator - ignoring character: "${m}".`),this.compiledGlyphs[f]=function(v,_){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const m=[];for(const v of d){const _=v.args!==void 0?v.args.join(","):"";m.push("c.",v.cmd,"(",_,`);
`)}return this.compiledGlyphs[f]=new Function("c","size",m.join(""))}return this.compiledGlyphs[f]=function(m,v){for(const _ of d)_.cmd==="scale"&&(_.args=[v,-v]),m[_.cmd].apply(m,_.args)}}}t.FontFaceObject=r},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var i=e(7);e(1);const o=function(f){return new Promise((d,m)=>{require$$5.readFile(f,(_,A)=>{if(_||!A){m(new Error(_));return}d(new Uint8Array(A))})})};class r extends i.BaseFilterFactory{}t.NodeFilterFactory=r;class c extends i.BaseCanvasFactory{_createCanvas(d,m){return require$$5.createCanvas(d,m)}}t.NodeCanvasFactory=c;class u extends i.BaseCMapReaderFactory{_fetchData(d,m){return o(d).then(v=>({cMapData:v,compressionType:m}))}}t.NodeCMapReaderFactory=u;class h extends i.BaseStandardFontDataFactory{_fetchData(d){return o(d)}}t.NodeStandardFontDataFactory=h},(g,t,e)=>{var it,oy,ly;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var i=e(1),o=e(6),r=e(12),c=e(13);const u=16,h=100,f=4096,d=15,m=10,v=1e3,_=16;function A(H,R){if(H._removeMirroring)throw new Error("Context is already forwarding operations.");H.__originalSave=H.save,H.__originalRestore=H.restore,H.__originalRotate=H.rotate,H.__originalScale=H.scale,H.__originalTranslate=H.translate,H.__originalTransform=H.transform,H.__originalSetTransform=H.setTransform,H.__originalResetTransform=H.resetTransform,H.__originalClip=H.clip,H.__originalMoveTo=H.moveTo,H.__originalLineTo=H.lineTo,H.__originalBezierCurveTo=H.bezierCurveTo,H.__originalRect=H.rect,H.__originalClosePath=H.closePath,H.__originalBeginPath=H.beginPath,H._removeMirroring=()=>{H.save=H.__originalSave,H.restore=H.__originalRestore,H.rotate=H.__originalRotate,H.scale=H.__originalScale,H.translate=H.__originalTranslate,H.transform=H.__originalTransform,H.setTransform=H.__originalSetTransform,H.resetTransform=H.__originalResetTransform,H.clip=H.__originalClip,H.moveTo=H.__originalMoveTo,H.lineTo=H.__originalLineTo,H.bezierCurveTo=H.__originalBezierCurveTo,H.rect=H.__originalRect,H.closePath=H.__originalClosePath,H.beginPath=H.__originalBeginPath,delete H._removeMirroring},H.save=function(){R.save(),this.__originalSave()},H.restore=function(){R.restore(),this.__originalRestore()},H.translate=function(U,K){R.translate(U,K),this.__originalTranslate(U,K)},H.scale=function(U,K){R.scale(U,K),this.__originalScale(U,K)},H.transform=function(U,K,X,Y,ut,wt){R.transform(U,K,X,Y,ut,wt),this.__originalTransform(U,K,X,Y,ut,wt)},H.setTransform=function(U,K,X,Y,ut,wt){R.setTransform(U,K,X,Y,ut,wt),this.__originalSetTransform(U,K,X,Y,ut,wt)},H.resetTransform=function(){R.resetTransform(),this.__originalResetTransform()},H.rotate=function(U){R.rotate(U),this.__originalRotate(U)},H.clip=function(U){R.clip(U),this.__originalClip(U)},H.moveTo=function(F,U){R.moveTo(F,U),this.__originalMoveTo(F,U)},H.lineTo=function(F,U){R.lineTo(F,U),this.__originalLineTo(F,U)},H.bezierCurveTo=function(F,U,K,X,Y,ut){R.bezierCurveTo(F,U,K,X,Y,ut),this.__originalBezierCurveTo(F,U,K,X,Y,ut)},H.rect=function(F,U,K,X){R.rect(F,U,K,X),this.__originalRect(F,U,K,X)},H.closePath=function(){R.closePath(),this.__originalClosePath()},H.beginPath=function(){R.beginPath(),this.__originalBeginPath()}}class S{constructor(R){this.canvasFactory=R,this.cache=Object.create(null)}getCanvas(R,F,U){let K;return this.cache[R]!==void 0?(K=this.cache[R],this.canvasFactory.reset(K,F,U)):(K=this.canvasFactory.create(F,U),this.cache[R]=K),K}delete(R){delete this.cache[R]}clear(){for(const R in this.cache){const F=this.cache[R];this.canvasFactory.destroy(F),delete this.cache[R]}}}function C(H,R,F,U,K,X,Y,ut,wt,It){const[Dt,Ht,Vt,Gt,xt,Pt]=(0,o.getCurrentTransform)(H);if(Ht===0&&Vt===0){const vt=Y*Dt+xt,Ct=Math.round(vt),Ot=ut*Gt+Pt,qt=Math.round(Ot),Ut=(Y+wt)*Dt+xt,yt=Math.abs(Math.round(Ut)-Ct)||1,ne=(ut+It)*Gt+Pt,Qt=Math.abs(Math.round(ne)-qt)||1;return H.setTransform(Math.sign(Dt),0,0,Math.sign(Gt),Ct,qt),H.drawImage(R,F,U,K,X,0,0,yt,Qt),H.setTransform(Dt,Ht,Vt,Gt,xt,Pt),[yt,Qt]}if(Dt===0&&Gt===0){const vt=ut*Vt+xt,Ct=Math.round(vt),Ot=Y*Ht+Pt,qt=Math.round(Ot),Ut=(ut+It)*Vt+xt,yt=Math.abs(Math.round(Ut)-Ct)||1,ne=(Y+wt)*Ht+Pt,Qt=Math.abs(Math.round(ne)-qt)||1;return H.setTransform(0,Math.sign(Ht),Math.sign(Vt),0,Ct,qt),H.drawImage(R,F,U,K,X,0,0,Qt,yt),H.setTransform(Dt,Ht,Vt,Gt,xt,Pt),[Qt,yt]}H.drawImage(R,F,U,K,X,Y,ut,wt,It);const q=Math.hypot(Dt,Ht),st=Math.hypot(Vt,Gt);return[q*wt,st*It]}function b(H){const{width:R,height:F}=H;if(R>v||F>v)return null;const U=1e3,K=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),X=R+1;let Y=new Uint8Array(X*(F+1)),ut,wt,It;const Dt=R+7&-8;let Ht=new Uint8Array(Dt*F),Vt=0;for(const st of H.data){let vt=128;for(;vt>0;)Ht[Vt++]=st&vt?0:255,vt>>=1}let Gt=0;for(Vt=0,Ht[Vt]!==0&&(Y[0]=1,++Gt),wt=1;wt<R;wt++)Ht[Vt]!==Ht[Vt+1]&&(Y[wt]=Ht[Vt]?2:1,++Gt),Vt++;for(Ht[Vt]!==0&&(Y[wt]=2,++Gt),ut=1;ut<F;ut++){Vt=ut*Dt,It=ut*X,Ht[Vt-Dt]!==Ht[Vt]&&(Y[It]=Ht[Vt]?1:8,++Gt);let st=(Ht[Vt]?4:0)+(Ht[Vt-Dt]?8:0);for(wt=1;wt<R;wt++)st=(st>>2)+(Ht[Vt+1]?4:0)+(Ht[Vt-Dt+1]?8:0),K[st]&&(Y[It+wt]=K[st],++Gt),Vt++;if(Ht[Vt-Dt]!==Ht[Vt]&&(Y[It+wt]=Ht[Vt]?2:4,++Gt),Gt>U)return null}for(Vt=Dt*(F-1),It=ut*X,Ht[Vt]!==0&&(Y[It]=8,++Gt),wt=1;wt<R;wt++)Ht[Vt]!==Ht[Vt+1]&&(Y[It+wt]=Ht[Vt]?4:8,++Gt),Vt++;if(Ht[Vt]!==0&&(Y[It+wt]=4,++Gt),Gt>U)return null;const xt=new Int32Array([0,X,-1,0,-X,0,0,0,1]),Pt=new Path2D;for(ut=0;Gt&&ut<=F;ut++){let st=ut*X;const vt=st+R;for(;st<vt&&!Y[st];)st++;if(st===vt)continue;Pt.moveTo(st%X,ut);const Ct=st;let Ot=Y[st];do{const qt=xt[Ot];do st+=qt;while(!Y[st]);const Ut=Y[st];Ut!==5&&Ut!==10?(Ot=Ut,Y[st]=0):(Ot=Ut&51*Ot>>4,Y[st]&=Ot>>2|Ot<<2),Pt.lineTo(st%X,st/X|0),Y[st]||--Gt}while(Ct!==st);--ut}return Ht=null,Y=null,function(st){st.save(),st.scale(1/R,-1/F),st.translate(0,-F),st.fill(Pt),st.beginPath(),st.restore()}}class I{constructor(R,F){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,R,F])}clone(){const R=Object.create(this);return R.clipBox=this.clipBox.slice(),R}setCurrentPoint(R,F){this.x=R,this.y=F}updatePathMinMax(R,F,U){[F,U]=i.Util.applyTransform([F,U],R),this.minX=Math.min(this.minX,F),this.minY=Math.min(this.minY,U),this.maxX=Math.max(this.maxX,F),this.maxY=Math.max(this.maxY,U)}updateRectMinMax(R,F){const U=i.Util.applyTransform(F,R),K=i.Util.applyTransform(F.slice(2),R);this.minX=Math.min(this.minX,U[0],K[0]),this.minY=Math.min(this.minY,U[1],K[1]),this.maxX=Math.max(this.maxX,U[0],K[0]),this.maxY=Math.max(this.maxY,U[1],K[1])}updateScalingPathMinMax(R,F){i.Util.scaleMinMax(R,F),this.minX=Math.min(this.minX,F[0]),this.maxX=Math.max(this.maxX,F[1]),this.minY=Math.min(this.minY,F[2]),this.maxY=Math.max(this.maxY,F[3])}updateCurvePathMinMax(R,F,U,K,X,Y,ut,wt,It,Dt){const Ht=i.Util.bezierBoundingBox(F,U,K,X,Y,ut,wt,It);if(Dt){Dt[0]=Math.min(Dt[0],Ht[0],Ht[2]),Dt[1]=Math.max(Dt[1],Ht[0],Ht[2]),Dt[2]=Math.min(Dt[2],Ht[1],Ht[3]),Dt[3]=Math.max(Dt[3],Ht[1],Ht[3]);return}this.updateRectMinMax(R,Ht)}getPathBoundingBox(R=r.PathType.FILL,F=null){const U=[this.minX,this.minY,this.maxX,this.maxY];if(R===r.PathType.STROKE){F||(0,i.unreachable)("Stroke bounding box must include transform.");const K=i.Util.singularValueDecompose2dScale(F),X=K[0]*this.lineWidth/2,Y=K[1]*this.lineWidth/2;U[0]-=X,U[1]-=Y,U[2]+=X,U[3]+=Y}return U}updateClipFromPath(){const R=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(R||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(R){this.clipBox=R,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(R=r.PathType.FILL,F=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(R,F))}}function B(H,R){if(typeof ImageData<"u"&&R instanceof ImageData){H.putImageData(R,0,0);return}const F=R.height,U=R.width,K=F%_,X=(F-K)/_,Y=K===0?X:X+1,ut=H.createImageData(U,_);let wt=0,It;const Dt=R.data,Ht=ut.data;let Vt,Gt,xt,Pt;if(R.kind===i.ImageKind.GRAYSCALE_1BPP){const q=Dt.byteLength,st=new Uint32Array(Ht.buffer,0,Ht.byteLength>>2),vt=st.length,Ct=U+7>>3,Ot=4294967295,qt=i.FeatureTest.isLittleEndian?4278190080:255;for(Vt=0;Vt<Y;Vt++){for(xt=Vt<X?_:K,It=0,Gt=0;Gt<xt;Gt++){const Ut=q-wt;let yt=0;const ne=Ut>Ct?U:Ut*8-7,Qt=ne&-8;let He=0,Pe=0;for(;yt<Qt;yt+=8)Pe=Dt[wt++],st[It++]=Pe&128?Ot:qt,st[It++]=Pe&64?Ot:qt,st[It++]=Pe&32?Ot:qt,st[It++]=Pe&16?Ot:qt,st[It++]=Pe&8?Ot:qt,st[It++]=Pe&4?Ot:qt,st[It++]=Pe&2?Ot:qt,st[It++]=Pe&1?Ot:qt;for(;yt<ne;yt++)He===0&&(Pe=Dt[wt++],He=128),st[It++]=Pe&He?Ot:qt,He>>=1}for(;It<vt;)st[It++]=0;H.putImageData(ut,0,Vt*_)}}else if(R.kind===i.ImageKind.RGBA_32BPP){for(Gt=0,Pt=U*_*4,Vt=0;Vt<X;Vt++)Ht.set(Dt.subarray(wt,wt+Pt)),wt+=Pt,H.putImageData(ut,0,Gt),Gt+=_;Vt<Y&&(Pt=U*K*4,Ht.set(Dt.subarray(wt,wt+Pt)),H.putImageData(ut,0,Gt))}else if(R.kind===i.ImageKind.RGB_24BPP)for(xt=_,Pt=U*xt,Vt=0;Vt<Y;Vt++){for(Vt>=X&&(xt=K,Pt=U*xt),It=0,Gt=Pt;Gt--;)Ht[It++]=Dt[wt++],Ht[It++]=Dt[wt++],Ht[It++]=Dt[wt++],Ht[It++]=255;H.putImageData(ut,0,Vt*_)}else throw new Error(`bad image kind: ${R.kind}`)}function N(H,R){if(R.bitmap){H.drawImage(R.bitmap,0,0);return}const F=R.height,U=R.width,K=F%_,X=(F-K)/_,Y=K===0?X:X+1,ut=H.createImageData(U,_);let wt=0;const It=R.data,Dt=ut.data;for(let Ht=0;Ht<Y;Ht++){const Vt=Ht<X?_:K;({srcPos:wt}=(0,c.convertBlackAndWhiteToRGBA)({src:It,srcPos:wt,dest:Dt,width:U,height:Vt,nonBlackColor:0})),H.putImageData(ut,0,Ht*_)}}function T(H,R){const F=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const U of F)H[U]!==void 0&&(R[U]=H[U]);H.setLineDash!==void 0&&(R.setLineDash(H.getLineDash()),R.lineDashOffset=H.lineDashOffset)}function L(H){if(H.strokeStyle=H.fillStyle="#000000",H.fillRule="nonzero",H.globalAlpha=1,H.lineWidth=1,H.lineCap="butt",H.lineJoin="miter",H.miterLimit=10,H.globalCompositeOperation="source-over",H.font="10px sans-serif",H.setLineDash!==void 0&&(H.setLineDash([]),H.lineDashOffset=0),!i.isNodeJS){const{filter:R}=H;R!=="none"&&R!==""&&(H.filter="none")}}function k(H,R,F,U){const K=H.length;for(let X=3;X<K;X+=4){const Y=H[X];if(Y===0)H[X-3]=R,H[X-2]=F,H[X-1]=U;else if(Y<255){const ut=255-Y;H[X-3]=H[X-3]*Y+R*ut>>8,H[X-2]=H[X-2]*Y+F*ut>>8,H[X-1]=H[X-1]*Y+U*ut>>8}}}function D(H,R,F){const U=H.length,K=1/255;for(let X=3;X<U;X+=4){const Y=F?F[H[X]]:H[X];R[X]=R[X]*Y*K|0}}function j(H,R,F){const U=H.length;for(let K=3;K<U;K+=4){const X=H[K-3]*77+H[K-2]*152+H[K-1]*28;R[K]=F?R[K]*F[X>>8]>>8:R[K]*X>>16}}function Z(H,R,F,U,K,X,Y,ut,wt,It,Dt){const Ht=!!X,Vt=Ht?X[0]:0,Gt=Ht?X[1]:0,xt=Ht?X[2]:0,Pt=K==="Luminosity"?j:D,st=Math.min(U,Math.ceil(1048576/F));for(let vt=0;vt<U;vt+=st){const Ct=Math.min(st,U-vt),Ot=H.getImageData(ut-It,vt+(wt-Dt),F,Ct),qt=R.getImageData(ut,vt+wt,F,Ct);Ht&&k(Ot.data,Vt,Gt,xt),Pt(Ot.data,qt.data,Y),R.putImageData(qt,ut,vt+wt)}}function O(H,R,F,U){const K=U[0],X=U[1],Y=U[2]-K,ut=U[3]-X;Y===0||ut===0||(Z(R.context,F,Y,ut,R.subtype,R.backdrop,R.transferMap,K,X,R.offsetX,R.offsetY),H.save(),H.globalAlpha=1,H.globalCompositeOperation="source-over",H.setTransform(1,0,0,1,0,0),H.drawImage(F.canvas,0,0),H.restore())}function G(H,R){const F=i.Util.singularValueDecompose2dScale(H);F[0]=Math.fround(F[0]),F[1]=Math.fround(F[1]);const U=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return R!==void 0?R:F[0]<=U||F[1]<=U}const Q=["butt","round","square"],mt=["miter","round","bevel"],ot={},dt={},V=class V{constructor(R,F,U,K,X,{optionalContentConfig:Y,markedContentStack:ut=null},wt,It){M(this,it);this.ctx=R,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=F,this.objs=U,this.canvasFactory=K,this.filterFactory=X,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ut||[],this.optionalContentConfig=Y,this.cachedCanvases=new S(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=wt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=It,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(R,F=null){return typeof R=="string"?R.startsWith("g_")?this.commonObjs.get(R):this.objs.get(R):F}beginDrawing({transform:R,viewport:F,transparency:U=!1,background:K=null}){const X=this.ctx.canvas.width,Y=this.ctx.canvas.height,ut=this.ctx.fillStyle;if(this.ctx.fillStyle=K||"#ffffff",this.ctx.fillRect(0,0,X,Y),this.ctx.fillStyle=ut,U){const wt=this.cachedCanvases.getCanvas("transparent",X,Y);this.compositeCtx=this.ctx,this.transparentCanvas=wt.canvas,this.ctx=wt.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),L(this.ctx),R&&(this.ctx.transform(...R),this.outputScaleX=R[0],this.outputScaleY=R[0]),this.ctx.transform(...F.transform),this.viewportScale=F.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(R,F,U,K){const X=R.argsArray,Y=R.fnArray;let ut=F||0;const wt=X.length;if(wt===ut)return ut;const It=wt-ut>m&&typeof U=="function",Dt=It?Date.now()+d:0;let Ht=0;const Vt=this.commonObjs,Gt=this.objs;let xt;for(;;){if(K!==void 0&&ut===K.nextBreakPoint)return K.breakIt(ut,U),ut;if(xt=Y[ut],xt!==i.OPS.dependency)this[xt].apply(this,X[ut]);else for(const Pt of X[ut]){const q=Pt.startsWith("g_")?Vt:Gt;if(!q.has(Pt))return q.get(Pt,U),ut}if(ut++,ut===wt)return ut;if(It&&++Ht>m){if(Date.now()>Dt)return U(),ut;Ht=0}}}endDrawing(){w(this,it,oy).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const R of this._cachedBitmapsMap.values()){for(const F of R.values())typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement&&(F.width=F.height=0);R.clear()}this._cachedBitmapsMap.clear(),w(this,it,ly).call(this)}_scaleImage(R,F){const U=R.width,K=R.height;let X=Math.max(Math.hypot(F[0],F[1]),1),Y=Math.max(Math.hypot(F[2],F[3]),1),ut=U,wt=K,It="prescale1",Dt,Ht;for(;X>2&&ut>1||Y>2&&wt>1;){let Vt=ut,Gt=wt;X>2&&ut>1&&(Vt=ut>=16384?Math.floor(ut/2)-1||1:Math.ceil(ut/2),X/=ut/Vt),Y>2&&wt>1&&(Gt=wt>=16384?Math.floor(wt/2)-1||1:Math.ceil(wt)/2,Y/=wt/Gt),Dt=this.cachedCanvases.getCanvas(It,Vt,Gt),Ht=Dt.context,Ht.clearRect(0,0,Vt,Gt),Ht.drawImage(R,0,0,ut,wt,0,0,Vt,Gt),R=Dt.canvas,ut=Vt,wt=Gt,It=It==="prescale1"?"prescale2":"prescale1"}return{img:R,paintWidth:ut,paintHeight:wt}}_createMaskCanvas(R){const F=this.ctx,{width:U,height:K}=R,X=this.current.fillColor,Y=this.current.patternFill,ut=(0,o.getCurrentTransform)(F);let wt,It,Dt,Ht;if((R.bitmap||R.data)&&R.count>1){const yt=R.bitmap||R.data.buffer;It=JSON.stringify(Y?ut:[ut.slice(0,4),X]),wt=this._cachedBitmapsMap.get(yt),wt||(wt=new Map,this._cachedBitmapsMap.set(yt,wt));const ne=wt.get(It);if(ne&&!Y){const Qt=Math.round(Math.min(ut[0],ut[2])+ut[4]),He=Math.round(Math.min(ut[1],ut[3])+ut[5]);return{canvas:ne,offsetX:Qt,offsetY:He}}Dt=ne}Dt||(Ht=this.cachedCanvases.getCanvas("maskCanvas",U,K),N(Ht.context,R));let Vt=i.Util.transform(ut,[1/U,0,0,-1/K,0,0]);Vt=i.Util.transform(Vt,[1,0,0,1,0,-K]);const Gt=i.Util.applyTransform([0,0],Vt),xt=i.Util.applyTransform([U,K],Vt),Pt=i.Util.normalizeRect([Gt[0],Gt[1],xt[0],xt[1]]),q=Math.round(Pt[2]-Pt[0])||1,st=Math.round(Pt[3]-Pt[1])||1,vt=this.cachedCanvases.getCanvas("fillCanvas",q,st),Ct=vt.context,Ot=Math.min(Gt[0],xt[0]),qt=Math.min(Gt[1],xt[1]);Ct.translate(-Ot,-qt),Ct.transform(...Vt),Dt||(Dt=this._scaleImage(Ht.canvas,(0,o.getCurrentTransformInverse)(Ct)),Dt=Dt.img,wt&&Y&&wt.set(It,Dt)),Ct.imageSmoothingEnabled=G((0,o.getCurrentTransform)(Ct),R.interpolate),C(Ct,Dt,0,0,Dt.width,Dt.height,0,0,U,K),Ct.globalCompositeOperation="source-in";const Ut=i.Util.transform((0,o.getCurrentTransformInverse)(Ct),[1,0,0,1,-Ot,-qt]);return Ct.fillStyle=Y?X.getPattern(F,this,Ut,r.PathType.FILL):X,Ct.fillRect(0,0,U,K),wt&&!Y&&(this.cachedCanvases.delete("fillCanvas"),wt.set(It,vt.canvas)),{canvas:vt.canvas,offsetX:Math.round(Ot),offsetY:Math.round(qt)}}setLineWidth(R){R!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=R,this.ctx.lineWidth=R}setLineCap(R){this.ctx.lineCap=Q[R]}setLineJoin(R){this.ctx.lineJoin=mt[R]}setMiterLimit(R){this.ctx.miterLimit=R}setDash(R,F){const U=this.ctx;U.setLineDash!==void 0&&(U.setLineDash(R),U.lineDashOffset=F)}setRenderingIntent(R){}setFlatness(R){}setGState(R){for(const[F,U]of R)switch(F){case"LW":this.setLineWidth(U);break;case"LC":this.setLineCap(U);break;case"LJ":this.setLineJoin(U);break;case"ML":this.setMiterLimit(U);break;case"D":this.setDash(U[0],U[1]);break;case"RI":this.setRenderingIntent(U);break;case"FL":this.setFlatness(U);break;case"Font":this.setFont(U[0],U[1]);break;case"CA":this.current.strokeAlpha=U;break;case"ca":this.current.fillAlpha=U,this.ctx.globalAlpha=U;break;case"BM":this.ctx.globalCompositeOperation=U;break;case"SMask":this.current.activeSMask=U?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(U);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const R=this.inSMaskMode;this.current.activeSMask&&!R?this.beginSMaskMode():!this.current.activeSMask&&R&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const R=this.ctx.canvas.width,F=this.ctx.canvas.height,U="smaskGroupAt"+this.groupLevel,K=this.cachedCanvases.getCanvas(U,R,F);this.suspendedCtx=this.ctx,this.ctx=K.context;const X=this.ctx;X.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),T(this.suspendedCtx,X),A(X,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),T(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(R){if(!this.current.activeSMask)return;R?(R[0]=Math.floor(R[0]),R[1]=Math.floor(R[1]),R[2]=Math.ceil(R[2]),R[3]=Math.ceil(R[3])):R=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const F=this.current.activeSMask,U=this.suspendedCtx;O(U,F,this.ctx,R),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(T(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const R=this.current;this.stateStack.push(R),this.current=R.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),T(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(R,F,U,K,X,Y){this.ctx.transform(R,F,U,K,X,Y),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(R,F,U){const K=this.ctx,X=this.current;let Y=X.x,ut=X.y,wt,It;const Dt=(0,o.getCurrentTransform)(K),Ht=Dt[0]===0&&Dt[3]===0||Dt[1]===0&&Dt[2]===0,Vt=Ht?U.slice(0):null;for(let Gt=0,xt=0,Pt=R.length;Gt<Pt;Gt++)switch(R[Gt]|0){case i.OPS.rectangle:Y=F[xt++],ut=F[xt++];const q=F[xt++],st=F[xt++],vt=Y+q,Ct=ut+st;K.moveTo(Y,ut),q===0||st===0?K.lineTo(vt,Ct):(K.lineTo(vt,ut),K.lineTo(vt,Ct),K.lineTo(Y,Ct)),Ht||X.updateRectMinMax(Dt,[Y,ut,vt,Ct]),K.closePath();break;case i.OPS.moveTo:Y=F[xt++],ut=F[xt++],K.moveTo(Y,ut),Ht||X.updatePathMinMax(Dt,Y,ut);break;case i.OPS.lineTo:Y=F[xt++],ut=F[xt++],K.lineTo(Y,ut),Ht||X.updatePathMinMax(Dt,Y,ut);break;case i.OPS.curveTo:wt=Y,It=ut,Y=F[xt+4],ut=F[xt+5],K.bezierCurveTo(F[xt],F[xt+1],F[xt+2],F[xt+3],Y,ut),X.updateCurvePathMinMax(Dt,wt,It,F[xt],F[xt+1],F[xt+2],F[xt+3],Y,ut,Vt),xt+=6;break;case i.OPS.curveTo2:wt=Y,It=ut,K.bezierCurveTo(Y,ut,F[xt],F[xt+1],F[xt+2],F[xt+3]),X.updateCurvePathMinMax(Dt,wt,It,Y,ut,F[xt],F[xt+1],F[xt+2],F[xt+3],Vt),Y=F[xt+2],ut=F[xt+3],xt+=4;break;case i.OPS.curveTo3:wt=Y,It=ut,Y=F[xt+2],ut=F[xt+3],K.bezierCurveTo(F[xt],F[xt+1],Y,ut,Y,ut),X.updateCurvePathMinMax(Dt,wt,It,F[xt],F[xt+1],Y,ut,Y,ut,Vt),xt+=4;break;case i.OPS.closePath:K.closePath();break}Ht&&X.updateScalingPathMinMax(Dt,Vt),X.setCurrentPoint(Y,ut)}closePath(){this.ctx.closePath()}stroke(R=!0){const F=this.ctx,U=this.current.strokeColor;F.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof U=="object"&&(U!=null&&U.getPattern)?(F.save(),F.strokeStyle=U.getPattern(F,this,(0,o.getCurrentTransformInverse)(F),r.PathType.STROKE),this.rescaleAndStroke(!1),F.restore()):this.rescaleAndStroke(!0)),R&&this.consumePath(this.current.getClippedPathBoundingBox()),F.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(R=!0){const F=this.ctx,U=this.current.fillColor,K=this.current.patternFill;let X=!1;K&&(F.save(),F.fillStyle=U.getPattern(F,this,(0,o.getCurrentTransformInverse)(F),r.PathType.FILL),X=!0);const Y=this.current.getClippedPathBoundingBox();this.contentVisible&&Y!==null&&(this.pendingEOFill?(F.fill("evenodd"),this.pendingEOFill=!1):F.fill()),X&&F.restore(),R&&this.consumePath(Y)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ot}eoClip(){this.pendingClip=dt}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const R=this.pendingTextPaths,F=this.ctx;if(R===void 0){F.beginPath();return}F.save(),F.beginPath();for(const U of R)F.setTransform(...U.transform),F.translate(U.x,U.y),U.addToPath(F,U.fontSize);F.restore(),F.clip(),F.beginPath(),delete this.pendingTextPaths}setCharSpacing(R){this.current.charSpacing=R}setWordSpacing(R){this.current.wordSpacing=R}setHScale(R){this.current.textHScale=R/100}setLeading(R){this.current.leading=-R}setFont(R,F){var Dt;const U=this.commonObjs.get(R),K=this.current;if(!U)throw new Error(`Can't find font for ${R}`);if(K.fontMatrix=U.fontMatrix||i.FONT_IDENTITY_MATRIX,(K.fontMatrix[0]===0||K.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+R),F<0?(F=-F,K.fontDirection=-1):K.fontDirection=1,this.current.font=U,this.current.fontSize=F,U.isType3Font)return;const X=U.loadedName||"sans-serif",Y=((Dt=U.systemFontInfo)==null?void 0:Dt.css)||`"${X}", ${U.fallbackName}`;let ut="normal";U.black?ut="900":U.bold&&(ut="bold");const wt=U.italic?"italic":"normal";let It=F;F<u?It=u:F>h&&(It=h),this.current.fontSizeScale=F/It,this.ctx.font=`${wt} ${ut} ${It}px ${Y}`}setTextRenderingMode(R){this.current.textRenderingMode=R}setTextRise(R){this.current.textRise=R}moveText(R,F){this.current.x=this.current.lineX+=R,this.current.y=this.current.lineY+=F}setLeadingMoveText(R,F){this.setLeading(-F),this.moveText(R,F)}setTextMatrix(R,F,U,K,X,Y){this.current.textMatrix=[R,F,U,K,X,Y],this.current.textMatrixScale=Math.hypot(R,F),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(R,F,U,K){const X=this.ctx,Y=this.current,ut=Y.font,wt=Y.textRenderingMode,It=Y.fontSize/Y.fontSizeScale,Dt=wt&i.TextRenderingMode.FILL_STROKE_MASK,Ht=!!(wt&i.TextRenderingMode.ADD_TO_PATH_FLAG),Vt=Y.patternFill&&!ut.missingFile;let Gt;(ut.disableFontFace||Ht||Vt)&&(Gt=ut.getPathGenerator(this.commonObjs,R)),ut.disableFontFace||Vt?(X.save(),X.translate(F,U),X.beginPath(),Gt(X,It),K&&X.setTransform(...K),(Dt===i.TextRenderingMode.FILL||Dt===i.TextRenderingMode.FILL_STROKE)&&X.fill(),(Dt===i.TextRenderingMode.STROKE||Dt===i.TextRenderingMode.FILL_STROKE)&&X.stroke(),X.restore()):((Dt===i.TextRenderingMode.FILL||Dt===i.TextRenderingMode.FILL_STROKE)&&X.fillText(R,F,U),(Dt===i.TextRenderingMode.STROKE||Dt===i.TextRenderingMode.FILL_STROKE)&&X.strokeText(R,F,U)),Ht&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(X),x:F,y:U,fontSize:It,addToPath:Gt})}get isFontSubpixelAAEnabled(){const{context:R}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);R.scale(1.5,1),R.fillText("I",0,10);const F=R.getImageData(0,0,10,10).data;let U=!1;for(let K=3;K<F.length;K+=4)if(F[K]>0&&F[K]<255){U=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",U)}showText(R){const F=this.current,U=F.font;if(U.isType3Font)return this.showType3Text(R);const K=F.fontSize;if(K===0)return;const X=this.ctx,Y=F.fontSizeScale,ut=F.charSpacing,wt=F.wordSpacing,It=F.fontDirection,Dt=F.textHScale*It,Ht=R.length,Vt=U.vertical,Gt=Vt?1:-1,xt=U.defaultVMetrics,Pt=K*F.fontMatrix[0],q=F.textRenderingMode===i.TextRenderingMode.FILL&&!U.disableFontFace&&!F.patternFill;X.save(),X.transform(...F.textMatrix),X.translate(F.x,F.y+F.textRise),It>0?X.scale(Dt,-1):X.scale(Dt,1);let st;if(F.patternFill){X.save();const Ut=F.fillColor.getPattern(X,this,(0,o.getCurrentTransformInverse)(X),r.PathType.FILL);st=(0,o.getCurrentTransform)(X),X.restore(),X.fillStyle=Ut}let vt=F.lineWidth;const Ct=F.textMatrixScale;if(Ct===0||vt===0){const Ut=F.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(Ut===i.TextRenderingMode.STROKE||Ut===i.TextRenderingMode.FILL_STROKE)&&(vt=this.getSinglePixelWidth())}else vt/=Ct;if(Y!==1&&(X.scale(Y,Y),vt/=Y),X.lineWidth=vt,U.isInvalidPDFjsFont){const Ut=[];let yt=0;for(const ne of R)Ut.push(ne.unicode),yt+=ne.width;X.fillText(Ut.join(""),0,0),F.x+=yt*Pt*Dt,X.restore(),this.compose();return}let Ot=0,qt;for(qt=0;qt<Ht;++qt){const Ut=R[qt];if(typeof Ut=="number"){Ot+=Gt*Ut*K/1e3;continue}let yt=!1;const ne=(Ut.isSpace?wt:0)+ut,Qt=Ut.fontChar,He=Ut.accent;let Pe,Qe,ce=Ut.width;if(Vt){const Xe=Ut.vmetric||xt,dn=-(Ut.vmetric?Xe[1]:ce*.5)*Pt,zt=Xe[2]*Pt;ce=Xe?-Xe[0]:ce,Pe=dn/Y,Qe=(Ot+zt)/Y}else Pe=Ot/Y,Qe=0;if(U.remeasure&&ce>0){const Xe=X.measureText(Qt).width*1e3/K*Y;if(ce<Xe&&this.isFontSubpixelAAEnabled){const dn=ce/Xe;yt=!0,X.save(),X.scale(dn,1),Pe/=dn}else ce!==Xe&&(Pe+=(ce-Xe)/2e3*K/Y)}if(this.contentVisible&&(Ut.isInFont||U.missingFile)){if(q&&!He)X.fillText(Qt,Pe,Qe);else if(this.paintChar(Qt,Pe,Qe,st),He){const Xe=Pe+K*He.offset.x/Y,dn=Qe-K*He.offset.y/Y;this.paintChar(He.fontChar,Xe,dn,st)}}const Ee=Vt?ce*Pt-ne*It:ce*Pt+ne*It;Ot+=Ee,yt&&X.restore()}Vt?F.y-=Ot:F.x+=Ot*Dt,X.restore(),this.compose()}showType3Text(R){const F=this.ctx,U=this.current,K=U.font,X=U.fontSize,Y=U.fontDirection,ut=K.vertical?1:-1,wt=U.charSpacing,It=U.wordSpacing,Dt=U.textHScale*Y,Ht=U.fontMatrix||i.FONT_IDENTITY_MATRIX,Vt=R.length,Gt=U.textRenderingMode===i.TextRenderingMode.INVISIBLE;let xt,Pt,q,st;if(!(Gt||X===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,F.save(),F.transform(...U.textMatrix),F.translate(U.x,U.y),F.scale(Dt,Y),xt=0;xt<Vt;++xt){if(Pt=R[xt],typeof Pt=="number"){st=ut*Pt*X/1e3,this.ctx.translate(st,0),U.x+=st*Dt;continue}const vt=(Pt.isSpace?It:0)+wt,Ct=K.charProcOperatorList[Pt.operatorListId];if(!Ct){(0,i.warn)(`Type3 character "${Pt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Pt,this.save(),F.scale(X,X),F.transform(...Ht),this.executeOperatorList(Ct),this.restore()),q=i.Util.applyTransform([Pt.width,0],Ht)[0]*X+vt,F.translate(q,0),U.x+=q*Dt}F.restore(),this.processingType3=null}}setCharWidth(R,F){}setCharWidthAndBounds(R,F,U,K,X,Y){this.ctx.rect(U,K,X-U,Y-K),this.ctx.clip(),this.endPath()}getColorN_Pattern(R){let F;if(R[0]==="TilingPattern"){const U=R[1],K=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),X={createCanvasGraphics:Y=>new V(Y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};F=new r.TilingPattern(R,U,this.ctx,X,K)}else F=this._getPattern(R[1],R[2]);return F}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(R,F,U){const K=i.Util.makeHexColor(R,F,U);this.ctx.strokeStyle=K,this.current.strokeColor=K}setFillRGBColor(R,F,U){const K=i.Util.makeHexColor(R,F,U);this.ctx.fillStyle=K,this.current.fillColor=K,this.current.patternFill=!1}_getPattern(R,F=null){let U;return this.cachedPatterns.has(R)?U=this.cachedPatterns.get(R):(U=(0,r.getShadingPattern)(this.getObject(R)),this.cachedPatterns.set(R,U)),F&&(U.matrix=F),U}shadingFill(R){if(!this.contentVisible)return;const F=this.ctx;this.save();const U=this._getPattern(R);F.fillStyle=U.getPattern(F,this,(0,o.getCurrentTransformInverse)(F),r.PathType.SHADING);const K=(0,o.getCurrentTransformInverse)(F);if(K){const{width:X,height:Y}=F.canvas,[ut,wt,It,Dt]=i.Util.getAxialAlignedBoundingBox([0,0,X,Y],K);this.ctx.fillRect(ut,wt,It-ut,Dt-wt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(R,F){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(R)&&R.length===6&&this.transform(...R),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),F)){const U=F[2]-F[0],K=F[3]-F[1];this.ctx.rect(F[0],F[1],U,K),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),F),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(R){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const F=this.ctx;R.isolated||(0,i.info)("TODO: Support non-isolated groups."),R.knockout&&(0,i.warn)("Knockout groups not supported.");const U=(0,o.getCurrentTransform)(F);if(R.matrix&&F.transform(...R.matrix),!R.bbox)throw new Error("Bounding box is required.");let K=i.Util.getAxialAlignedBoundingBox(R.bbox,(0,o.getCurrentTransform)(F));const X=[0,0,F.canvas.width,F.canvas.height];K=i.Util.intersect(K,X)||[0,0,0,0];const Y=Math.floor(K[0]),ut=Math.floor(K[1]);let wt=Math.max(Math.ceil(K[2])-Y,1),It=Math.max(Math.ceil(K[3])-ut,1),Dt=1,Ht=1;wt>f&&(Dt=wt/f,wt=f),It>f&&(Ht=It/f,It=f),this.current.startNewPathAndClipBox([0,0,wt,It]);let Vt="groupAt"+this.groupLevel;R.smask&&(Vt+="_smask_"+this.smaskCounter++%2);const Gt=this.cachedCanvases.getCanvas(Vt,wt,It),xt=Gt.context;xt.scale(1/Dt,1/Ht),xt.translate(-Y,-ut),xt.transform(...U),R.smask?this.smaskStack.push({canvas:Gt.canvas,context:xt,offsetX:Y,offsetY:ut,scaleX:Dt,scaleY:Ht,subtype:R.smask.subtype,backdrop:R.smask.backdrop,transferMap:R.smask.transferMap||null,startTransformInverse:null}):(F.setTransform(1,0,0,1,0,0),F.translate(Y,ut),F.scale(Dt,Ht),F.save()),T(F,xt),this.ctx=xt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(F),this.groupLevel++}endGroup(R){if(!this.contentVisible)return;this.groupLevel--;const F=this.ctx,U=this.groupStack.pop();if(this.ctx=U,this.ctx.imageSmoothingEnabled=!1,R.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const K=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...K);const X=i.Util.getAxialAlignedBoundingBox([0,0,F.canvas.width,F.canvas.height],K);this.ctx.drawImage(F.canvas,0,0),this.ctx.restore(),this.compose(X)}}beginAnnotation(R,F,U,K,X){if(w(this,it,oy).call(this),L(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(F)&&F.length===4){const Y=F[2]-F[0],ut=F[3]-F[1];if(X&&this.annotationCanvasMap){U=U.slice(),U[4]-=F[0],U[5]-=F[1],F=F.slice(),F[0]=F[1]=0,F[2]=Y,F[3]=ut;const[wt,It]=i.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:Dt}=this,Ht=Math.ceil(Y*this.outputScaleX*Dt),Vt=Math.ceil(ut*this.outputScaleY*Dt);this.annotationCanvas=this.canvasFactory.create(Ht,Vt);const{canvas:Gt,context:xt}=this.annotationCanvas;this.annotationCanvasMap.set(R,Gt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=xt,this.ctx.save(),this.ctx.setTransform(wt,0,0,-It,0,ut*It),L(this.ctx)}else L(this.ctx),this.ctx.rect(F[0],F[1],Y,ut),this.ctx.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...U),this.transform(...K)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),w(this,it,ly).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(R){if(!this.contentVisible)return;const F=R.count;R=this.getObject(R.data,R),R.count=F;const U=this.ctx,K=this.processingType3;if(K&&(K.compiled===void 0&&(K.compiled=b(R)),K.compiled)){K.compiled(U);return}const X=this._createMaskCanvas(R),Y=X.canvas;U.save(),U.setTransform(1,0,0,1,0,0),U.drawImage(Y,X.offsetX,X.offsetY),U.restore(),this.compose()}paintImageMaskXObjectRepeat(R,F,U=0,K=0,X,Y){if(!this.contentVisible)return;R=this.getObject(R.data,R);const ut=this.ctx;ut.save();const wt=(0,o.getCurrentTransform)(ut);ut.transform(F,U,K,X,0,0);const It=this._createMaskCanvas(R);ut.setTransform(1,0,0,1,It.offsetX-wt[4],It.offsetY-wt[5]);for(let Dt=0,Ht=Y.length;Dt<Ht;Dt+=2){const Vt=i.Util.transform(wt,[F,U,K,X,Y[Dt],Y[Dt+1]]),[Gt,xt]=i.Util.applyTransform([0,0],Vt);ut.drawImage(It.canvas,Gt,xt)}ut.restore(),this.compose()}paintImageMaskXObjectGroup(R){if(!this.contentVisible)return;const F=this.ctx,U=this.current.fillColor,K=this.current.patternFill;for(const X of R){const{data:Y,width:ut,height:wt,transform:It}=X,Dt=this.cachedCanvases.getCanvas("maskCanvas",ut,wt),Ht=Dt.context;Ht.save();const Vt=this.getObject(Y,X);N(Ht,Vt),Ht.globalCompositeOperation="source-in",Ht.fillStyle=K?U.getPattern(Ht,this,(0,o.getCurrentTransformInverse)(F),r.PathType.FILL):U,Ht.fillRect(0,0,ut,wt),Ht.restore(),F.save(),F.transform(...It),F.scale(1,-1),C(F,Dt.canvas,0,0,ut,wt,0,-1,1,1),F.restore()}this.compose()}paintImageXObject(R){if(!this.contentVisible)return;const F=this.getObject(R);if(!F){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(F)}paintImageXObjectRepeat(R,F,U,K){if(!this.contentVisible)return;const X=this.getObject(R);if(!X){(0,i.warn)("Dependent image isn't ready yet");return}const Y=X.width,ut=X.height,wt=[];for(let It=0,Dt=K.length;It<Dt;It+=2)wt.push({transform:[F,0,0,U,K[It],K[It+1]],x:0,y:0,w:Y,h:ut});this.paintInlineImageXObjectGroup(X,wt)}applyTransferMapsToCanvas(R){return this.current.transferMaps!=="none"&&(R.filter=this.current.transferMaps,R.drawImage(R.canvas,0,0),R.filter="none"),R.canvas}applyTransferMapsToBitmap(R){if(this.current.transferMaps==="none")return R.bitmap;const{bitmap:F,width:U,height:K}=R,X=this.cachedCanvases.getCanvas("inlineImage",U,K),Y=X.context;return Y.filter=this.current.transferMaps,Y.drawImage(F,0,0),Y.filter="none",X.canvas}paintInlineImageXObject(R){if(!this.contentVisible)return;const F=R.width,U=R.height,K=this.ctx;if(this.save(),!i.isNodeJS){const{filter:ut}=K;ut!=="none"&&ut!==""&&(K.filter="none")}K.scale(1/F,-1/U);let X;if(R.bitmap)X=this.applyTransferMapsToBitmap(R);else if(typeof HTMLElement=="function"&&R instanceof HTMLElement||!R.data)X=R;else{const wt=this.cachedCanvases.getCanvas("inlineImage",F,U).context;B(wt,R),X=this.applyTransferMapsToCanvas(wt)}const Y=this._scaleImage(X,(0,o.getCurrentTransformInverse)(K));K.imageSmoothingEnabled=G((0,o.getCurrentTransform)(K),R.interpolate),C(K,Y.img,0,0,Y.paintWidth,Y.paintHeight,0,-U,F,U),this.compose(),this.restore()}paintInlineImageXObjectGroup(R,F){if(!this.contentVisible)return;const U=this.ctx;let K;if(R.bitmap)K=R.bitmap;else{const X=R.width,Y=R.height,wt=this.cachedCanvases.getCanvas("inlineImage",X,Y).context;B(wt,R),K=this.applyTransferMapsToCanvas(wt)}for(const X of F)U.save(),U.transform(...X.transform),U.scale(1,-1),C(U,K,X.x,X.y,X.w,X.h,0,-1,1,1),U.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(R){}markPointProps(R,F){}beginMarkedContent(R){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(R,F){R==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(F)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(R){const F=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(R);const U=this.ctx;this.pendingClip&&(F||(this.pendingClip===dt?U.clip("evenodd"):U.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),U.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const R=(0,o.getCurrentTransform)(this.ctx);if(R[1]===0&&R[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(R[0]),Math.abs(R[3]));else{const F=Math.abs(R[0]*R[3]-R[2]*R[1]),U=Math.hypot(R[0],R[2]),K=Math.hypot(R[1],R[3]);this._cachedGetSinglePixelWidth=Math.max(U,K)/F}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:R}=this.current,{a:F,b:U,c:K,d:X}=this.ctx.getTransform();let Y,ut;if(U===0&&K===0){const wt=Math.abs(F),It=Math.abs(X);if(wt===It)if(R===0)Y=ut=1/wt;else{const Dt=wt*R;Y=ut=Dt<1?1/Dt:1}else if(R===0)Y=1/wt,ut=1/It;else{const Dt=wt*R,Ht=It*R;Y=Dt<1?1/Dt:1,ut=Ht<1?1/Ht:1}}else{const wt=Math.abs(F*X-U*K),It=Math.hypot(F,U),Dt=Math.hypot(K,X);if(R===0)Y=Dt/wt,ut=It/wt;else{const Ht=R*wt;Y=Dt>Ht?Dt/Ht:1,ut=It>Ht?It/Ht:1}}this._cachedScaleForStroking[0]=Y,this._cachedScaleForStroking[1]=ut}return this._cachedScaleForStroking}rescaleAndStroke(R){const{ctx:F}=this,{lineWidth:U}=this.current,[K,X]=this.getScaleForStroking();if(F.lineWidth=U||1,K===1&&X===1){F.stroke();return}const Y=F.getLineDash();if(R&&F.save(),F.scale(K,X),Y.length>0){const ut=Math.max(K,X);F.setLineDash(Y.map(wt=>wt/ut)),F.lineDashOffset/=ut}F.stroke(),R&&F.restore()}isContentVisible(){for(let R=this.markedContentStack.length-1;R>=0;R--)if(!this.markedContentStack[R].visible)return!1;return!0}};it=new WeakSet,oy=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ly=function(){if(this.pageColors){const R=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(R!=="none"){const F=this.ctx.filter;this.ctx.filter=R,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=F}}};let et=V;t.CanvasGraphics=et;for(const H in i.OPS)et.prototype[H]!==void 0&&(et.prototype[i.OPS[H]]=et.prototype[H])},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=_;var i=e(1),o=e(6);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=r;function c(b,I){if(!I)return;const B=I[2]-I[0],N=I[3]-I[1],T=new Path2D;T.rect(I[0],I[1],B,N),b.clip(T)}class u{constructor(){this.constructor===u&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class h extends u{constructor(I){super(),this._type=I[1],this._bbox=I[2],this._colorStops=I[3],this._p0=I[4],this._p1=I[5],this._r0=I[6],this._r1=I[7],this.matrix=null}_createGradient(I){let B;this._type==="axial"?B=I.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(B=I.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const N of this._colorStops)B.addColorStop(N[0],N[1]);return B}getPattern(I,B,N,T){let L;if(T===r.STROKE||T===r.FILL){const k=B.current.getClippedPathBoundingBox(T,(0,o.getCurrentTransform)(I))||[0,0,0,0],D=Math.ceil(k[2]-k[0])||1,j=Math.ceil(k[3]-k[1])||1,Z=B.cachedCanvases.getCanvas("pattern",D,j,!0),O=Z.context;O.clearRect(0,0,O.canvas.width,O.canvas.height),O.beginPath(),O.rect(0,0,O.canvas.width,O.canvas.height),O.translate(-k[0],-k[1]),N=i.Util.transform(N,[1,0,0,1,k[0],k[1]]),O.transform(...B.baseTransform),this.matrix&&O.transform(...this.matrix),c(O,this._bbox),O.fillStyle=this._createGradient(O),O.fill(),L=I.createPattern(Z.canvas,"no-repeat");const G=new DOMMatrix(N);L.setTransform(G)}else c(I,this._bbox),L=this._createGradient(I);return L}}function f(b,I,B,N,T,L,k,D){const j=I.coords,Z=I.colors,O=b.data,G=b.width*4;let Q;j[B+1]>j[N+1]&&(Q=B,B=N,N=Q,Q=L,L=k,k=Q),j[N+1]>j[T+1]&&(Q=N,N=T,T=Q,Q=k,k=D,D=Q),j[B+1]>j[N+1]&&(Q=B,B=N,N=Q,Q=L,L=k,k=Q);const mt=(j[B]+I.offsetX)*I.scaleX,ot=(j[B+1]+I.offsetY)*I.scaleY,dt=(j[N]+I.offsetX)*I.scaleX,et=(j[N+1]+I.offsetY)*I.scaleY,it=(j[T]+I.offsetX)*I.scaleX,$=(j[T+1]+I.offsetY)*I.scaleY;if(ot>=$)return;const tt=Z[L],V=Z[L+1],H=Z[L+2],R=Z[k],F=Z[k+1],U=Z[k+2],K=Z[D],X=Z[D+1],Y=Z[D+2],ut=Math.round(ot),wt=Math.round($);let It,Dt,Ht,Vt,Gt,xt,Pt,q;for(let st=ut;st<=wt;st++){if(st<et){const Ut=st<ot?0:(ot-st)/(ot-et);It=mt-(mt-dt)*Ut,Dt=tt-(tt-R)*Ut,Ht=V-(V-F)*Ut,Vt=H-(H-U)*Ut}else{let Ut;st>$?Ut=1:et===$?Ut=0:Ut=(et-st)/(et-$),It=dt-(dt-it)*Ut,Dt=R-(R-K)*Ut,Ht=F-(F-X)*Ut,Vt=U-(U-Y)*Ut}let vt;st<ot?vt=0:st>$?vt=1:vt=(ot-st)/(ot-$),Gt=mt-(mt-it)*vt,xt=tt-(tt-K)*vt,Pt=V-(V-X)*vt,q=H-(H-Y)*vt;const Ct=Math.round(Math.min(It,Gt)),Ot=Math.round(Math.max(It,Gt));let qt=G*st+Ct*4;for(let Ut=Ct;Ut<=Ot;Ut++)vt=(It-Ut)/(It-Gt),vt<0?vt=0:vt>1&&(vt=1),O[qt++]=Dt-(Dt-xt)*vt|0,O[qt++]=Ht-(Ht-Pt)*vt|0,O[qt++]=Vt-(Vt-q)*vt|0,O[qt++]=255}}function d(b,I,B){const N=I.coords,T=I.colors;let L,k;switch(I.type){case"lattice":const D=I.verticesPerRow,j=Math.floor(N.length/D)-1,Z=D-1;for(L=0;L<j;L++){let O=L*D;for(let G=0;G<Z;G++,O++)f(b,B,N[O],N[O+1],N[O+D],T[O],T[O+1],T[O+D]),f(b,B,N[O+D+1],N[O+1],N[O+D],T[O+D+1],T[O+1],T[O+D])}break;case"triangles":for(L=0,k=N.length;L<k;L+=3)f(b,B,N[L],N[L+1],N[L+2],T[L],T[L+1],T[L+2]);break;default:throw new Error("illegal figure")}}class m extends u{constructor(I){super(),this._coords=I[2],this._colors=I[3],this._figures=I[4],this._bounds=I[5],this._bbox=I[7],this._background=I[8],this.matrix=null}_createMeshCanvas(I,B,N){const D=Math.floor(this._bounds[0]),j=Math.floor(this._bounds[1]),Z=Math.ceil(this._bounds[2])-D,O=Math.ceil(this._bounds[3])-j,G=Math.min(Math.ceil(Math.abs(Z*I[0]*1.1)),3e3),Q=Math.min(Math.ceil(Math.abs(O*I[1]*1.1)),3e3),mt=Z/G,ot=O/Q,dt={coords:this._coords,colors:this._colors,offsetX:-D,offsetY:-j,scaleX:1/mt,scaleY:1/ot},et=G+2*2,it=Q+2*2,$=N.getCanvas("mesh",et,it,!1),tt=$.context,V=tt.createImageData(G,Q);if(B){const R=V.data;for(let F=0,U=R.length;F<U;F+=4)R[F]=B[0],R[F+1]=B[1],R[F+2]=B[2],R[F+3]=255}for(const R of this._figures)d(V,R,dt);return tt.putImageData(V,2,2),{canvas:$.canvas,offsetX:D-2*mt,offsetY:j-2*ot,scaleX:mt,scaleY:ot}}getPattern(I,B,N,T){c(I,this._bbox);let L;if(T===r.SHADING)L=i.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(I));else if(L=i.Util.singularValueDecompose2dScale(B.baseTransform),this.matrix){const D=i.Util.singularValueDecompose2dScale(this.matrix);L=[L[0]*D[0],L[1]*D[1]]}const k=this._createMeshCanvas(L,T===r.SHADING?null:this._background,B.cachedCanvases);return T!==r.SHADING&&(I.setTransform(...B.baseTransform),this.matrix&&I.transform(...this.matrix)),I.translate(k.offsetX,k.offsetY),I.scale(k.scaleX,k.scaleY),I.createPattern(k.canvas,"no-repeat")}}class v extends u{getPattern(){return"hotpink"}}function _(b){switch(b[0]){case"RadialAxial":return new h(b);case"Mesh":return new m(b);case"Dummy":return new v}throw new Error(`Unknown IR type: ${b[0]}`)}const A={COLORED:1,UNCOLORED:2},C=class C{constructor(I,B,N,T,L){this.operatorList=I[2],this.matrix=I[3]||[1,0,0,1,0,0],this.bbox=I[4],this.xstep=I[5],this.ystep=I[6],this.paintType=I[7],this.tilingType=I[8],this.color=B,this.ctx=N,this.canvasGraphicsFactory=T,this.baseTransform=L}createPatternCanvas(I){const B=this.operatorList,N=this.bbox,T=this.xstep,L=this.ystep,k=this.paintType,D=this.tilingType,j=this.color,Z=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+D);const O=N[0],G=N[1],Q=N[2],mt=N[3],ot=i.Util.singularValueDecompose2dScale(this.matrix),dt=i.Util.singularValueDecompose2dScale(this.baseTransform),et=[ot[0]*dt[0],ot[1]*dt[1]],it=this.getSizeAndScale(T,this.ctx.canvas.width,et[0]),$=this.getSizeAndScale(L,this.ctx.canvas.height,et[1]),tt=I.cachedCanvases.getCanvas("pattern",it.size,$.size,!0),V=tt.context,H=Z.createCanvasGraphics(V);H.groupLevel=I.groupLevel,this.setFillAndStrokeStyleToContext(H,k,j);let R=O,F=G,U=Q,K=mt;return O<0&&(R=0,U+=Math.abs(O)),G<0&&(F=0,K+=Math.abs(G)),V.translate(-(it.scale*R),-($.scale*F)),H.transform(it.scale,0,0,$.scale,0,0),V.save(),this.clipBbox(H,R,F,U,K),H.baseTransform=(0,o.getCurrentTransform)(H.ctx),H.executeOperatorList(B),H.endDrawing(),{canvas:tt.canvas,scaleX:it.scale,scaleY:$.scale,offsetX:R,offsetY:F}}getSizeAndScale(I,B,N){I=Math.abs(I);const T=Math.max(C.MAX_PATTERN_SIZE,B);let L=Math.ceil(I*N);return L>=T?L=T:N=L/I,{scale:N,size:L}}clipBbox(I,B,N,T,L){const k=T-B,D=L-N;I.ctx.rect(B,N,k,D),I.current.updateRectMinMax((0,o.getCurrentTransform)(I.ctx),[B,N,T,L]),I.clip(),I.endPath()}setFillAndStrokeStyleToContext(I,B,N){const T=I.ctx,L=I.current;switch(B){case A.COLORED:const k=this.ctx;T.fillStyle=k.fillStyle,T.strokeStyle=k.strokeStyle,L.fillColor=k.fillStyle,L.strokeColor=k.strokeStyle;break;case A.UNCOLORED:const D=i.Util.makeHexColor(N[0],N[1],N[2]);T.fillStyle=D,T.strokeStyle=D,L.fillColor=D,L.strokeColor=D;break;default:throw new i.FormatError(`Unsupported paint type: ${B}`)}}getPattern(I,B,N,T){let L=N;T!==r.SHADING&&(L=i.Util.transform(L,B.baseTransform),this.matrix&&(L=i.Util.transform(L,this.matrix)));const k=this.createPatternCanvas(B);let D=new DOMMatrix(L);D=D.translate(k.offsetX,k.offsetY),D=D.scale(1/k.scaleX,1/k.scaleY);const j=I.createPattern(k.canvas,"repeat");return j.setTransform(D),j}};xe(C,"MAX_PATTERN_SIZE",3e3);let S=C;t.TilingPattern=S},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=r,t.convertToRGBA=o,t.grayToRGBA=u;var i=e(1);function o(h){switch(h.kind){case i.ImageKind.GRAYSCALE_1BPP:return r(h);case i.ImageKind.RGB_24BPP:return c(h)}return null}function r({src:h,srcPos:f=0,dest:d,width:m,height:v,nonBlackColor:_=4294967295,inverseDecode:A=!1}){const S=i.FeatureTest.isLittleEndian?4278190080:255,[C,b]=A?[_,S]:[S,_],I=m>>3,B=m&7,N=h.length;d=new Uint32Array(d.buffer);let T=0;for(let L=0;L<v;L++){for(const D=f+I;f<D;f++){const j=f<N?h[f]:255;d[T++]=j&128?b:C,d[T++]=j&64?b:C,d[T++]=j&32?b:C,d[T++]=j&16?b:C,d[T++]=j&8?b:C,d[T++]=j&4?b:C,d[T++]=j&2?b:C,d[T++]=j&1?b:C}if(B===0)continue;const k=f<N?h[f++]:255;for(let D=0;D<B;D++)d[T++]=k&1<<7-D?b:C}return{srcPos:f,destPos:T}}function c({src:h,srcPos:f=0,dest:d,destPos:m=0,width:v,height:_}){let A=0;const S=h.length>>2,C=new Uint32Array(h.buffer,f,S);if(i.FeatureTest.isLittleEndian){for(;A<S-2;A+=3,m+=4){const b=C[A],I=C[A+1],B=C[A+2];d[m]=b|4278190080,d[m+1]=b>>>24|I<<8|4278190080,d[m+2]=I>>>16|B<<16|4278190080,d[m+3]=B>>>8|4278190080}for(let b=A*4,I=h.length;b<I;b+=3)d[m++]=h[b]|h[b+1]<<8|h[b+2]<<16|4278190080}else{for(;A<S-2;A+=3,m+=4){const b=C[A],I=C[A+1],B=C[A+2];d[m]=b|255,d[m+1]=b<<24|I>>>8|255,d[m+2]=I<<16|B>>>16|255,d[m+3]=B<<8|255}for(let b=A*4,I=h.length;b<I;b+=3)d[m++]=h[b]<<24|h[b+1]<<16|h[b+2]<<8|255}return{srcPos:f,destPos:m}}function u(h,f){if(i.FeatureTest.isLittleEndian)for(let d=0,m=h.length;d<m;d++)f[d]=h[d]*65793|4278190080;else for(let d=0,m=h.length;d<m;d++)f[d]=h[d]*16843008|255}},(g,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const e=Object.create(null);t.GlobalWorkerOptions=e,e.workerPort=null,e.workerSrc=""},(g,t,e)=>{var h,eb,nb,ng;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var i=e(1);const o={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function c(v){switch(v instanceof Error||typeof v=="object"&&v!==null||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),v.name){case"AbortException":return new i.AbortException(v.message);case"MissingPDFException":return new i.MissingPDFException(v.message);case"PasswordException":return new i.PasswordException(v.message,v.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(v.message,v.status);case"UnknownErrorException":return new i.UnknownErrorException(v.message,v.details);default:return new i.UnknownErrorException(v.message,v.toString())}}class u{constructor(_,A,S){M(this,h);this.sourceName=_,this.targetName=A,this.comObj=S,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=C=>{const b=C.data;if(b.targetName!==this.sourceName)return;if(b.stream){w(this,h,nb).call(this,b);return}if(b.callback){const B=b.callbackId,N=this.callbackCapabilities[B];if(!N)throw new Error(`Cannot resolve callback ${B}`);if(delete this.callbackCapabilities[B],b.callback===o.DATA)N.resolve(b.data);else if(b.callback===o.ERROR)N.reject(c(b.reason));else throw new Error("Unexpected callback case");return}const I=this.actionHandler[b.action];if(!I)throw new Error(`Unknown action from worker: ${b.action}`);if(b.callbackId){const B=this.sourceName,N=b.sourceName;new Promise(function(T){T(I(b.data))}).then(function(T){S.postMessage({sourceName:B,targetName:N,callback:o.DATA,callbackId:b.callbackId,data:T})},function(T){S.postMessage({sourceName:B,targetName:N,callback:o.ERROR,callbackId:b.callbackId,reason:c(T)})});return}if(b.streamId){w(this,h,eb).call(this,b);return}I(b.data)},S.addEventListener("message",this._onComObjOnMessage)}on(_,A){const S=this.actionHandler;if(S[_])throw new Error(`There is already an actionName called "${_}"`);S[_]=A}send(_,A,S){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,data:A},S)}sendWithPromise(_,A,S){const C=this.callbackId++,b=new i.PromiseCapability;this.callbackCapabilities[C]=b;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,callbackId:C,data:A},S)}catch(I){b.reject(I)}return b.promise}sendWithStream(_,A,S,C){const b=this.streamId++,I=this.sourceName,B=this.targetName,N=this.comObj;return new ReadableStream({start:T=>{const L=new i.PromiseCapability;return this.streamControllers[b]={controller:T,startCall:L,pullCall:null,cancelCall:null,isClosed:!1},N.postMessage({sourceName:I,targetName:B,action:_,streamId:b,data:A,desiredSize:T.desiredSize},C),L.promise},pull:T=>{const L=new i.PromiseCapability;return this.streamControllers[b].pullCall=L,N.postMessage({sourceName:I,targetName:B,stream:r.PULL,streamId:b,desiredSize:T.desiredSize}),L.promise},cancel:T=>{(0,i.assert)(T instanceof Error,"cancel must have a valid reason");const L=new i.PromiseCapability;return this.streamControllers[b].cancelCall=L,this.streamControllers[b].isClosed=!0,N.postMessage({sourceName:I,targetName:B,stream:r.CANCEL,streamId:b,reason:c(T)}),L.promise}},S)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h=new WeakSet,eb=function(_){const A=_.streamId,S=this.sourceName,C=_.sourceName,b=this.comObj,I=this,B=this.actionHandler[_.action],N={enqueue(T,L=1,k){if(this.isCancelled)return;const D=this.desiredSize;this.desiredSize-=L,D>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),b.postMessage({sourceName:S,targetName:C,stream:r.ENQUEUE,streamId:A,chunk:T},k)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:S,targetName:C,stream:r.CLOSE,streamId:A}),delete I.streamSinks[A])},error(T){(0,i.assert)(T instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:S,targetName:C,stream:r.ERROR,streamId:A,reason:c(T)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:_.desiredSize,ready:null};N.sinkCapability.resolve(),N.ready=N.sinkCapability.promise,this.streamSinks[A]=N,new Promise(function(T){T(B(_.data,N))}).then(function(){b.postMessage({sourceName:S,targetName:C,stream:r.START_COMPLETE,streamId:A,success:!0})},function(T){b.postMessage({sourceName:S,targetName:C,stream:r.START_COMPLETE,streamId:A,reason:c(T)})})},nb=function(_){const A=_.streamId,S=this.sourceName,C=_.sourceName,b=this.comObj,I=this.streamControllers[A],B=this.streamSinks[A];switch(_.stream){case r.START_COMPLETE:_.success?I.startCall.resolve():I.startCall.reject(c(_.reason));break;case r.PULL_COMPLETE:_.success?I.pullCall.resolve():I.pullCall.reject(c(_.reason));break;case r.PULL:if(!B){b.postMessage({sourceName:S,targetName:C,stream:r.PULL_COMPLETE,streamId:A,success:!0});break}B.desiredSize<=0&&_.desiredSize>0&&B.sinkCapability.resolve(),B.desiredSize=_.desiredSize,new Promise(function(N){var T;N((T=B.onPull)==null?void 0:T.call(B))}).then(function(){b.postMessage({sourceName:S,targetName:C,stream:r.PULL_COMPLETE,streamId:A,success:!0})},function(N){b.postMessage({sourceName:S,targetName:C,stream:r.PULL_COMPLETE,streamId:A,reason:c(N)})});break;case r.ENQUEUE:if((0,i.assert)(I,"enqueue should have stream controller"),I.isClosed)break;I.controller.enqueue(_.chunk);break;case r.CLOSE:if((0,i.assert)(I,"close should have stream controller"),I.isClosed)break;I.isClosed=!0,I.controller.close(),w(this,h,ng).call(this,I,A);break;case r.ERROR:(0,i.assert)(I,"error should have stream controller"),I.controller.error(c(_.reason)),w(this,h,ng).call(this,I,A);break;case r.CANCEL_COMPLETE:_.success?I.cancelCall.resolve():I.cancelCall.reject(c(_.reason)),w(this,h,ng).call(this,I,A);break;case r.CANCEL:if(!B)break;new Promise(function(N){var T;N((T=B.onCancel)==null?void 0:T.call(B,c(_.reason)))}).then(function(){b.postMessage({sourceName:S,targetName:C,stream:r.CANCEL_COMPLETE,streamId:A,success:!0})},function(N){b.postMessage({sourceName:S,targetName:C,stream:r.CANCEL_COMPLETE,streamId:A,reason:c(N)})}),B.sinkCapability.reject(c(_.reason)),B.isCancelled=!0,delete this.streamSinks[A];break;default:throw new Error("Unexpected stream case")}},ng=async function(_,A){var S,C,b;await Promise.allSettled([(S=_.startCall)==null?void 0:S.promise,(C=_.pullCall)==null?void 0:C.promise,(b=_.cancelCall)==null?void 0:b.promise]),delete this.streamControllers[A]},t.MessageHandler=u},(g,t,e)=>{var r,c;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var i=e(1);class o{constructor({parsedData:h,rawData:f}){M(this,r);M(this,c);x(this,r,h),x(this,c,f)}getRaw(){return a(this,c)}get(h){return a(this,r).get(h)??null}getAll(){return(0,i.objectFromMap)(a(this,r))}has(h){return a(this,r).has(h)}}r=new WeakMap,c=new WeakMap,t.Metadata=o},(g,t,e)=>{var h,f,d,m,v,_,cy;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var i=e(1),o=e(8);const r=Symbol("INTERNAL");class c{constructor(C,b){M(this,h,!0);this.name=C,this.intent=b}get visible(){return a(this,h)}_setVisible(C,b){C!==r&&(0,i.unreachable)("Internal method `_setVisible` called."),x(this,h,b)}}h=new WeakMap;class u{constructor(C){M(this,_);M(this,f,null);M(this,d,new Map);M(this,m,null);M(this,v,null);if(this.name=null,this.creator=null,C!==null){this.name=C.name,this.creator=C.creator,x(this,v,C.order);for(const b of C.groups)a(this,d).set(b.id,new c(b.name,b.intent));if(C.baseState==="OFF")for(const b of a(this,d).values())b._setVisible(r,!1);for(const b of C.on)a(this,d).get(b)._setVisible(r,!0);for(const b of C.off)a(this,d).get(b)._setVisible(r,!1);x(this,m,this.getHash())}}isVisible(C){if(a(this,d).size===0)return!0;if(!C)return(0,i.warn)("Optional content group not defined."),!0;if(C.type==="OCG")return a(this,d).has(C.id)?a(this,d).get(C.id).visible:((0,i.warn)(`Optional content group not found: ${C.id}`),!0);if(C.type==="OCMD"){if(C.expression)return w(this,_,cy).call(this,C.expression);if(!C.policy||C.policy==="AnyOn"){for(const b of C.ids){if(!a(this,d).has(b))return(0,i.warn)(`Optional content group not found: ${b}`),!0;if(a(this,d).get(b).visible)return!0}return!1}else if(C.policy==="AllOn"){for(const b of C.ids){if(!a(this,d).has(b))return(0,i.warn)(`Optional content group not found: ${b}`),!0;if(!a(this,d).get(b).visible)return!1}return!0}else if(C.policy==="AnyOff"){for(const b of C.ids){if(!a(this,d).has(b))return(0,i.warn)(`Optional content group not found: ${b}`),!0;if(!a(this,d).get(b).visible)return!0}return!1}else if(C.policy==="AllOff"){for(const b of C.ids){if(!a(this,d).has(b))return(0,i.warn)(`Optional content group not found: ${b}`),!0;if(a(this,d).get(b).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${C.policy}.`),!0}return(0,i.warn)(`Unknown group type ${C.type}.`),!0}setVisibility(C,b=!0){if(!a(this,d).has(C)){(0,i.warn)(`Optional content group not found: ${C}`);return}a(this,d).get(C)._setVisible(r,!!b),x(this,f,null)}get hasInitialVisibility(){return a(this,m)===null||this.getHash()===a(this,m)}getOrder(){return a(this,d).size?a(this,v)?a(this,v).slice():[...a(this,d).keys()]:null}getGroups(){return a(this,d).size>0?(0,i.objectFromMap)(a(this,d)):null}getGroup(C){return a(this,d).get(C)||null}getHash(){if(a(this,f)!==null)return a(this,f);const C=new o.MurmurHash3_64;for(const[b,I]of a(this,d))C.update(`${b}:${I.visible}`);return x(this,f,C.hexdigest())}}f=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakSet,cy=function(C){const b=C.length;if(b<2)return!0;const I=C[0];for(let B=1;B<b;B++){const N=C[B];let T;if(Array.isArray(N))T=w(this,_,cy).call(this,N);else if(a(this,d).has(N))T=a(this,d).get(N).visible;else return(0,i.warn)(`Optional content group not found: ${N}`),!0;switch(I){case"And":if(!T)return!1;break;case"Or":if(T)return!0;break;case"Not":return!T;default:return!0}}return I==="And"},t.OptionalContentConfig=u},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var i=e(1),o=e(6);class r{constructor({length:f,initialData:d,progressiveDone:m=!1,contentDispositionFilename:v=null,disableRange:_=!1,disableStream:A=!1},S){if((0,i.assert)(S,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=m,this._contentDispositionFilename=v,(d==null?void 0:d.length)>0){const C=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;this._queuedChunks.push(C)}this._pdfDataRangeTransport=S,this._isStreamingSupported=!A,this._isRangeSupported=!_,this._contentLength=f,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((C,b)=>{this._onReceiveData({begin:C,chunk:b})}),this._pdfDataRangeTransport.addProgressListener((C,b)=>{this._onProgress({loaded:C,total:b})}),this._pdfDataRangeTransport.addProgressiveReadListener(C=>{this._onReceiveData({chunk:C})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:f,chunk:d}){const m=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;if(f===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(m):this._queuedChunks.push(m);else{const v=this._rangeReaders.some(function(_){return _._begin!==f?!1:(_._enqueue(m),!0)});(0,i.assert)(v,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}_onProgress(f){var d,m,v,_;f.total===void 0?(m=(d=this._rangeReaders[0])==null?void 0:d.onProgress)==null||m.call(d,{loaded:f.loaded}):(_=(v=this._fullRequestReader)==null?void 0:v.onProgress)==null||_.call(v,{loaded:f.loaded,total:f.total})}_onProgressiveDone(){var f;(f=this._fullRequestReader)==null||f.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(f){const d=this._rangeReaders.indexOf(f);d>=0&&this._rangeReaders.splice(d,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const f=this._queuedChunks;return this._queuedChunks=null,new c(this,f,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(f,d){if(d<=this._progressiveDataLength)return null;const m=new u(this,f,d);return this._pdfDataRangeTransport.requestDataRange(f,d),this._rangeReaders.push(m),m}cancelAllRequests(f){var d;(d=this._fullRequestReader)==null||d.cancel(f);for(const m of this._rangeReaders.slice(0))m.cancel(f);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=r;class c{constructor(f,d,m=!1,v=null){this._stream=f,this._done=m||!1,this._filename=(0,o.isPdfFile)(v)?v:null,this._queuedChunks=d||[],this._loaded=0;for(const _ of this._queuedChunks)this._loaded+=_.byteLength;this._requests=[],this._headersReady=Promise.resolve(),f._fullRequestReader=this,this.onProgress=null}_enqueue(f){this._done||(this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunks.push(f),this._loaded+=f.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const f=new i.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class u{constructor(f,d,m){this._stream=f,this._begin=d,this._end=m,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(f){if(!this._done){if(this._requests.length===0)this._queuedChunk=f;else{this._requests.shift().resolve({value:f,done:!1});for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const f=new i.PromiseCapability;return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var i=e(1),o=e(20);function r(m,v,_){return{method:"GET",headers:m,signal:_.signal,mode:"cors",credentials:v?"include":"same-origin",redirect:"follow"}}function c(m){const v=new Headers;for(const _ in m){const A=m[_];A!==void 0&&v.append(_,A)}return v}function u(m){return m instanceof Uint8Array?m.buffer:m instanceof ArrayBuffer?m:((0,i.warn)(`getArrayBuffer - unexpected data format: ${m}`),new Uint8Array(m).buffer)}class h{constructor(v){this.source=v,this.isHttp=/^https?:/i.test(v.url),this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new f(this),this._fullRequestReader}getRangeReader(v,_){if(_<=this._progressiveDataLength)return null;const A=new d(this,v,_);return this._rangeRequestReaders.push(A),A}cancelAllRequests(v){var _;(_=this._fullRequestReader)==null||_.cancel(v);for(const A of this._rangeRequestReaders.slice(0))A.cancel(v)}}t.PDFFetchStream=h;class f{constructor(v){this._stream=v,this._reader=null,this._loaded=0,this._filename=null;const _=v.source;this._withCredentials=_.withCredentials||!1,this._contentLength=_.length,this._headersCapability=new i.PromiseCapability,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._headers=c(this._stream.httpHeaders);const A=_.url;fetch(A,r(this._headers,this._withCredentials,this._abortController)).then(S=>{if(!(0,o.validateResponseStatus)(S.status))throw(0,o.createResponseStatusError)(S.status,A);this._reader=S.body.getReader(),this._headersCapability.resolve();const C=B=>S.headers.get(B),{allowRangeRequests:b,suggestedLength:I}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=I||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(C),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;await this._headersCapability.promise;const{value:v,done:_}=await this._reader.read();return _?{value:v,done:_}:(this._loaded+=v.byteLength,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded,total:this._contentLength}),{value:u(v),done:!1})}cancel(v){var _;(_=this._reader)==null||_.cancel(v),this._abortController.abort()}}class d{constructor(v,_,A){this._stream=v,this._reader=null,this._loaded=0;const S=v.source;this._withCredentials=S.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!S.disableStream,this._abortController=new AbortController,this._headers=c(this._stream.httpHeaders),this._headers.append("Range",`bytes=${_}-${A-1}`);const C=S.url;fetch(C,r(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,o.validateResponseStatus)(b.status))throw(0,o.createResponseStatusError)(b.status,C);this._readCapability.resolve(),this._reader=b.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;await this._readCapability.promise;const{value:v,done:_}=await this._reader.read();return _?{value:v,done:_}:(this._loaded+=v.byteLength,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded}),{value:u(v),done:!1})}cancel(v){var _;(_=this._reader)==null||_.cancel(v),this._abortController.abort()}}},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=h,t.extractFilenameFromHeader=u,t.validateRangeRequestCapabilities=c,t.validateResponseStatus=f;var i=e(1),o=e(21),r=e(6);function c({getResponseHeader:d,isHttp:m,rangeChunkSize:v,disableRange:_}){const A={allowRangeRequests:!1,suggestedLength:void 0},S=parseInt(d("Content-Length"),10);return!Number.isInteger(S)||(A.suggestedLength=S,S<=2*v)||_||!m||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(A.allowRangeRequests=!0),A}function u(d){const m=d("Content-Disposition");if(m){let v=(0,o.getFilenameFromContentDispositionHeader)(m);if(v.includes("%"))try{v=decodeURIComponent(v)}catch{}if((0,r.isPdfFile)(v))return v}return null}function h(d,m){return d===404||d===0&&m.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+m+'".'):new i.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${m}".`,d)}function f(d){return d===200||d===206}},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=o;var i=e(1);function o(r){let c=!0,u=h("filename\\*","i").exec(r);if(u){u=u[1];let S=v(u);return S=unescape(S),S=_(S),S=A(S),d(S)}if(u=m(r),u){const S=A(u);return d(S)}if(u=h("filename","i").exec(r),u){u=u[1];let S=v(u);return S=A(S),d(S)}function h(S,C){return new RegExp("(?:^|;)\\s*"+S+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',C)}function f(S,C){if(S){if(!/^[\x00-\xFF]+$/.test(C))return C;try{const b=new TextDecoder(S,{fatal:!0}),I=(0,i.stringToBytes)(C);C=b.decode(I),c=!1}catch{}}return C}function d(S){return c&&/[\x80-\xff]/.test(S)&&(S=f("utf-8",S),c&&(S=f("iso-8859-1",S))),S}function m(S){const C=[];let b;const I=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=I.exec(S))!==null;){let[,N,T,L]=b;if(N=parseInt(N,10),N in C){if(N===0)break;continue}C[N]=[T,L]}const B=[];for(let N=0;N<C.length&&N in C;++N){let[T,L]=C[N];L=v(L),T&&(L=unescape(L),N===0&&(L=_(L))),B.push(L)}return B.join("")}function v(S){if(S.startsWith('"')){const C=S.slice(1).split('\\"');for(let b=0;b<C.length;++b){const I=C[b].indexOf('"');I!==-1&&(C[b]=C[b].slice(0,I),C.length=b+1),C[b]=C[b].replaceAll(/\\(.)/g,"$1")}S=C.join('"')}return S}function _(S){const C=S.indexOf("'");if(C===-1)return S;const b=S.slice(0,C),B=S.slice(C+1).replace(/^[^']*'/,"");return f(b,B)}function A(S){return!S.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(S)?S:S.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(C,b,I,B){if(I==="q"||I==="Q")return B=B.replaceAll("_"," "),B=B.replaceAll(/=([0-9a-fA-F]{2})/g,function(N,T){return String.fromCharCode(parseInt(T,16))}),f(b,B);try{B=atob(B)}catch{}return f(b,B)})}return""}},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var i=e(1),o=e(20);const r=200,c=206;function u(v){const _=v.response;return typeof _!="string"?_:(0,i.stringToBytes)(_).buffer}class h{constructor(_,A={}){this.url=_,this.isHttp=/^https?:/i.test(_),this.httpHeaders=this.isHttp&&A.httpHeaders||Object.create(null),this.withCredentials=A.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(_,A,S){const C={begin:_,end:A};for(const b in S)C[b]=S[b];return this.request(C)}requestFull(_){return this.request(_)}request(_){const A=new XMLHttpRequest,S=this.currXhrId++,C=this.pendingRequests[S]={xhr:A};A.open("GET",this.url),A.withCredentials=this.withCredentials;for(const b in this.httpHeaders){const I=this.httpHeaders[b];I!==void 0&&A.setRequestHeader(b,I)}return this.isHttp&&"begin"in _&&"end"in _?(A.setRequestHeader("Range",`bytes=${_.begin}-${_.end-1}`),C.expectedStatus=c):C.expectedStatus=r,A.responseType="arraybuffer",_.onError&&(A.onerror=function(b){_.onError(A.status)}),A.onreadystatechange=this.onStateChange.bind(this,S),A.onprogress=this.onProgress.bind(this,S),C.onHeadersReceived=_.onHeadersReceived,C.onDone=_.onDone,C.onError=_.onError,C.onProgress=_.onProgress,A.send(null),S}onProgress(_,A){var C;const S=this.pendingRequests[_];S&&((C=S.onProgress)==null||C.call(S,A))}onStateChange(_,A){var N,T,L;const S=this.pendingRequests[_];if(!S)return;const C=S.xhr;if(C.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),C.readyState!==4||!(_ in this.pendingRequests))return;if(delete this.pendingRequests[_],C.status===0&&this.isHttp){(N=S.onError)==null||N.call(S,C.status);return}const b=C.status||r;if(!(b===r&&S.expectedStatus===c)&&b!==S.expectedStatus){(T=S.onError)==null||T.call(S,C.status);return}const B=u(C);if(b===c){const k=C.getResponseHeader("Content-Range"),D=/bytes (\d+)-(\d+)\/(\d+)/.exec(k);S.onDone({begin:parseInt(D[1],10),chunk:B})}else B?S.onDone({begin:0,chunk:B}):(L=S.onError)==null||L.call(S,C.status)}getRequestXhr(_){return this.pendingRequests[_].xhr}isPendingRequest(_){return _ in this.pendingRequests}abortRequest(_){const A=this.pendingRequests[_].xhr;delete this.pendingRequests[_],A.abort()}}class f{constructor(_){this._source=_,this._manager=new h(_.url,{httpHeaders:_.httpHeaders,withCredentials:_.withCredentials}),this._rangeChunkSize=_.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(_){const A=this._rangeRequestReaders.indexOf(_);A>=0&&this._rangeRequestReaders.splice(A,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(_,A){const S=new m(this._manager,_,A);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(_){var A;(A=this._fullRequestReader)==null||A.cancel(_);for(const S of this._rangeRequestReaders.slice(0))S.cancel(_)}}t.PDFNetworkStream=f;class d{constructor(_,A){this._manager=_;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._fullRequestId=_.requestFull(S),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=A.disableRange||!1,this._contentLength=A.length,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const _=this._fullRequestId,A=this._manager.getRequestXhr(_),S=I=>A.getResponseHeader(I),{allowRangeRequests:C,suggestedLength:b}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});C&&(this._isRangeSupported=!0),this._contentLength=b||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(_),this._headersReceivedCapability.resolve()}_onDone(_){if(_&&(this._requests.length>0?this._requests.shift().resolve({value:_.chunk,done:!1}):this._cachedChunks.push(_.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(_){this._storedError=(0,o.createResponseStatusError)(_,this._url),this._headersReceivedCapability.reject(this._storedError);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(_){var A;(A=this.onProgress)==null||A.call(this,{loaded:_.loaded,total:_.lengthComputable?_.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new i.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0,this._headersReceivedCapability.reject(_);for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class m{constructor(_,A,S){this._manager=_;const C={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._requestId=_.requestRange(A,S,C),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _;(_=this.onClosed)==null||_.call(this,this)}_onDone(_){const A=_.chunk;this._requests.length>0?this._requests.shift().resolve({value:A,done:!1}):this._queuedChunk=A,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(_){this._storedError=(0,o.createResponseStatusError)(_,this._url);for(const A of this._requests)A.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(_){var A;this.isStreamingSupported||(A=this.onProgress)==null||A.call(this,{loaded:_.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new i.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var i=e(1),o=e(20);const r=/^file:\/\/\/[a-zA-Z]:\//;function c(S){const C=require$$5,b=C.parse(S);return b.protocol==="file:"||b.host?b:/^[a-z]:[/\\]/i.test(S)?C.parse(`file:///${S}`):(b.host||(b.protocol="file:"),b)}class u{constructor(C){this.source=C,this.url=c(C.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _(this):new m(this),this._fullRequestReader}getRangeReader(C,b){if(b<=this._progressiveDataLength)return null;const I=this.isFsUrl?new A(this,C,b):new v(this,C,b);return this._rangeRequestReaders.push(I),I}cancelAllRequests(C){var b;(b=this._fullRequestReader)==null||b.cancel(C);for(const I of this._rangeRequestReaders.slice(0))I.cancel(C)}}t.PDFNodeStream=u;class h{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null;const b=C.source;this._contentLength=b.length,this._loaded=0,this._filename=null,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var I;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=C.length,(I=this.onProgress)==null||I.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",b=>{this._error(b)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class f{constructor(C){this._url=C.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const b=C.source;this._isStreamingSupported=!b.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var I;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const C=this._readableStream.read();return C===null?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=C.length,(I=this.onProgress)==null||I.call(this,{loaded:this._loaded}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){if(!this._readableStream){this._error(C);return}this._readableStream.destroy(C)}_error(C){this._storedError=C,this._readCapability.resolve()}_setReadableStream(C){this._readableStream=C,C.on("readable",()=>{this._readCapability.resolve()}),C.on("end",()=>{C.destroy(),this._done=!0,this._readCapability.resolve()}),C.on("error",b=>{this._error(b)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(S,C){return{protocol:S.protocol,auth:S.auth,host:S.hostname,port:S.port,path:S.path,method:"GET",headers:C}}class m extends h{constructor(C){super(C);const b=I=>{if(I.statusCode===404){const L=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=L,this._headersCapability.reject(L);return}this._headersCapability.resolve(),this._setReadableStream(I);const B=L=>this._readableStream.headers[L.toLowerCase()],{allowRangeRequests:N,suggestedLength:T}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:B,isHttp:C.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=N,this._contentLength=T||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(B)};if(this._request=null,this._url.protocol==="http:"){const I=require$$5;this._request=I.request(d(this._url,C.httpHeaders),b)}else{const I=require$$5;this._request=I.request(d(this._url,C.httpHeaders),b)}this._request.on("error",I=>{this._storedError=I,this._headersCapability.reject(I)}),this._request.end()}}class v extends f{constructor(C,b,I){super(C),this._httpHeaders={};for(const N in C.httpHeaders){const T=C.httpHeaders[N];T!==void 0&&(this._httpHeaders[N]=T)}this._httpHeaders.Range=`bytes=${b}-${I-1}`;const B=N=>{if(N.statusCode===404){const T=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=T;return}this._setReadableStream(N)};if(this._request=null,this._url.protocol==="http:"){const N=require$$5;this._request=N.request(d(this._url,this._httpHeaders),B)}else{const N=require$$5;this._request=N.request(d(this._url,this._httpHeaders),B)}this._request.on("error",N=>{this._storedError=N}),this._request.end()}}class _ extends h{constructor(C){super(C);let b=decodeURIComponent(this._url.path);r.test(this._url.href)&&(b=b.replace(/^\//,""));const I=require$$5;I.lstat(b,(B,N)=>{if(B){B.code==="ENOENT"&&(B=new i.MissingPDFException(`Missing PDF "${b}".`)),this._storedError=B,this._headersCapability.reject(B);return}this._contentLength=N.size,this._setReadableStream(I.createReadStream(b)),this._headersCapability.resolve()})}}class A extends f{constructor(C,b,I){super(C);let B=decodeURIComponent(this._url.path);r.test(this._url.href)&&(B=B.replace(/^\//,""));const N=require$$5;this._setReadableStream(N.createReadStream(B,{start:b,end:I-1}))}}},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var i=e(6),o=e(1);const r={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/1999/xlink",h=["butt","round","square"],f=["miter","round","bevel"],d=function(N,T="",L=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!L)return URL.createObjectURL(new Blob([N],{type:T}));const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let D=`data:${T};base64,`;for(let j=0,Z=N.length;j<Z;j+=3){const O=N[j]&255,G=N[j+1]&255,Q=N[j+2]&255,mt=O>>2,ot=(O&3)<<4|G>>4,dt=j+1<Z?(G&15)<<2|Q>>6:64,et=j+2<Z?Q&63:64;D+=k[mt]+k[ot]+k[dt]+k[et]}return D},m=function(){const N=new Uint8Array([137,80,78,71,13,10,26,10]),T=12,L=new Int32Array(256);for(let Q=0;Q<256;Q++){let mt=Q;for(let ot=0;ot<8;ot++)mt=mt&1?3988292384^mt>>1&2147483647:mt>>1&2147483647;L[Q]=mt}function k(Q,mt,ot){let dt=-1;for(let et=mt;et<ot;et++){const it=(dt^Q[et])&255,$=L[it];dt=dt>>>8^$}return dt^-1}function D(Q,mt,ot,dt){let et=dt;const it=mt.length;ot[et]=it>>24&255,ot[et+1]=it>>16&255,ot[et+2]=it>>8&255,ot[et+3]=it&255,et+=4,ot[et]=Q.charCodeAt(0)&255,ot[et+1]=Q.charCodeAt(1)&255,ot[et+2]=Q.charCodeAt(2)&255,ot[et+3]=Q.charCodeAt(3)&255,et+=4,ot.set(mt,et),et+=mt.length;const $=k(ot,dt+4,et);ot[et]=$>>24&255,ot[et+1]=$>>16&255,ot[et+2]=$>>8&255,ot[et+3]=$&255}function j(Q,mt,ot){let dt=1,et=0;for(let it=mt;it<ot;++it)dt=(dt+(Q[it]&255))%65521,et=(et+dt)%65521;return et<<16|dt}function Z(Q){if(!o.isNodeJS)return O(Q);try{const mt=parseInt(process.versions.node)>=8?Q:Buffer.from(Q),ot=require$$5.deflateSync(mt,{level:9});return ot instanceof Uint8Array?ot:new Uint8Array(ot)}catch(mt){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+mt)}return O(Q)}function O(Q){let mt=Q.length;const ot=65535,dt=Math.ceil(mt/ot),et=new Uint8Array(2+mt+dt*5+4);let it=0;et[it++]=120,et[it++]=156;let $=0;for(;mt>ot;)et[it++]=0,et[it++]=255,et[it++]=255,et[it++]=0,et[it++]=0,et.set(Q.subarray($,$+ot),it),it+=ot,$+=ot,mt-=ot;et[it++]=1,et[it++]=mt&255,et[it++]=mt>>8&255,et[it++]=~mt&65535&255,et[it++]=(~mt&65535)>>8&255,et.set(Q.subarray($),it),it+=Q.length-$;const tt=j(Q,0,Q.length);return et[it++]=tt>>24&255,et[it++]=tt>>16&255,et[it++]=tt>>8&255,et[it++]=tt&255,et}function G(Q,mt,ot,dt){const et=Q.width,it=Q.height;let $,tt,V;const H=Q.data;switch(mt){case o.ImageKind.GRAYSCALE_1BPP:tt=0,$=1,V=et+7>>3;break;case o.ImageKind.RGB_24BPP:tt=2,$=8,V=et*3;break;case o.ImageKind.RGBA_32BPP:tt=6,$=8,V=et*4;break;default:throw new Error("invalid format")}const R=new Uint8Array((1+V)*it);let F=0,U=0;for(let It=0;It<it;++It)R[F++]=0,R.set(H.subarray(U,U+V),F),U+=V,F+=V;if(mt===o.ImageKind.GRAYSCALE_1BPP&&dt){F=0;for(let It=0;It<it;It++){F++;for(let Dt=0;Dt<V;Dt++)R[F++]^=255}}const K=new Uint8Array([et>>24&255,et>>16&255,et>>8&255,et&255,it>>24&255,it>>16&255,it>>8&255,it&255,$,tt,0,0,0]),X=Z(R),Y=N.length+T*3+K.length+X.length,ut=new Uint8Array(Y);let wt=0;return ut.set(N,wt),wt+=N.length,D("IHDR",K,ut,wt),wt+=T+K.length,D("IDATA",X,ut,wt),wt+=T+X.length,D("IEND",new Uint8Array(0),ut,wt),d(ut,"image/png",ot)}return function(mt,ot,dt){const et=mt.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:mt.kind;return G(mt,et,ot,dt)}}();class v{constructor(){this.fontSizeScale=1,this.fontWeight=r.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=r.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(T,L){this.x=T,this.y=L}}function _(N){let T=[];const L=[];for(const k of N){if(k.fn==="save"){T.push({fnId:92,fn:"group",items:[]}),L.push(T),T=T.at(-1).items;continue}k.fn==="restore"?T=L.pop():T.push(k)}return T}function A(N){if(Number.isInteger(N))return N.toString();const T=N.toFixed(10);let L=T.length-1;if(T[L]!=="0")return T;do L--;while(T[L]==="0");return T.substring(0,T[L]==="."?L:L+1)}function S(N){if(N[4]===0&&N[5]===0){if(N[1]===0&&N[2]===0)return N[0]===1&&N[3]===1?"":`scale(${A(N[0])} ${A(N[3])})`;if(N[0]===N[3]&&N[1]===-N[2]){const T=Math.acos(N[0])*180/Math.PI;return`rotate(${A(T)})`}}else if(N[0]===1&&N[1]===0&&N[2]===0&&N[3]===1)return`translate(${A(N[4])} ${A(N[5])})`;return`matrix(${A(N[0])} ${A(N[1])} ${A(N[2])} ${A(N[3])} ${A(N[4])} ${A(N[5])})`}let C=0,b=0,I=0;class B{constructor(T,L,k=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new v,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=T,this.objs=L,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!k,this._operatorIdMapping=[];for(const D in o.OPS)this._operatorIdMapping[o.OPS[D]]=D}getObject(T,L=null){return typeof T=="string"?T.startsWith("g_")?this.commonObjs.get(T):this.objs.get(T):L}save(){this.transformStack.push(this.transformMatrix);const T=this.current;this.extraStack.push(T),this.current=T.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(T){this.save(),this.executeOpTree(T),this.restore()}loadDependencies(T){const L=T.fnArray,k=T.argsArray;for(let D=0,j=L.length;D<j;D++)if(L[D]===o.OPS.dependency)for(const Z of k[D]){const O=Z.startsWith("g_")?this.commonObjs:this.objs,G=new Promise(Q=>{O.get(Z,Q)});this.current.dependencies.push(G)}return Promise.all(this.current.dependencies)}transform(T,L,k,D,j,Z){const O=[T,L,k,D,j,Z];this.transformMatrix=o.Util.transform(this.transformMatrix,O),this.tgrp=null}getSVG(T,L){this.viewport=L;const k=this._initialize(L);return this.loadDependencies(T).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(T)),k))}convertOpList(T){const L=this._operatorIdMapping,k=T.argsArray,D=T.fnArray,j=[];for(let Z=0,O=D.length;Z<O;Z++){const G=D[Z];j.push({fnId:G,fn:L[G],args:k[Z]})}return _(j)}executeOpTree(T){for(const L of T){const k=L.fn,D=L.fnId,j=L.args;switch(D|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(j);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(j[0],j[1]);break;case o.OPS.setFont:this.setFont(j);break;case o.OPS.showText:this.showText(j[0]);break;case o.OPS.showSpacedText:this.showText(j[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(j[0],j[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(j[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(j[0]);break;case o.OPS.setHScale:this.setHScale(j[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(j[0],j[1],j[2],j[3],j[4],j[5]);break;case o.OPS.setTextRise:this.setTextRise(j[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(j[0]);break;case o.OPS.setLineWidth:this.setLineWidth(j[0]);break;case o.OPS.setLineJoin:this.setLineJoin(j[0]);break;case o.OPS.setLineCap:this.setLineCap(j[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(j[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(j[0],j[1],j[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(j[0],j[1],j[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(j);break;case o.OPS.setFillColorN:this.setFillColorN(j);break;case o.OPS.shadingFill:this.shadingFill(j[0]);break;case o.OPS.setDash:this.setDash(j[0],j[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(j[0]);break;case o.OPS.setFlatness:this.setFlatness(j[0]);break;case o.OPS.setGState:this.setGState(j[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(j[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(j[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(j[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(j[0],j[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(j[0],j[1],j[2],j[3],j[4],j[5]);break;case o.OPS.constructPath:this.constructPath(j[0],j[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(L.items);break;default:(0,o.warn)(`Unimplemented operator ${k}`);break}}}setWordSpacing(T){this.current.wordSpacing=T}setCharSpacing(T){this.current.charSpacing=T}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(T,L,k,D,j,Z){const O=this.current;O.textMatrix=O.lineMatrix=[T,L,k,D,j,Z],O.textMatrixScale=Math.hypot(T,L),O.x=O.lineX=0,O.y=O.lineY=0,O.xcoords=[],O.ycoords=[],O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${A(O.fontSize)}px`),O.tspan.setAttributeNS(null,"y",A(-O.y)),O.txtElement=this.svgFactory.createElement("svg:text"),O.txtElement.append(O.tspan)}beginText(){const T=this.current;T.x=T.lineX=0,T.y=T.lineY=0,T.textMatrix=o.IDENTITY_MATRIX,T.lineMatrix=o.IDENTITY_MATRIX,T.textMatrixScale=1,T.tspan=this.svgFactory.createElement("svg:tspan"),T.txtElement=this.svgFactory.createElement("svg:text"),T.txtgrp=this.svgFactory.createElement("svg:g"),T.xcoords=[],T.ycoords=[]}moveText(T,L){const k=this.current;k.x=k.lineX+=T,k.y=k.lineY+=L,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${A(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",A(-k.y))}showText(T){const L=this.current,k=L.font,D=L.fontSize;if(D===0)return;const j=L.fontSizeScale,Z=L.charSpacing,O=L.wordSpacing,G=L.fontDirection,Q=L.textHScale*G,mt=k.vertical,ot=mt?1:-1,dt=k.defaultVMetrics,et=D*L.fontMatrix[0];let it=0;for(const V of T){if(V===null){it+=G*O;continue}else if(typeof V=="number"){it+=ot*V*D/1e3;continue}const H=(V.isSpace?O:0)+Z,R=V.fontChar;let F,U,K=V.width;if(mt){let Y;const ut=V.vmetric||dt;Y=V.vmetric?ut[1]:K*.5,Y=-Y*et;const wt=ut[2]*et;K=ut?-ut[0]:K,F=Y/j,U=(it+wt)/j}else F=it/j,U=0;(V.isInFont||k.missingFile)&&(L.xcoords.push(L.x+F),mt&&L.ycoords.push(-L.y+U),L.tspan.textContent+=R);const X=mt?K*et-H*G:K*et+H*G;it+=X}L.tspan.setAttributeNS(null,"x",L.xcoords.map(A).join(" ")),mt?L.tspan.setAttributeNS(null,"y",L.ycoords.map(A).join(" ")):L.tspan.setAttributeNS(null,"y",A(-L.y)),mt?L.y-=it:L.x+=it*Q,L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${A(L.fontSize)}px`),L.fontStyle!==r.fontStyle&&L.tspan.setAttributeNS(null,"font-style",L.fontStyle),L.fontWeight!==r.fontWeight&&L.tspan.setAttributeNS(null,"font-weight",L.fontWeight);const $=L.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if($===o.TextRenderingMode.FILL||$===o.TextRenderingMode.FILL_STROKE?(L.fillColor!==r.fillColor&&L.tspan.setAttributeNS(null,"fill",L.fillColor),L.fillAlpha<1&&L.tspan.setAttributeNS(null,"fill-opacity",L.fillAlpha)):L.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?L.tspan.setAttributeNS(null,"fill","transparent"):L.tspan.setAttributeNS(null,"fill","none"),$===o.TextRenderingMode.STROKE||$===o.TextRenderingMode.FILL_STROKE){const V=1/(L.textMatrixScale||1);this._setStrokeAttributes(L.tspan,V)}let tt=L.textMatrix;L.textRise!==0&&(tt=tt.slice(),tt[5]+=L.textRise),L.txtElement.setAttributeNS(null,"transform",`${S(tt)} scale(${A(Q)}, -1)`),L.txtElement.setAttributeNS(c,"xml:space","preserve"),L.txtElement.append(L.tspan),L.txtgrp.append(L.txtElement),this._ensureTransformGroup().append(L.txtElement)}setLeadingMoveText(T,L){this.setLeading(-L),this.moveText(T,L)}addFontStyle(T){if(!T.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const L=d(T.data,T.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${T.loadedName}"; src: url(${L}); }
`}setFont(T){const L=this.current,k=this.commonObjs.get(T[0]);let D=T[1];L.font=k,this.embedFonts&&!k.missingFile&&!this.embeddedFonts[k.loadedName]&&(this.addFontStyle(k),this.embeddedFonts[k.loadedName]=k),L.fontMatrix=k.fontMatrix||o.FONT_IDENTITY_MATRIX;let j="normal";k.black?j="900":k.bold&&(j="bold");const Z=k.italic?"italic":"normal";D<0?(D=-D,L.fontDirection=-1):L.fontDirection=1,L.fontSize=D,L.fontFamily=k.loadedName,L.fontWeight=j,L.fontStyle=Z,L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"y",A(-L.y)),L.xcoords=[],L.ycoords=[]}endText(){var L;const T=this.current;T.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((L=T.txtElement)!=null&&L.hasChildNodes())&&(T.element=T.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(T){T>0&&(this.current.lineWidth=T)}setLineCap(T){this.current.lineCap=h[T]}setLineJoin(T){this.current.lineJoin=f[T]}setMiterLimit(T){this.current.miterLimit=T}setStrokeAlpha(T){this.current.strokeAlpha=T}setStrokeRGBColor(T,L,k){this.current.strokeColor=o.Util.makeHexColor(T,L,k)}setFillAlpha(T){this.current.fillAlpha=T}setFillRGBColor(T,L,k){this.current.fillColor=o.Util.makeHexColor(T,L,k),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(T){this.current.strokeColor=this._makeColorN_Pattern(T)}setFillColorN(T){this.current.fillColor=this._makeColorN_Pattern(T)}shadingFill(T){const{width:L,height:k}=this.viewport,D=o.Util.inverseTransform(this.transformMatrix),[j,Z,O,G]=o.Util.getAxialAlignedBoundingBox([0,0,L,k],D),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x",j),Q.setAttributeNS(null,"y",Z),Q.setAttributeNS(null,"width",O-j),Q.setAttributeNS(null,"height",G-Z),Q.setAttributeNS(null,"fill",this._makeShadingPattern(T)),this.current.fillAlpha<1&&Q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Q)}_makeColorN_Pattern(T){return T[0]==="TilingPattern"?this._makeTilingPattern(T):this._makeShadingPattern(T)}_makeTilingPattern(T){const L=T[1],k=T[2],D=T[3]||o.IDENTITY_MATRIX,[j,Z,O,G]=T[4],Q=T[5],mt=T[6],ot=T[7],dt=`shading${I++}`,[et,it,$,tt]=o.Util.normalizeRect([...o.Util.applyTransform([j,Z],D),...o.Util.applyTransform([O,G],D)]),[V,H]=o.Util.singularValueDecompose2dScale(D),R=Q*V,F=mt*H,U=this.svgFactory.createElement("svg:pattern");U.setAttributeNS(null,"id",dt),U.setAttributeNS(null,"patternUnits","userSpaceOnUse"),U.setAttributeNS(null,"width",R),U.setAttributeNS(null,"height",F),U.setAttributeNS(null,"x",`${et}`),U.setAttributeNS(null,"y",`${it}`);const K=this.svg,X=this.transformMatrix,Y=this.current.fillColor,ut=this.current.strokeColor,wt=this.svgFactory.create($-et,tt-it);if(this.svg=wt,this.transformMatrix=D,ot===2){const It=o.Util.makeHexColor(...L);this.current.fillColor=It,this.current.strokeColor=It}return this.executeOpTree(this.convertOpList(k)),this.svg=K,this.transformMatrix=X,this.current.fillColor=Y,this.current.strokeColor=ut,U.append(wt.childNodes[0]),this.defs.append(U),`url(#${dt})`}_makeShadingPattern(T){switch(typeof T=="string"&&(T=this.objs.get(T)),T[0]){case"RadialAxial":const L=`shading${I++}`,k=T[3];let D;switch(T[1]){case"axial":const j=T[4],Z=T[5];D=this.svgFactory.createElement("svg:linearGradient"),D.setAttributeNS(null,"id",L),D.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),D.setAttributeNS(null,"x1",j[0]),D.setAttributeNS(null,"y1",j[1]),D.setAttributeNS(null,"x2",Z[0]),D.setAttributeNS(null,"y2",Z[1]);break;case"radial":const O=T[4],G=T[5],Q=T[6],mt=T[7];D=this.svgFactory.createElement("svg:radialGradient"),D.setAttributeNS(null,"id",L),D.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),D.setAttributeNS(null,"cx",G[0]),D.setAttributeNS(null,"cy",G[1]),D.setAttributeNS(null,"r",mt),D.setAttributeNS(null,"fx",O[0]),D.setAttributeNS(null,"fy",O[1]),D.setAttributeNS(null,"fr",Q);break;default:throw new Error(`Unknown RadialAxial type: ${T[1]}`)}for(const j of k){const Z=this.svgFactory.createElement("svg:stop");Z.setAttributeNS(null,"offset",j[0]),Z.setAttributeNS(null,"stop-color",j[1]),D.append(Z)}return this.defs.append(D),`url(#${L})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${T[0]}`)}}setDash(T,L){this.current.dashArray=T,this.current.dashPhase=L}constructPath(T,L){const k=this.current;let D=k.x,j=k.y,Z=[],O=0;for(const G of T)switch(G|0){case o.OPS.rectangle:D=L[O++],j=L[O++];const Q=L[O++],mt=L[O++],ot=D+Q,dt=j+mt;Z.push("M",A(D),A(j),"L",A(ot),A(j),"L",A(ot),A(dt),"L",A(D),A(dt),"Z");break;case o.OPS.moveTo:D=L[O++],j=L[O++],Z.push("M",A(D),A(j));break;case o.OPS.lineTo:D=L[O++],j=L[O++],Z.push("L",A(D),A(j));break;case o.OPS.curveTo:D=L[O+4],j=L[O+5],Z.push("C",A(L[O]),A(L[O+1]),A(L[O+2]),A(L[O+3]),A(D),A(j)),O+=6;break;case o.OPS.curveTo2:Z.push("C",A(D),A(j),A(L[O]),A(L[O+1]),A(L[O+2]),A(L[O+3])),D=L[O+2],j=L[O+3],O+=4;break;case o.OPS.curveTo3:D=L[O+2],j=L[O+3],Z.push("C",A(L[O]),A(L[O+1]),A(D),A(j),A(D),A(j)),O+=4;break;case o.OPS.closePath:Z.push("Z");break}Z=Z.join(" "),k.path&&T.length>0&&T[0]!==o.OPS.rectangle&&T[0]!==o.OPS.moveTo?Z=k.path.getAttributeNS(null,"d")+Z:(k.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(k.path)),k.path.setAttributeNS(null,"d",Z),k.path.setAttributeNS(null,"fill","none"),k.element=k.path,k.setCurrentPoint(D,j)}endPath(){const T=this.current;if(T.path=null,!this.pendingClip)return;if(!T.element){this.pendingClip=null;return}const L=`clippath${C++}`,k=this.svgFactory.createElement("svg:clipPath");k.setAttributeNS(null,"id",L),k.setAttributeNS(null,"transform",S(this.transformMatrix));const D=T.element.cloneNode(!0);if(this.pendingClip==="evenodd"?D.setAttributeNS(null,"clip-rule","evenodd"):D.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,k.append(D),this.defs.append(k),T.activeClipUrl){T.clipGroup=null;for(const j of this.extraStack)j.clipGroup=null;k.setAttributeNS(null,"clip-path",T.activeClipUrl)}T.activeClipUrl=`url(#${L})`,this.tgrp=null}clip(T){this.pendingClip=T}closePath(){const T=this.current;if(T.path){const L=`${T.path.getAttributeNS(null,"d")}Z`;T.path.setAttributeNS(null,"d",L)}}setLeading(T){this.current.leading=-T}setTextRise(T){this.current.textRise=T}setTextRenderingMode(T){this.current.textRenderingMode=T}setHScale(T){this.current.textHScale=T/100}setRenderingIntent(T){}setFlatness(T){}setGState(T){for(const[L,k]of T)switch(L){case"LW":this.setLineWidth(k);break;case"LC":this.setLineCap(k);break;case"LJ":this.setLineJoin(k);break;case"ML":this.setMiterLimit(k);break;case"D":this.setDash(k[0],k[1]);break;case"RI":this.setRenderingIntent(k);break;case"FL":this.setFlatness(k);break;case"Font":this.setFont(k);break;case"CA":this.setStrokeAlpha(k);break;case"ca":this.setFillAlpha(k);break;default:(0,o.warn)(`Unimplemented graphic state operator ${L}`);break}}fill(){const T=this.current;T.element&&(T.element.setAttributeNS(null,"fill",T.fillColor),T.element.setAttributeNS(null,"fill-opacity",T.fillAlpha),this.endPath())}stroke(){const T=this.current;T.element&&(this._setStrokeAttributes(T.element),T.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(T,L=1){const k=this.current;let D=k.dashArray;L!==1&&D.length>0&&(D=D.map(function(j){return L*j})),T.setAttributeNS(null,"stroke",k.strokeColor),T.setAttributeNS(null,"stroke-opacity",k.strokeAlpha),T.setAttributeNS(null,"stroke-miterlimit",A(k.miterLimit)),T.setAttributeNS(null,"stroke-linecap",k.lineCap),T.setAttributeNS(null,"stroke-linejoin",k.lineJoin),T.setAttributeNS(null,"stroke-width",A(L*k.lineWidth)+"px"),T.setAttributeNS(null,"stroke-dasharray",D.map(A).join(" ")),T.setAttributeNS(null,"stroke-dashoffset",A(L*k.dashPhase)+"px")}eoFill(){var T;(T=this.current.element)==null||T.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var T;(T=this.current.element)==null||T.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width","1px"),T.setAttributeNS(null,"height","1px"),T.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(T)}paintImageXObject(T){const L=this.getObject(T);if(!L){(0,o.warn)(`Dependent image with object ID ${T} is not ready yet`);return}this.paintInlineImageXObject(L)}paintInlineImageXObject(T,L){const k=T.width,D=T.height,j=m(T,this.forceDataSchema,!!L),Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x","0"),Z.setAttributeNS(null,"y","0"),Z.setAttributeNS(null,"width",A(k)),Z.setAttributeNS(null,"height",A(D)),this.current.element=Z,this.clip("nonzero");const O=this.svgFactory.createElement("svg:image");O.setAttributeNS(u,"xlink:href",j),O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y",A(-D)),O.setAttributeNS(null,"width",A(k)+"px"),O.setAttributeNS(null,"height",A(D)+"px"),O.setAttributeNS(null,"transform",`scale(${A(1/k)} ${A(-1/D)})`),L?L.append(O):this._ensureTransformGroup().append(O)}paintImageMaskXObject(T){const L=this.getObject(T.data,T);if(L.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const k=this.current,D=L.width,j=L.height,Z=k.fillColor;k.maskId=`mask${b++}`;const O=this.svgFactory.createElement("svg:mask");O.setAttributeNS(null,"id",k.maskId);const G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",A(D)),G.setAttributeNS(null,"height",A(j)),G.setAttributeNS(null,"fill",Z),G.setAttributeNS(null,"mask",`url(#${k.maskId})`),this.defs.append(O),this._ensureTransformGroup().append(G),this.paintInlineImageXObject(L,O)}paintFormXObjectBegin(T,L){if(Array.isArray(T)&&T.length===6&&this.transform(T[0],T[1],T[2],T[3],T[4],T[5]),L){const k=L[2]-L[0],D=L[3]-L[1],j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",L[0]),j.setAttributeNS(null,"y",L[1]),j.setAttributeNS(null,"width",A(k)),j.setAttributeNS(null,"height",A(D)),this.current.element=j,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(T){const L=this.svgFactory.create(T.width,T.height),k=this.svgFactory.createElement("svg:defs");L.append(k),this.defs=k;const D=this.svgFactory.createElement("svg:g");return D.setAttributeNS(null,"transform",S(T.transform)),L.append(D),this.svg=D,L}_ensureClipGroup(){if(!this.current.clipGroup){const T=this.svgFactory.createElement("svg:g");T.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(T),this.current.clipGroup=T}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",S(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=B},(g,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class e{static textContent(o){const r=[],c={items:r,styles:Object.create(null)};function u(h){var m;if(!h)return;let f=null;const d=h.name;if(d==="#text")f=h.value;else if(e.shouldBuildText(d))(m=h==null?void 0:h.attributes)!=null&&m.textContent?f=h.attributes.textContent:h.value&&(f=h.value);else return;if(f!==null&&r.push({str:f}),!!h.children)for(const v of h.children)u(v)}return u(o),c}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}t.XfaText=e},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=S,t.updateTextLayer=C;var i=e(1),o=e(6);const r=1e5,c=30,u=.8,h=new Map;function f(b,I){let B;if(I&&i.FeatureTest.isOffscreenCanvasSupported)B=new OffscreenCanvas(b,b).getContext("2d",{alpha:!1});else{const N=document.createElement("canvas");N.width=N.height=b,B=N.getContext("2d",{alpha:!1})}return B}function d(b,I){const B=h.get(b);if(B)return B;const N=f(c,I);N.font=`${c}px ${b}`;const T=N.measureText("");let L=T.fontBoundingBoxAscent,k=Math.abs(T.fontBoundingBoxDescent);if(L){const j=L/(L+k);return h.set(b,j),N.canvas.width=N.canvas.height=0,j}N.strokeStyle="red",N.clearRect(0,0,c,c),N.strokeText("g",0,0);let D=N.getImageData(0,0,c,c).data;k=0;for(let j=D.length-1-3;j>=0;j-=4)if(D[j]>0){k=Math.ceil(j/4/c);break}N.clearRect(0,0,c,c),N.strokeText("A",0,c),D=N.getImageData(0,0,c,c).data,L=0;for(let j=0,Z=D.length;j<Z;j+=4)if(D[j]>0){L=c-Math.floor(j/4/c);break}if(N.canvas.width=N.canvas.height=0,L){const j=L/(L+k);return h.set(b,j),j}return h.set(b,u),u}function m(b,I,B){const N=document.createElement("span"),T={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};b._textDivs.push(N);const L=i.Util.transform(b._transform,I.transform);let k=Math.atan2(L[1],L[0]);const D=B[I.fontName];D.vertical&&(k+=Math.PI/2);const j=Math.hypot(L[2],L[3]),Z=j*d(D.fontFamily,b._isOffscreenCanvasSupported);let O,G;k===0?(O=L[4],G=L[5]-Z):(O=L[4]+Z*Math.sin(k),G=L[5]-Z*Math.cos(k));const Q="calc(var(--scale-factor)*",mt=N.style;b._container===b._rootContainer?(mt.left=`${(100*O/b._pageWidth).toFixed(2)}%`,mt.top=`${(100*G/b._pageHeight).toFixed(2)}%`):(mt.left=`${Q}${O.toFixed(2)}px)`,mt.top=`${Q}${G.toFixed(2)}px)`),mt.fontSize=`${Q}${j.toFixed(2)}px)`,mt.fontFamily=D.fontFamily,T.fontSize=j,N.setAttribute("role","presentation"),N.textContent=I.str,N.dir=I.dir,b._fontInspectorEnabled&&(N.dataset.fontName=I.fontName),k!==0&&(T.angle=k*(180/Math.PI));let ot=!1;if(I.str.length>1)ot=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const dt=Math.abs(I.transform[0]),et=Math.abs(I.transform[3]);dt!==et&&Math.max(dt,et)/Math.min(dt,et)>1.5&&(ot=!0)}ot&&(T.canvasWidth=D.vertical?I.height:I.width),b._textDivProperties.set(N,T),b._isReadableStream&&b._layoutText(N)}function v(b){const{div:I,scale:B,properties:N,ctx:T,prevFontSize:L,prevFontFamily:k}=b,{style:D}=I;let j="";if(N.canvasWidth!==0&&N.hasText){const{fontFamily:Z}=D,{canvasWidth:O,fontSize:G}=N;(L!==G||k!==Z)&&(T.font=`${G*B}px ${Z}`,b.prevFontSize=G,b.prevFontFamily=Z);const{width:Q}=T.measureText(I.textContent);Q>0&&(j=`scaleX(${O*B/Q})`)}N.angle!==0&&(j=`rotate(${N.angle}deg) ${j}`),j.length>0&&(D.transform=j)}function _(b){if(b._canceled)return;const I=b._textDivs,B=b._capability;if(I.length>r){B.resolve();return}if(!b._isReadableStream)for(const T of I)b._layoutText(T);B.resolve()}class A{constructor({textContentSource:I,container:B,viewport:N,textDivs:T,textDivProperties:L,textContentItemsStr:k,isOffscreenCanvasSupported:D}){var Q;this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=B,this._textDivs=T||[],this._textContentItemsStr=k||[],this._isOffscreenCanvasSupported=D,this._fontInspectorEnabled=!!((Q=globalThis.FontInspector)!=null&&Q.enabled),this._reader=null,this._textDivProperties=L||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:N.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:f(0,D)};const{pageWidth:j,pageHeight:Z,pageX:O,pageY:G}=N.rawDims;this._transform=[1,0,0,-1,-O,G+Z],this._pageWidth=j,this._pageHeight=Z,(0,o.setLayerDimensions)(B,N),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(I,B){for(const N of I){if(N.str===void 0){if(N.type==="beginMarkedContentProps"||N.type==="beginMarkedContent"){const T=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),N.id!==null&&this._container.setAttribute("id",`${N.id}`),T.append(this._container)}else N.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(N.str),m(this,N,B)}}_layoutText(I){const B=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,v(this._layoutTextParams),B.hasText&&this._container.append(I),B.hasEOL){const N=document.createElement("br");N.setAttribute("role","presentation"),this._container.append(N)}}_render(){const I=new i.PromiseCapability;let B=Object.create(null);if(this._isReadableStream){const N=()=>{this._reader.read().then(({value:T,done:L})=>{if(L){I.resolve();return}Object.assign(B,T.styles),this._processItems(T.items,B),N()},I.reject)};this._reader=this._textContentSource.getReader(),N()}else if(this._textContentSource){const{items:N,styles:T}=this._textContentSource;this._processItems(N,T),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{B=null,_(this)},this._capability.reject)}}t.TextLayerRenderTask=A;function S(b){!b.textContentSource&&(b.textContent||b.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),b.textContentSource=b.textContent||b.textContentStream);const{container:I,viewport:B}=b,N=getComputedStyle(I),T=N.getPropertyValue("visibility"),L=parseFloat(N.getPropertyValue("--scale-factor"));T==="visible"&&(!L||Math.abs(L-B.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const k=new A(b);return k._render(),k}function C({container:b,viewport:I,textDivs:B,textDivProperties:N,isOffscreenCanvasSupported:T,mustRotate:L=!0,mustRescale:k=!0}){if(L&&(0,o.setLayerDimensions)(b,{rotation:I.rotation}),k){const D=f(0,T),Z={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:D};for(const O of B)Z.properties=N.get(O),Z.div=O,v(Z)}}},(g,t,e)=>{var d,m,v,_,A,S,C,b,I,B,N,uy,ig,hy,dy;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var i=e(1),o=e(4),r=e(28),c=e(33),u=e(6),h=e(34);const j=class j{constructor({uiManager:O,pageIndex:G,div:Q,accessibilityManager:mt,annotationLayer:ot,viewport:dt,l10n:et}){M(this,N);M(this,d);M(this,m,!1);M(this,v,null);M(this,_,this.pointerup.bind(this));M(this,A,this.pointerdown.bind(this));M(this,S,new Map);M(this,C,!1);M(this,b,!1);M(this,I,!1);M(this,B);const it=[r.FreeTextEditor,c.InkEditor,h.StampEditor];if(!j._initialized){j._initialized=!0;for(const $ of it)$.initialize(et)}O.registerEditorTypes(it),x(this,B,O),this.pageIndex=G,this.div=Q,x(this,d,mt),x(this,v,ot),this.viewport=dt,a(this,B).addLayer(this)}get isEmpty(){return a(this,S).size===0}updateToolbar(O){a(this,B).updateToolbar(O)}updateMode(O=a(this,B).getMode()){w(this,N,dy).call(this),O===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),O!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",O===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",O===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",O===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(O){if(!O&&a(this,B).getMode()!==i.AnnotationEditorType.INK)return;if(!O){for(const Q of a(this,S).values())if(Q.isEmpty()){Q.setInBackground();return}}w(this,N,ig).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(O){a(this,B).setEditingState(O)}addCommands(O){a(this,B).addCommands(O)}enable(){this.div.style.pointerEvents="auto";const O=new Set;for(const Q of a(this,S).values())Q.enableEditing(),Q.annotationElementId&&O.add(Q.annotationElementId);if(!a(this,v))return;const G=a(this,v).getEditableAnnotations();for(const Q of G){if(Q.hide(),a(this,B).isDeletedAnnotationElement(Q.data.id)||O.has(Q.data.id))continue;const mt=this.deserialize(Q);mt&&(this.addOrRebuild(mt),mt.enableEditing())}}disable(){var G;x(this,I,!0),this.div.style.pointerEvents="none";const O=new Set;for(const Q of a(this,S).values()){if(Q.disableEditing(),!Q.annotationElementId||Q.serialize()!==null){O.add(Q.annotationElementId);continue}(G=this.getEditableAnnotation(Q.annotationElementId))==null||G.show(),Q.remove()}if(a(this,v)){const Q=a(this,v).getEditableAnnotations();for(const mt of Q){const{id:ot}=mt.data;O.has(ot)||a(this,B).isDeletedAnnotationElement(ot)||mt.show()}}w(this,N,dy).call(this),this.isEmpty&&(this.div.hidden=!0),x(this,I,!1)}getEditableAnnotation(O){var G;return((G=a(this,v))==null?void 0:G.getEditableAnnotation(O))||null}setActiveEditor(O){a(this,B).getActive()!==O&&a(this,B).setActiveEditor(O)}enableClick(){this.div.addEventListener("pointerdown",a(this,A)),this.div.addEventListener("pointerup",a(this,_))}disableClick(){this.div.removeEventListener("pointerdown",a(this,A)),this.div.removeEventListener("pointerup",a(this,_))}attach(O){a(this,S).set(O.id,O);const{annotationElementId:G}=O;G&&a(this,B).isDeletedAnnotationElement(G)&&a(this,B).removeDeletedAnnotationElement(O)}detach(O){var G;a(this,S).delete(O.id),(G=a(this,d))==null||G.removePointerInTextLayer(O.contentDiv),!a(this,I)&&O.annotationElementId&&a(this,B).addDeletedAnnotationElement(O)}remove(O){this.detach(O),a(this,B).removeEditor(O),O.div.contains(document.activeElement)&&setTimeout(()=>{a(this,B).focusMainContainer()},0),O.div.remove(),O.isAttachedToDOM=!1,a(this,b)||this.addInkEditorIfNeeded(!1)}changeParent(O){var G;O.parent!==this&&(O.annotationElementId&&(a(this,B).addDeletedAnnotationElement(O.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(O),O.annotationElementId=null),this.attach(O),(G=O.parent)==null||G.detach(O),O.setParent(this),O.div&&O.isAttachedToDOM&&(O.div.remove(),this.div.append(O.div)))}add(O){if(this.changeParent(O),a(this,B).addEditor(O),this.attach(O),!O.isAttachedToDOM){const G=O.render();this.div.append(G),O.isAttachedToDOM=!0}O.fixAndSetPosition(),O.onceAdded(),a(this,B).addToAnnotationStorage(O)}moveEditorInDOM(O){var Q;if(!O.isAttachedToDOM)return;const{activeElement:G}=document;O.div.contains(G)&&(O._focusEventsAllowed=!1,setTimeout(()=>{O.div.contains(document.activeElement)?O._focusEventsAllowed=!0:(O.div.addEventListener("focusin",()=>{O._focusEventsAllowed=!0},{once:!0}),G.focus())},0)),O._structTreeParentId=(Q=a(this,d))==null?void 0:Q.moveElementInDOM(this.div,O.div,O.contentDiv,!0)}addOrRebuild(O){O.needsToBeRebuilt()?O.rebuild():this.add(O)}addUndoableEditor(O){const G=()=>O._uiManager.rebuild(O),Q=()=>{O.remove()};this.addCommands({cmd:G,undo:Q,mustExec:!1})}getNextId(){return a(this,B).getId()}pasteEditor(O,G){a(this,B).updateToolbar(O),a(this,B).updateMode(O);const{offsetX:Q,offsetY:mt}=w(this,N,hy).call(this),ot=this.getNextId(),dt=w(this,N,uy).call(this,{parent:this,id:ot,x:Q,y:mt,uiManager:a(this,B),isCentered:!0,...G});dt&&this.add(dt)}deserialize(O){switch(O.annotationType??O.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return r.FreeTextEditor.deserialize(O,this,a(this,B));case i.AnnotationEditorType.INK:return c.InkEditor.deserialize(O,this,a(this,B));case i.AnnotationEditorType.STAMP:return h.StampEditor.deserialize(O,this,a(this,B))}return null}addNewEditor(){w(this,N,ig).call(this,w(this,N,hy).call(this),!0)}setSelected(O){a(this,B).setSelected(O)}toggleSelected(O){a(this,B).toggleSelected(O)}isSelected(O){return a(this,B).isSelected(O)}unselect(O){a(this,B).unselect(O)}pointerup(O){const{isMac:G}=i.FeatureTest.platform;if(!(O.button!==0||O.ctrlKey&&G)&&O.target===this.div&&a(this,C)){if(x(this,C,!1),!a(this,m)){x(this,m,!0);return}if(a(this,B).getMode()===i.AnnotationEditorType.STAMP){a(this,B).unselectAll();return}w(this,N,ig).call(this,O,!1)}}pointerdown(O){if(a(this,C)){x(this,C,!1);return}const{isMac:G}=i.FeatureTest.platform;if(O.button!==0||O.ctrlKey&&G||O.target!==this.div)return;x(this,C,!0);const Q=a(this,B).getActive();x(this,m,!Q||Q.isEmpty())}findNewParent(O,G,Q){const mt=a(this,B).findParent(G,Q);return mt===null||mt===this?!1:(mt.changeParent(O),!0)}destroy(){var O,G;((O=a(this,B).getActive())==null?void 0:O.parent)===this&&(a(this,B).commitOrRemove(),a(this,B).setActiveEditor(null));for(const Q of a(this,S).values())(G=a(this,d))==null||G.removePointerInTextLayer(Q.contentDiv),Q.setParent(null),Q.isAttachedToDOM=!1,Q.div.remove();this.div=null,a(this,S).clear(),a(this,B).removeLayer(this)}render({viewport:O}){this.viewport=O,(0,u.setLayerDimensions)(this.div,O);for(const G of a(this,B).getEditors(this.pageIndex))this.add(G);this.updateMode()}update({viewport:O}){a(this,B).commitOrRemove(),this.viewport=O,(0,u.setLayerDimensions)(this.div,{rotation:O.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:O,pageHeight:G}=this.viewport.rawDims;return[O,G]}};d=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakMap,C=new WeakMap,b=new WeakMap,I=new WeakMap,B=new WeakMap,N=new WeakSet,uy=function(O){switch(a(this,B).getMode()){case i.AnnotationEditorType.FREETEXT:return new r.FreeTextEditor(O);case i.AnnotationEditorType.INK:return new c.InkEditor(O);case i.AnnotationEditorType.STAMP:return new h.StampEditor(O)}return null},ig=function(O,G){const Q=this.getNextId(),mt=w(this,N,uy).call(this,{parent:this,id:Q,x:O.offsetX,y:O.offsetY,uiManager:a(this,B),isCentered:G});return mt&&this.add(mt),mt},hy=function(){const{x:O,y:G,width:Q,height:mt}=this.div.getBoundingClientRect(),ot=Math.max(0,O),dt=Math.max(0,G),et=Math.min(window.innerWidth,O+Q),it=Math.min(window.innerHeight,G+mt),$=(ot+et)/2-O,tt=(dt+it)/2-G,[V,H]=this.viewport.rotation%180===0?[$,tt]:[tt,$];return{offsetX:V,offsetY:H}},dy=function(){x(this,b,!0);for(const O of a(this,S).values())O.isEmpty()&&O.remove();x(this,b,!1)},xe(j,"_initialized",!1);let f=j;t.AnnotationEditorLayer=f},(g,t,e)=>{var h,f,d,m,v,_,A,S,C,b,ib,sb,rb,Xh,fy,ab,py;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var i=e(1),o=e(5),r=e(4),c=e(29);const j=class j extends r.AnnotationEditor{constructor(G){super({...G,name:"freeTextEditor"});M(this,b);M(this,h,this.editorDivBlur.bind(this));M(this,f,this.editorDivFocus.bind(this));M(this,d,this.editorDivInput.bind(this));M(this,m,this.editorDivKeydown.bind(this));M(this,v);M(this,_,"");M(this,A,`${this.id}-editor`);M(this,S);M(this,C,null);x(this,v,G.color||j._defaultColor||r.AnnotationEditor._defaultLineColor),x(this,S,G.fontSize||j._defaultFontSize)}static get _keyboardManager(){const G=j.prototype,Q=dt=>dt.isEmpty(),mt=o.AnnotationEditorUIManager.TRANSLATE_SMALL,ot=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],G.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],G.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],G._translateEmpty,{args:[-mt,0],checker:Q}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],G._translateEmpty,{args:[-ot,0],checker:Q}],[["ArrowRight","mac+ArrowRight"],G._translateEmpty,{args:[mt,0],checker:Q}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],G._translateEmpty,{args:[ot,0],checker:Q}],[["ArrowUp","mac+ArrowUp"],G._translateEmpty,{args:[0,-mt],checker:Q}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],G._translateEmpty,{args:[0,-ot],checker:Q}],[["ArrowDown","mac+ArrowDown"],G._translateEmpty,{args:[0,mt],checker:Q}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],G._translateEmpty,{args:[0,ot],checker:Q}]]))}static initialize(G){r.AnnotationEditor.initialize(G,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Q=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Q.getPropertyValue("--freetext-padding"))}static updateDefaultParams(G,Q){switch(G){case i.AnnotationEditorParamsType.FREETEXT_SIZE:j._defaultFontSize=Q;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:j._defaultColor=Q;break}}updateParams(G,Q){switch(G){case i.AnnotationEditorParamsType.FREETEXT_SIZE:w(this,b,ib).call(this,Q);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:w(this,b,sb).call(this,Q);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,j._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,j._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,a(this,S)],[i.AnnotationEditorParamsType.FREETEXT_COLOR,a(this,v)]]}_translateEmpty(G,Q){this._uiManager.translateSelectedEditors(G,Q,!0)}getInitialTranslation(){const G=this.parentScale;return[-j._internalPadding*G,-(j._internalPadding+a(this,S))*G]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",a(this,m)),this.editorDiv.addEventListener("focus",a(this,f)),this.editorDiv.addEventListener("blur",a(this,h)),this.editorDiv.addEventListener("input",a(this,d)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,A)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",a(this,m)),this.editorDiv.removeEventListener("focus",a(this,f)),this.editorDiv.removeEventListener("blur",a(this,h)),this.editorDiv.removeEventListener("input",a(this,d)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(G){this._focusEventsAllowed&&(super.focusin(G),G.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var G;if(this.width){w(this,b,py).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(G=this._initialOptions)!=null&&G.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const G=a(this,_),Q=x(this,_,w(this,b,rb).call(this).trimEnd());if(G===Q)return;const mt=ot=>{if(x(this,_,ot),!ot){this.remove();return}w(this,b,fy).call(this),this._uiManager.rebuild(this),w(this,b,Xh).call(this)};this.addCommands({cmd:()=>{mt(Q)},undo:()=>{mt(G)},mustExec:!1}),w(this,b,Xh).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(G){this.enterInEditMode()}keydown(G){G.target===this.div&&G.key==="Enter"&&(this.enterInEditMode(),G.preventDefault())}editorDivKeydown(G){j._keyboardManager.exec(this,G)}editorDivFocus(G){this.isEditing=!0}editorDivBlur(G){this.isEditing=!1}editorDivInput(G){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let G,Q;this.width&&(G=this.x,Q=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,A)),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(ot=>{var dt;return(dt=this.editorDiv)==null?void 0:dt.setAttribute("aria-label",ot)}),r.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(ot=>{var dt;return(dt=this.editorDiv)==null?void 0:dt.setAttribute("default-content",ot)}),this.editorDiv.contentEditable=!0;const{style:mt}=this.editorDiv;if(mt.fontSize=`calc(${a(this,S)}px * var(--scale-factor))`,mt.color=a(this,v),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ot,dt]=this.parentDimensions;if(this.annotationElementId){const{position:et}=a(this,C);let[it,$]=this.getInitialTranslation();[it,$]=this.pageTranslationToScreen(it,$);const[tt,V]=this.pageDimensions,[H,R]=this.pageTranslation;let F,U;switch(this.rotation){case 0:F=G+(et[0]-H)/tt,U=Q+this.height-(et[1]-R)/V;break;case 90:F=G+(et[0]-H)/tt,U=Q-(et[1]-R)/V,[it,$]=[$,-it];break;case 180:F=G-this.width+(et[0]-H)/tt,U=Q-(et[1]-R)/V,[it,$]=[-it,-$];break;case 270:F=G+(et[0]-H-this.height*V)/tt,U=Q+(et[1]-R-this.width*tt)/V,[it,$]=[-$,it];break}this.setAt(F*ot,U*dt,it,$)}else this.setAt(G*ot,Q*dt,this.width*ot,this.height*dt);w(this,b,fy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(G,Q,mt){let ot=null;if(G instanceof c.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:et,fontColor:it},rect:$,rotation:tt,id:V},textContent:H,textPosition:R,parent:{page:{pageNumber:F}}}=G;if(!H||H.length===0)return null;ot=G={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(it),fontSize:et,value:H.join(`
`),position:R,pageIndex:F-1,rect:$,rotation:tt,id:V,deleted:!1}}const dt=super.deserialize(G,Q,mt);return x(dt,S,G.fontSize),x(dt,v,i.Util.makeHexColor(...G.color)),x(dt,_,G.value),dt.annotationElementId=G.id||null,x(dt,C,ot),dt}serialize(G=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Q=j._internalPadding*this.parentScale,mt=this.getRect(Q,Q),ot=r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,v)),dt={annotationType:i.AnnotationEditorType.FREETEXT,color:ot,fontSize:a(this,S),value:a(this,_),pageIndex:this.pageIndex,rect:mt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return G?dt:this.annotationElementId&&!w(this,b,ab).call(this,dt)?null:(dt.id=this.annotationElementId,dt)}};h=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakMap,C=new WeakMap,b=new WeakSet,ib=function(G){const Q=ot=>{this.editorDiv.style.fontSize=`calc(${ot}px * var(--scale-factor))`,this.translate(0,-(ot-a(this,S))*this.parentScale),x(this,S,ot),w(this,b,Xh).call(this)},mt=a(this,S);this.addCommands({cmd:()=>{Q(G)},undo:()=>{Q(mt)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},sb=function(G){const Q=a(this,v);this.addCommands({cmd:()=>{x(this,v,this.editorDiv.style.color=G)},undo:()=>{x(this,v,this.editorDiv.style.color=Q)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},rb=function(){const G=this.editorDiv.getElementsByTagName("div");if(G.length===0)return this.editorDiv.innerText;const Q=[];for(const mt of G)Q.push(mt.innerText.replace(/\r\n?|\n/,""));return Q.join(`
`)},Xh=function(){const[G,Q]=this.parentDimensions;let mt;if(this.isAttachedToDOM)mt=this.div.getBoundingClientRect();else{const{currentLayer:ot,div:dt}=this,et=dt.style.display;dt.style.display="hidden",ot.div.append(this.div),mt=dt.getBoundingClientRect(),dt.remove(),dt.style.display=et}this.rotation%180===this.parentRotation%180?(this.width=mt.width/G,this.height=mt.height/Q):(this.width=mt.height/G,this.height=mt.width/Q),this.fixAndSetPosition()},fy=function(){if(this.editorDiv.replaceChildren(),!!a(this,_))for(const G of a(this,_).split(`
`)){const Q=document.createElement("div");Q.append(G?document.createTextNode(G):document.createElement("br")),this.editorDiv.append(Q)}},ab=function(G){const{value:Q,fontSize:mt,color:ot,rect:dt,pageIndex:et}=a(this,C);return G.value!==Q||G.fontSize!==mt||G.rect.some((it,$)=>Math.abs(it-dt[$])>=1)||G.color.some((it,$)=>it!==ot[$])||G.pageIndex!==et},py=function(G=!1){if(!this.annotationElementId)return;if(w(this,b,Xh).call(this),!G&&(this.width===0||this.height===0)){setTimeout(()=>w(this,b,py).call(this,!0),0);return}const Q=j._internalPadding*this.parentScale;a(this,C).rect=this.getRect(Q,Q)},xe(j,"_freeTextDefaultContent",""),xe(j,"_internalPadding",0),xe(j,"_defaultColor",null),xe(j,"_defaultFontSize",10),xe(j,"_type","freetext");let u=j;t.FreeTextEditor=u},(g,t,e)=>{var U,X,hl,ob,wt,It,Dt,Ht,Vt,Gt,xt,Pt,q,st,vt,Ct,Ot,qt,Ut,yt,ne,Qt,lb,sg,gy,my,Ee,Xe,dn,zt,bt,Et,he,vy,Te,rt,Nt,ee,cb,yy;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var i=e(1),o=e(6),r=e(3),c=e(30),u=e(31),h=e(32);const f=1e3,d=9,m=new WeakSet;function v(le){return{width:le[2]-le[0],height:le[3]-le[1]}}class _{static create(nt){switch(nt.data.annotationType){case i.AnnotationType.LINK:return new S(nt);case i.AnnotationType.TEXT:return new C(nt);case i.AnnotationType.WIDGET:switch(nt.data.fieldType){case"Tx":return new I(nt);case"Btn":return nt.data.radioButton?new T(nt):nt.data.checkBox?new N(nt):new L(nt);case"Ch":return new k(nt);case"Sig":return new B(nt)}return new b(nt);case i.AnnotationType.POPUP:return new D(nt);case i.AnnotationType.FREETEXT:return new Z(nt);case i.AnnotationType.LINE:return new O(nt);case i.AnnotationType.SQUARE:return new G(nt);case i.AnnotationType.CIRCLE:return new Q(nt);case i.AnnotationType.POLYLINE:return new mt(nt);case i.AnnotationType.CARET:return new dt(nt);case i.AnnotationType.INK:return new et(nt);case i.AnnotationType.POLYGON:return new ot(nt);case i.AnnotationType.HIGHLIGHT:return new it(nt);case i.AnnotationType.UNDERLINE:return new $(nt);case i.AnnotationType.SQUIGGLY:return new tt(nt);case i.AnnotationType.STRIKEOUT:return new V(nt);case i.AnnotationType.STAMP:return new H(nt);case i.AnnotationType.FILEATTACHMENT:return new R(nt);default:return new A(nt)}}}const K=class K{constructor(nt,{isRenderable:J=!1,ignoreBorder:pt=!1,createQuadrilaterals:Mt=!1}={}){M(this,U,!1);this.isRenderable=J,this.data=nt.data,this.layer=nt.layer,this.linkService=nt.linkService,this.downloadManager=nt.downloadManager,this.imageResourcesPath=nt.imageResourcesPath,this.renderForms=nt.renderForms,this.svgFactory=nt.svgFactory,this.annotationStorage=nt.annotationStorage,this.enableScripting=nt.enableScripting,this.hasJSActions=nt.hasJSActions,this._fieldObjects=nt.fieldObjects,this.parent=nt.parent,J&&(this.container=this._createContainer(pt)),Mt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:nt,contentsObj:J,richText:pt}){return!!(nt!=null&&nt.str||J!=null&&J.str||pt!=null&&pt.str)}get hasPopupData(){return K._hasPopupData(this.data)}_createContainer(nt){const{data:J,parent:{page:pt,viewport:Mt}}=this,Ft=document.createElement("section");Ft.setAttribute("data-annotation-id",J.id),this instanceof b||(Ft.tabIndex=f),Ft.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Ft.setAttribute("aria-haspopup","dialog"),J.noRotate&&Ft.classList.add("norotate");const{pageWidth:Wt,pageHeight:Yt,pageX:fe,pageY:de}=Mt.rawDims;if(!J.rect||this instanceof D){const{rotation:Be}=J;return!J.hasOwnCanvas&&Be!==0&&this.setRotation(Be,Ft),Ft}const{width:se,height:Ve}=v(J.rect),me=i.Util.normalizeRect([J.rect[0],pt.view[3]-J.rect[1]+pt.view[1],J.rect[2],pt.view[3]-J.rect[3]+pt.view[1]]);if(!nt&&J.borderStyle.width>0){Ft.style.borderWidth=`${J.borderStyle.width}px`;const Be=J.borderStyle.horizontalCornerRadius,$e=J.borderStyle.verticalCornerRadius;if(Be>0||$e>0){const bn=`calc(${Be}px * var(--scale-factor)) / calc(${$e}px * var(--scale-factor))`;Ft.style.borderRadius=bn}else if(this instanceof T){const bn=`calc(${se}px * var(--scale-factor)) / calc(${Ve}px * var(--scale-factor))`;Ft.style.borderRadius=bn}switch(J.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:Ft.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:Ft.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:Ft.style.borderBottomStyle="solid";break}const cn=J.borderColor||null;cn?(x(this,U,!0),Ft.style.borderColor=i.Util.makeHexColor(cn[0]|0,cn[1]|0,cn[2]|0)):Ft.style.borderWidth=0}Ft.style.left=`${100*(me[0]-fe)/Wt}%`,Ft.style.top=`${100*(me[1]-de)/Yt}%`;const{rotation:Ae}=J;return J.hasOwnCanvas||Ae===0?(Ft.style.width=`${100*se/Wt}%`,Ft.style.height=`${100*Ve/Yt}%`):this.setRotation(Ae,Ft),Ft}setRotation(nt,J=this.container){if(!this.data.rect)return;const{pageWidth:pt,pageHeight:Mt}=this.parent.viewport.rawDims,{width:Ft,height:Wt}=v(this.data.rect);let Yt,fe;nt%180===0?(Yt=100*Ft/pt,fe=100*Wt/Mt):(Yt=100*Wt/pt,fe=100*Ft/Mt),J.style.width=`${Yt}%`,J.style.height=`${fe}%`,J.setAttribute("data-main-rotation",(360-nt)%360)}get _commonActions(){const nt=(J,pt,Mt)=>{const Ft=Mt.detail[J],Wt=Ft[0],Yt=Ft.slice(1);Mt.target.style[pt]=c.ColorConverters[`${Wt}_HTML`](Yt),this.annotationStorage.setValue(this.data.id,{[pt]:c.ColorConverters[`${Wt}_rgb`](Yt)})};return(0,i.shadow)(this,"_commonActions",{display:J=>{const{display:pt}=J.detail,Mt=pt%2===1;this.container.style.visibility=Mt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Mt,noPrint:pt===1||pt===2})},print:J=>{this.annotationStorage.setValue(this.data.id,{noPrint:!J.detail.print})},hidden:J=>{const{hidden:pt}=J.detail;this.container.style.visibility=pt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:pt,noView:pt})},focus:J=>{setTimeout(()=>J.target.focus({preventScroll:!1}),0)},userName:J=>{J.target.title=J.detail.userName},readonly:J=>{J.target.disabled=J.detail.readonly},required:J=>{this._setRequired(J.target,J.detail.required)},bgColor:J=>{nt("bgColor","backgroundColor",J)},fillColor:J=>{nt("fillColor","backgroundColor",J)},fgColor:J=>{nt("fgColor","color",J)},textColor:J=>{nt("textColor","color",J)},borderColor:J=>{nt("borderColor","borderColor",J)},strokeColor:J=>{nt("strokeColor","borderColor",J)},rotation:J=>{const pt=J.detail.rotation;this.setRotation(pt),this.annotationStorage.setValue(this.data.id,{rotation:pt})}})}_dispatchEventFromSandbox(nt,J){const pt=this._commonActions;for(const Mt of Object.keys(J.detail)){const Ft=nt[Mt]||pt[Mt];Ft==null||Ft(J)}}_setDefaultPropertiesFromJS(nt){if(!this.enableScripting)return;const J=this.annotationStorage.getRawValue(this.data.id);if(!J)return;const pt=this._commonActions;for(const[Mt,Ft]of Object.entries(J)){const Wt=pt[Mt];if(Wt){const Yt={detail:{[Mt]:Ft},target:nt};Wt(Yt),delete J[Mt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:nt}=this.data;if(!nt)return;const[J,pt,Mt,Ft]=this.data.rect;if(nt.length===1){const[,{x:$e,y:cn},{x:bn,y:oi}]=nt[0];if(Mt===$e&&Ft===cn&&J===bn&&pt===oi)return}const{style:Wt}=this.container;let Yt;if(a(this,U)){const{borderColor:$e,borderWidth:cn}=Wt;Wt.borderWidth=0,Yt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${$e}" stroke-width="${cn}">`],this.container.classList.add("hasBorder")}const fe=Mt-J,de=Ft-pt,{svgFactory:se}=this,Ve=se.createElement("svg");Ve.classList.add("quadrilateralsContainer"),Ve.setAttribute("width",0),Ve.setAttribute("height",0);const me=se.createElement("defs");Ve.append(me);const Ae=se.createElement("clipPath"),Be=`clippath_${this.data.id}`;Ae.setAttribute("id",Be),Ae.setAttribute("clipPathUnits","objectBoundingBox"),me.append(Ae);for(const[,{x:$e,y:cn},{x:bn,y:oi}]of nt){const jn=se.createElement("rect"),os=(bn-J)/fe,bs=(Ft-cn)/de,Es=($e-bn)/fe,dc=(cn-oi)/de;jn.setAttribute("x",os),jn.setAttribute("y",bs),jn.setAttribute("width",Es),jn.setAttribute("height",dc),Ae.append(jn),Yt==null||Yt.push(`<rect vector-effect="non-scaling-stroke" x="${os}" y="${bs}" width="${Es}" height="${dc}"/>`)}a(this,U)&&(Yt.push("</g></svg>')"),Wt.backgroundImage=Yt.join("")),this.container.append(Ve),this.container.style.clipPath=`url(#${Be})`}_createPopup(){const{container:nt,data:J}=this;nt.setAttribute("aria-haspopup","dialog");const pt=new D({data:{color:J.color,titleObj:J.titleObj,modificationDate:J.modificationDate,contentsObj:J.contentsObj,richText:J.richText,parentRect:J.rect,borderStyle:0,id:`popup_${J.id}`,rotation:J.rotation},parent:this.parent,elements:[this]});this.parent.div.append(pt.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(nt,J=null){const pt=[];if(this._fieldObjects){const Mt=this._fieldObjects[nt];if(Mt)for(const{page:Ft,id:Wt,exportValues:Yt}of Mt){if(Ft===-1||Wt===J)continue;const fe=typeof Yt=="string"?Yt:null,de=document.querySelector(`[data-element-id="${Wt}"]`);if(de&&!m.has(de)){(0,i.warn)(`_getElementsByName - element not allowed: ${Wt}`);continue}pt.push({id:Wt,exportValue:fe,domElement:de})}return pt}for(const Mt of document.getElementsByName(nt)){const{exportValue:Ft}=Mt,Wt=Mt.getAttribute("data-element-id");Wt!==J&&m.has(Mt)&&pt.push({id:Wt,exportValue:Ft,domElement:Mt})}return pt}show(){var nt;this.container&&(this.container.hidden=!1),(nt=this.popup)==null||nt.maybeShow()}hide(){var nt;this.container&&(this.container.hidden=!0),(nt=this.popup)==null||nt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const nt=this.getElementsToTriggerPopup();if(Array.isArray(nt))for(const J of nt)J.classList.add("highlightArea");else nt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:nt,data:{id:J}}=this;this.container.addEventListener("dblclick",()=>{var pt;(pt=this.linkService.eventBus)==null||pt.dispatch("switchannotationeditormode",{source:this,mode:nt,editId:J})})}};U=new WeakMap;let A=K;class S extends A{constructor(J,pt=null){super(J,{isRenderable:!0,ignoreBorder:!!(pt!=null&&pt.ignoreBorder),createQuadrilaterals:!0});M(this,X);this.isTooltipOnly=J.data.isTooltipOnly}render(){const{data:J,linkService:pt}=this,Mt=document.createElement("a");Mt.setAttribute("data-element-id",J.id);let Ft=!1;return J.url?(pt.addLinkAttributes(Mt,J.url,J.newWindow),Ft=!0):J.action?(this._bindNamedAction(Mt,J.action),Ft=!0):J.attachment?(this._bindAttachment(Mt,J.attachment),Ft=!0):J.setOCGState?(w(this,X,ob).call(this,Mt,J.setOCGState),Ft=!0):J.dest?(this._bindLink(Mt,J.dest),Ft=!0):(J.actions&&(J.actions.Action||J.actions["Mouse Up"]||J.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Mt,J),Ft=!0),J.resetForm?(this._bindResetFormAction(Mt,J.resetForm),Ft=!0):this.isTooltipOnly&&!Ft&&(this._bindLink(Mt,""),Ft=!0)),this.container.classList.add("linkAnnotation"),Ft&&this.container.append(Mt),this.container}_bindLink(J,pt){J.href=this.linkService.getDestinationHash(pt),J.onclick=()=>(pt&&this.linkService.goToDestination(pt),!1),(pt||pt==="")&&w(this,X,hl).call(this)}_bindNamedAction(J,pt){J.href=this.linkService.getAnchorUrl(""),J.onclick=()=>(this.linkService.executeNamedAction(pt),!1),w(this,X,hl).call(this)}_bindAttachment(J,pt){J.href=this.linkService.getAnchorUrl(""),J.onclick=()=>{var Mt;return(Mt=this.downloadManager)==null||Mt.openOrDownloadData(this.container,pt.content,pt.filename),!1},w(this,X,hl).call(this)}_bindJSAction(J,pt){J.href=this.linkService.getAnchorUrl("");const Mt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Ft of Object.keys(pt.actions)){const Wt=Mt.get(Ft);Wt&&(J[Wt]=()=>{var Yt;return(Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:pt.id,name:Ft}}),!1})}J.onclick||(J.onclick=()=>!1),w(this,X,hl).call(this)}_bindResetFormAction(J,pt){const Mt=J.onclick;if(Mt||(J.href=this.linkService.getAnchorUrl("")),w(this,X,hl).call(this),!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Mt||(J.onclick=()=>!1);return}J.onclick=()=>{var Ve;Mt==null||Mt();const{fields:Ft,refs:Wt,include:Yt}=pt,fe=[];if(Ft.length!==0||Wt.length!==0){const me=new Set(Wt);for(const Ae of Ft){const Be=this._fieldObjects[Ae]||[];for(const{id:$e}of Be)me.add($e)}for(const Ae of Object.values(this._fieldObjects))for(const Be of Ae)me.has(Be.id)===Yt&&fe.push(Be)}else for(const me of Object.values(this._fieldObjects))fe.push(...me);const de=this.annotationStorage,se=[];for(const me of fe){const{id:Ae}=me;switch(se.push(Ae),me.type){case"text":{const $e=me.defaultValue||"";de.setValue(Ae,{value:$e});break}case"checkbox":case"radiobutton":{const $e=me.defaultValue===me.exportValues;de.setValue(Ae,{value:$e});break}case"combobox":case"listbox":{const $e=me.defaultValue||"";de.setValue(Ae,{value:$e});break}default:continue}const Be=document.querySelector(`[data-element-id="${Ae}"]`);if(Be){if(!m.has(Be)){(0,i.warn)(`_bindResetFormAction - element not allowed: ${Ae}`);continue}}else continue;Be.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ve=this.linkService.eventBus)==null||Ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:se,name:"ResetForm"}})),!1}}}X=new WeakSet,hl=function(){this.container.setAttribute("data-internal-link","")},ob=function(J,pt){J.href=this.linkService.getAnchorUrl(""),J.onclick=()=>(this.linkService.executeSetOCGState(pt),!1),w(this,X,hl).call(this)};class C extends A{constructor(nt){super(nt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const nt=document.createElement("img");return nt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",nt.alt="[{{type}} Annotation]",nt.dataset.l10nId="text_annotation_type",nt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(nt),this.container}}class b extends A{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(nt){var J;this.data.hasOwnCanvas&&(((J=nt.previousSibling)==null?void 0:J.nodeName)==="CANVAS"&&(nt.previousSibling.hidden=!0),nt.hidden=!1)}_getKeyModifier(nt){const{isWin:J,isMac:pt}=i.FeatureTest.platform;return J&&nt.ctrlKey||pt&&nt.metaKey}_setEventListener(nt,J,pt,Mt,Ft){pt.includes("mouse")?nt.addEventListener(pt,Wt=>{var Yt;(Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Mt,value:Ft(Wt),shift:Wt.shiftKey,modifier:this._getKeyModifier(Wt)}})}):nt.addEventListener(pt,Wt=>{var Yt;if(pt==="blur"){if(!J.focused||!Wt.relatedTarget)return;J.focused=!1}else if(pt==="focus"){if(J.focused)return;J.focused=!0}Ft&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Mt,value:Ft(Wt)}}))})}_setEventListeners(nt,J,pt,Mt){var Ft,Wt,Yt;for(const[fe,de]of pt)(de==="Action"||(Ft=this.data.actions)!=null&&Ft[de])&&((de==="Focus"||de==="Blur")&&(J||(J={focused:!1})),this._setEventListener(nt,J,fe,de,Mt),de==="Focus"&&!((Wt=this.data.actions)!=null&&Wt.Blur)?this._setEventListener(nt,J,"blur","Blur",null):de==="Blur"&&!((Yt=this.data.actions)!=null&&Yt.Focus)&&this._setEventListener(nt,J,"focus","Focus",null))}_setBackgroundColor(nt){const J=this.data.backgroundColor||null;nt.style.backgroundColor=J===null?"transparent":i.Util.makeHexColor(J[0],J[1],J[2])}_setTextStyle(nt){const J=["left","center","right"],{fontColor:pt}=this.data.defaultAppearanceData,Mt=this.data.defaultAppearanceData.fontSize||d,Ft=nt.style;let Wt;const Yt=2,fe=de=>Math.round(10*de)/10;if(this.data.multiLine){const de=Math.abs(this.data.rect[3]-this.data.rect[1]-Yt),se=Math.round(de/(i.LINE_FACTOR*Mt))||1,Ve=de/se;Wt=Math.min(Mt,fe(Ve/i.LINE_FACTOR))}else{const de=Math.abs(this.data.rect[3]-this.data.rect[1]-Yt);Wt=Math.min(Mt,fe(de/i.LINE_FACTOR))}Ft.fontSize=`calc(${Wt}px * var(--scale-factor))`,Ft.color=i.Util.makeHexColor(pt[0],pt[1],pt[2]),this.data.textAlignment!==null&&(Ft.textAlign=J[this.data.textAlignment])}_setRequired(nt,J){J?nt.setAttribute("required",!0):nt.removeAttribute("required"),nt.setAttribute("aria-required",J)}}class I extends b{constructor(nt){const J=nt.renderForms||!nt.data.hasAppearance&&!!nt.data.fieldValue;super(nt,{isRenderable:J})}setPropertyOnSiblings(nt,J,pt,Mt){const Ft=this.annotationStorage;for(const Wt of this._getElementsByName(nt.name,nt.id))Wt.domElement&&(Wt.domElement[J]=pt),Ft.setValue(Wt.id,{[Mt]:pt})}render(){var Mt,Ft;const nt=this.annotationStorage,J=this.data.id;this.container.classList.add("textWidgetAnnotation");let pt=null;if(this.renderForms){const Wt=nt.getValue(J,{value:this.data.fieldValue});let Yt=Wt.value||"";const fe=nt.getValue(J,{charLimit:this.data.maxLen}).charLimit;fe&&Yt.length>fe&&(Yt=Yt.slice(0,fe));let de=Wt.formattedValue||((Mt=this.data.textContent)==null?void 0:Mt.join(`
`))||null;de&&this.data.comb&&(de=de.replaceAll(/\s+/g,""));const se={userValue:Yt,formattedValue:de,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(pt=document.createElement("textarea"),pt.textContent=de??Yt,this.data.doNotScroll&&(pt.style.overflowY="hidden")):(pt=document.createElement("input"),pt.type="text",pt.setAttribute("value",de??Yt),this.data.doNotScroll&&(pt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(pt.hidden=!0),m.add(pt),pt.setAttribute("data-element-id",J),pt.disabled=this.data.readOnly,pt.name=this.data.fieldName,pt.tabIndex=f,this._setRequired(pt,this.data.required),fe&&(pt.maxLength=fe),pt.addEventListener("input",me=>{nt.setValue(J,{value:me.target.value}),this.setPropertyOnSiblings(pt,"value",me.target.value,"value"),se.formattedValue=null}),pt.addEventListener("resetform",me=>{const Ae=this.data.defaultFieldValue??"";pt.value=se.userValue=Ae,se.formattedValue=null});let Ve=me=>{const{formattedValue:Ae}=se;Ae!=null&&(me.target.value=Ae),me.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){pt.addEventListener("focus",Ae=>{if(se.focused)return;const{target:Be}=Ae;se.userValue&&(Be.value=se.userValue),se.lastCommittedValue=Be.value,se.commitKey=1,se.focused=!0}),pt.addEventListener("updatefromsandbox",Ae=>{this.showElementAndHideCanvas(Ae.target);const Be={value($e){se.userValue=$e.detail.value??"",nt.setValue(J,{value:se.userValue.toString()}),$e.target.value=se.userValue},formattedValue($e){const{formattedValue:cn}=$e.detail;se.formattedValue=cn,cn!=null&&$e.target!==document.activeElement&&($e.target.value=cn),nt.setValue(J,{formattedValue:cn})},selRange($e){$e.target.setSelectionRange(...$e.detail.selRange)},charLimit:$e=>{var jn;const{charLimit:cn}=$e.detail,{target:bn}=$e;if(cn===0){bn.removeAttribute("maxLength");return}bn.setAttribute("maxLength",cn);let oi=se.userValue;!oi||oi.length<=cn||(oi=oi.slice(0,cn),bn.value=se.userValue=oi,nt.setValue(J,{value:oi}),(jn=this.linkService.eventBus)==null||jn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:J,name:"Keystroke",value:oi,willCommit:!0,commitKey:1,selStart:bn.selectionStart,selEnd:bn.selectionEnd}}))}};this._dispatchEventFromSandbox(Be,Ae)}),pt.addEventListener("keydown",Ae=>{var cn;se.commitKey=1;let Be=-1;if(Ae.key==="Escape"?Be=0:Ae.key==="Enter"&&!this.data.multiLine?Be=2:Ae.key==="Tab"&&(se.commitKey=3),Be===-1)return;const{value:$e}=Ae.target;se.lastCommittedValue!==$e&&(se.lastCommittedValue=$e,se.userValue=$e,(cn=this.linkService.eventBus)==null||cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:J,name:"Keystroke",value:$e,willCommit:!0,commitKey:Be,selStart:Ae.target.selectionStart,selEnd:Ae.target.selectionEnd}}))});const me=Ve;Ve=null,pt.addEventListener("blur",Ae=>{var $e;if(!se.focused||!Ae.relatedTarget)return;se.focused=!1;const{value:Be}=Ae.target;se.userValue=Be,se.lastCommittedValue!==Be&&(($e=this.linkService.eventBus)==null||$e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:J,name:"Keystroke",value:Be,willCommit:!0,commitKey:se.commitKey,selStart:Ae.target.selectionStart,selEnd:Ae.target.selectionEnd}})),me(Ae)}),(Ft=this.data.actions)!=null&&Ft.Keystroke&&pt.addEventListener("beforeinput",Ae=>{var bs;se.lastCommittedValue=null;const{data:Be,target:$e}=Ae,{value:cn,selectionStart:bn,selectionEnd:oi}=$e;let jn=bn,os=oi;switch(Ae.inputType){case"deleteWordBackward":{const Es=cn.substring(0,bn).match(/\w*[^\w]*$/);Es&&(jn-=Es[0].length);break}case"deleteWordForward":{const Es=cn.substring(bn).match(/^[^\w]*\w*/);Es&&(os+=Es[0].length);break}case"deleteContentBackward":bn===oi&&(jn-=1);break;case"deleteContentForward":bn===oi&&(os+=1);break}Ae.preventDefault(),(bs=this.linkService.eventBus)==null||bs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:J,name:"Keystroke",value:cn,change:Be||"",willCommit:!1,selStart:jn,selEnd:os}})}),this._setEventListeners(pt,se,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ae=>Ae.target.value)}if(Ve&&pt.addEventListener("blur",Ve),this.data.comb){const Ae=(this.data.rect[2]-this.data.rect[0])/fe;pt.classList.add("comb"),pt.style.letterSpacing=`calc(${Ae}px * var(--scale-factor) - 1ch)`}}else pt=document.createElement("div"),pt.textContent=this.data.fieldValue,pt.style.verticalAlign="middle",pt.style.display="table-cell";return this._setTextStyle(pt),this._setBackgroundColor(pt),this._setDefaultPropertiesFromJS(pt),this.container.append(pt),this.container}}class B extends b{constructor(nt){super(nt,{isRenderable:!!nt.data.hasOwnCanvas})}}class N extends b{constructor(nt){super(nt,{isRenderable:nt.renderForms})}render(){const nt=this.annotationStorage,J=this.data,pt=J.id;let Mt=nt.getValue(pt,{value:J.exportValue===J.fieldValue}).value;typeof Mt=="string"&&(Mt=Mt!=="Off",nt.setValue(pt,{value:Mt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Ft=document.createElement("input");return m.add(Ft),Ft.setAttribute("data-element-id",pt),Ft.disabled=J.readOnly,this._setRequired(Ft,this.data.required),Ft.type="checkbox",Ft.name=J.fieldName,Mt&&Ft.setAttribute("checked",!0),Ft.setAttribute("exportValue",J.exportValue),Ft.tabIndex=f,Ft.addEventListener("change",Wt=>{const{name:Yt,checked:fe}=Wt.target;for(const de of this._getElementsByName(Yt,pt)){const se=fe&&de.exportValue===J.exportValue;de.domElement&&(de.domElement.checked=se),nt.setValue(de.id,{value:se})}nt.setValue(pt,{value:fe})}),Ft.addEventListener("resetform",Wt=>{const Yt=J.defaultFieldValue||"Off";Wt.target.checked=Yt===J.exportValue}),this.enableScripting&&this.hasJSActions&&(Ft.addEventListener("updatefromsandbox",Wt=>{const Yt={value(fe){fe.target.checked=fe.detail.value!=="Off",nt.setValue(pt,{value:fe.target.checked})}};this._dispatchEventFromSandbox(Yt,Wt)}),this._setEventListeners(Ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Wt=>Wt.target.checked)),this._setBackgroundColor(Ft),this._setDefaultPropertiesFromJS(Ft),this.container.append(Ft),this.container}}class T extends b{constructor(nt){super(nt,{isRenderable:nt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const nt=this.annotationStorage,J=this.data,pt=J.id;let Mt=nt.getValue(pt,{value:J.fieldValue===J.buttonValue}).value;typeof Mt=="string"&&(Mt=Mt!==J.buttonValue,nt.setValue(pt,{value:Mt}));const Ft=document.createElement("input");if(m.add(Ft),Ft.setAttribute("data-element-id",pt),Ft.disabled=J.readOnly,this._setRequired(Ft,this.data.required),Ft.type="radio",Ft.name=J.fieldName,Mt&&Ft.setAttribute("checked",!0),Ft.tabIndex=f,Ft.addEventListener("change",Wt=>{const{name:Yt,checked:fe}=Wt.target;for(const de of this._getElementsByName(Yt,pt))nt.setValue(de.id,{value:!1});nt.setValue(pt,{value:fe})}),Ft.addEventListener("resetform",Wt=>{const Yt=J.defaultFieldValue;Wt.target.checked=Yt!=null&&Yt===J.buttonValue}),this.enableScripting&&this.hasJSActions){const Wt=J.buttonValue;Ft.addEventListener("updatefromsandbox",Yt=>{const fe={value:de=>{const se=Wt===de.detail.value;for(const Ve of this._getElementsByName(de.target.name)){const me=se&&Ve.id===pt;Ve.domElement&&(Ve.domElement.checked=me),nt.setValue(Ve.id,{value:me})}}};this._dispatchEventFromSandbox(fe,Yt)}),this._setEventListeners(Ft,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Yt=>Yt.target.checked)}return this._setBackgroundColor(Ft),this._setDefaultPropertiesFromJS(Ft),this.container.append(Ft),this.container}}class L extends S{constructor(nt){super(nt,{ignoreBorder:nt.data.hasAppearance})}render(){const nt=super.render();nt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(nt.title=this.data.alternativeText);const J=nt.lastChild;return this.enableScripting&&this.hasJSActions&&J&&(this._setDefaultPropertiesFromJS(J),J.addEventListener("updatefromsandbox",pt=>{this._dispatchEventFromSandbox({},pt)})),nt}}class k extends b{constructor(nt){super(nt,{isRenderable:nt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const nt=this.annotationStorage,J=this.data.id,pt=nt.getValue(J,{value:this.data.fieldValue}),Mt=document.createElement("select");m.add(Mt),Mt.setAttribute("data-element-id",J),Mt.disabled=this.data.readOnly,this._setRequired(Mt,this.data.required),Mt.name=this.data.fieldName,Mt.tabIndex=f;let Ft=this.data.combo&&this.data.options.length>0;this.data.combo||(Mt.size=this.data.options.length,this.data.multiSelect&&(Mt.multiple=!0)),Mt.addEventListener("resetform",se=>{const Ve=this.data.defaultFieldValue;for(const me of Mt.options)me.selected=me.value===Ve});for(const se of this.data.options){const Ve=document.createElement("option");Ve.textContent=se.displayValue,Ve.value=se.exportValue,pt.value.includes(se.exportValue)&&(Ve.setAttribute("selected",!0),Ft=!1),Mt.append(Ve)}let Wt=null;if(Ft){const se=document.createElement("option");se.value=" ",se.setAttribute("hidden",!0),se.setAttribute("selected",!0),Mt.prepend(se),Wt=()=>{se.remove(),Mt.removeEventListener("input",Wt),Wt=null},Mt.addEventListener("input",Wt)}const Yt=se=>{const Ve=se?"value":"textContent",{options:me,multiple:Ae}=Mt;return Ae?Array.prototype.filter.call(me,Be=>Be.selected).map(Be=>Be[Ve]):me.selectedIndex===-1?null:me[me.selectedIndex][Ve]};let fe=Yt(!1);const de=se=>{const Ve=se.target.options;return Array.prototype.map.call(Ve,me=>({displayValue:me.textContent,exportValue:me.value}))};return this.enableScripting&&this.hasJSActions?(Mt.addEventListener("updatefromsandbox",se=>{const Ve={value(me){Wt==null||Wt();const Ae=me.detail.value,Be=new Set(Array.isArray(Ae)?Ae:[Ae]);for(const $e of Mt.options)$e.selected=Be.has($e.value);nt.setValue(J,{value:Yt(!0)}),fe=Yt(!1)},multipleSelection(me){Mt.multiple=!0},remove(me){const Ae=Mt.options,Be=me.detail.remove;Ae[Be].selected=!1,Mt.remove(Be),Ae.length>0&&Array.prototype.findIndex.call(Ae,cn=>cn.selected)===-1&&(Ae[0].selected=!0),nt.setValue(J,{value:Yt(!0),items:de(me)}),fe=Yt(!1)},clear(me){for(;Mt.length!==0;)Mt.remove(0);nt.setValue(J,{value:null,items:[]}),fe=Yt(!1)},insert(me){const{index:Ae,displayValue:Be,exportValue:$e}=me.detail.insert,cn=Mt.children[Ae],bn=document.createElement("option");bn.textContent=Be,bn.value=$e,cn?cn.before(bn):Mt.append(bn),nt.setValue(J,{value:Yt(!0),items:de(me)}),fe=Yt(!1)},items(me){const{items:Ae}=me.detail;for(;Mt.length!==0;)Mt.remove(0);for(const Be of Ae){const{displayValue:$e,exportValue:cn}=Be,bn=document.createElement("option");bn.textContent=$e,bn.value=cn,Mt.append(bn)}Mt.options.length>0&&(Mt.options[0].selected=!0),nt.setValue(J,{value:Yt(!0),items:de(me)}),fe=Yt(!1)},indices(me){const Ae=new Set(me.detail.indices);for(const Be of me.target.options)Be.selected=Ae.has(Be.index);nt.setValue(J,{value:Yt(!0)}),fe=Yt(!1)},editable(me){me.target.disabled=!me.detail.editable}};this._dispatchEventFromSandbox(Ve,se)}),Mt.addEventListener("input",se=>{var me;const Ve=Yt(!0);nt.setValue(J,{value:Ve}),se.preventDefault(),(me=this.linkService.eventBus)==null||me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:J,name:"Keystroke",value:fe,changeEx:Ve,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Mt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],se=>se.target.value)):Mt.addEventListener("input",function(se){nt.setValue(J,{value:Yt(!0)})}),this.data.combo&&this._setTextStyle(Mt),this._setBackgroundColor(Mt),this._setDefaultPropertiesFromJS(Mt),this.container.append(Mt),this.container}}class D extends A{constructor(nt){const{data:J,elements:pt}=nt;super(nt,{isRenderable:A._hasPopupData(J)}),this.elements=pt}render(){this.container.classList.add("popupAnnotation");const nt=new j({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),J=[];for(const pt of this.elements)pt.popup=nt,J.push(pt.data.id),pt.addHighlightArea();return this.container.setAttribute("aria-controls",J.map(pt=>`${i.AnnotationPrefix}${pt}`).join(",")),this.container}}class j{constructor({container:nt,color:J,elements:pt,titleObj:Mt,modificationDate:Ft,contentsObj:Wt,richText:Yt,parent:fe,rect:de,parentRect:se,open:Ve}){M(this,Qt);M(this,wt,null);M(this,It,w(this,Qt,lb).bind(this));M(this,Dt,w(this,Qt,my).bind(this));M(this,Ht,w(this,Qt,gy).bind(this));M(this,Vt,w(this,Qt,sg).bind(this));M(this,Gt,null);M(this,xt,null);M(this,Pt,null);M(this,q,null);M(this,st,null);M(this,vt,null);M(this,Ct,!1);M(this,Ot,null);M(this,qt,null);M(this,Ut,null);M(this,yt,null);M(this,ne,!1);var Ae;x(this,xt,nt),x(this,yt,Mt),x(this,Pt,Wt),x(this,Ut,Yt),x(this,st,fe),x(this,Gt,J),x(this,qt,de),x(this,vt,se),x(this,q,pt);const me=o.PDFDateString.toDateObject(Ft);me&&x(this,wt,fe.l10n.get("annotation_date_string",{date:me.toLocaleDateString(),time:me.toLocaleTimeString()})),this.trigger=pt.flatMap(Be=>Be.getElementsToTriggerPopup());for(const Be of this.trigger)Be.addEventListener("click",a(this,Vt)),Be.addEventListener("mouseenter",a(this,Ht)),Be.addEventListener("mouseleave",a(this,Dt)),Be.classList.add("popupTriggerArea");for(const Be of pt)(Ae=Be.container)==null||Ae.addEventListener("keydown",a(this,It));a(this,xt).hidden=!0,Ve&&w(this,Qt,sg).call(this)}render(){if(a(this,Ot))return;const{page:{view:nt},viewport:{rawDims:{pageWidth:J,pageHeight:pt,pageX:Mt,pageY:Ft}}}=a(this,st),Wt=x(this,Ot,document.createElement("div"));if(Wt.className="popup",a(this,Gt)){const jn=Wt.style.outlineColor=i.Util.makeHexColor(...a(this,Gt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Wt.style.backgroundColor=`color-mix(in srgb, ${jn} 30%, white)`:Wt.style.backgroundColor=i.Util.makeHexColor(...a(this,Gt).map(bs=>Math.floor(.7*(255-bs)+bs)))}const Yt=document.createElement("span");Yt.className="header";const fe=document.createElement("h1");if(Yt.append(fe),{dir:fe.dir,str:fe.textContent}=a(this,yt),Wt.append(Yt),a(this,wt)){const jn=document.createElement("span");jn.classList.add("popupDate"),a(this,wt).then(os=>{jn.textContent=os}),Yt.append(jn)}const de=a(this,Pt),se=a(this,Ut);if(se!=null&&se.str&&(!(de!=null&&de.str)||de.str===se.str))h.XfaLayer.render({xfaHtml:se.html,intent:"richText",div:Wt}),Wt.lastChild.classList.add("richText","popupContent");else{const jn=this._formatContents(de);Wt.append(jn)}let Ve=!!a(this,vt),me=Ve?a(this,vt):a(this,qt);for(const jn of a(this,q))if(!me||i.Util.intersect(jn.data.rect,me)!==null){me=jn.data.rect,Ve=!0;break}const Ae=i.Util.normalizeRect([me[0],nt[3]-me[1]+nt[1],me[2],nt[3]-me[3]+nt[1]]),$e=Ve?me[2]-me[0]+5:0,cn=Ae[0]+$e,bn=Ae[1],{style:oi}=a(this,xt);oi.left=`${100*(cn-Mt)/J}%`,oi.top=`${100*(bn-Ft)/pt}%`,a(this,xt).append(Wt)}_formatContents({str:nt,dir:J}){const pt=document.createElement("p");pt.classList.add("popupContent"),pt.dir=J;const Mt=nt.split(/(?:\r\n?|\n)/);for(let Ft=0,Wt=Mt.length;Ft<Wt;++Ft){const Yt=Mt[Ft];pt.append(document.createTextNode(Yt)),Ft<Wt-1&&pt.append(document.createElement("br"))}return pt}forceHide(){x(this,ne,this.isVisible),a(this,ne)&&(a(this,xt).hidden=!0)}maybeShow(){a(this,ne)&&(x(this,ne,!1),a(this,xt).hidden=!1)}get isVisible(){return a(this,xt).hidden===!1}}wt=new WeakMap,It=new WeakMap,Dt=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,Gt=new WeakMap,xt=new WeakMap,Pt=new WeakMap,q=new WeakMap,st=new WeakMap,vt=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,qt=new WeakMap,Ut=new WeakMap,yt=new WeakMap,ne=new WeakMap,Qt=new WeakSet,lb=function(nt){nt.altKey||nt.shiftKey||nt.ctrlKey||nt.metaKey||(nt.key==="Enter"||nt.key==="Escape"&&a(this,Ct))&&w(this,Qt,sg).call(this)},sg=function(){x(this,Ct,!a(this,Ct)),a(this,Ct)?(w(this,Qt,gy).call(this),a(this,xt).addEventListener("click",a(this,Vt)),a(this,xt).addEventListener("keydown",a(this,It))):(w(this,Qt,my).call(this),a(this,xt).removeEventListener("click",a(this,Vt)),a(this,xt).removeEventListener("keydown",a(this,It)))},gy=function(){a(this,Ot)||this.render(),this.isVisible?a(this,Ct)&&a(this,xt).classList.add("focused"):(a(this,xt).hidden=!1,a(this,xt).style.zIndex=parseInt(a(this,xt).style.zIndex)+1e3)},my=function(){a(this,xt).classList.remove("focused"),!(a(this,Ct)||!this.isVisible)&&(a(this,xt).hidden=!0,a(this,xt).style.zIndex=parseInt(a(this,xt).style.zIndex)-1e3)};class Z extends A{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=nt.data.textContent,this.textPosition=nt.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const nt=document.createElement("div");nt.classList.add("annotationTextContent"),nt.setAttribute("role","comment");for(const J of this.textContent){const pt=document.createElement("span");pt.textContent=J,nt.append(pt)}this.container.append(nt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=Z;class O extends A{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0});M(this,Ee,null)}render(){this.container.classList.add("lineAnnotation");const J=this.data,{width:pt,height:Mt}=v(J.rect),Ft=this.svgFactory.create(pt,Mt,!0),Wt=x(this,Ee,this.svgFactory.createElement("svg:line"));return Wt.setAttribute("x1",J.rect[2]-J.lineCoordinates[0]),Wt.setAttribute("y1",J.rect[3]-J.lineCoordinates[1]),Wt.setAttribute("x2",J.rect[2]-J.lineCoordinates[2]),Wt.setAttribute("y2",J.rect[3]-J.lineCoordinates[3]),Wt.setAttribute("stroke-width",J.borderStyle.width||1),Wt.setAttribute("stroke","transparent"),Wt.setAttribute("fill","transparent"),Ft.append(Wt),this.container.append(Ft),!J.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ee=new WeakMap;class G extends A{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0});M(this,Xe,null)}render(){this.container.classList.add("squareAnnotation");const J=this.data,{width:pt,height:Mt}=v(J.rect),Ft=this.svgFactory.create(pt,Mt,!0),Wt=J.borderStyle.width,Yt=x(this,Xe,this.svgFactory.createElement("svg:rect"));return Yt.setAttribute("x",Wt/2),Yt.setAttribute("y",Wt/2),Yt.setAttribute("width",pt-Wt),Yt.setAttribute("height",Mt-Wt),Yt.setAttribute("stroke-width",Wt||1),Yt.setAttribute("stroke","transparent"),Yt.setAttribute("fill","transparent"),Ft.append(Yt),this.container.append(Ft),!J.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Xe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xe=new WeakMap;class Q extends A{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0});M(this,dn,null)}render(){this.container.classList.add("circleAnnotation");const J=this.data,{width:pt,height:Mt}=v(J.rect),Ft=this.svgFactory.create(pt,Mt,!0),Wt=J.borderStyle.width,Yt=x(this,dn,this.svgFactory.createElement("svg:ellipse"));return Yt.setAttribute("cx",pt/2),Yt.setAttribute("cy",Mt/2),Yt.setAttribute("rx",pt/2-Wt/2),Yt.setAttribute("ry",Mt/2-Wt/2),Yt.setAttribute("stroke-width",Wt||1),Yt.setAttribute("stroke","transparent"),Yt.setAttribute("fill","transparent"),Ft.append(Yt),this.container.append(Ft),!J.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,dn)}addHighlightArea(){this.container.classList.add("highlightArea")}}dn=new WeakMap;class mt extends A{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0});M(this,zt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const J=this.data,{width:pt,height:Mt}=v(J.rect),Ft=this.svgFactory.create(pt,Mt,!0);let Wt=[];for(const fe of J.vertices){const de=fe.x-J.rect[0],se=J.rect[3]-fe.y;Wt.push(de+","+se)}Wt=Wt.join(" ");const Yt=x(this,zt,this.svgFactory.createElement(this.svgElementName));return Yt.setAttribute("points",Wt),Yt.setAttribute("stroke-width",J.borderStyle.width||1),Yt.setAttribute("stroke","transparent"),Yt.setAttribute("fill","transparent"),Ft.append(Yt),this.container.append(Ft),!J.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class ot extends mt{constructor(nt){super(nt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class dt extends A{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class et extends A{constructor(J){super(J,{isRenderable:!0,ignoreBorder:!0});M(this,bt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const J=this.data,{width:pt,height:Mt}=v(J.rect),Ft=this.svgFactory.create(pt,Mt,!0);for(const Wt of J.inkLists){let Yt=[];for(const de of Wt){const se=de.x-J.rect[0],Ve=J.rect[3]-de.y;Yt.push(`${se},${Ve}`)}Yt=Yt.join(" ");const fe=this.svgFactory.createElement(this.svgElementName);a(this,bt).push(fe),fe.setAttribute("points",Yt),fe.setAttribute("stroke-width",J.borderStyle.width||1),fe.setAttribute("stroke","transparent"),fe.setAttribute("fill","transparent"),!J.popupRef&&this.hasPopupData&&this._createPopup(),Ft.append(fe)}return this.container.append(Ft),this.container}getElementsToTriggerPopup(){return a(this,bt)}addHighlightArea(){this.container.classList.add("highlightArea")}}bt=new WeakMap,t.InkAnnotationElement=et;class it extends A{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class $ extends A{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class tt extends A{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class V extends A{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class H extends A{constructor(nt){super(nt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=H;class R extends A{constructor(J){var Ft;super(J,{isRenderable:!0});M(this,he);M(this,Et,null);const{filename:pt,content:Mt}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(pt,!0),this.content=Mt,(Ft=this.linkService.eventBus)==null||Ft.dispatch("fileattachmentannotation",{source:this,filename:pt,content:Mt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:J,data:pt}=this;let Mt;pt.hasAppearance||pt.fillAlpha===0?Mt=document.createElement("div"):(Mt=document.createElement("img"),Mt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(pt.name)?"paperclip":"pushpin"}.svg`,pt.fillAlpha&&pt.fillAlpha<1&&(Mt.style=`filter: opacity(${Math.round(pt.fillAlpha*100)}%);`)),Mt.addEventListener("dblclick",w(this,he,vy).bind(this)),x(this,Et,Mt);const{isMac:Ft}=i.FeatureTest.platform;return J.addEventListener("keydown",Wt=>{Wt.key==="Enter"&&(Ft?Wt.metaKey:Wt.ctrlKey)&&w(this,he,vy).call(this)}),!pt.popupRef&&this.hasPopupData?this._createPopup():Mt.classList.add("popupTriggerArea"),J.append(Mt),J}getElementsToTriggerPopup(){return a(this,Et)}addHighlightArea(){this.container.classList.add("highlightArea")}}Et=new WeakMap,he=new WeakSet,vy=function(){var J;(J=this.downloadManager)==null||J.openOrDownloadData(this.container,this.content,this.filename)};class F{constructor({div:nt,accessibilityManager:J,annotationCanvasMap:pt,l10n:Mt,page:Ft,viewport:Wt}){M(this,ee);M(this,Te,null);M(this,rt,null);M(this,Nt,new Map);this.div=nt,x(this,Te,J),x(this,rt,pt),this.l10n=Mt,this.page=Ft,this.viewport=Wt,this.zIndex=0,this.l10n||(this.l10n=u.NullL10n)}async render(nt){const{annotations:J}=nt,pt=this.div;(0,o.setLayerDimensions)(pt,this.viewport);const Mt=new Map,Ft={data:null,layer:pt,linkService:nt.linkService,downloadManager:nt.downloadManager,imageResourcesPath:nt.imageResourcesPath||"",renderForms:nt.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:nt.annotationStorage||new r.AnnotationStorage,enableScripting:nt.enableScripting===!0,hasJSActions:nt.hasJSActions,fieldObjects:nt.fieldObjects,parent:this,elements:null};for(const Wt of J){if(Wt.noHTML)continue;const Yt=Wt.annotationType===i.AnnotationType.POPUP;if(Yt){const se=Mt.get(Wt.id);if(!se)continue;Ft.elements=se}else{const{width:se,height:Ve}=v(Wt.rect);if(se<=0||Ve<=0)continue}Ft.data=Wt;const fe=_.create(Ft);if(!fe.isRenderable)continue;if(!Yt&&Wt.popupRef){const se=Mt.get(Wt.popupRef);se?se.push(fe):Mt.set(Wt.popupRef,[fe])}fe.annotationEditorType>0&&a(this,Nt).set(fe.data.id,fe);const de=fe.render();Wt.hidden&&(de.style.visibility="hidden"),w(this,ee,cb).call(this,de,Wt.id)}w(this,ee,yy).call(this),await this.l10n.translate(pt)}update({viewport:nt}){const J=this.div;this.viewport=nt,(0,o.setLayerDimensions)(J,{rotation:nt.rotation}),w(this,ee,yy).call(this),J.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Nt).values())}getEditableAnnotation(nt){return a(this,Nt).get(nt)}}Te=new WeakMap,rt=new WeakMap,Nt=new WeakMap,ee=new WeakSet,cb=function(nt,J){var Mt;const pt=nt.firstChild||nt;pt.id=`${i.AnnotationPrefix}${J}`,this.div.append(nt),(Mt=a(this,Te))==null||Mt.moveElementInDOM(this.div,nt,pt,!1)},yy=function(){if(!a(this,rt))return;const nt=this.div;for(const[J,pt]of a(this,rt)){const Mt=nt.querySelector(`[data-annotation-id="${J}"]`);if(!Mt)continue;const{firstChild:Ft}=Mt;Ft?Ft.nodeName==="CANVAS"?Ft.replaceWith(pt):Ft.before(pt):Mt.append(pt)}a(this,rt).clear()},t.AnnotationLayer=F},(g,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function e(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function i(r){return Math.max(0,Math.min(255,255*r))}class o{static CMYK_G([c,u,h,f]){return["G",1-Math.min(1,.3*c+.59*h+.11*u+f)]}static G_CMYK([c]){return["CMYK",0,0,0,1-c]}static G_RGB([c]){return["RGB",c,c,c]}static G_rgb([c]){return c=i(c),[c,c,c]}static G_HTML([c]){const u=e(c);return`#${u}${u}${u}`}static RGB_G([c,u,h]){return["G",.3*c+.59*u+.11*h]}static RGB_rgb(c){return c.map(i)}static RGB_HTML(c){return`#${c.map(e).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([c,u,h,f]){return["RGB",1-Math.min(1,c+f),1-Math.min(1,h+f),1-Math.min(1,u+f)]}static CMYK_rgb([c,u,h,f]){return[i(1-Math.min(1,c+f)),i(1-Math.min(1,h+f)),i(1-Math.min(1,u+f))]}static CMYK_HTML(c){const u=this.CMYK_RGB(c).slice(1);return this.RGB_HTML(u)}static RGB_CMYK([c,u,h]){const f=1-c,d=1-u,m=1-h,v=Math.min(f,d,m);return["CMYK",f,d,m,v]}}t.ColorConverters=o},(g,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=i;const e={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};e.print_progress_percent="{{progress}}%";function i(c,u){switch(c){case"find_match_count":c=`find_match_count[${u.total===1?"one":"other"}]`;break;case"find_match_count_limit":c=`find_match_count_limit[${u.limit===1?"one":"other"}]`;break}return e[c]||""}function o(c,u){return u?c.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(h,f)=>f in u?u[f]:"{{"+f+"}}"):c}const r={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(c,u=null,h=i(c,u)){return o(h,u)},async translate(c){}};t.NullL10n=r},(g,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var i=e(25);class o{static setupStorage(c,u,h,f,d){const m=f.getValue(u,{value:null});switch(h.name){case"textarea":if(m.value!==null&&(c.textContent=m.value),d==="print")break;c.addEventListener("input",v=>{f.setValue(u,{value:v.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(m.value===h.attributes.xfaOn?c.setAttribute("checked",!0):m.value===h.attributes.xfaOff&&c.removeAttribute("checked"),d==="print")break;c.addEventListener("change",v=>{f.setValue(u,{value:v.target.checked?v.target.getAttribute("xfaOn"):v.target.getAttribute("xfaOff")})})}else{if(m.value!==null&&c.setAttribute("value",m.value),d==="print")break;c.addEventListener("input",v=>{f.setValue(u,{value:v.target.value})})}break;case"select":if(m.value!==null){c.setAttribute("value",m.value);for(const v of h.children)v.attributes.value===m.value?v.attributes.selected=!0:v.attributes.hasOwnProperty("selected")&&delete v.attributes.selected}c.addEventListener("input",v=>{const _=v.target.options,A=_.selectedIndex===-1?"":_[_.selectedIndex].value;f.setValue(u,{value:A})});break}}static setAttributes({html:c,element:u,storage:h=null,intent:f,linkService:d}){const{attributes:m}=u,v=c instanceof HTMLAnchorElement;m.type==="radio"&&(m.name=`${m.name}-${f}`);for(const[_,A]of Object.entries(m))if(A!=null)switch(_){case"class":A.length&&c.setAttribute(_,A.join(" "));break;case"dataId":break;case"id":c.setAttribute("data-element-id",A);break;case"style":Object.assign(c.style,A);break;case"textContent":c.textContent=A;break;default:(!v||_!=="href"&&_!=="newWindow")&&c.setAttribute(_,A)}v&&d.addLinkAttributes(c,m.href,m.newWindow),h&&m.dataId&&this.setupStorage(c,m.dataId,u,h)}static render(c){var S;const u=c.annotationStorage,h=c.linkService,f=c.xfaHtml,d=c.intent||"display",m=document.createElement(f.name);f.attributes&&this.setAttributes({html:m,element:f,intent:d,linkService:h});const v=[[f,-1,m]],_=c.div;if(_.append(m),c.viewport){const C=`matrix(${c.viewport.transform.join(",")})`;_.style.transform=C}d!=="richText"&&_.setAttribute("class","xfaLayer xfaFont");const A=[];for(;v.length>0;){const[C,b,I]=v.at(-1);if(b+1===C.children.length){v.pop();continue}const B=C.children[++v.at(-1)[1]];if(B===null)continue;const{name:N}=B;if(N==="#text"){const L=document.createTextNode(B.value);A.push(L),I.append(L);continue}const T=(S=B==null?void 0:B.attributes)!=null&&S.xmlns?document.createElementNS(B.attributes.xmlns,N):document.createElement(N);if(I.append(T),B.attributes&&this.setAttributes({html:T,element:B,storage:u,intent:d,linkService:h}),B.children&&B.children.length>0)v.push([B,-1,T]);else if(B.value){const L=document.createTextNode(B.value);i.XfaText.shouldBuildText(N)&&A.push(L),T.append(L)}}for(const C of _.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))C.setAttribute("readOnly",!0);return{textDivs:A}}static update(c){const u=`matrix(${c.viewport.transform.join(",")})`;c.div.style.transform=u,c.div.hidden=!1}}t.XfaLayer=o},(g,t,e)=>{var f,d,m,v,_,A,S,C,b,I,B,N,T,L,k,ub,hb,db,fb,_y,pb,Ay,gb,mb,vb,yb,_b,ha,by,rg,ag,nu,Ey,og,X,Ab,wy,bb,Eb,Sy,lg,iu;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var i=e(1),o=e(4),r=e(29),c=e(6),u=e(5);const Gt=class Gt extends o.AnnotationEditor{constructor(q){super({...q,name:"inkEditor"});M(this,k);M(this,f,0);M(this,d,0);M(this,m,this.canvasPointermove.bind(this));M(this,v,this.canvasPointerleave.bind(this));M(this,_,this.canvasPointerup.bind(this));M(this,A,this.canvasPointerdown.bind(this));M(this,S,new Path2D);M(this,C,!1);M(this,b,!1);M(this,I,!1);M(this,B,null);M(this,N,0);M(this,T,0);M(this,L,null);this.color=q.color||null,this.thickness=q.thickness||null,this.opacity=q.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(q){o.AnnotationEditor.initialize(q,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(q,st){switch(q){case i.AnnotationEditorParamsType.INK_THICKNESS:Gt._defaultThickness=st;break;case i.AnnotationEditorParamsType.INK_COLOR:Gt._defaultColor=st;break;case i.AnnotationEditorParamsType.INK_OPACITY:Gt._defaultOpacity=st/100;break}}updateParams(q,st){switch(q){case i.AnnotationEditorParamsType.INK_THICKNESS:w(this,k,ub).call(this,st);break;case i.AnnotationEditorParamsType.INK_COLOR:w(this,k,hb).call(this,st);break;case i.AnnotationEditorParamsType.INK_OPACITY:w(this,k,db).call(this,st);break}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,Gt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,Gt._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(Gt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Gt._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||Gt._defaultColor||o.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Gt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(w(this,k,rg).call(this),w(this,k,ag).call(this)),this.isAttachedToDOM||(this.parent.add(this),w(this,k,nu).call(this)),w(this,k,iu).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,a(this,B).disconnect(),x(this,B,null),super.remove())}setParent(q){!this.parent&&q?this._uiManager.removeShouldRescale(this):this.parent&&q===null&&this._uiManager.addShouldRescale(this),super.setParent(q)}onScaleChanging(){const[q,st]=this.parentDimensions,vt=this.width*q,Ct=this.height*st;this.setDimensions(vt,Ct)}enableEditMode(){a(this,C)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",a(this,A)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",a(this,A)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){a(this,C)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,C,!0),this.div.classList.add("disabled"),w(this,k,iu).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(q){this._focusEventsAllowed&&(super.focusin(q),this.enableEditMode())}canvasPointerdown(q){q.button!==0||!this.isInEditMode()||a(this,C)||(this.setInForeground(),q.preventDefault(),q.type!=="mouse"&&this.div.focus(),w(this,k,pb).call(this,q.offsetX,q.offsetY))}canvasPointermove(q){q.preventDefault(),w(this,k,Ay).call(this,q.offsetX,q.offsetY)}canvasPointerup(q){q.preventDefault(),w(this,k,by).call(this,q)}canvasPointerleave(q){w(this,k,by).call(this,q)}get isResizable(){return!this.isEmpty()&&a(this,C)}render(){if(this.div)return this.div;let q,st;this.width&&(q=this.x,st=this.y),super.render(),o.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Ut=>{var yt;return(yt=this.div)==null?void 0:yt.setAttribute("aria-label",Ut)});const[vt,Ct,Ot,qt]=w(this,k,fb).call(this);if(this.setAt(vt,Ct,0,0),this.setDims(Ot,qt),w(this,k,rg).call(this),this.width){const[Ut,yt]=this.parentDimensions;this.setAspectRatio(this.width*Ut,this.height*yt),this.setAt(q*Ut,st*yt,this.width*Ut,this.height*yt),x(this,I,!0),w(this,k,nu).call(this),this.setDims(this.width*Ut,this.height*yt),w(this,k,ha).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return w(this,k,ag).call(this),this.div}setDimensions(q,st){const vt=Math.round(q),Ct=Math.round(st);if(a(this,N)===vt&&a(this,T)===Ct)return;x(this,N,vt),x(this,T,Ct),this.canvas.style.visibility="hidden";const[Ot,qt]=this.parentDimensions;this.width=q/Ot,this.height=st/qt,this.fixAndSetPosition(),a(this,C)&&w(this,k,Ey).call(this,q,st),w(this,k,nu).call(this),w(this,k,ha).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(q,st,vt){var Ee,Xe,dn;if(q instanceof r.InkAnnotationElement)return null;const Ct=super.deserialize(q,st,vt);Ct.thickness=q.thickness,Ct.color=i.Util.makeHexColor(...q.color),Ct.opacity=q.opacity;const[Ot,qt]=Ct.pageDimensions,Ut=Ct.width*Ot,yt=Ct.height*qt,ne=Ct.parentScale,Qt=q.thickness/2;x(Ct,C,!0),x(Ct,N,Math.round(Ut)),x(Ct,T,Math.round(yt));const{paths:He,rect:Pe,rotation:Qe}=q;for(let{bezier:zt}of He){zt=w(Ee=Gt,X,bb).call(Ee,zt,Pe,Qe);const bt=[];Ct.paths.push(bt);let Et=ne*(zt[0]-Qt),he=ne*(zt[1]-Qt);for(let Te=2,rt=zt.length;Te<rt;Te+=6){const Nt=ne*(zt[Te]-Qt),ee=ne*(zt[Te+1]-Qt),ge=ne*(zt[Te+2]-Qt),ye=ne*(zt[Te+3]-Qt),le=ne*(zt[Te+4]-Qt),nt=ne*(zt[Te+5]-Qt);bt.push([[Et,he],[Nt,ee],[ge,ye],[le,nt]]),Et=le,he=nt}const pe=w(this,X,Ab).call(this,bt);Ct.bezierPath2D.push(pe)}const ce=w(Xe=Ct,k,Sy).call(Xe);return x(Ct,d,Math.max(o.AnnotationEditor.MIN_SIZE,ce[2]-ce[0])),x(Ct,f,Math.max(o.AnnotationEditor.MIN_SIZE,ce[3]-ce[1])),w(dn=Ct,k,Ey).call(dn,Ut,yt),Ct}serialize(){if(this.isEmpty())return null;const q=this.getRect(0,0),st=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:st,thickness:this.thickness,opacity:this.opacity,paths:w(this,k,Eb).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,q),pageIndex:this.pageIndex,rect:q,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};f=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakMap,C=new WeakMap,b=new WeakMap,I=new WeakMap,B=new WeakMap,N=new WeakMap,T=new WeakMap,L=new WeakMap,k=new WeakSet,ub=function(q){const st=this.thickness;this.addCommands({cmd:()=>{this.thickness=q,w(this,k,iu).call(this)},undo:()=>{this.thickness=st,w(this,k,iu).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},hb=function(q){const st=this.color;this.addCommands({cmd:()=>{this.color=q,w(this,k,ha).call(this)},undo:()=>{this.color=st,w(this,k,ha).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},db=function(q){q/=100;const st=this.opacity;this.addCommands({cmd:()=>{this.opacity=q,w(this,k,ha).call(this)},undo:()=>{this.opacity=st,w(this,k,ha).call(this)},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},fb=function(){const{parentRotation:q,parentDimensions:[st,vt]}=this;switch(q){case 90:return[0,vt,vt,st];case 180:return[st,vt,st,vt];case 270:return[st,0,vt,st];default:return[0,0,st,vt]}},_y=function(){const{ctx:q,color:st,opacity:vt,thickness:Ct,parentScale:Ot,scaleFactor:qt}=this;q.lineWidth=Ct*Ot/qt,q.lineCap="round",q.lineJoin="round",q.miterLimit=10,q.strokeStyle=`${st}${(0,u.opacityToHex)(vt)}`},pb=function(q,st){this.canvas.addEventListener("contextmenu",c.noContextMenu),this.canvas.addEventListener("pointerleave",a(this,v)),this.canvas.addEventListener("pointermove",a(this,m)),this.canvas.addEventListener("pointerup",a(this,_)),this.canvas.removeEventListener("pointerdown",a(this,A)),this.isEditing=!0,a(this,I)||(x(this,I,!0),w(this,k,nu).call(this),this.thickness||(this.thickness=Gt._defaultThickness),this.color||(this.color=Gt._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Gt._defaultOpacity)),this.currentPath.push([q,st]),x(this,b,!1),w(this,k,_y).call(this),x(this,L,()=>{w(this,k,vb).call(this),a(this,L)&&window.requestAnimationFrame(a(this,L))}),window.requestAnimationFrame(a(this,L))},Ay=function(q,st){const[vt,Ct]=this.currentPath.at(-1);if(this.currentPath.length>1&&q===vt&&st===Ct)return;const Ot=this.currentPath;let qt=a(this,S);if(Ot.push([q,st]),x(this,b,!0),Ot.length<=2){qt.moveTo(...Ot[0]),qt.lineTo(q,st);return}Ot.length===3&&(x(this,S,qt=new Path2D),qt.moveTo(...Ot[0])),w(this,k,yb).call(this,qt,...Ot.at(-3),...Ot.at(-2),q,st)},gb=function(){if(this.currentPath.length===0)return;const q=this.currentPath.at(-1);a(this,S).lineTo(...q)},mb=function(q,st){x(this,L,null),q=Math.min(Math.max(q,0),this.canvas.width),st=Math.min(Math.max(st,0),this.canvas.height),w(this,k,Ay).call(this,q,st),w(this,k,gb).call(this);let vt;if(this.currentPath.length!==1)vt=w(this,k,_b).call(this);else{const yt=[q,st];vt=[[yt,yt.slice(),yt.slice(),yt]]}const Ct=a(this,S),Ot=this.currentPath;this.currentPath=[],x(this,S,new Path2D);const qt=()=>{this.allRawPaths.push(Ot),this.paths.push(vt),this.bezierPath2D.push(Ct),this.rebuild()},Ut=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(w(this,k,rg).call(this),w(this,k,ag).call(this)),w(this,k,iu).call(this))};this.addCommands({cmd:qt,undo:Ut,mustExec:!0})},vb=function(){if(!a(this,b))return;x(this,b,!1);const q=Math.ceil(this.thickness*this.parentScale),st=this.currentPath.slice(-3),vt=st.map(qt=>qt[0]),Ct=st.map(qt=>qt[1]);Math.min(...vt)-q,Math.max(...vt)+q,Math.min(...Ct)-q,Math.max(...Ct)+q;const{ctx:Ot}=this;Ot.save(),Ot.clearRect(0,0,this.canvas.width,this.canvas.height);for(const qt of this.bezierPath2D)Ot.stroke(qt);Ot.stroke(a(this,S)),Ot.restore()},yb=function(q,st,vt,Ct,Ot,qt,Ut){const yt=(st+Ct)/2,ne=(vt+Ot)/2,Qt=(Ct+qt)/2,He=(Ot+Ut)/2;q.bezierCurveTo(yt+2*(Ct-yt)/3,ne+2*(Ot-ne)/3,Qt+2*(Ct-Qt)/3,He+2*(Ot-He)/3,Qt,He)},_b=function(){const q=this.currentPath;if(q.length<=2)return[[q[0],q[0],q.at(-1),q.at(-1)]];const st=[];let vt,[Ct,Ot]=q[0];for(vt=1;vt<q.length-2;vt++){const[Pe,Qe]=q[vt],[ce,Ee]=q[vt+1],Xe=(Pe+ce)/2,dn=(Qe+Ee)/2,zt=[Ct+2*(Pe-Ct)/3,Ot+2*(Qe-Ot)/3],bt=[Xe+2*(Pe-Xe)/3,dn+2*(Qe-dn)/3];st.push([[Ct,Ot],zt,bt,[Xe,dn]]),[Ct,Ot]=[Xe,dn]}const[qt,Ut]=q[vt],[yt,ne]=q[vt+1],Qt=[Ct+2*(qt-Ct)/3,Ot+2*(Ut-Ot)/3],He=[yt+2*(qt-yt)/3,ne+2*(Ut-ne)/3];return st.push([[Ct,Ot],Qt,He,[yt,ne]]),st},ha=function(){if(this.isEmpty()){w(this,k,og).call(this);return}w(this,k,_y).call(this);const{canvas:q,ctx:st}=this;st.setTransform(1,0,0,1,0,0),st.clearRect(0,0,q.width,q.height),w(this,k,og).call(this);for(const vt of this.bezierPath2D)st.stroke(vt)},by=function(q){this.canvas.removeEventListener("pointerleave",a(this,v)),this.canvas.removeEventListener("pointermove",a(this,m)),this.canvas.removeEventListener("pointerup",a(this,_)),this.canvas.addEventListener("pointerdown",a(this,A)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",c.noContextMenu)},10),w(this,k,mb).call(this,q.offsetX,q.offsetY),this.addToAnnotationStorage(),this.setInBackground()},rg=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",o.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(q=>{var st;return(st=this.canvas)==null?void 0:st.setAttribute("aria-label",q)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ag=function(){x(this,B,new ResizeObserver(q=>{const st=q[0].contentRect;st.width&&st.height&&this.setDimensions(st.width,st.height)})),a(this,B).observe(this.div)},nu=function(){if(!a(this,I))return;const[q,st]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*q),this.canvas.height=Math.ceil(this.height*st),w(this,k,og).call(this)},Ey=function(q,st){const vt=w(this,k,lg).call(this),Ct=(q-vt)/a(this,d),Ot=(st-vt)/a(this,f);this.scaleFactor=Math.min(Ct,Ot)},og=function(){const q=w(this,k,lg).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+q,this.translationY*this.scaleFactor+q)},X=new WeakSet,Ab=function(q){const st=new Path2D;for(let vt=0,Ct=q.length;vt<Ct;vt++){const[Ot,qt,Ut,yt]=q[vt];vt===0&&st.moveTo(...Ot),st.bezierCurveTo(qt[0],qt[1],Ut[0],Ut[1],yt[0],yt[1])}return st},wy=function(q,st,vt){const[Ct,Ot,qt,Ut]=st;switch(vt){case 0:for(let yt=0,ne=q.length;yt<ne;yt+=2)q[yt]+=Ct,q[yt+1]=Ut-q[yt+1];break;case 90:for(let yt=0,ne=q.length;yt<ne;yt+=2){const Qt=q[yt];q[yt]=q[yt+1]+Ct,q[yt+1]=Qt+Ot}break;case 180:for(let yt=0,ne=q.length;yt<ne;yt+=2)q[yt]=qt-q[yt],q[yt+1]+=Ot;break;case 270:for(let yt=0,ne=q.length;yt<ne;yt+=2){const Qt=q[yt];q[yt]=qt-q[yt+1],q[yt+1]=Ut-Qt}break;default:throw new Error("Invalid rotation")}return q},bb=function(q,st,vt){const[Ct,Ot,qt,Ut]=st;switch(vt){case 0:for(let yt=0,ne=q.length;yt<ne;yt+=2)q[yt]-=Ct,q[yt+1]=Ut-q[yt+1];break;case 90:for(let yt=0,ne=q.length;yt<ne;yt+=2){const Qt=q[yt];q[yt]=q[yt+1]-Ot,q[yt+1]=Qt-Ct}break;case 180:for(let yt=0,ne=q.length;yt<ne;yt+=2)q[yt]=qt-q[yt],q[yt+1]-=Ot;break;case 270:for(let yt=0,ne=q.length;yt<ne;yt+=2){const Qt=q[yt];q[yt]=Ut-q[yt+1],q[yt+1]=qt-Qt}break;default:throw new Error("Invalid rotation")}return q},Eb=function(q,st,vt,Ct){var ne,Qt;const Ot=[],qt=this.thickness/2,Ut=q*st+qt,yt=q*vt+qt;for(const He of this.paths){const Pe=[],Qe=[];for(let ce=0,Ee=He.length;ce<Ee;ce++){const[Xe,dn,zt,bt]=He[ce],Et=q*Xe[0]+Ut,he=q*Xe[1]+yt,pe=q*dn[0]+Ut,Te=q*dn[1]+yt,rt=q*zt[0]+Ut,Nt=q*zt[1]+yt,ee=q*bt[0]+Ut,ge=q*bt[1]+yt;ce===0&&(Pe.push(Et,he),Qe.push(Et,he)),Pe.push(pe,Te,rt,Nt,ee,ge),Qe.push(pe,Te),ce===Ee-1&&Qe.push(ee,ge)}Ot.push({bezier:w(ne=Gt,X,wy).call(ne,Pe,Ct,this.rotation),points:w(Qt=Gt,X,wy).call(Qt,Qe,Ct,this.rotation)})}return Ot},Sy=function(){let q=1/0,st=-1/0,vt=1/0,Ct=-1/0;for(const Ot of this.paths)for(const[qt,Ut,yt,ne]of Ot){const Qt=i.Util.bezierBoundingBox(...qt,...Ut,...yt,...ne);q=Math.min(q,Qt[0]),vt=Math.min(vt,Qt[1]),st=Math.max(st,Qt[2]),Ct=Math.max(Ct,Qt[3])}return[q,vt,st,Ct]},lg=function(){return a(this,C)?Math.ceil(this.thickness*this.parentScale):0},iu=function(q=!1){if(this.isEmpty())return;if(!a(this,C)){w(this,k,ha).call(this);return}const st=w(this,k,Sy).call(this),vt=w(this,k,lg).call(this);x(this,d,Math.max(o.AnnotationEditor.MIN_SIZE,st[2]-st[0])),x(this,f,Math.max(o.AnnotationEditor.MIN_SIZE,st[3]-st[1]));const Ct=Math.ceil(vt+a(this,d)*this.scaleFactor),Ot=Math.ceil(vt+a(this,f)*this.scaleFactor),[qt,Ut]=this.parentDimensions;this.width=Ct/qt,this.height=Ot/Ut,this.setAspectRatio(Ct,Ot);const yt=this.translationX,ne=this.translationY;this.translationX=-st[0],this.translationY=-st[1],w(this,k,nu).call(this),w(this,k,ha).call(this),x(this,N,Ct),x(this,T,Ot),this.setDims(Ct,Ot);const Qt=q?vt/this.scaleFactor/2:0;this.translate(yt-this.translationX-Qt,ne-this.translationY-Qt)},M(Gt,X),xe(Gt,"_defaultColor",null),xe(Gt,"_defaultOpacity",1),xe(Gt,"_defaultThickness",1),xe(Gt,"_type","ink");let h=Gt;t.InkEditor=h},(g,t,e)=>{var h,f,d,m,v,_,A,S,C,b,I,Kh,Yh,cg,xy,wb,Sb,Cy,ug,xb;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var i=e(1),o=e(4),r=e(6),c=e(29);const G=class G extends o.AnnotationEditor{constructor(ot){super({...ot,name:"stampEditor"});M(this,I);M(this,h,null);M(this,f,null);M(this,d,null);M(this,m,null);M(this,v,null);M(this,_,null);M(this,A,null);M(this,S,null);M(this,C,!1);M(this,b,!1);x(this,m,ot.bitmapUrl),x(this,v,ot.bitmapFile)}static initialize(ot){o.AnnotationEditor.initialize(ot)}static get supportedTypes(){const ot=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,i.shadow)(this,"supportedTypes",ot.map(dt=>`image/${dt}`))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(ot){return this.supportedTypes.includes(ot)}static paste(ot,dt){dt.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:ot.getAsFile()})}remove(){var ot,dt;a(this,f)&&(x(this,h,null),this._uiManager.imageManager.deleteId(a(this,f)),(ot=a(this,_))==null||ot.remove(),x(this,_,null),(dt=a(this,A))==null||dt.disconnect(),x(this,A,null)),super.remove()}rebuild(){if(!this.parent){a(this,f)&&w(this,I,cg).call(this);return}super.rebuild(),this.div!==null&&(a(this,f)&&w(this,I,cg).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(a(this,d)||a(this,h)||a(this,m)||a(this,v))}get isResizable(){return!0}render(){if(this.div)return this.div;let ot,dt;if(this.width&&(ot=this.x,dt=this.y),super.render(),this.div.hidden=!0,a(this,h)?w(this,I,xy).call(this):w(this,I,cg).call(this),this.width){const[et,it]=this.parentDimensions;this.setAt(ot*et,dt*it,this.width*et,this.height*it)}return this.div}static deserialize(ot,dt,et){if(ot instanceof c.StampAnnotationElement)return null;const it=super.deserialize(ot,dt,et),{rect:$,bitmapUrl:tt,bitmapId:V,isSvg:H,accessibilityData:R}=ot;V&&et.imageManager.isValidId(V)?x(it,f,V):x(it,m,tt),x(it,C,H);const[F,U]=it.pageDimensions;return it.width=($[2]-$[0])/F,it.height=($[3]-$[1])/U,R&&(it.altTextData=R),it}serialize(ot=!1,dt=null){if(this.isEmpty())return null;const et={annotationType:i.AnnotationEditorType.STAMP,bitmapId:a(this,f),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,C),structTreeParentId:this._structTreeParentId};if(ot)return et.bitmapUrl=w(this,I,ug).call(this,!0),et.accessibilityData=this.altTextData,et;const{decorative:it,altText:$}=this.altTextData;if(!it&&$&&(et.accessibilityData={type:"Figure",alt:$}),dt===null)return et;dt.stamps||(dt.stamps=new Map);const tt=a(this,C)?(et.rect[2]-et.rect[0])*(et.rect[3]-et.rect[1]):null;if(!dt.stamps.has(a(this,f)))dt.stamps.set(a(this,f),{area:tt,serialized:et}),et.bitmap=w(this,I,ug).call(this,!1);else if(a(this,C)){const V=dt.stamps.get(a(this,f));tt>V.area&&(V.area=tt,V.serialized.bitmap.close(),V.serialized.bitmap=w(this,I,ug).call(this,!1))}return et}};h=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakMap,C=new WeakMap,b=new WeakMap,I=new WeakSet,Kh=function(ot,dt=!1){if(!ot){this.remove();return}x(this,h,ot.bitmap),dt||(x(this,f,ot.id),x(this,C,ot.isSvg)),w(this,I,xy).call(this)},Yh=function(){x(this,d,null),this._uiManager.enableWaiting(!1),a(this,_)&&this.div.focus()},cg=function(){if(a(this,f)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,f)).then(dt=>w(this,I,Kh).call(this,dt,!0)).finally(()=>w(this,I,Yh).call(this));return}if(a(this,m)){const dt=a(this,m);x(this,m,null),this._uiManager.enableWaiting(!0),x(this,d,this._uiManager.imageManager.getFromUrl(dt).then(et=>w(this,I,Kh).call(this,et)).finally(()=>w(this,I,Yh).call(this)));return}if(a(this,v)){const dt=a(this,v);x(this,v,null),this._uiManager.enableWaiting(!0),x(this,d,this._uiManager.imageManager.getFromFile(dt).then(et=>w(this,I,Kh).call(this,et)).finally(()=>w(this,I,Yh).call(this)));return}const ot=document.createElement("input");ot.type="file",ot.accept=G.supportedTypesStr,x(this,d,new Promise(dt=>{ot.addEventListener("change",async()=>{if(!ot.files||ot.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const et=await this._uiManager.imageManager.getFromFile(ot.files[0]);w(this,I,Kh).call(this,et)}dt()}),ot.addEventListener("cancel",()=>{this.remove(),dt()})}).finally(()=>w(this,I,Yh).call(this))),ot.click()},xy=function(){const{div:ot}=this;let{width:dt,height:et}=a(this,h);const[it,$]=this.pageDimensions,tt=.75;if(this.width)dt=this.width*it,et=this.height*$;else if(dt>tt*it||et>tt*$){const F=Math.min(tt*it/dt,tt*$/et);dt*=F,et*=F}const[V,H]=this.parentDimensions;this.setDims(dt*V/it,et*H/$),this._uiManager.enableWaiting(!1);const R=x(this,_,document.createElement("canvas"));ot.append(R),ot.hidden=!1,w(this,I,Cy).call(this,dt,et),w(this,I,xb).call(this),a(this,b)||(this.parent.addUndoableEditor(this),x(this,b,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},wb=function(ot,dt){var tt;const[et,it]=this.parentDimensions;this.width=ot/et,this.height=dt/it,this.setDims(ot,dt),(tt=this._initialOptions)!=null&&tt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,a(this,S)!==null&&clearTimeout(a(this,S)),x(this,S,setTimeout(()=>{x(this,S,null),w(this,I,Cy).call(this,ot,dt)},200))},Sb=function(ot,dt){const{width:et,height:it}=a(this,h);let $=et,tt=it,V=a(this,h);for(;$>2*ot||tt>2*dt;){const H=$,R=tt;$>2*ot&&($=$>=16384?Math.floor($/2)-1:Math.ceil($/2)),tt>2*dt&&(tt=tt>=16384?Math.floor(tt/2)-1:Math.ceil(tt/2));const F=new OffscreenCanvas($,tt);F.getContext("2d").drawImage(V,0,0,H,R,0,0,$,tt),V=F.transferToImageBitmap()}return V},Cy=function(ot,dt){ot=Math.ceil(ot),dt=Math.ceil(dt);const et=a(this,_);if(!et||et.width===ot&&et.height===dt)return;et.width=ot,et.height=dt;const it=a(this,C)?a(this,h):w(this,I,Sb).call(this,ot,dt),$=et.getContext("2d");$.filter=this._uiManager.hcmFilter,$.drawImage(it,0,0,it.width,it.height,0,0,ot,dt)},ug=function(ot){if(ot){if(a(this,C)){const it=this._uiManager.imageManager.getSvgUrl(a(this,f));if(it)return it}const dt=document.createElement("canvas");return{width:dt.width,height:dt.height}=a(this,h),dt.getContext("2d").drawImage(a(this,h),0,0),dt.toDataURL()}if(a(this,C)){const[dt,et]=this.pageDimensions,it=Math.round(this.width*dt*r.PixelsPerInch.PDF_TO_CSS_UNITS),$=Math.round(this.height*et*r.PixelsPerInch.PDF_TO_CSS_UNITS),tt=new OffscreenCanvas(it,$);return tt.getContext("2d").drawImage(a(this,h),0,0,a(this,h).width,a(this,h).height,0,0,it,$),tt.transferToImageBitmap()}return structuredClone(a(this,h))},xb=function(){x(this,A,new ResizeObserver(ot=>{const dt=ot[0].contentRect;dt.width&&dt.height&&w(this,I,wb).call(this,dt.width,dt.height)})),a(this,A).observe(this.div)},xe(G,"_type","stamp");let u=G;t.StampEditor=u}],__webpack_module_cache__={};function __w_pdfjs_require__(g){var t=__webpack_module_cache__[g];if(t!==void 0)return t.exports;var e=__webpack_module_cache__[g]={exports:{}};return __webpack_modules__[g](e,e.exports,__w_pdfjs_require__),e.exports}var __webpack_exports__={};return(()=>{var g=__webpack_exports__;Object.defineProperty(g,"__esModule",{value:!0}),Object.defineProperty(g,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(g,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}}),Object.defineProperty(g,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(g,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(g,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return c.AnnotationEditorUIManager}}),Object.defineProperty(g,"AnnotationLayer",{enumerable:!0,get:function(){return u.AnnotationLayer}}),Object.defineProperty(g,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(g,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(g,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(g,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(g,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(g,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(g,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(g,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(g,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(g,"PDFDataRangeTransport",{enumerable:!0,get:function(){return e.PDFDataRangeTransport}}),Object.defineProperty(g,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(g,"PDFWorker",{enumerable:!0,get:function(){return e.PDFWorker}}),Object.defineProperty(g,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(g,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(g,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(g,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(g,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(g,"SVGGraphics",{enumerable:!0,get:function(){return e.SVGGraphics}}),Object.defineProperty(g,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(g,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(g,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(g,"XfaLayer",{enumerable:!0,get:function(){return f.XfaLayer}}),Object.defineProperty(g,"build",{enumerable:!0,get:function(){return e.build}}),Object.defineProperty(g,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(g,"getDocument",{enumerable:!0,get:function(){return e.getDocument}}),Object.defineProperty(g,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(g,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(g,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(g,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(g,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(g,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(g,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(g,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(g,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(g,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(g,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(g,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(g,"version",{enumerable:!0,get:function(){return e.version}});var t=__w_pdfjs_require__(1),e=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),r=__w_pdfjs_require__(27),c=__w_pdfjs_require__(5),u=__w_pdfjs_require__(29),h=__w_pdfjs_require__(14),f=__w_pdfjs_require__(32)})(),__webpack_exports__})())}(pdf)),pdf.exports}var hasRequiredCore_min;function requireCore_min(){return hasRequiredCore_min||(hasRequiredCore_min=1,function(g){var t=requireReact(),e=requirePdf();function i(P){var z=Object.create(null);return P&&Object.keys(P).forEach(function(at){if(at!=="default"){var lt=Object.getOwnPropertyDescriptor(P,at);Object.defineProperty(z,at,lt.get?lt:{enumerable:!0,get:function(){return P[at]}})}}),z.default=P,Object.freeze(z)}var o,r=i(t),c=i(e);g.AnnotationType=void 0,(o=g.AnnotationType||(g.AnnotationType={}))[o.Text=1]="Text",o[o.Link=2]="Link",o[o.FreeText=3]="FreeText",o[o.Line=4]="Line",o[o.Square=5]="Square",o[o.Circle=6]="Circle",o[o.Polygon=7]="Polygon",o[o.Polyline=8]="Polyline",o[o.Highlight=9]="Highlight",o[o.Underline=10]="Underline",o[o.Squiggly=11]="Squiggly",o[o.StrikeOut=12]="StrikeOut",o[o.Stamp=13]="Stamp",o[o.Caret=14]="Caret",o[o.Ink=15]="Ink",o[o.Popup=16]="Popup",o[o.FileAttachment=17]="FileAttachment";var u=function(P,z){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,lt){at.__proto__=lt}||function(at,lt){for(var ft in lt)Object.prototype.hasOwnProperty.call(lt,ft)&&(at[ft]=lt[ft])},u(P,z)};function h(P,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function at(){this.constructor=P}u(P,z),P.prototype=z===null?Object.create(z):(at.prototype=z.prototype,new at)}var f,d=function(){return d=Object.assign||function(P){for(var z,at=1,lt=arguments.length;at<lt;at++)for(var ft in z=arguments[at])Object.prototype.hasOwnProperty.call(z,ft)&&(P[ft]=z[ft]);return P},d.apply(this,arguments)};g.TextDirection=void 0,(f=g.TextDirection||(g.TextDirection={})).RightToLeft="RTL",f.LeftToRight="LTR";var m,v=r.createContext({currentTheme:"light",direction:g.TextDirection.LeftToRight,setCurrentTheme:function(){}}),_=function(P){var z=[];return Object.keys(P).forEach(function(at){at&&P[at]&&z.push(at)}),z.join(" ")},A=typeof window<"u"?r.useLayoutEffect:r.useEffect,S=function(P){var z=r.useRef(null),at=P.once,lt=P.threshold,ft=P.onVisibilityChanged;return A(function(){var gt=z.current;if(gt){var Rt=new IntersectionObserver(function(At){At.forEach(function(ct){var Tt=ct.isIntersecting,St=ct.intersectionRatio;ft({isVisible:Tt,ratio:St}),Tt&&at&&(Rt.unobserve(gt),Rt.disconnect())})},{threshold:lt||0});return Rt.observe(gt),function(){Rt.unobserve(gt),Rt.disconnect()}}},[]),z},C=function(P){var z=P.children,at=P.ignoreDirection,lt=at!==void 0&&at,ft=P.size,gt=ft===void 0?24:ft,Rt=r.useContext(v).direction,At=!lt&&Rt===g.TextDirection.RightToLeft,ct="".concat(gt||24,"px");return r.createElement("svg",{"aria-hidden":"true",className:_({"rpv-core__icon":!0,"rpv-core__icon--rtl":At}),focusable:"false",height:ct,viewBox:"0 0 24 24",width:ct},z)},b=function(){return r.createElement(C,{size:16},r.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},I=function(P){var z=P.children,at=P.testId,lt=P.onClick,ft=r.useContext(v).direction===g.TextDirection.RightToLeft,gt=at?{"data-testid":at}:{};return r.createElement("button",d({className:_({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":ft}),type:"button",onClick:lt},gt),z)},B=function(P){var z=P.size,at=z===void 0?"4rem":z,lt=P.testId,ft=r.useState(!1),gt=ft[0],Rt=ft[1],At=lt?{"data-testid":lt}:{},ct=S({onVisibilityChanged:function(Tt){Rt(Tt.isVisible)}});return r.createElement("div",d({},At,{className:_({"rpv-core__spinner":!0,"rpv-core__spinner--animating":gt}),ref:ct,style:{height:at,width:at}}))},N=function(P){var z=P.ariaLabel,at=z===void 0?"":z,lt=P.autoFocus,ft=lt!==void 0&&lt,gt=P.placeholder,Rt=gt===void 0?"":gt,At=P.testId,ct=P.type,Tt=ct===void 0?"text":ct,St=P.value,Kt=St===void 0?"":St,Xt=P.onChange,$t=P.onKeyDown,ae=$t===void 0?function(){}:$t,Zt=r.useContext(v).direction,te=r.useRef(),Ze=Zt===g.TextDirection.RightToLeft,Oe={ref:te,"data-testid":"","aria-label":at,className:_({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Ze}),placeholder:Rt,value:Kt,onChange:function(Ie){return Xt(Ie.target.value)},onKeyDown:ae};return At&&(Oe["data-testid"]=At),A(function(){if(ft){var Ie=te.current;if(Ie){var We=window.scrollX,we=window.scrollY;Ie.focus(),window.scrollTo(We,we)}}},[]),Tt==="text"?r.createElement("input",d({type:"text"},Oe)):r.createElement("input",d({type:"password"},Oe))};(function(P){P[P.ExitFullScreen=0]="ExitFullScreen",P[P.FullScreenChange=1]="FullScreenChange",P[P.FullScreenElement=2]="FullScreenElement",P[P.FullScreenEnabled=3]="FullScreenEnabled",P[P.RequestFullScreen=4]="RequestFullScreen"})(m||(m={}));var T,L={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},k={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},D={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},j=typeof window<"u",Z=j&&(m.FullScreenEnabled in document&&L||k.FullScreenEnabled in document&&k||D.FullScreenEnabled in document&&D)||L,O=function(){return j&&Z.FullScreenEnabled in document&&document[Z.FullScreenEnabled]===!0},G=function(P){return j?P[Z.ExitFullScreen]():Promise.resolve({})},Q=function(){return j?document[Z.FullScreenElement]:null},mt=function(P,z){var at=r.useRef(),lt=function(){at.current&&clearTimeout(at.current)};return r.useEffect(function(){return function(){return lt()}},[]),r.useCallback(function(){for(var ft=[],gt=0;gt<arguments.length;gt++)ft[gt]=arguments[gt];lt(),at.current=setTimeout(function(){P.apply(void 0,ft)},z)},[P,z])},ot=function(){var P=r.useRef(!1);return r.useEffect(function(){return P.current=!0,function(){P.current=!1}},[]),P},dt=function(P){var z=r.useRef(P);return r.useEffect(function(){z.current=P},[P]),z.current};(function(P){P.NotRenderedYet="NotRenderedYet",P.Rendering="Rendering",P.Rendered="Rendered"})(T||(T={}));var et,it=-9999,$=function(P){var z=P.doc,at=z.numPages,lt=z.loadingTask.docId,ft=r.useMemo(function(){return Array(at).fill(null).map(function(At,ct){return{pageIndex:ct,renderStatus:T.NotRenderedYet,visibility:it}})},[lt]),gt=r.useRef({currentRenderingPage:-1,startRange:0,endRange:at-1,visibilities:ft}),Rt=function(At,ct){gt.current.visibilities[At].visibility=ct};return{getHighestPriorityPage:function(){var At=gt.current.visibilities.slice(gt.current.startRange,gt.current.endRange+1).filter(function(Xt){return Xt.visibility>it});if(!At.length)return-1;for(var ct=At[0].pageIndex,Tt=At[At.length-1].pageIndex,St=At.length,Kt=0;Kt<St;Kt++){if(At[Kt].renderStatus===T.Rendering)return-1;if(At[Kt].renderStatus===T.NotRenderedYet)return At[Kt].pageIndex}return Tt+1<at&&gt.current.visibilities[Tt+1].renderStatus!==T.Rendered?Tt+1:ct-1>=0&&gt.current.visibilities[ct-1].renderStatus!==T.Rendered?ct-1:-1},isInRange:function(At){return At>=gt.current.startRange&&At<=gt.current.endRange},markNotRendered:function(){for(var At=0;At<at;At++)gt.current.visibilities[At].renderStatus=T.NotRenderedYet},markRendered:function(At){gt.current.visibilities[At].renderStatus=T.Rendered},markRendering:function(At){gt.current.currentRenderingPage!==-1&&gt.current.currentRenderingPage!==At&&gt.current.visibilities[gt.current.currentRenderingPage].renderStatus===T.Rendering&&(gt.current.visibilities[gt.current.currentRenderingPage].renderStatus=T.NotRenderedYet),gt.current.visibilities[At].renderStatus=T.Rendering,gt.current.currentRenderingPage=At},setOutOfRange:function(At){Rt(At,it)},setRange:function(At,ct){gt.current.startRange=At,gt.current.endRange=ct;for(var Tt=0;Tt<at;Tt++)(Tt<At||Tt>ct)&&(gt.current.visibilities[Tt].visibility=it,gt.current.visibilities[Tt].renderStatus=T.NotRenderedYet)},setVisibility:Rt}},tt={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},V=r.createContext({l10n:tt,setL10n:function(){}}),H=0,R=function(){return H++},F=function(P,z,at){var lt=function(ft){var gt=z.current;if(gt){var Rt=ft.target;if(Rt instanceof Element&&Rt.shadowRoot){var At=ft.composedPath();At.length>0&&!gt.contains(At[0])&&at()}else gt.contains(Rt)||at()}};r.useEffect(function(){if(P){var ft={capture:!0};return document.addEventListener("click",lt,ft),function(){document.removeEventListener("click",lt,ft)}}},[])},U=function(P){var z=function(at){at.key==="Escape"&&P()};r.useEffect(function(){return document.addEventListener("keyup",z),function(){document.removeEventListener("keyup",z)}},[])},K=function(P){var z=P.ariaControlsSuffix,at=P.children,lt=P.closeOnClickOutside,ft=P.closeOnEscape,gt=P.onToggle,Rt=r.useRef(),At=r.useContext(v).direction===g.TextDirection.RightToLeft;return r.useEffect(function(){var ct=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=ct}},[]),U(function(){Rt.current&&ft&&gt()}),F(lt,Rt,gt),A(function(){var ct=Rt.current;if(ct){var Tt=.75*document.body.clientHeight;ct.getBoundingClientRect().height>=Tt&&(ct.style.overflow="auto",ct.style.maxHeight="".concat(Tt,"px"))}},[]),r.createElement("div",{"aria-modal":"true",className:_({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":At}),id:"rpv-core__modal-body-".concat(z),ref:Rt,role:"dialog",tabIndex:-1},at)},X=function(P){var z=P.children;return r.createElement("div",{className:"rpv-core__modal-overlay"},z)};g.ToggleStatus=void 0,(et=g.ToggleStatus||(g.ToggleStatus={})).Close="Close",et.Open="Open",et.Toggle="Toggle";var Y,ut=function(P){var z=r.useState(P),at=z[0],lt=z[1];return{opened:at,toggle:function(ft){switch(ft){case g.ToggleStatus.Close:lt(!1);break;case g.ToggleStatus.Open:lt(!0);break;case g.ToggleStatus.Toggle:default:lt(function(gt){return!gt})}}}},wt=function(P){var z=P.content,at=P.isOpened,lt=at!==void 0&&at,ft=P.target,gt=ut(lt),Rt=gt.opened,At=gt.toggle;return r.createElement(r.Fragment,null,ft&&ft(At,Rt),Rt&&z(At))};g.Position=void 0,(Y=g.Position||(g.Position={})).TopLeft="TOP_LEFT",Y.TopCenter="TOP_CENTER",Y.TopRight="TOP_RIGHT",Y.RightTop="RIGHT_TOP",Y.RightCenter="RIGHT_CENTER",Y.RightBottom="RIGHT_BOTTOM",Y.BottomLeft="BOTTOM_LEFT",Y.BottomCenter="BOTTOM_CENTER",Y.BottomRight="BOTTOM_RIGHT",Y.LeftTop="LEFT_TOP",Y.LeftCenter="LEFT_CENTER",Y.LeftBottom="LEFT_BOTTOM";var It,Dt,Ht,Vt,Gt,xt,Pt,q,st=function(P,z,at,lt,ft){A(function(){var gt=z.current,Rt=P.current,At=at.current;if(Rt&&gt&&At){var ct=At.getBoundingClientRect(),Tt=function(Xt,$t,ae,Zt){var te=$t.getBoundingClientRect(),Ze=Xt.getBoundingClientRect(),Oe=Ze.height,Ie=Ze.width,We=0,we=0;switch(ae){case g.Position.TopLeft:We=te.top-Oe,we=te.left;break;case g.Position.TopCenter:We=te.top-Oe,we=te.left+te.width/2-Ie/2;break;case g.Position.TopRight:We=te.top-Oe,we=te.left+te.width-Ie;break;case g.Position.RightTop:We=te.top,we=te.left+te.width;break;case g.Position.RightCenter:We=te.top+te.height/2-Oe/2,we=te.left+te.width;break;case g.Position.RightBottom:We=te.top+te.height-Oe,we=te.left+te.width;break;case g.Position.BottomLeft:We=te.top+te.height,we=te.left;break;case g.Position.BottomCenter:We=te.top+te.height,we=te.left+te.width/2-Ie/2;break;case g.Position.BottomRight:We=te.top+te.height,we=te.left+te.width-Ie;break;case g.Position.LeftTop:We=te.top,we=te.left-Ie;break;case g.Position.LeftCenter:We=te.top+te.height/2-Oe/2,we=te.left-Ie;break;case g.Position.LeftBottom:We=te.top+te.height-Oe,we=te.left-Ie}return{left:we+(Zt.left||0),top:We+(Zt.top||0)}}(Rt,gt,lt,ft),St=Tt.top,Kt=Tt.left;Rt.style.top="".concat(St-ct.top,"px"),Rt.style.left="".concat(Kt-ct.left,"px")}},[])},vt=function(P){var z,at=P.customClassName,lt=P.position;return r.createElement("div",{className:_((z={"rpv-core__arrow":!0,"rpv-core__arrow--tl":lt===g.Position.TopLeft,"rpv-core__arrow--tc":lt===g.Position.TopCenter,"rpv-core__arrow--tr":lt===g.Position.TopRight,"rpv-core__arrow--rt":lt===g.Position.RightTop,"rpv-core__arrow--rc":lt===g.Position.RightCenter,"rpv-core__arrow--rb":lt===g.Position.RightBottom,"rpv-core__arrow--bl":lt===g.Position.BottomLeft,"rpv-core__arrow--bc":lt===g.Position.BottomCenter,"rpv-core__arrow--br":lt===g.Position.BottomRight,"rpv-core__arrow--lt":lt===g.Position.LeftTop,"rpv-core__arrow--lc":lt===g.Position.LeftCenter,"rpv-core__arrow--lb":lt===g.Position.LeftBottom},z["".concat(at)]=at!=="",z))})},Ct=function(P){var z=P.ariaControlsSuffix,at=P.children,lt=P.closeOnClickOutside,ft=P.offset,gt=P.position,Rt=P.targetRef,At=P.onClose,ct=r.useRef(),Tt=r.useRef(),St=r.useRef(),Kt=r.useContext(v).direction===g.TextDirection.RightToLeft;F(lt,ct,At),st(ct,Rt,St,gt,ft),A(function(){var $t=Tt.current;if($t){var ae=.75*document.body.clientHeight;$t.getBoundingClientRect().height>=ae&&($t.style.overflow="auto",$t.style.maxHeight="".concat(ae,"px"))}},[]);var Xt="rpv-core__popover-body-inner-".concat(z);return r.createElement(r.Fragment,null,r.createElement("div",{ref:St,style:{left:0,position:"absolute",top:0}}),r.createElement("div",{"aria-describedby":Xt,className:_({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":Kt}),id:"rpv-core__popover-body-".concat(z),ref:ct,role:"dialog",tabIndex:-1},r.createElement(vt,{customClassName:"rpv-core__popover-body-arrow",position:gt}),r.createElement("div",{id:Xt,ref:Tt},at)))},Ot=function(P){var z=P.closeOnEscape,at=P.onClose,lt=r.useRef();return U(function(){lt.current&&z&&at()}),r.createElement("div",{className:"rpv-core__popover-overlay",ref:lt})},qt=function(P){var z=P.ariaControlsSuffix,at=P.children,lt=P.contentRef,ft=P.offset,gt=P.position,Rt=P.targetRef,At=r.useRef(),ct=r.useContext(v).direction===g.TextDirection.RightToLeft;return st(lt,Rt,At,gt,ft),r.createElement(r.Fragment,null,r.createElement("div",{ref:At,style:{left:0,position:"absolute",top:0}}),r.createElement("div",{className:_({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":ct}),id:"rpv-core__tooltip-body-".concat(z),ref:lt,role:"tooltip"},r.createElement(vt,{customClassName:"rpv-core__tooltip-body-arrow",position:gt}),r.createElement("div",{className:"rpv-core__tooltip-body-content"},at)))};g.FullScreenMode=void 0,(It=g.FullScreenMode||(g.FullScreenMode={})).Normal="Normal",It.Entering="Entering",It.Entered="Entered",It.EnteredCompletely="EnteredCompletely",It.Exitting="Exitting",It.Exited="Exited",g.LayerRenderStatus=void 0,(Dt=g.LayerRenderStatus||(g.LayerRenderStatus={}))[Dt.PreRender=0]="PreRender",Dt[Dt.DidRender=1]="DidRender",g.PageMode=void 0,(Ht=g.PageMode||(g.PageMode={})).Attachments="UseAttachments",Ht.Bookmarks="UseOutlines",Ht.ContentGroup="UseOC",Ht.Default="UserNone",Ht.FullScreen="FullScreen",Ht.Thumbnails="UseThumbs",g.PasswordStatus=void 0,(Vt=g.PasswordStatus||(g.PasswordStatus={})).RequiredPassword="RequiredPassword",Vt.WrongPassword="WrongPassword",g.RotateDirection=void 0,(Gt=g.RotateDirection||(g.RotateDirection={})).Backward="Backward",Gt.Forward="Forward",g.ScrollMode=void 0,(xt=g.ScrollMode||(g.ScrollMode={})).Page="Page",xt.Horizontal="Horizontal",xt.Vertical="Vertical",xt.Wrapped="Wrapped",g.SpecialZoomLevel=void 0,(Pt=g.SpecialZoomLevel||(g.SpecialZoomLevel={})).ActualSize="ActualSize",Pt.PageFit="PageFit",Pt.PageWidth="PageWidth",g.ViewMode=void 0,(q=g.ViewMode||(g.ViewMode={})).DualPage="DualPage",q.DualPageWithCover="DualPageWithCover",q.SinglePage="SinglePage";var Ut,yt=function(P,z){return P.reduce(function(at,lt,ft){return ft%z?at[at.length-1].push(lt):at.push([lt]),at},[])},ne=function(P,z){switch(z[1].name){case"XYZ":return{bottomOffset:function(at,lt){return z[3]===null?lt:z[3]},leftOffset:function(at,lt){return z[2]===null?0:z[2]},pageIndex:P,scaleTo:z[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:P,scaleTo:g.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:z[2],leftOffset:0,pageIndex:P,scaleTo:g.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:P,scaleTo:1}}},Qt=new Map,He=new Map,Pe=function(P,z){return"".concat(P.loadingTask.docId,"___").concat(z.num,"R").concat(z.gen===0?"":z.gen)},Qe=function(P,z,at){Qt.set(Pe(P,z),at)},ce=function(P,z){if(!P)return Promise.reject("The document is not loaded yet");var at="".concat(P.loadingTask.docId,"___").concat(z),lt=He.get(at);return lt?Promise.resolve(lt):new Promise(function(ft,gt){P.getPage(z+1).then(function(Rt){He.set(at,Rt),Rt.ref&&Qe(P,Rt.ref,z),ft(Rt)})})},Ee=function(P,z){return new Promise(function(at){new Promise(function(lt){typeof z=="string"?P.getDestination(z).then(function(ft){lt(ft)}):lt(z)}).then(function(lt){if(typeof lt[0]=="object"&&lt[0]!==null){var ft=lt[0],gt=function(At,ct){var Tt=Pe(At,ct);return Qt.has(Tt)?Qt.get(Tt):null}(P,ft);gt===null?P.getPageIndex(ft).then(function(At){Qe(P,ft,At),Ee(P,z).then(function(ct){return at(ct)})}):at(ne(gt,lt))}else{var Rt=ne(lt[0],lt);at(Rt)}})})};(function(P){P[P.Solid=1]="Solid",P[P.Dashed=2]="Dashed",P[P.Beveled=3]="Beveled",P[P.Inset=4]="Inset",P[P.Underline=5]="Underline"})(Ut||(Ut={}));var Xe,dn=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),zt=function(P,z,at,lt){var ft=parseInt(P,10);return ft>=z&&ft<=at?ft:lt},bt=function(P){return P.contentsObj?P.contentsObj.str:P.contents||""},Et=function(P){return P.titleObj?P.titleObj.str:P.title||""},he=function(P){var z=P.annotation,at=r.useContext(v).direction,lt=Et(z),ft=bt(z),gt=at===g.TextDirection.RightToLeft,Rt=r.useRef(),At="";if(z.modificationDate){var ct=function(Tt){var St=dn.exec(Tt);if(!St)return null;var Kt=parseInt(St[1],10),Xt=zt(St[2],1,12,1)-1,$t=zt(St[3],1,31,1),ae=zt(St[4],0,23,0),Zt=zt(St[5],0,59,0),te=zt(St[6],0,59,0),Ze=St[7]||"Z",Oe=zt(St[8],0,23,0),Ie=zt(St[9],0,59,0);switch(Ze){case"-":ae+=Oe,Zt+=Ie;break;case"+":ae-=Oe,Zt-=Ie}return new Date(Date.UTC(Kt,Xt,$t,ae,Zt,te))}(z.modificationDate);At=ct?"".concat(ct.toLocaleDateString(),", ").concat(ct.toLocaleTimeString()):""}return r.useLayoutEffect(function(){if(Rt.current){var Tt=document.querySelector('[data-annotation-id="'.concat(z.id,'"]'));if(Tt){var St=Tt;return St.style.zIndex+=1,function(){St.style.zIndex="".concat(parseInt(St.style.zIndex,10)-1)}}}},[]),r.createElement("div",{ref:Rt,className:_({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":gt}),style:{top:z.annotationType===g.AnnotationType.Popup?"":"100%"}},lt&&r.createElement(r.Fragment,null,r.createElement("div",{className:_({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!gt,"rpv-core__annotation-popup-title--rtl":gt})},lt),r.createElement("div",{className:"rpv-core__annotation-popup-date"},At)),ft&&r.createElement("div",{className:"rpv-core__annotation-popup-content"},ft.split(`
`).map(function(Tt,St){return r.createElement(r.Fragment,{key:St},Tt,r.createElement("br",null))})))};(function(P){P.Click="Click",P.Hover="Hover"})(Xe||(Xe={}));var pe,Te=function(P){var z,at=P.annotation,lt=P.children,ft=P.ignoreBorder,gt=P.hasPopup,Rt=P.isRenderable,At=P.page,ct=P.viewport,Tt=at.rect,St=function(){var Ne=ut(!1),gn=Ne.opened,un=Ne.toggle,_n=r.useState(Xe.Hover),vn=_n[0],An=_n[1];return{opened:gn,closeOnHover:function(){vn===Xe.Hover&&un(g.ToggleStatus.Close)},openOnHover:function(){vn===Xe.Hover&&un(g.ToggleStatus.Open)},toggleOnClick:function(){switch(vn){case Xe.Click:gn&&An(Xe.Hover),un(g.ToggleStatus.Toggle);break;case Xe.Hover:An(Xe.Click),un(g.ToggleStatus.Open)}}}}(),Kt=St.closeOnHover,Xt=St.opened,$t=St.openOnHover,ae=St.toggleOnClick,Zt=(z=[Tt[0],At.view[3]+At.view[1]-Tt[1],Tt[2],At.view[3]+At.view[1]-Tt[3]],[Math.min(z[0],z[2]),Math.min(z[1],z[3]),Math.max(z[0],z[2]),Math.max(z[1],z[3])]),te=Tt[2]-Tt[0],Ze=Tt[3]-Tt[1],Oe={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!ft&&at.borderStyle.width>0){switch(at.borderStyle.style){case Ut.Dashed:Oe.borderStyle="dashed";break;case Ut.Solid:Oe.borderStyle="solid";break;case Ut.Underline:Oe=Object.assign({borderBottomStyle:"solid"},Oe);case Ut.Beveled:case Ut.Inset:}var Ie=at.borderStyle.width;Oe.borderWidth="".concat(Ie,"px"),at.borderStyle.style!==Ut.Underline&&(te-=2*Ie,Ze-=2*Ie);var We=at.borderStyle,we=We.horizontalCornerRadius,Me=We.verticalCornerRadius;(we>0||Me>0)&&(Oe.borderRadius="".concat(we,"px / ").concat(Me,"px")),at.color?Oe.borderColor="rgb(".concat(0|at.color[0],", ").concat(0|at.color[1],", ").concat(0|at.color[2],")"):Oe.borderWidth="0"}return r.createElement(r.Fragment,null,Rt&&lt({popup:{opened:Xt,closeOnHover:Kt,openOnHover:$t,toggleOnClick:ae},slot:{attrs:{style:Object.assign({height:"".concat(Ze,"px"),left:"".concat(Zt[0],"px"),top:"".concat(Zt[1],"px"),transform:"matrix(".concat(ct.transform.join(","),")"),transformOrigin:"-".concat(Zt[0],"px -").concat(Zt[1],"px"),width:"".concat(te,"px")},Oe)},children:r.createElement(r.Fragment,null,gt&&Xt&&r.createElement(he,{annotation:at}))}}))},rt=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt);return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(ct){return r.createElement("div",d({},ct.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":z.id,onClick:ct.popup.toggleOnClick,onMouseEnter:ct.popup.openOnHover,onMouseLeave:ct.popup.closeOnHover}),ct.slot.children)})},Nt=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt),ct=z.rect,Tt=ct[2]-ct[0],St=ct[3]-ct[1],Kt=z.borderStyle.width;return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(Xt){return r.createElement("div",d({},Xt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":z.id,onClick:Xt.popup.toggleOnClick,onMouseEnter:Xt.popup.openOnHover,onMouseLeave:Xt.popup.closeOnHover}),r.createElement("svg",{height:"".concat(St,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Tt," ").concat(St),width:"".concat(Tt,"px")},r.createElement("circle",{cy:St/2,fill:"none",rx:Tt/2-Kt/2,ry:St/2-Kt/2,stroke:"transparent",strokeWidth:Kt||1})),Xt.slot.children)})},ee=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=Et(z),gt=bt(z),Rt=!(z.hasPopup!==!1||!ft&&!gt),At=function(){var ct,Tt,St,Kt,Xt=z.file;Xt&&(ct=Xt.filename,Tt=Xt.content,St=typeof Tt=="string"?"":URL.createObjectURL(new Blob([Tt],{type:""})),(Kt=document.createElement("a")).style.display="none",Kt.href=St||ct,Kt.setAttribute("download",function($t){var ae=$t.split("/").pop();return ae?ae.split("#")[0].split("?")[0]:$t}(ct)),document.body.appendChild(Kt),Kt.click(),document.body.removeChild(Kt),St&&URL.revokeObjectURL(St))};return r.createElement(Te,{annotation:z,hasPopup:Rt,ignoreBorder:!0,isRenderable:!0,page:at,viewport:lt},function(ct){return r.createElement("div",d({},ct.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":z.id,onClick:ct.popup.toggleOnClick,onDoubleClick:At,onMouseEnter:ct.popup.openOnHover,onMouseLeave:ct.popup.closeOnHover}),ct.slot.children)})},ge=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt);return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(ct){return r.createElement("div",d({},ct.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":z.id,onClick:ct.popup.toggleOnClick,onMouseEnter:ct.popup.openOnHover,onMouseLeave:ct.popup.closeOnHover}),ct.slot.children)})},ye=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=Et(z),gt=bt(z),Rt=!(!ft&&!gt),At=!z.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(z.parentType)!==-1;return A(function(){if(z.parentId){var ct=document.querySelector('[data-annotation-id="'.concat(z.parentId,'"]')),Tt=document.querySelector('[data-annotation-id="'.concat(z.id,'"]'));if(ct&&Tt){var St=parseFloat(ct.style.left),Kt=parseFloat(ct.style.top)+parseFloat(ct.style.height);Tt.style.left="".concat(St,"px"),Tt.style.top="".concat(Kt,"px"),Tt.style.transformOrigin="-".concat(St,"px -").concat(Kt,"px")}}},[]),r.createElement(Te,{annotation:z,hasPopup:At,ignoreBorder:!1,isRenderable:Rt,page:at,viewport:lt},function(ct){return r.createElement("div",d({},ct.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":z.id}),r.createElement(he,{annotation:z}))})},le=function(P){var z=P.annotation,at=P.childAnnotation,lt=P.page,ft=P.viewport,gt=z.hasPopup===!1,Rt=Et(z),At=bt(z),ct=!!(z.hasPopup||Rt||At);if(z.quadPoints&&z.quadPoints.length>0){var Tt=z.quadPoints.map(function(St){return Object.assign({},z,{rect:[St[2].x,St[2].y,St[1].x,St[1].y],quadPoints:[]})});return r.createElement(r.Fragment,null,Tt.map(function(St,Kt){return r.createElement(le,{key:Kt,annotation:St,childAnnotation:at,page:lt,viewport:ft})}))}return r.createElement(Te,{annotation:z,hasPopup:gt,ignoreBorder:!0,isRenderable:ct,page:lt,viewport:ft},function(St){return r.createElement(r.Fragment,null,r.createElement("div",d({},St.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":z.id,onClick:St.popup.toggleOnClick,onMouseEnter:St.popup.openOnHover,onMouseLeave:St.popup.closeOnHover}),St.slot.children),at&&at.annotationType===g.AnnotationType.Popup&&St.popup.opened&&r.createElement(ye,{annotation:at,page:lt,viewport:ft}))})},nt=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt),ct=z.rect,Tt=ct[2]-ct[0],St=ct[3]-ct[1],Kt=z.borderStyle.width;return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(Xt){return r.createElement("div",d({},Xt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":z.id,onClick:Xt.popup.toggleOnClick,onMouseEnter:Xt.popup.openOnHover,onMouseLeave:Xt.popup.closeOnHover}),z.inkLists&&z.inkLists.length&&r.createElement("svg",{height:"".concat(St,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Tt," ").concat(St),width:"".concat(Tt,"px")},z.inkLists.map(function($t,ae){return r.createElement("polyline",{key:ae,fill:"none",stroke:"transparent",strokeWidth:Kt||1,points:$t.map(function(Zt){return"".concat(Zt.x-ct[0],",").concat(ct[3]-Zt.y)}).join(" ")})})),Xt.slot.children)})},J=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt),ct=z.rect,Tt=ct[2]-ct[0],St=ct[3]-ct[1],Kt=z.borderStyle.width;return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(Xt){return r.createElement("div",d({},Xt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":z.id,onClick:Xt.popup.toggleOnClick,onMouseEnter:Xt.popup.openOnHover,onMouseLeave:Xt.popup.closeOnHover}),r.createElement("svg",{height:"".concat(St,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Tt," ").concat(St),width:"".concat(Tt,"px")},r.createElement("line",{stroke:"transparent",strokeWidth:Kt||1,x1:ct[2]-z.lineCoordinates[0],x2:ct[2]-z.lineCoordinates[2],y1:ct[3]-z.lineCoordinates[1],y2:ct[3]-z.lineCoordinates[3]})),Xt.slot.children)})},pt=/^([^\w]*)(javascript|data|vbscript)/im,Mt=/&#(\w+)(^\w|;)?/g,Ft=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Wt=/^([^:]+):/gm,Yt=function(P,z){var at,lt=(at=P||"",at.replace(Mt,function(At,ct){return String.fromCharCode(ct)})).replace(Ft,"").trim();if(!lt)return z;var ft=lt[0];if(ft==="."||ft==="/")return lt;var gt=lt.match(Wt);if(!gt)return lt;var Rt=gt[0];return pt.test(Rt)?z:lt},fe=function(P){var z,at=P.annotation,lt=P.annotationContainerRef,ft=P.doc,gt=P.outlines,Rt=P.page,At=P.pageIndex,ct=P.scale,Tt=P.viewport,St=P.onExecuteNamedAction,Kt=P.onJumpFromLinkAnnotation,Xt=P.onJumpToDest,$t=r.useRef(),ae=gt&&gt.length&&at.dest&&typeof at.dest=="string"?(z=gt.find(function(Oe){return Oe.dest===at.dest}))===null||z===void 0?void 0:z.title:"",Zt=!!(at.url||at.dest||at.action||at.unsafeUrl),te={};if(at.url||at.unsafeUrl){var Ze=Yt(at.url||at.unsafeUrl,"");Ze?te={"data-target":"external",href:Ze,rel:"noopener noreferrer nofollow",target:at.newWindow?"_blank":"",title:Ze}:Zt=!1}else te={href:"","data-annotation-link":at.id,onClick:function(Oe){Oe.preventDefault(),at.action?St(at.action):Ee(ft,at.dest).then(function(Ie){var We=$t.current,we=lt.current;if(We&&we){var Me=We.getBoundingClientRect();we.style.setProperty("height","100%"),we.style.setProperty("width","100%");var Ne=we.getBoundingClientRect();we.style.removeProperty("height"),we.style.removeProperty("width");var gn=(Me.left-Ne.left)/ct,un=(Ne.bottom-Me.bottom+Me.height)/ct;Kt({bottomOffset:un,label:ae,leftOffset:gn,pageIndex:At})}Xt(Ie)})}};return ae&&(te=Object.assign({},te,{title:ae,"aria-label":ae})),r.createElement(Te,{annotation:at,hasPopup:!1,ignoreBorder:!1,isRenderable:Zt,page:Rt,viewport:Tt},function(Oe){return r.createElement("div",d({},Oe.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":at.id,"data-testid":"core__annotation--link-".concat(at.id)}),r.createElement("a",d({ref:$t},te)))})},de=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt),ct=z.rect,Tt=ct[2]-ct[0],St=ct[3]-ct[1],Kt=z.borderStyle.width;return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(Xt){return r.createElement("div",d({},Xt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":z.id,onClick:Xt.popup.toggleOnClick,onMouseEnter:Xt.popup.openOnHover,onMouseLeave:Xt.popup.closeOnHover}),z.vertices&&z.vertices.length&&r.createElement("svg",{height:"".concat(St,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Tt," ").concat(St),width:"".concat(Tt,"px")},r.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:Kt||1,points:z.vertices.map(function($t){return"".concat($t.x-ct[0],",").concat(ct[3]-$t.y)}).join(" ")})),Xt.slot.children)})},se=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt),ct=z.rect,Tt=ct[2]-ct[0],St=ct[3]-ct[1],Kt=z.borderStyle.width;return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(Xt){return r.createElement("div",d({},Xt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":z.id,onClick:Xt.popup.toggleOnClick,onMouseEnter:Xt.popup.openOnHover,onMouseLeave:Xt.popup.closeOnHover}),z.vertices&&z.vertices.length&&r.createElement("svg",{height:"".concat(St,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Tt," ").concat(St),width:"".concat(Tt,"px")},r.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:Kt||1,points:z.vertices.map(function($t){return"".concat($t.x-ct[0],",").concat(ct[3]-$t.y)}).join(" ")})),Xt.slot.children)})},Ve=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt),ct=z.rect,Tt=ct[2]-ct[0],St=ct[3]-ct[1],Kt=z.borderStyle.width;return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(Xt){return r.createElement("div",d({},Xt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":z.id,onClick:Xt.popup.toggleOnClick,onMouseEnter:Xt.popup.openOnHover,onMouseLeave:Xt.popup.closeOnHover}),r.createElement("svg",{height:"".concat(St,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(Tt," ").concat(St),width:"".concat(Tt,"px")},r.createElement("rect",{height:St-Kt,fill:"none",stroke:"transparent",strokeWidth:Kt||1,x:Kt/2,y:Kt/2,width:Tt-Kt})),Xt.slot.children)})},me=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt);return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(ct){return r.createElement("div",d({},ct.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":z.id,onClick:ct.popup.toggleOnClick,onMouseEnter:ct.popup.openOnHover,onMouseLeave:ct.popup.closeOnHover}),ct.slot.children)})},Ae=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt);return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(ct){return r.createElement("div",d({},ct.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":z.id,onClick:ct.popup.toggleOnClick,onMouseEnter:ct.popup.openOnHover,onMouseLeave:ct.popup.closeOnHover}),ct.slot.children)})},Be=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt);return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(ct){return r.createElement("div",d({},ct.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":z.id,onClick:ct.popup.toggleOnClick,onMouseEnter:ct.popup.openOnHover,onMouseLeave:ct.popup.closeOnHover}),ct.slot.children)})},$e=function(){return r.createElement(C,{size:16},r.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),r.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),r.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),r.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},cn=function(){return r.createElement(C,{size:16},r.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),r.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),r.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),r.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),r.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),r.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),r.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),r.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),r.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),r.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},bn=function(){return r.createElement(C,{size:16},r.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),r.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},oi=function(){return r.createElement(C,{size:16},r.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),r.createElement("path",{d:"M6 4.5L6 0.5"}),r.createElement("path",{d:"M18 4.5L18 0.5"}),r.createElement("path",{d:"M10 4.5L10 0.5"}),r.createElement("path",{d:"M14 4.5L14 0.5"}))},jn=function(){return r.createElement(C,{size:16},r.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),r.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),r.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},os=function(){return r.createElement(C,{size:16},r.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},bs=function(P){var z=P.annotation,at=P.childAnnotation,lt=P.page,ft=P.viewport,gt=z.hasPopup===!1,Rt=Et(z),At=bt(z),ct=!!(z.hasPopup||Rt||At),Tt=z.name?z.name.toLowerCase():"";return r.createElement(Te,{annotation:z,hasPopup:gt,ignoreBorder:!1,isRenderable:ct,page:lt,viewport:ft},function(St){return r.createElement(r.Fragment,null,r.createElement("div",d({},St.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":z.id,onClick:St.popup.toggleOnClick,onMouseEnter:St.popup.openOnHover,onMouseLeave:St.popup.closeOnHover}),Tt&&r.createElement("div",{className:"rpv-core__annotation-text-icon"},Tt==="check"&&r.createElement(b,null),Tt==="comment"&&r.createElement($e,null),Tt==="help"&&r.createElement(cn,null),Tt==="insert"&&r.createElement(os,null),Tt==="key"&&r.createElement(bn,null),Tt==="note"&&r.createElement(oi,null),(Tt==="newparagraph"||Tt==="paragraph")&&r.createElement(jn,null)),St.slot.children),at&&at.annotationType===g.AnnotationType.Popup&&St.popup.opened&&r.createElement(ye,{annotation:at,page:lt,viewport:ft}))})},Es=function(P){var z=P.annotation,at=P.page,lt=P.viewport,ft=z.hasPopup===!1,gt=Et(z),Rt=bt(z),At=!!(z.hasPopup||gt||Rt);return r.createElement(Te,{annotation:z,hasPopup:ft,ignoreBorder:!0,isRenderable:At,page:at,viewport:lt},function(ct){return r.createElement("div",d({},ct.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":z.id,onClick:ct.popup.toggleOnClick,onMouseEnter:ct.popup.openOnHover,onMouseLeave:ct.popup.closeOnHover}),ct.slot.children)})},dc=function(P){var z=P.annotations,at=P.doc,lt=P.outlines,ft=P.page,gt=P.pageIndex,Rt=P.plugins,At=P.rotation,ct=P.scale,Tt=P.onExecuteNamedAction,St=P.onJumpFromLinkAnnotation,Kt=P.onJumpToDest,Xt=r.useRef(),$t=ft.getViewport({rotation:At,scale:ct}).clone({dontFlip:!0}),ae=z.filter(function(Zt){return!Zt.parentId});return A(function(){var Zt=Xt.current;Zt&&Rt.forEach(function(te){te.onAnnotationLayerRender&&te.onAnnotationLayerRender({annotations:ae,container:Zt,pageIndex:gt,rotation:At,scale:ct})})},[]),r.createElement("div",{ref:Xt,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(gt)},ae.map(function(Zt){var te=z.find(function(Ze){return Ze.parentId===Zt.id});switch(Zt.annotationType){case g.AnnotationType.Caret:return r.createElement(rt,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Circle:return r.createElement(Nt,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.FileAttachment:return r.createElement(ee,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.FreeText:return r.createElement(ge,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Highlight:return r.createElement(le,{key:Zt.id,annotation:Zt,childAnnotation:te,page:ft,viewport:$t});case g.AnnotationType.Ink:return r.createElement(nt,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Line:return r.createElement(J,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Link:return r.createElement(fe,{key:Zt.id,annotation:Zt,annotationContainerRef:Xt,doc:at,outlines:lt,page:ft,pageIndex:gt,scale:ct,viewport:$t,onExecuteNamedAction:Tt,onJumpFromLinkAnnotation:St,onJumpToDest:Kt});case g.AnnotationType.Polygon:return r.createElement(de,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Polyline:return r.createElement(se,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Popup:return r.createElement(ye,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Square:return r.createElement(Ve,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Squiggly:return r.createElement(me,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Stamp:return r.createElement(Ae,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.StrikeOut:return r.createElement(Be,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});case g.AnnotationType.Text:return r.createElement(bs,{key:Zt.id,annotation:Zt,childAnnotation:te,page:ft,viewport:$t});case g.AnnotationType.Underline:return r.createElement(Es,{key:Zt.id,annotation:Zt,page:ft,viewport:$t});default:return r.createElement(r.Fragment,{key:Zt.id})}}))},Rg=function(P){var z=P.page,at=P.renderAnnotations,lt=ot(),ft=r.useState({loading:!0,annotations:[]}),gt=ft[0],Rt=ft[1];return r.useEffect(function(){z.getAnnotations({intent:"display"}).then(function(At){lt.current&&Rt({loading:!1,annotations:At})})},[]),gt.loading?r.createElement(r.Fragment,null):at(gt.annotations)},Zn=function(P){var z=P.doc,at=P.outlines,lt=P.page,ft=P.pageIndex,gt=P.plugins,Rt=P.rotation,At=P.scale,ct=P.onExecuteNamedAction,Tt=P.onJumpFromLinkAnnotation,St=P.onJumpToDest;return r.createElement(Rg,{page:lt,renderAnnotations:function(Kt){return r.createElement(dc,{annotations:Kt,doc:z,outlines:at,page:lt,pageIndex:ft,plugins:gt,rotation:Rt,scale:At,onExecuteNamedAction:ct,onJumpFromLinkAnnotation:Tt,onJumpToDest:St})}})},fc=function(P,z){var at=P%z;return at===0?P:Math.floor(P-at)},ih=function(P){var z=P.canvasLayerRef,at=P.height,lt=P.page,ft=P.pageIndex,gt=P.plugins,Rt=P.rotation,At=P.scale,ct=P.width,Tt=P.onRenderCanvasCompleted,St=r.useRef();return A(function(){var Kt=St.current;Kt&&Kt.cancel();var Xt=z.current;Xt.removeAttribute("data-testid"),gt.forEach(function(Ne){Ne.onCanvasLayerRender&&Ne.onCanvasLayerRender({ele:Xt,pageIndex:ft,rotation:Rt,scale:At,status:g.LayerRenderStatus.PreRender})});var $t=lt.getViewport({rotation:Rt,scale:At}),ae=window.devicePixelRatio||1,Zt=Math.sqrt(16777216/($t.width*$t.height)),te=ae>Zt;te?Xt.style.transform="scale(1, 1)":Xt.style.removeProperty("transform");var Ze=Math.min(Zt,ae),Oe=function(Ne,gn){var un,_n;if(Math.floor(Ne)===Ne)return[Ne,1];var vn=1/Ne;if(vn>gn)return[1,gn];if(Math.floor(vn)===vn)return[1,vn];for(var An=Ne>1?vn:Ne,Hn=0,kn=1,Yn=1,Wn=1;;){var $n=Hn+Yn,qn=kn+Wn;if(qn>gn)break;An<=$n/qn?(Yn=(un=[$n,qn])[0],Wn=un[1]):(Hn=(_n=[$n,qn])[0],kn=_n[1])}return An<(Hn/kn+Yn/Wn)/2?An===Ne?[Hn,kn]:[kn,Hn]:An===Ne?[Yn,Wn]:[Wn,Yn]}(Ze,8),Ie=Oe[0],We=Oe[1];Xt.width=fc($t.width*Ze,Ie),Xt.height=fc($t.height*Ze,Ie),Xt.style.width="".concat(fc($t.width,We),"px"),Xt.style.height="".concat(fc($t.height,We),"px"),Xt.hidden=!0;var we=Xt.getContext("2d",{alpha:!1}),Me=te||ae!==1?[Ze,0,0,Ze,0,0]:null;return St.current=lt.render({canvasContext:we,transform:Me,viewport:$t}),St.current.promise.then(function(){Xt.hidden=!1,Xt.setAttribute("data-testid","core__canvas-layer-".concat(ft)),gt.forEach(function(Ne){Ne.onCanvasLayerRender&&Ne.onCanvasLayerRender({ele:Xt,pageIndex:ft,rotation:Rt,scale:At,status:g.LayerRenderStatus.DidRender})}),Tt()},function(){Tt()}),function(){Xt&&(Xt.width=0,Xt.height=0)}},[]),r.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(at,"px"),width:"".concat(ct,"px")}},r.createElement("canvas",{ref:z}))},pf=function(P){var z=P.height,at=P.page,lt=P.rotation,ft=P.scale,gt=P.width,Rt=r.useRef();return A(function(){var At=Rt.current,ct=at.getViewport({rotation:lt,scale:ft});at.getOperatorList().then(function(Tt){(function(){var St=Rt.current;St&&(St.innerHTML="")})(),new c.SVGGraphics(at.commonObjs,at.objs).getSVG(Tt,ct).then(function(St){St.style.height="".concat(z,"px"),St.style.width="".concat(gt,"px"),At.appendChild(St)})})},[]),r.createElement("div",{className:"rpv-core__svg-layer",ref:Rt})},pc=function(P){var z=P.containerRef,at=P.page,lt=P.pageIndex,ft=P.plugins,gt=P.rotation,Rt=P.scale,At=P.onRenderTextCompleted,ct=r.useRef(),Tt=function(){var St=z.current;St&&([].slice.call(St.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(Kt){return St.removeChild(Kt)}),[].slice.call(St.querySelectorAll('br[role="presentation"]')).forEach(function(Kt){return St.removeChild(Kt)}))};return A(function(){var St=ct.current;St&&St.cancel();var Kt=z.current;if(Kt){Kt.removeAttribute("data-testid");var Xt=at.getViewport({rotation:gt,scale:Rt});return ft.forEach(function($t){$t.onTextLayerRender&&$t.onTextLayerRender({ele:Kt,pageIndex:lt,scale:Rt,status:g.LayerRenderStatus.PreRender})}),at.getTextContent().then(function($t){Tt(),ct.current=c.renderTextLayer({container:Kt,textContent:$t,textContentSource:$t,viewport:Xt}),ct.current.promise.then(function(){Kt.setAttribute("data-testid","core__text-layer-".concat(lt)),[].slice.call(Kt.children).forEach(function(ae){ae.classList.contains("rpv-core__text-layer-text--not")||ae.classList.add("rpv-core__text-layer-text")}),ft.forEach(function(ae){ae.onTextLayerRender&&ae.onTextLayerRender({ele:Kt,pageIndex:lt,scale:Rt,status:g.LayerRenderStatus.DidRender})}),At()},function(){Kt.removeAttribute("data-testid"),At()})}),function(){var $t;Tt(),($t=ct.current)===null||$t===void 0||$t.cancel()}}},[]),r.createElement("div",{className:"rpv-core__text-layer",ref:z})},kg=function(P){var z=P.doc,at=P.measureRef,lt=P.outlines,ft=P.pageIndex,gt=P.pageRotation,Rt=P.pageSize,At=P.plugins,ct=P.renderPage,Tt=P.renderQueueKey,St=P.rotation,Kt=P.scale,Xt=P.shouldRender,$t=P.viewMode,ae=P.onExecuteNamedAction,Zt=P.onJumpFromLinkAnnotation,te=P.onJumpToDest,Ze=P.onRenderCompleted,Oe=P.onRotatePage,Ie=ot(),We=r.useState(null),we=We[0],Me=We[1],Ne=r.useState(!1),gn=Ne[0],un=Ne[1],_n=r.useState(!1),vn=_n[0],An=_n[1],Hn=r.useRef(),kn=r.useRef(),Yn=Math.abs(St+gt)%180==0,Wn=Rt.pageWidth*Kt,$n=Rt.pageHeight*Kt,qn=Yn?Wn:$n,Bn=Yn?$n:Wn,yi=(Rt.rotation+St+gt)%360,Us=r.useRef(0),Ss=ct||function(hi){return r.createElement(r.Fragment,null,hi.canvasLayer.children,hi.textLayer.children,hi.annotationLayer.children)};return r.useEffect(function(){Me(null),un(!1),An(!1)},[gt,St,Kt]),r.useEffect(function(){Xt&&Ie.current&&!we&&ce(z,ft).then(function(hi){Ie.current&&(Us.current=Tt,Me(hi))})},[Xt,we]),r.useEffect(function(){gn&&vn&&(Tt!==Us.current?(Me(null),un(!1),An(!1)):Ze(ft))},[gn,vn]),r.createElement("div",{className:_({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":$t===g.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":$t===g.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":$t===g.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(ft),ref:at,style:{height:"".concat(Bn,"px"),width:"".concat(qn,"px")}},we?r.createElement(r.Fragment,null,Ss({annotationLayer:{attrs:{},children:r.createElement(Zn,{doc:z,outlines:lt,page:we,pageIndex:ft,plugins:At,rotation:yi,scale:Kt,onExecuteNamedAction:ae,onJumpFromLinkAnnotation:Zt,onJumpToDest:te})},canvasLayer:{attrs:{},children:r.createElement(ih,{canvasLayerRef:Hn,height:Bn,page:we,pageIndex:ft,plugins:At,rotation:yi,scale:Kt,width:qn,onRenderCanvasCompleted:function(){Ie.current&&un(!0)}})},canvasLayerRendered:gn,doc:z,height:Bn,pageIndex:ft,rotation:yi,scale:Kt,svgLayer:{attrs:{},children:r.createElement(pf,{height:Bn,page:we,rotation:yi,scale:Kt,width:qn})},textLayer:{attrs:{},children:r.createElement(pc,{containerRef:kn,page:we,pageIndex:ft,plugins:At,rotation:yi,scale:Kt,onRenderTextCompleted:function(){Ie.current&&An(!0)}})},textLayerRendered:vn,width:qn,markRendered:Ze,onRotatePage:function(hi){return Oe(ft,hi)}}),At.map(function(hi,zi){return hi.renderPageLayer?r.createElement(r.Fragment,{key:zi},hi.renderPageLayer({canvasLayerRef:Hn,canvasLayerRendered:gn,doc:z,height:Bn,pageIndex:ft,rotation:yi,scale:Kt,textLayerRef:kn,textLayerRendered:vn,width:qn})):r.createElement(r.Fragment,{key:zi})})):r.createElement(B,{testId:"core__page-layer-loading-".concat(ft)}))},gf=function(P,z){var at=z.rect;return P.height!==at.height||P.width!==at.width?at:P};(function(P){P.Horizontal="Horizontal",P.Vertical="Vertical",P.Both="Both"})(pe||(pe={}));var gc=function(P){return 1-Math.pow(1-P,4)},Ji=1e-4,mf={left:0,top:0},ls={capture:!1,passive:!0},Pg=function(P){var z=P.elementRef,at=P.enableSmoothScroll,lt=P.isRtl,ft=P.scrollDirection,gt=P.onSmoothScroll,Rt=r.useState(mf),At=Rt[0],ct=Rt[1],Tt=r.useState(z.current),St=Tt[0],Kt=Tt[1],Xt=lt?-1:1,$t=r.useRef(ft);$t.current=ft;var ae=r.useRef(mf),Zt=r.useRef(!0),te=r.useCallback(function(){Zt.current=!0,at&&ct(ae.current),gt(!1)},[]),Ze=r.useCallback(function(){if(St){switch($t.current){case pe.Horizontal:ae.current={left:Xt*St.scrollLeft,top:0};break;case pe.Both:ae.current={left:Xt*St.scrollLeft,top:St.scrollTop};break;case pe.Vertical:default:ae.current={left:0,top:St.scrollTop}}at&&!Zt.current||ct(ae.current)}},[St]);A(function(){Kt(z.current)}),A(function(){if(St)return St.addEventListener("scroll",Ze,ls),function(){St.removeEventListener("scroll",Ze,ls)}},[St]);var Oe=r.useCallback(function(Ie,We){var we=z.current;if(!we)return Promise.resolve();var Me={left:0,top:0};switch($t.current){case pe.Horizontal:Me.left=Xt*Ie.left;break;case pe.Both:Me.left=Xt*Ie.left,Me.top=Ie.top;break;case pe.Vertical:default:Me.top=Ie.top}return We?(Zt.current=!1,gt(!0),new Promise(function(Ne,gn){(function(un,_n,vn,An,Hn,kn){Hn===void 0&&(Hn=function(zi){return zi}),kn===void 0&&(kn=function(){});var Yn=0,Wn=0,$n=!1;switch(_n){case pe.Horizontal:Wn=un.scrollLeft,Yn=0;case pe.Both:Wn=un.scrollLeft,Yn=un.scrollTop;break;case pe.Vertical:default:Wn=0,Yn=un.scrollTop}var qn=function(){$n||($n=!0,un.scrollLeft=vn.left,un.scrollTop=vn.top,kn())};if(Math.abs(Yn-vn.top)<=Ji&&_n===pe.Vertical)qn();else if(Math.abs(Wn-vn.left)<=Ji&&_n===pe.Horizontal)qn();else{var Bn,yi=-1,Us=Wn-vn.left,Ss=Yn-vn.top,hi=function(zi){yi===-1&&(yi=zi);var zs=zi-yi,qe=Math.min(zs/An,1),Ue=Hn(qe),Ce={left:Wn-Us*Ue,top:Yn-Ss*Ue};switch(_n){case pe.Horizontal:un.scrollLeft=Ce.left;break;case pe.Both:un.scrollLeft=Ce.left,un.scrollTop=Ce.top;break;case pe.Vertical:default:un.scrollTop=Ce.top}Math.abs(Ce.top-vn.top)<=Ji&&Math.abs(Ce.left-vn.left)<=Ji&&!$n&&(window.cancelAnimationFrame(Bn),qn()),zs<An?Bn=window.requestAnimationFrame(hi):window.cancelAnimationFrame(Bn)};Bn=window.requestAnimationFrame(hi)}})(we,$t.current,Me,400,gc,function(){te(),Ne()})})):new Promise(function(Ne,gn){switch($t.current){case pe.Horizontal:we.scrollLeft=Me.left;break;case pe.Both:we.scrollLeft=Me.left,we.scrollTop=Me.top;break;case pe.Vertical:default:we.scrollTop=Me.top}Ne()})},[z]);return{scrollOffset:At,scrollTo:Oe}},Ho=function(P,z,at){return Math.max(P,Math.min(at,z))},Mg=function(P,z){if(z!==g.ViewMode.DualPageWithCover)return 0;if(!function(ft){var gt=ft.length;if(gt===1)return!1;for(var Rt=1;Rt<gt;Rt++)if(ft[Rt].height!==ft[0].height||ft[Rt].width!==ft[0].width)return!0;return!1}(P))return 2*P[0].width;var at=yt(P.slice(1),2).map(function(ft){return ft.length===2?ft[0].width+ft[1].width:ft[0].width}),lt=[P[0].width].concat(at);return Math.max.apply(Math,lt)},mc={left:0,top:0},vc={left:0,top:0},Zr={left:0,top:0},yc={left:0,top:0},Fg={height:0,width:0},vf={left:0,top:0},_c="data-virtual-index",yf=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],sh=function(P){var z=P.enableSmoothScroll,at=P.isRtl,lt=P.numberOfItems,ft=P.parentRef,gt=P.setRenderRange,Rt=P.sizes,At=P.scrollMode,ct=P.viewMode,Tt=r.useState(!1),St=Tt[0],Kt=Tt[1],Xt=r.useCallback(function(qe){return Kt(qe)},[]),$t=r.useRef(At);$t.current=At;var ae=r.useRef(ct);ae.current=ct;var Zt=At===g.ScrollMode.Wrapped||ct===g.ViewMode.DualPageWithCover||ct===g.ViewMode.DualPage?pe.Both:At===g.ScrollMode.Horizontal?pe.Horizontal:pe.Vertical,te=Pg({elementRef:ft,enableSmoothScroll:z,isRtl:at,scrollDirection:Zt,onSmoothScroll:Xt}),Ze=te.scrollOffset,Oe=te.scrollTo,Ie=function(qe){var Ue=qe.elementRef,Ce=r.useState(Ue.current),Fe=Ce[0],Se=Ce[1],Ye=r.useRef(!1),tn=r.useReducer(gf,{height:0,width:0}),Le=tn[0],ve=tn[1];return A(function(){Ue.current!==Fe&&Se(Ue.current)}),A(function(){if(Fe&&!Ye.current){Ye.current=!0;var sn=Fe.getBoundingClientRect(),on=sn.height,Ln=sn.width;ve({rect:{height:on,width:Ln}})}},[Fe]),r.useEffect(function(){if(Fe){var sn=new ResizeObserver(function(on,Ln){on.forEach(function(Pn){if(Pn.target===Fe){var pi=Pn.contentRect,Zi=pi.height,rn=pi.width;ve({rect:{height:Zi,width:rn}})}})});return sn.observe(Fe),function(){sn.unobserve(Fe)}}},[Fe]),Le}({elementRef:ft}),We=r.useRef({scrollOffset:vf,measurements:[]});We.current.scrollOffset=Ze;var we=r.useMemo(function(){return Array(lt).fill(-1)},[]),Me=r.useState(we),Ne=Me[0],gn=Me[1],un=r.useMemo(function(){var qe=new IntersectionObserver(function(Ue){Ue.forEach(function(Ce){var Fe=Ce.isIntersecting?Ce.intersectionRatio:-1,Se=Ce.target.getAttribute(_c);if(Se){var Ye=parseInt(Se,10);0<=Ye&&Ye<lt&&gn(function(tn){return tn[Ye]=Fe,function(Le,ve,sn){for(var on,Ln=0,Pn=ve.length;Ln<Pn;Ln++)!on&&Ln in ve||(on||(on=Array.prototype.slice.call(ve,0,Ln)),on[Ln]=ve[Ln]);return Le.concat(on||Array.prototype.slice.call(ve))}([],tn)})}})},{threshold:yf});return qe},[]),_n=r.useMemo(function(){return At===g.ScrollMode.Page&&ct===g.ViewMode.SinglePage?function(qe,Ue,Ce){for(var Fe=[],Se=0;Se<qe;Se++){var Ye={height:Math.max(Ue.height,Ce[Se].height),width:Math.max(Ue.width,Ce[Se].width)},tn=Se===0?yc:Fe[Se-1].end,Le={left:tn.left+Ye.width,top:tn.top+Ye.height};Fe[Se]={index:Se,start:tn,size:Ye,end:Le,visibility:-1}}return Fe}(lt,Ie,Rt):ct===g.ViewMode.DualPageWithCover?function(qe,Ue,Ce,Fe){for(var Se=[],Ye=0,tn=0,Le=Zr,ve=0;ve<qe;ve++){var sn=ve===0?{height:Fe===g.ScrollMode.Page?Math.max(Ue.height,Ce[ve].height):Ce[ve].height,width:Fe===g.ScrollMode.Page?Math.max(Ue.width,Ce[ve].width):Ce[ve].width}:{height:Fe===g.ScrollMode.Page?Math.max(Ue.height,Ce[ve].height):Ce[ve].height,width:Math.max(Ue.width/2,Ce[ve].width)};Fe===g.ScrollMode.Page?Le=ve===0?Zr:{left:ve%2==0?sn.width:0,top:Math.floor((ve-1)/2)*sn.height+Se[0].end.top}:ve===0?(Le=Zr,Ye=Ce[0].height,tn=0):ve%2==1?(Le={left:0,top:Ye+=tn},tn=ve===qe-1?Ce[ve].height:Math.max(Ce[ve].height,Ce[ve+1].height)):Le={left:Se[ve-1].end.left,top:Ye};var on={left:Le.left+sn.width,top:Le.top+sn.height};Se[ve]={index:ve,start:Le,size:sn,end:on,visibility:-1}}return Se}(lt,Ie,Rt,At):ct===g.ViewMode.DualPage?function(qe,Ue,Ce,Fe){for(var Se=[],Ye=0,tn=0,Le=vc,ve=0;ve<qe;ve++){var sn={height:Fe===g.ScrollMode.Page?Math.max(Ue.height,Ce[ve].height):Ce[ve].height,width:Math.max(Ue.width/2,Ce[ve].width)};Fe===g.ScrollMode.Page?Le={left:ve%2==0?0:sn.width,top:Math.floor(ve/2)*sn.height}:ve%2==0?(Le={left:0,top:Ye+=tn},tn=ve===qe-1?Ce[ve].height:Math.max(Ce[ve].height,Ce[ve+1].height)):Le={left:Se[ve-1].end.left,top:Ye};var on={left:Le.left+sn.width,top:Le.top+sn.height};Se[ve]={index:ve,start:Le,size:sn,end:on,visibility:-1}}return Se}(lt,Ie,Rt,At):function(qe,Ue,Ce,Fe){for(var Se=[],Ye=0,tn={left:0,top:0},Le=0,ve=mc,sn=0;sn<qe;sn++){var on=Ce[sn];if(sn===0)Ye=on.width,tn={left:0,top:0},Le=on.height;else switch(Fe){case g.ScrollMode.Wrapped:(Ye+=on.width)<Ue.width?(ve={left:Se[sn-1].end.left,top:tn.top},Le=Math.max(Le,on.height)):(Ye=on.width,tn={left:(ve={left:tn.left,top:tn.top+Le}).left,top:ve.top},Le=on.height);break;case g.ScrollMode.Horizontal:case g.ScrollMode.Vertical:default:ve=Se[sn-1].end}var Ln={left:ve.left+on.width,top:ve.top+on.height};Se[sn]={index:sn,start:ve,size:on,end:Ln,visibility:-1}}return Se}(lt,Ie,Rt,At)},[At,Rt,ct,Ie]),vn=_n[lt-1]?{height:_n[lt-1].end.top,width:_n[lt-1].end.left}:Fg;We.current.measurements=_n;var An=r.useMemo(function(){var qe=function(sn,on,Ln,Pn){var pi=0;switch(sn){case pe.Horizontal:pi=Pn.left;break;case pe.Vertical:default:pi=Pn.top}var Zi=on.length-1,rn=function(Cn,sr,na,Uo){for(;Cn<=sr;){var cs=(Cn+sr)/2|0,zo=Uo(cs);if(zo<na)Cn=cs+1;else{if(!(zo>na))return cs;sr=cs-1}}return Cn>0?Cn-1:0}(0,Zi,pi,function(Cn){switch(sn){case pe.Horizontal:return on[Cn].start.left;case pe.Both:case pe.Vertical:default:return on[Cn].start.top}});if(sn===pe.Both)for(var li=on[rn].start.top;rn-1>=0&&on[rn-1].start.top===li&&on[rn-1].start.left>=Pn.left;)rn--;for(var xn=rn;xn<=Zi;){var Dn={top:on[xn].start.top-Pn.top,left:on[xn].start.left-Pn.left},ti={height:Ln.height-Dn.top,width:Ln.width-Dn.left};if(sn===pe.Horizontal&&ti.width<0||sn===pe.Vertical&&ti.height<0||sn===pe.Both&&(ti.width<0||ti.height<0))break;xn++}return{start:rn,end:xn}}(Zt,_n,Ie,Ze),Ue=qe.start,Ce=qe.end,Fe=Ne.slice(Ho(0,lt,Ue),Ho(0,lt,Ce)),Se=Ue+Fe.reduce(function(sn,on,Ln,Pn){return on>Pn[sn]?Ln:sn},0),Ye=Se=Ho(0,lt-1,Se),tn=gt({endPage:Ce,numPages:lt,startPage:Ue}),Le=tn.startPage,ve=tn.endPage;switch(Le=Math.max(Le,0),ve=Math.min(ve,lt-1),ct){case g.ViewMode.DualPageWithCover:Se>0&&(Ye=Se%2==1?Se:Se-1),Le=Le===0?0:Le%2==1?Le:Le-1,lt-(ve=ve%2==1?ve-1:ve)<=2&&(ve=lt-1);break;case g.ViewMode.DualPage:Ye=Se%2==0?Se:Se-1,Le=Le%2==0?Le:Le-1,ve=ve%2==1?ve:ve-1;break;case g.ViewMode.SinglePage:default:Ye=Se}return{startPage:Le,endPage:ve,maxVisbilityIndex:Ye}},[_n,Ie,Ze,ct,Ne]),Hn=An.startPage,kn=An.endPage,Yn=An.maxVisbilityIndex,Wn=r.useMemo(function(){for(var qe=[],Ue=function(Fe){var Se=_n[Fe],Ye=d(d({},Se),{visibility:Ne[Fe]!==void 0?Ne[Fe]:-1,measureRef:function(tn){tn&&(tn.setAttribute(_c,"".concat(Fe)),un.observe(tn))}});qe.push(Ye)},Ce=Hn;Ce<=kn;Ce++)Ue(Ce);return qe},[Hn,kn,Ne,_n]),$n=r.useCallback(function(qe,Ue){var Ce=We.current.measurements[Ho(0,lt-1,qe)],Fe=$t.current===g.ScrollMode.Page?vf:Ue;return Ce?Oe({left:Fe.left+Ce.start.left,top:Fe.top+Ce.start.top},z):Promise.resolve()},[Oe,z]),qn=r.useCallback(function(qe,Ue){var Ce=We.current.measurements,Fe=Ce[qe].start,Se=Ce.find(function(tn){return tn.start.top-Fe.top>1e-12});if(!Se)return Promise.resolve();var Ye=Se.index;switch(ae.current){case g.ViewMode.DualPage:Ye=Ye%2==0?Ye:Ye+1;break;case g.ViewMode.DualPageWithCover:Ye=Ye%2==1?Ye:Ye+1}return $n(Ye,Ue)},[]),Bn=r.useCallback(function(qe,Ue){for(var Ce=We.current.measurements,Fe=Ce[qe].start,Se=qe,Ye=!1,tn=lt-1;tn>=0;tn--)if(Fe.top-Ce[tn].start.top>1e-12){Ye=!0,Se=Ce[tn].index;break}if(!Ye)return Promise.resolve();switch(ae.current){case g.ViewMode.DualPage:Se=Se%2==0?Se:Se-1;break;case g.ViewMode.DualPageWithCover:Se=Se%2==0?Se-1:Se}return Se===qe&&(Se=qe-1),$n(Se,Ue)},[]),yi=r.useCallback(function(qe,Ue){if(ae.current===g.ViewMode.DualPageWithCover||ae.current===g.ViewMode.DualPage)return qn(qe,Ue);switch($t.current){case g.ScrollMode.Wrapped:return qn(qe,Ue);case g.ScrollMode.Horizontal:case g.ScrollMode.Vertical:default:return $n(qe+1,Ue)}},[]),Us=r.useCallback(function(qe,Ue){if(ae.current===g.ViewMode.DualPageWithCover||ae.current===g.ViewMode.DualPage)return Bn(qe,Ue);switch($t.current){case g.ScrollMode.Wrapped:return Bn(qe,Ue);case g.ScrollMode.Horizontal:case g.ScrollMode.Vertical:default:return $n(qe-1,Ue)}},[]),Ss=r.useCallback(function(){return function(qe,Ue){switch(Ue){case g.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(qe.width,"px")};case g.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(qe.height,"px"),width:"100%"}}}(vn,$t.current)},[vn]),hi=r.useCallback(function(qe){return function(Ue,Ce,Fe){return Fe!==g.ScrollMode.Page?{}:{height:"".concat(Ce.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Ue.start.top,"px)")}}(qe,Ie,$t.current)},[Ie]),zi=r.useCallback(function(qe){return function(Ue,Ce,Fe,Se,Ye){var tn,Le,ve,sn,on,Ln,Pn,pi=Ce?"right":"left",Zi=Ce?-1:1,rn=Fe.length,li=Ue.start.left*Zi,xn=Ue.size,Dn=xn.height,ti=xn.width;if(Se===g.ViewMode.DualPageWithCover){var Cn=Ye===g.ScrollMode.Page?0:Ue.start.top;return Ue.index===0||rn%2==0&&Ue.index===rn-1?((tn={height:"".concat(Dn,"px"),minWidth:"".concat(Mg(Fe,Se),"px"),width:"100%"})[pi]=0,tn.position="absolute",tn.top=0,tn.transform="translate(".concat(li,"px, ").concat(Cn,"px)"),tn):((Le={height:"".concat(Dn,"px"),width:"".concat(ti,"px")})[pi]=0,Le.position="absolute",Le.top=0,Le.transform="translate(".concat(li,"px, ").concat(Cn,"px)"),Le)}if(Se===g.ViewMode.DualPage)return(ve={height:"".concat(Dn,"px"),width:"".concat(ti,"px")})[pi]=0,ve.position="absolute",ve.top=0,ve.transform="translate(".concat(li,"px, ").concat(Ye===g.ScrollMode.Page?0:Ue.start.top,"px)"),ve;switch(Ye){case g.ScrollMode.Horizontal:return(sn={height:"100%",width:"".concat(ti,"px")})[pi]=0,sn.position="absolute",sn.top=0,sn.transform="translateX(".concat(li,"px)"),sn;case g.ScrollMode.Page:return(on={height:"".concat(Dn,"px"),width:"".concat(ti,"px")})[pi]=0,on.position="absolute",on.top=0,on;case g.ScrollMode.Wrapped:return(Ln={height:"".concat(Dn,"px"),width:"".concat(ti,"px")})[pi]=0,Ln.position="absolute",Ln.top=0,Ln.transform="translate(".concat(li,"px, ").concat(Ue.start.top,"px)"),Ln;case g.ScrollMode.Vertical:default:return(Pn={height:"".concat(Dn,"px"),width:"100%"})[pi]=0,Pn.position="absolute",Pn.top=0,Pn.transform="translateY(".concat(Ue.start.top,"px)"),Pn}}(qe,at,Rt,ae.current,$t.current)},[at,Rt]),zs=r.useCallback(function(qe,Ue){var Ce=We.current,Fe=Ce.measurements,Se=Ce.scrollOffset,Ye=Fe[Ho(0,lt-1,Ue)];if(Ye){var tn=$t.current===g.ScrollMode.Page?{left:Ye.start.left,top:Ye.start.top}:{left:Se.left*qe,top:Se.top*qe};return Oe(tn,!1)}return Promise.resolve()},[]);return r.useEffect(function(){return function(){un.disconnect()}},[]),{boundingClientRect:Ie,isSmoothScrolling:St,startPage:Hn,endPage:kn,maxVisbilityIndex:Yn,virtualItems:Wn,getContainerStyles:Ss,getItemContainerStyles:hi,getItemStyles:zi,scrollToItem:$n,scrollToNextItem:yi,scrollToPreviousItem:Us,zoom:zs}},ta=function(P,z,at,lt,ft,gt){var Rt=at;switch(!0){case(ft===g.ViewMode.DualPageWithCover&&gt>=3):case(ft===g.ViewMode.DualPage&&gt>=3):Rt=2*at;break;default:Rt=at}switch(lt){case g.SpecialZoomLevel.ActualSize:return 1;case g.SpecialZoomLevel.PageFit:return Math.min((P.clientWidth-17)/Rt,(P.clientHeight-16)/z);case g.SpecialZoomLevel.PageWidth:return(P.clientWidth-17)/Rt}},Lg=function(P){var z,at,lt=P.getCurrentPage,ft=(z=50,at=r.useRef([]),r.useEffect(function(){return function(){at.current=[]}},[]),{push:function(Tt){var St=at.current;St.length+1>z&&St.shift(),St.push(Tt),at.current=St},map:function(Tt){return at.current.map(function(St){return Tt(St)})},pop:function(){var Tt=at.current;if(Tt.length===0)return null;var St=Tt.pop();return at.current=Tt,St}}),gt=function(Tt){var St=r.useRef([]);return r.useEffect(function(){return function(){St.current=[]}},[]),{dequeue:function(){var Kt=St.current;if(Kt.length===0)return null;var Xt=Kt.shift();return St.current=Kt,Xt||null},enqueue:function(Kt){var Xt=St.current;Xt.length+1>Tt&&Xt.pop(),St.current=[Kt].concat(Xt)},map:function(Kt){return St.current.map(function(Xt){return Kt(Xt)})}}}(50),Rt=function(){var Tt=gt.dequeue();return Tt&&ft.push(Tt),Tt&&Tt.pageIndex===lt()?Rt():Tt},At=function(){var Tt=ft.pop();return Tt&&gt.enqueue(Tt),Tt&&Tt.pageIndex===lt()?At():Tt},ct=r.useCallback(function(Tt){ft.push(Tt)},[]);return{getNextDestination:Rt,getPreviousDestination:At,markVisitedDestination:ct}},Ac=function(P){var z=[];return P.map(function(at){z=z.concat(at).concat(function(lt){var ft=[];return lt.items&&lt.items.length>0&&(ft=ft.concat(Ac(lt.items))),ft}(at))}),z},Rn={capture:!1,passive:!0},_f={height:0,width:0},bc={height:0,width:0},rh=function(P){var z=P.getCurrentPage,at=P.getCurrentScrollMode,lt=P.jumpToPage,ft=P.targetRef,gt=r.useState(g.FullScreenMode.Normal),Rt=gt[0],At=gt[1],ct=function(){var Ne=r.useState(_f),gn=Ne[0],un=Ne[1],_n=mt(function(){un({height:window.innerHeight,width:window.innerWidth})},100);return A(function(){return window.addEventListener("resize",_n,Rn),function(){window.removeEventListener("resize",_n,Rn)}},[]),gn}(),Tt=r.useState(bc),St=Tt[0],Kt=Tt[1],Xt=r.useRef(bc),$t=r.useRef(z()),ae=r.useRef(bc),Zt=r.useState(ft.current),te=Zt[0],Ze=Zt[1],Oe=r.useRef();A(function(){ft.current!==te&&Ze(ft.current)},[]),A(function(){if(te){var Ne=new ResizeObserver(function(gn){gn.forEach(function(un){var _n=un.target.getBoundingClientRect(),vn=_n.height,An=_n.width;Kt({height:vn,width:An})})});return Ne.observe(te),function(){Ne.unobserve(te),Ne.disconnect()}}},[te]);var Ie=r.useCallback(function(Ne){var gn=Q();return gn&&gn!==Ne?(At(g.FullScreenMode.Normal),G(gn)):Promise.resolve()},[]),We=r.useCallback(function(Ne){Ne&&O()&&(Ze(Ne),Ie(Ne).then(function(){Oe.current=Ne,At(g.FullScreenMode.Entering),function(gn){j&&gn[Z.RequestFullScreen]()}(Ne)}))},[]),we=r.useCallback(function(){Q()&&(At(g.FullScreenMode.Exitting),G(document))},[]),Me=r.useCallback(function(){te&&Q()!==te&&At(g.FullScreenMode.Exitting)},[te]);return r.useEffect(function(){switch(Rt){case g.FullScreenMode.Entering:Oe.current&&(Oe.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),$t.current=z(),Xt.current={height:window.innerHeight,width:window.innerWidth};break;case g.FullScreenMode.Entered:at()===g.ScrollMode.Page?lt($t.current).then(function(){At(g.FullScreenMode.EnteredCompletely)}):At(g.FullScreenMode.EnteredCompletely);break;case g.FullScreenMode.Exitting:Oe.current&&(Oe.current.style.backgroundColor="",Oe.current=null),$t.current=z();break;case g.FullScreenMode.Exited:At(g.FullScreenMode.Normal),at()===g.ScrollMode.Page&&lt($t.current)}},[Rt]),r.useEffect(function(){if(Rt!==g.FullScreenMode.Normal)return Rt===g.FullScreenMode.Entering&&ct.height===St.height&&ct.width===St.width&&ct.height>0&&ct.width>0&&(ae.current.height===0||ct.height==ae.current.height)?(ae.current={height:window.innerHeight,width:window.innerWidth},void At(g.FullScreenMode.Entered)):void(Rt===g.FullScreenMode.Exitting&&Xt.current.height===ct.height&&Xt.current.width===ct.width&&ct.height>0&&ct.width>0&&At(g.FullScreenMode.Exited))},[Rt,ct,St]),r.useEffect(function(){var Ne;return Ne=Me,j&&document.addEventListener(Z.FullScreenChange,Ne),function(){(function(gn){j&&document.removeEventListener(Z.FullScreenChange,gn)})(Me)}},[te]),{enterFullScreenMode:We,exitFullScreenMode:we,fullScreenMode:Rt}},Af={buildPageStyles:function(){return{}},transformSize:function(P){return P.size}},ea={left:0,top:0},bf=function(P){var z=P.currentFile,at=P.defaultScale,lt=P.doc,ft=P.enableSmoothScroll,gt=P.initialPage,Rt=P.initialRotation,At=P.initialScale,ct=P.pageLayout,Tt=P.pageSizes,St=P.plugins,Kt=P.renderPage,Xt=P.scrollMode,$t=P.setRenderRange,ae=P.viewMode,Zt=P.viewerState,te=P.onDocumentLoad,Ze=P.onOpenFile,Oe=P.onPageChange,Ie=P.onRotate,We=P.onRotatePage,we=P.onZoom,Me=lt.numPages,Ne=lt.loadingTask.docId,gn=r.useContext(V).l10n,un=r.useContext(v),_n=un.direction===g.TextDirection.RightToLeft,vn=r.useRef(),An=r.useRef(),Hn=r.useState(gt),kn=Hn[0],Yn=Hn[1],Wn=r.useRef(null),$n=Lg({getCurrentPage:function(){return rn.current.pageIndex}}),qn=r.useState(Rt),Bn=qn[0],yi=qn[1],Us=dt(Bn),Ss=r.useState(!1),hi=Ss[0],zi=Ss[1],zs=r.useState(new Map),qe=zs[0],Ue=zs[1],Ce=r.useState(Xt),Fe=Ce[0],Se=Ce[1],Ye=dt(Fe),tn=r.useState(ae),Le=tn[0],ve=tn[1],sn=dt(Le),on=function(Jt){var Ke=ot(),ln=r.useState([]),En=ln[0],mn=ln[1];return r.useEffect(function(){Jt.getOutline().then(function(hn){if(Ke.current&&hn!==null){var ei=Ac(hn);mn(ei)}})},[]),En}(lt),Ln=r.useState(At),Pn=Ln[0],pi=Ln[1],Zi=dt(Pn),rn=r.useRef(Zt),li=r.useRef(typeof at=="string"?at:null),xn=r.useRef(-1),Dn=r.useRef(-1),ti=r.useRef(gt),Cn=rh({getCurrentPage:function(){return rn.current.pageIndex},getCurrentScrollMode:function(){return rn.current.scrollMode},jumpToPage:function(Jt){return kr(Jt)},targetRef:An}),sr=r.useState(-1),na=sr[0],Uo=sr[1],cs=r.useState(0),zo=cs[0],Dg=cs[1],ts=$({doc:lt});r.useEffect(function(){return function(){Qt.clear(),He.clear()}},[Ne]);var ah=r.useMemo(function(){return Object.assign({},Af,ct)},[]),wf=r.useMemo(function(){return Array(Me).fill(0).map(function(Jt,Ke){var ln=[Tt[Ke].pageHeight,Tt[Ke].pageWidth],En=Math.abs(Bn)%180==0?{height:ln[0],width:ln[1]}:{height:ln[1],width:ln[0]},mn={height:En.height*Pn,width:En.width*Pn};return ah.transformSize({numPages:Me,pageIndex:Ke,size:mn})})},[Bn,Pn]),Sn=sh({enableSmoothScroll:ft,isRtl:_n,numberOfItems:Me,parentRef:An,scrollMode:Fe,setRenderRange:$t,sizes:wf,viewMode:Le}),Wo=mt(function(){!li.current||rn.current.fullScreenMode!==g.FullScreenMode.Normal||gt>0&&ti.current===gt||Pr(li.current)},200);(function(Jt){var Ke=Jt.targetRef,ln=Jt.onResize;A(function(){var En=new ResizeObserver(function(hn){hn.forEach(function(ei){ln(ei.target)})}),mn=Ke.current;if(mn)return En.observe(mn),function(){En.unobserve(mn)}},[])})({targetRef:An,onResize:Wo});var Rr=function(Jt){var Ke=Jt;St.forEach(function(ln){ln.onViewerStateChange&&(Ke=ln.onViewerStateChange(Ke))}),rn.current=Ke},Sc=function(){return An.current},Og=function(){return rn.current},Sf=r.useCallback(function(Jt){$n.markVisitedDestination(Jt)},[]),Vo=r.useCallback(function(Jt){var Ke=Jt.pageIndex,ln=Jt.bottomOffset,En=Jt.leftOffset,mn=Jt.scaleTo,hn=An.current,ei=rn.current;return hn&&ei?new Promise(function(rr,Tc){ce(lt,Ke).then(function(Xo){var ar=Xo.getViewport({scale:1}),xs=0,Rc=(typeof ln=="function"?ln(ar.width,ar.height):ln)||0,$a=(typeof En=="function"?En(ar.width,ar.height):En)||0,qa=ei.scale;switch(mn){case g.SpecialZoomLevel.PageFit:xs=0,$a=0,Pr(g.SpecialZoomLevel.PageFit);break;case g.SpecialZoomLevel.PageWidth:qa=ta(hn,Tt[Ke].pageHeight,Tt[Ke].pageWidth,g.SpecialZoomLevel.PageWidth,ae,Me),xs=(ar.height-Rc)*qa,$a*=qa,Pr(qa);break;default:xs=(ar.height-Rc)*qa,$a*=qa}switch(ei.scrollMode){case g.ScrollMode.Horizontal:Sn.scrollToItem(Ke,{left:$a,top:0}).then(function(){rr()});break;case g.ScrollMode.Vertical:default:Sn.scrollToItem(Ke,{left:0,top:xs}).then(function(){rr()})}})}):Promise.resolve()},[]),xc=r.useCallback(function(Jt){return $n.markVisitedDestination(Jt),Vo(Jt)},[]),xf=r.useCallback(function(){var Jt=$n.getNextDestination();return Jt?Vo(Jt):Promise.resolve()},[]),Cf=r.useCallback(function(){var Jt=$n.getPreviousDestination();return Jt?Vo(Jt):Promise.resolve()},[]),Tf=r.useCallback(function(){return Sn.scrollToNextItem(rn.current.pageIndex,ea)},[]),kr=r.useCallback(function(Jt){return 0<=Jt&&Jt<Me?Sn.scrollToItem(Jt,ea):Promise.resolve()},[]),Ng=r.useCallback(function(){return Sn.scrollToPreviousItem(rn.current.pageIndex,ea)},[]),Rf=r.useCallback(function(Jt){var Ke,ln;(Ke=Jt.name,ln=Ke.split(/\./).pop(),ln?ln.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(En){var mn=new FileReader;mn.readAsArrayBuffer(Jt),mn.onload=function(){var hn=new Uint8Array(mn.result);En(hn)}}).then(function(En){Ze(Jt.name,En)})},[Ze]),kf=r.useCallback(function(Jt){var Ke=Jt===g.RotateDirection.Backward?-90:90,ln=rn.current.rotation,En=ln===360||ln===-360?Ke:ln+Ke;ts.markNotRendered(),yi(En),Rr(d(d({},rn.current),{rotation:En})),Ie({direction:Jt,doc:lt,rotation:En})},[]),oh=r.useCallback(function(Jt,Ke){var ln=Ke===g.RotateDirection.Backward?-90:90,En=rn.current.pagesRotation,mn=(En.has(Jt)?En.get(Jt):Rt)+ln,hn=En.set(Jt,mn);Ue(hn),zi(function(ei){return!ei}),Rr(d(d({},rn.current),{pagesRotation:hn,rotatedPage:Jt})),We({direction:Ke,doc:lt,pageIndex:Jt,rotation:mn}),ts.markRendering(Jt),Uo(Jt)},[]),us=r.useCallback(function(Jt){Rr(d(d({},rn.current),{scrollMode:Jt})),Se(Jt)},[]),Va=r.useCallback(function(Jt){Rr(d(d({},rn.current),{viewMode:Jt})),ve(Jt)},[]),Pr=r.useCallback(function(Jt){var Ke=An.current,ln=rn.current.pageIndex;if(!(ln<0||ln>=Me)){var En=Tt[ln].pageHeight,mn=Tt[ln].pageWidth,hn=Ke?typeof Jt=="string"?ta(Ke,En,mn,Jt,rn.current.viewMode,Me):Jt:1;li.current=typeof Jt=="string"?Jt:null,hn!==rn.current.scale&&(Dg(function(ei){return ei+1}),ts.markNotRendered(),pi(hn),we({doc:lt,scale:hn}),Rr(d(d({},rn.current),{scale:hn})))}},[]),Pf=r.useCallback(function(Jt){Cn.enterFullScreenMode(Jt)},[]),Mf=r.useCallback(function(){Cn.exitFullScreenMode()},[]);r.useEffect(function(){Rr(d(d({},rn.current),{fullScreenMode:Cn.fullScreenMode}))},[Cn.fullScreenMode]),r.useEffect(function(){var Jt={enterFullScreenMode:Pf,exitFullScreenMode:Mf,getPagesContainer:Sc,getViewerState:Og,jumpToDestination:xc,jumpToNextDestination:xf,jumpToPreviousDestination:Cf,jumpToNextPage:Tf,jumpToPreviousPage:Ng,jumpToPage:kr,openFile:Rf,rotate:kf,rotatePage:oh,setViewerState:Rr,switchScrollMode:us,switchViewMode:Va,zoom:Pr};return St.forEach(function(Ke){Ke.install&&Ke.install(Jt)}),function(){St.forEach(function(Ke){Ke.uninstall&&Ke.uninstall(Jt)})}},[Ne]),r.useEffect(function(){te({doc:lt,file:z}),St.forEach(function(Jt){Jt.onDocumentLoad&&Jt.onDocumentLoad({doc:lt,file:z})})},[Ne]);var Cc,Go,lh,Ff=Sn.boundingClientRect;Cc=function(){gt&&kr(gt)},Go=Ff.height>0&&Ff.width>0,lh=r.useRef(!1),A(function(){Go&&!lh.current&&(lh.current=!0,Cc())},[Cc,Go]),A(function(){var Jt=rn.current.pageIndex;Jt>-1&&Ye!==Fe&&Sn.scrollToItem(Jt,ea).then(function(){Cn.fullScreenMode===g.FullScreenMode.EnteredCompletely&&(ft||ts.markNotRendered(),xn.current=-1)})},[Fe]),A(function(){var Jt=rn.current.pageIndex;Jt>-1&&Us!==Bn&&Sn.scrollToItem(Jt,ea)},[Bn]),A(function(){Zi!=0&&Zi!=rn.current.scale&&Sn.zoom(rn.current.scale/Zi,rn.current.pageIndex).then(function(){Cn.fullScreenMode===g.FullScreenMode.EnteredCompletely&&(Dn.current=-1)})},[Pn]),A(function(){if(sn!==rn.current.viewMode){var Jt=Sn.startPage,Ke=Sn.endPage,ln=Sn.virtualItems;ts.markNotRendered(),ts.setRange(Jt,Ke);for(var En=function(hn){var ei=ln.find(function(rr){return rr.index===hn});ei&&ts.setVisibility(hn,ei.visibility)},mn=Jt;mn<=Ke;mn++)En(mn);$o()}},[Le]),A(function(){var Jt=rn.current.pageIndex;Jt>-1&&sn!==Le&&Sn.scrollToItem(Jt,ea)},[Le]),A(function(){var Jt=rn.current.pageIndex;Jt>0&&Jt===gt&&ti.current===gt&&li.current&&(ti.current=-1,Pr(li.current))},[kn]),r.useEffect(function(){Sn.isSmoothScrolling||Wn.current!==null&&Wn.current===kn||(Wn.current=kn,Oe({currentPage:kn,doc:lt}))},[kn,Sn.isSmoothScrolling]),r.useEffect(function(){Cn.fullScreenMode===g.FullScreenMode.Entering&&rn.current.scrollMode===g.ScrollMode.Page&&(xn.current=rn.current.pageIndex),Cn.fullScreenMode===g.FullScreenMode.EnteredCompletely&&rn.current.scrollMode===g.ScrollMode.Page&&ft&&(xn.current=-1),Cn.fullScreenMode===g.FullScreenMode.EnteredCompletely&&li.current&&(Dn.current=rn.current.pageIndex,Pr(li.current))},[Cn.fullScreenMode]),r.useEffect(function(){if(Cn.fullScreenMode!==g.FullScreenMode.Entering&&Cn.fullScreenMode!==g.FullScreenMode.Exitting&&!Sn.isSmoothScrolling){var Jt=Sn.startPage,Ke=Sn.endPage,ln=Sn.maxVisbilityIndex,En=Sn.virtualItems,mn=ln,hn=Cn.fullScreenMode===g.FullScreenMode.Entered||Cn.fullScreenMode===g.FullScreenMode.EnteredCompletely;if(!(hn&&mn!==xn.current&&xn.current>-1||hn&&mn!==Dn.current&&Dn.current>-1)){Yn(mn),Rr(d(d({},rn.current),{pageIndex:mn})),ts.setRange(Jt,Ke);for(var ei=function(Tc){var Xo=En.find(function(ar){return ar.index===Tc});Xo&&ts.setVisibility(Tc,Xo.visibility)},rr=Jt;rr<=Ke;rr++)ei(rr);$o()}}},[Sn.startPage,Sn.endPage,Sn.isSmoothScrolling,Sn.maxVisbilityIndex,Cn.fullScreenMode,hi,Bn,Pn]);var Ga=r.useCallback(function(Jt){ts.markRendered(Jt),$o()},[zo]),$o=function(){var Jt=ts.getHighestPriorityPage();Jt>-1&&ts.isInRange(Jt)&&(ts.markRendering(Jt),Uo(Jt))},qo=function(Jt){var Ke=kn-1,ln=kn+1;switch(Jt){case"FirstPage":kr(0);break;case"LastPage":kr(Me-1);break;case"NextPage":ln<Me&&kr(ln);break;case"PrevPage":Ke>=0&&kr(Ke)}},ch=r.useCallback(function(){var Jt=Sn.virtualItems,Ke=[];switch(Le){case g.ViewMode.DualPage:Ke=yt(Jt,2);break;case g.ViewMode.DualPageWithCover:Jt.length&&(Ke=Jt[0].index===0?[[Jt[0]]].concat(yt(Jt.slice(1),2)):yt(Jt,2));break;case g.ViewMode.SinglePage:default:Ke=yt(Jt,1)}var ln=gn&&gn.core?gn.core.pageLabel:"Page {{pageIndex}}",En={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:vn,style:{height:"100%"}},children:r.createElement(r.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:_({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Fe===g.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":_n,"rpv-core__inner-pages--single":Fe===g.ScrollMode.Page,"rpv-core__inner-pages--vertical":Fe===g.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Fe===g.ScrollMode.Wrapped}),ref:An,style:{height:"100%",position:"relative"}},children:r.createElement("div",{"data-testid":"core__inner-current-page-".concat(kn),style:Object.assign({"--scale-factor":Pn},Sn.getContainerStyles())},Ke.map(function(mn){return r.createElement("div",{className:_({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Fe===g.ScrollMode.Page}),style:Sn.getItemContainerStyles(mn[0]),key:"".concat(mn[0].index,"-").concat(Le)},mn.map(function(hn){var ei=Le===g.ViewMode.DualPageWithCover&&(hn.index===0||Me%2==0&&hn.index===Me-1);return r.createElement("div",{"aria-label":ln.replace("{{pageIndex}}","".concat(hn.index+1)),className:_({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Le===g.ViewMode.DualPage&&hn.index%2==0,"rpv-core__inner-page--dual-odd":Le===g.ViewMode.DualPage&&hn.index%2==1,"rpv-core__inner-page--dual-cover":ei,"rpv-core__inner-page--dual-cover-even":Le===g.ViewMode.DualPageWithCover&&!ei&&hn.index%2==0,"rpv-core__inner-page--dual-cover-odd":Le===g.ViewMode.DualPageWithCover&&!ei&&hn.index%2==1,"rpv-core__inner-page--single":Le===g.ViewMode.SinglePage&&Fe===g.ScrollMode.Page}),role:"region",key:"".concat(hn.index,"-").concat(Le),style:Object.assign({},Sn.getItemStyles(hn),ah.buildPageStyles({numPages:Me,pageIndex:hn.index,scrollMode:Fe,viewMode:Le}))},r.createElement(kg,{doc:lt,measureRef:hn.measureRef,outlines:on,pageIndex:hn.index,pageRotation:qe.has(hn.index)?qe.get(hn.index):0,pageSize:Tt[hn.index],plugins:St,renderPage:Kt,renderQueueKey:zo,rotation:Bn,scale:Pn,shouldRender:na===hn.index,viewMode:Le,onExecuteNamedAction:qo,onJumpFromLinkAnnotation:Sf,onJumpToDest:xc,onRenderCompleted:Ga,onRotatePage:oh}))}))}))}};return St.forEach(function(mn){mn.renderViewer&&(En=mn.renderViewer({containerRef:vn,doc:lt,pagesContainerRef:An,pagesRotation:qe,pageSizes:Tt,rotation:Bn,slot:En,themeContext:un,jumpToPage:kr,openFile:Rf,rotate:kf,rotatePage:oh,switchScrollMode:us,switchViewMode:Va,zoom:Pr}))}),En},[St,Sn]),uh=r.useCallback(function(Jt){return r.createElement("div",d({},Jt.attrs,{style:Jt.attrs&&Jt.attrs.style?Jt.attrs.style:{}}),Jt.children,Jt.subSlot&&uh(Jt.subSlot))},[]);return uh(ch())},Ec=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],wc=function(P){var z=P.defaultScale,at=P.doc,lt=P.render,ft=P.scrollMode,gt=P.viewMode,Rt=r.useRef(),At=r.useState({pageSizes:[],scale:0}),ct=At[0],Tt=At[1];return r.useLayoutEffect(function(){var St=Array(at.numPages).fill(0).map(function(Kt,Xt){return new Promise(function($t,ae){ce(at,Xt).then(function(Zt){var te=Zt.getViewport({scale:1});$t({pageHeight:te.height,pageWidth:te.width,rotation:te.rotation})})})});Promise.all(St).then(function(Kt){var Xt=Rt.current;if(Xt&&Kt.length!==0){var $t=Kt[0].pageWidth,ae=Kt[0].pageHeight,Zt=Xt.parentElement,te=(Zt.clientWidth-45)/$t,Ze=(Zt.clientHeight-45)/ae,Oe=te;switch(ft){case g.ScrollMode.Horizontal:Oe=Math.min(te,Ze);break;case g.ScrollMode.Vertical:default:Oe=te}var Ie,We,we=z?typeof z=="string"?ta(Zt,ae,$t,z,gt,at.numPages):z:(Ie=Oe,(We=Ec.findIndex(function(Me){return Me>=Ie}))===-1||We===0?Ie:Ec[We-1]);Tt({pageSizes:Kt,scale:we})}})},[at.loadingTask.docId]),ct.pageSizes.length===0||ct.scale===0?r.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Rt},r.createElement(B,null)):lt(ct.pageSizes,ct.scale)},ws=function(){},Hs=function(P){function z(at,lt){var ft=P.call(this)||this;return ft.verifyPassword=at,ft.passwordStatus=lt,ft}return h(z,P),z}(ws),Tr=function(P){var z=P.passwordStatus,at=P.renderProtectedView,lt=P.verifyPassword,ft=P.onDocumentAskPassword,gt=r.useContext(V).l10n,Rt=r.useState(""),At=Rt[0],ct=Rt[1],Tt=r.useContext(v).direction===g.TextDirection.RightToLeft,St=function(){return lt(At)};return r.useEffect(function(){ft&&ft({verifyPassword:lt})},[]),at?at({passwordStatus:z,verifyPassword:lt}):r.createElement("div",{className:"rpv-core__asking-password-wrapper"},r.createElement("div",{className:_({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":Tt})},r.createElement("div",{className:"rpv-core__asking-password-message"},z===g.PasswordStatus.RequiredPassword&&gt.core.askingPassword.requirePasswordToOpen,z===g.PasswordStatus.WrongPassword&&gt.core.wrongPassword.tryAgain),r.createElement("div",{className:"rpv-core__asking-password-body"},r.createElement("div",{className:_({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!Tt,"rpv-core__asking-password-input--rtl":Tt})},r.createElement(N,{testId:"core__asking-password-input",type:"password",value:At,onChange:ct,onKeyDown:function(Kt){Kt.key==="Enter"&&St()}})),r.createElement(I,{onClick:St},gt.core.askingPassword.submit))))},za=function(P){function z(at){var lt=P.call(this)||this;return lt.doc=at,lt}return h(z,P),z}(ws),Wa=function(P){function z(at){var lt=P.call(this)||this;return lt.error=at,lt}return h(z,P),z}(ws),Bs=function(P){function z(at){var lt=P.call(this)||this;return lt.percentages=at,lt}return h(z,P),z}(ws),Ig=function(P){var z=P.characterMap,at=P.file,lt=P.httpHeaders,ft=P.render,gt=P.renderError,Rt=P.renderLoader,At=P.renderProtectedView,ct=P.transformGetDocumentParams,Tt=P.withCredentials,St=P.onDocumentAskPassword,Kt=r.useContext(v).direction===g.TextDirection.RightToLeft,Xt=r.useState(new Bs(0)),$t=Xt[0],ae=Xt[1],Zt=r.useRef(""),te=ot();return r.useEffect(function(){Zt.current="",ae(new Bs(0));var Ze=new c.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Oe=Object.assign({httpHeaders:lt,withCredentials:Tt,worker:Ze},typeof at=="string"?{url:at}:{data:at},z?{cMapUrl:z.url,cMapPacked:z.isCompressed}:{}),Ie=ct?ct(Oe):Oe,We=c.getDocument(Ie);return We.onPassword=function(we,Me){switch(Me){case c.PasswordResponses.NEED_PASSWORD:te.current&&ae(new Hs(we,g.PasswordStatus.RequiredPassword));break;case c.PasswordResponses.INCORRECT_PASSWORD:te.current&&ae(new Hs(we,g.PasswordStatus.WrongPassword))}},We.onProgress=function(we){var Me=we.total>0?Math.min(100,100*we.loaded/we.total):100;te.current&&Zt.current===""&&ae(new Bs(Me))},We.promise.then(function(we){Zt.current=we.loadingTask.docId,te.current&&ae(new za(we))},function(we){return te.current&&!Ze.destroyed&&ae(new Wa({message:we.message||"Cannot load document",name:we.name}))}),function(){We.destroy(),Ze.destroy()}},[at]),$t instanceof Hs?r.createElement(Tr,{passwordStatus:$t.passwordStatus,renderProtectedView:At,verifyPassword:$t.verifyPassword,onDocumentAskPassword:St}):$t instanceof za?ft($t.doc):$t instanceof Wa?gt?gt($t.error):r.createElement("div",{className:_({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":Kt})},r.createElement("div",{className:"rpv-core__doc-error-text"},$t.error.message)):r.createElement("div",{"data-testid":"core__doc-loading",className:_({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":Kt})},Rt?Rt($t.percentages):r.createElement(B,null))},Ef=function(P,z){var at=r.useMemo(function(){return P==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":P},[]),lt=r.useState(at),ft=lt[0],gt=lt[1],Rt=dt(ft);return r.useEffect(function(){if(P==="auto"){var At=window.matchMedia("(prefers-color-scheme: dark)"),ct=function(Tt){gt(Tt.matches?"dark":"light")};return At.addEventListener("change",ct),function(){return At.removeEventListener("change",ct)}}},[]),r.useEffect(function(){ft!==Rt&&z&&z(ft)},[ft]),r.useEffect(function(){P!==ft&&gt(P)},[P]),{currentTheme:ft,setCurrentTheme:gt}},Bo=function(P){return{startPage:P.startPage-3,endPage:P.endPage+3}};g.Button=function(P){var z=P.children,at=P.testId,lt=P.onClick,ft=r.useContext(v).direction===g.TextDirection.RightToLeft,gt=at?{"data-testid":at}:{};return r.createElement("button",d({className:_({"rpv-core__button":!0,"rpv-core__button--rtl":ft}),type:"button",onClick:lt},gt),z)},g.Icon=C,g.LazyRender=function(P){var z=P.attrs,at=P.children,lt=P.testId,ft=r.useState(!1),gt=ft[0],Rt=ft[1],At=lt?d(d({},z),{"data-testid":lt}):z,ct=S({once:!0,onVisibilityChanged:function(Tt){Tt.isVisible&&Rt(!0)}});return r.createElement("div",d({ref:ct},At),gt&&at)},g.LocalizationContext=V,g.Menu=function(P){var z=P.children,at=r.useRef(),lt=r.useRef([]),ft=r.useContext(v).direction===g.TextDirection.RightToLeft,gt=function(At){if(at.current)switch(At.key){case"Tab":At.preventDefault();break;case"ArrowDown":At.preventDefault(),Rt(function(ct,Tt){return Tt+1});break;case"ArrowUp":At.preventDefault(),Rt(function(ct,Tt){return Tt-1});break;case"End":At.preventDefault(),Rt(function(ct,Tt){return ct.length-1});break;case"Home":At.preventDefault(),Rt(function(ct,Tt){return 0})}},Rt=function(At){if(at.current){var ct=lt.current,Tt=ct.findIndex(function(Kt){return Kt.getAttribute("tabindex")==="0"}),St=Math.min(ct.length-1,Math.max(0,At(ct,Tt)));Tt>=0&&Tt<=ct.length-1&&ct[Tt].setAttribute("tabindex","-1"),ct[St].setAttribute("tabindex","0"),ct[St].focus()}};return A(function(){var At=at.current;if(At){var ct=function(Tt){var St=[];return Tt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(Kt){if(Kt instanceof HTMLElement){var Xt=Kt.parentElement;(Xt===Tt||window.getComputedStyle(Xt).display!=="none")&&St.push(Kt)}}),St}(At);lt.current=ct}},[]),A(function(){return document.addEventListener("keydown",gt),function(){document.removeEventListener("keydown",gt)}},[]),r.createElement("div",{ref:at,"aria-orientation":"vertical",className:_({"rpv-core__menu":!0,"rpv-core__menu--rtl":ft}),role:"menu",tabIndex:0},z)},g.MenuDivider=function(){return r.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},g.MenuItem=function(P){var z=P.checked,at=z!==void 0&&z,lt=P.children,ft=P.icon,gt=ft===void 0?null:ft,Rt=P.isDisabled,At=Rt!==void 0&&Rt,ct=P.testId,Tt=P.onClick,St=r.useContext(v).direction===g.TextDirection.RightToLeft,Kt=ct?{"data-testid":ct}:{};return r.createElement("button",d({className:_({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":At,"rpv-core__menu-item--ltr":!St,"rpv-core__menu-item--rtl":St}),role:"menuitem",tabIndex:-1,type:"button",onClick:Tt},Kt),r.createElement("div",{className:_({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!St,"rpv-core__menu-item-icon--rtl":St})},gt),r.createElement("div",{className:_({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!St,"rpv-core__menu-item-label--rtl":St})},lt),r.createElement("div",{className:_({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!St,"rpv-core__menu-item-check--rtl":St})},at&&r.createElement(b,null)))},g.MinimalButton=function(P){var z=P.ariaLabel,at=z===void 0?"":z,lt=P.ariaKeyShortcuts,ft=lt===void 0?"":lt,gt=P.children,Rt=P.isDisabled,At=Rt!==void 0&&Rt,ct=P.isSelected,Tt=ct!==void 0&&ct,St=P.testId,Kt=P.onClick,Xt=r.useContext(v).direction===g.TextDirection.RightToLeft,$t=St?{"data-testid":St}:{};return r.createElement("button",d({"aria-label":at},ft&&{"aria-keyshortcuts":ft},At&&{"aria-disabled":!0},{className:_({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":At,"rpv-core__minimal-button--rtl":Xt,"rpv-core__minimal-button--selected":Tt}),type:"button",onClick:Kt},$t),gt)},g.Modal=function(P){var z=P.ariaControlsSuffix,at=P.closeOnClickOutside,lt=P.closeOnEscape,ft=P.content,gt=P.isOpened,Rt=gt!==void 0&&gt,At=P.target,ct=z||"".concat(R());return r.createElement(wt,{target:At?function(Tt,St){return r.createElement("div",{"aria-expanded":St?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(ct)},At(Tt,St))}:null,content:function(Tt){return r.createElement(X,null,r.createElement(K,{ariaControlsSuffix:ct,closeOnClickOutside:at,closeOnEscape:lt,onToggle:Tt},ft(Tt)))},isOpened:Rt})},g.Popover=function(P){var z=P.ariaHasPopup,at=z===void 0?"dialog":z,lt=P.ariaControlsSuffix,ft=P.closeOnClickOutside,gt=P.closeOnEscape,Rt=P.content,At=P.lockScroll,ct=At===void 0||At,Tt=P.offset,St=P.position,Kt=P.target,Xt=ut(!1),$t=Xt.opened,ae=Xt.toggle,Zt=r.useRef(),te=r.useMemo(function(){return lt||"".concat(R())},[]);return r.createElement("div",{ref:Zt,"aria-expanded":$t?"true":"false","aria-haspopup":at,"aria-controls":"rpv-core__popver-body-".concat(te)},Kt(ae,$t),$t&&r.createElement(r.Fragment,null,ct&&r.createElement(Ot,{closeOnEscape:gt,onClose:ae}),r.createElement(Ct,{ariaControlsSuffix:te,closeOnClickOutside:ft,offset:Tt,position:St,targetRef:Zt,onClose:ae},Rt(ae))))},g.PrimaryButton=I,g.ProgressBar=function(P){var z=P.progress,at=r.useContext(v).direction===g.TextDirection.RightToLeft;return r.createElement("div",{className:_({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":at})},r.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(z,"%")}},z,"%"))},g.Separator=function(){return r.createElement("div",{className:"rpv-core__separator"})},g.Spinner=B,g.Splitter=function(P){var z=P.constrain,at=r.useContext(v).direction===g.TextDirection.RightToLeft,lt=r.useRef(),ft=r.useRef(),gt=r.useRef(),Rt=r.useRef(0),At=r.useRef(0),ct=r.useRef(0),Tt=r.useRef(0),St={capture:!0},Kt=function($t){var ae=lt.current,Zt=ft.current,te=gt.current;if(ae&&Zt&&te){var Ze=Tt.current,Oe=$t.clientX-Rt.current,Ie=ct.current+(at?-Oe:Oe),We=ae.parentElement.getBoundingClientRect().width,we=100*Ie/We;if(ae.classList.add("rpv-core__splitter--resizing"),z){var Me=We-Ie-Ze;if(!z({firstHalfPercentage:we,firstHalfSize:Ie,secondHalfPercentage:100*Me/We,secondHalfSize:Me}))return}Zt.style.width="".concat(we,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),Zt.classList.add("rpv-core__splitter-sibling--resizing"),te.classList.add("rpv-core__splitter-sibling--resizing")}},Xt=function($t){var ae=lt.current,Zt=ft.current,te=gt.current;ae&&Zt&&te&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),ae.classList.remove("rpv-core__splitter--resizing"),Zt.classList.remove("rpv-core__splitter-sibling--resizing"),te.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",Kt,St),document.removeEventListener("mouseup",Xt,St))};return r.useEffect(function(){var $t=lt.current;$t&&(Tt.current=$t.getBoundingClientRect().width,ft.current=$t.previousElementSibling,gt.current=$t.nextElementSibling)},[]),r.createElement("div",{ref:lt,className:"rpv-core__splitter",onMouseDown:function($t){var ae=ft.current;ae&&(Rt.current=$t.clientX,At.current=$t.clientY,ct.current=ae.getBoundingClientRect().width,document.addEventListener("mousemove",Kt,St),document.addEventListener("mouseup",Xt,St))}})},g.TextBox=N,g.ThemeContext=v,g.Tooltip=function(P){var z=P.ariaControlsSuffix,at=P.content,lt=P.offset,ft=P.position,gt=P.target,Rt=ut(!1),At=Rt.opened,ct=Rt.toggle,Tt=r.useRef(),St=r.useRef(),Kt=r.useMemo(function(){return z||"".concat(R())},[]);U(function(){Tt.current&&document.activeElement&&Tt.current.contains(document.activeElement)&&$t()});var Xt=function(){ct(g.ToggleStatus.Open)},$t=function(){ct(g.ToggleStatus.Close)};return r.createElement(r.Fragment,null,r.createElement("div",{ref:Tt,"aria-describedby":"rpv-core__tooltip-body-".concat(Kt),onBlur:function(ae){ae.relatedTarget instanceof HTMLElement&&ae.currentTarget.parentElement&&ae.currentTarget.parentElement.contains(ae.relatedTarget)?St.current&&(St.current.style.display="none"):$t()},onFocus:Xt,onMouseEnter:Xt,onMouseLeave:$t},gt),At&&r.createElement(qt,{ariaControlsSuffix:Kt,contentRef:St,offset:lt,position:ft,targetRef:Tt},at()))},g.Viewer=function(P){var z=P.characterMap,at=P.defaultScale,lt=P.enableSmoothScroll,ft=lt===void 0||lt,gt=P.fileUrl,Rt=P.httpHeaders,At=Rt===void 0?{}:Rt,ct=P.initialPage,Tt=ct===void 0?0:ct,St=P.pageLayout,Kt=P.initialRotation,Xt=Kt===void 0?0:Kt,$t=P.localization,ae=P.plugins,Zt=ae===void 0?[]:ae,te=P.renderError,Ze=P.renderLoader,Oe=P.renderPage,Ie=P.renderProtectedView,We=P.scrollMode,we=We===void 0?g.ScrollMode.Vertical:We,Me=P.setRenderRange,Ne=Me===void 0?Bo:Me,gn=P.transformGetDocumentParams,un=P.theme,_n=un===void 0?{direction:g.TextDirection.LeftToRight,theme:"light"}:un,vn=P.viewMode,An=vn===void 0?g.ViewMode.SinglePage:vn,Hn=P.withCredentials,kn=Hn!==void 0&&Hn,Yn=P.onDocumentAskPassword,Wn=P.onDocumentLoad,$n=Wn===void 0?function(){}:Wn,qn=P.onPageChange,Bn=qn===void 0?function(){}:qn,yi=P.onRotate,Us=yi===void 0?function(){}:yi,Ss=P.onRotatePage,hi=Ss===void 0?function(){}:Ss,zi=P.onSwitchTheme,zs=zi===void 0?function(){}:zi,qe=P.onZoom,Ue=qe===void 0?function(){}:qe,Ce=r.useState({data:gt,name:typeof gt=="string"?gt:"",shouldLoad:!1}),Fe=Ce[0],Se=Ce[1],Ye=function(xn,Dn){Se({data:Dn,name:xn,shouldLoad:!0})},tn=r.useState(!1),Le=tn[0],ve=tn[1],sn=dt(Fe);r.useEffect(function(){var xn,Dn,ti,Cn;xn=sn.data,Cn=typeof(Dn=gt),(ti=typeof xn)=="string"&&Cn==="string"&&xn===Dn||ti==="object"&&Cn==="object"&&xn.length===Dn.length&&xn.every(function(sr,na){return sr===Dn[na]})||Se({data:gt,name:typeof gt=="string"?gt:"",shouldLoad:Le})},[gt,Le]);var on=S({onVisibilityChanged:function(xn){ve(xn.isVisible),xn.isVisible&&Se(function(Dn){return Object.assign({},Dn,{shouldLoad:!0})})}}),Ln=typeof _n=="string"?{direction:g.TextDirection.LeftToRight,theme:_n}:_n,Pn=r.useState($t||tt),pi=Pn[0],Zi=Pn[1],rn={l10n:pi,setL10n:Zi},li=Object.assign({},{direction:Ln.direction},Ef(Ln.theme||"light",zs));return r.useEffect(function(){$t&&Zi($t)},[$t]),r.createElement(V.Provider,{value:rn},r.createElement(v.Provider,{value:li},r.createElement("div",{ref:on,className:"rpv-core__viewer rpv-core__viewer--".concat(li.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Fe.shouldLoad&&r.createElement(Ig,{characterMap:z,file:Fe.data,httpHeaders:At,render:function(xn){return r.createElement(wc,{defaultScale:at,doc:xn,render:function(Dn,ti){return r.createElement(bf,{currentFile:{data:Fe.data,name:Fe.name},defaultScale:at,doc:xn,enableSmoothScroll:ft,initialPage:Tt,initialRotation:Xt,initialScale:ti,pageLayout:St,pageSizes:Dn,plugins:Zt,renderPage:Oe,scrollMode:we,setRenderRange:Ne,viewMode:An,viewerState:{file:Fe,fullScreenMode:g.FullScreenMode.Normal,pageIndex:-1,pageHeight:Dn[0].pageHeight,pageWidth:Dn[0].pageWidth,pagesRotation:new Map,rotation:Xt,scale:ti,scrollMode:we,viewMode:An},onDocumentLoad:$n,onOpenFile:Ye,onPageChange:Bn,onRotate:Us,onRotatePage:hi,onZoom:Ue})},scrollMode:we,viewMode:An})},renderError:te,renderLoader:Ze,renderProtectedView:Ie,transformGetDocumentParams:gn,withCredentials:kn,onDocumentAskPassword:Yn}))))},g.Worker=function(P){var z=P.children,at=P.workerUrl;return c.GlobalWorkerOptions.workerSrc=at,r.createElement(r.Fragment,null,z)},g.chunk=yt,g.classNames=_,g.createStore=function(P){var z=P||{},at={},lt=function(gt,Rt){var At;z=d(d({},z),((At={})[gt]=Rt,At)),(at[gt]||[]).forEach(function(ct){return ct(z[gt])})},ft=function(gt){return z[gt]};return{subscribe:function(gt,Rt){at[gt]=(at[gt]||[]).concat(Rt)},unsubscribe:function(gt,Rt){at[gt]=(at[gt]||[]).filter(function(At){return At!==Rt})},update:function(gt,Rt){lt(gt,Rt)},updateCurrentValue:function(gt,Rt){var At=ft(gt);At!==void 0&&lt(gt,Rt(At))},get:function(gt){return ft(gt)}}},g.getDestination=Ee,g.getPage=ce,g.isFullScreenEnabled=O,g.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},g.useDebounceCallback=mt,g.useIntersectionObserver=S,g.useIsMounted=ot,g.useIsomorphicLayoutEffect=A,g.usePrevious=dt,g.useRenderQueue=$}(core_min)),core_min}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib.exports;hasRequiredLib=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib.exports=requireCore_min(),lib.exports}var libExports=requireLib();const pdfUrl="./assets/pos-smart-features.pdf";function App(){const[g,t]=reactExports.useState(!1),e=()=>{t(!g)},[i,o]=reactExports.useState(""),r=c=>{c.preventDefault(),emailjs.sendForm("service_qqu3vd9","template_3w6nbgc",c.target,"OOkYd6kaV2PnokJfd").then(()=>o("  !"),()=>o("   .")),c.target.reset()};return jsxRuntimeExports.jsxs("div",{className:"App",children:[jsxRuntimeExports.jsx("section",{className:"hero",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h1",{children:" POS-,     "}),jsxRuntimeExports.jsx("p",{children:"   ,     .     !"}),jsxRuntimeExports.jsx("a",{href:"#form",children:jsxRuntimeExports.jsx("button",{className:"cta-button",children:" "})})]})}),jsxRuntimeExports.jsx("section",{className:"service-description",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h2",{className:"section-title",children:"      "}),jsxRuntimeExports.jsxs("div",{className:"service-info",children:[jsxRuntimeExports.jsx("h3",{children:"   ?"}),jsxRuntimeExports.jsx("p",{children:"            ,   .    AI   ,   , ,    ."})]}),jsxRuntimeExports.jsxs("div",{className:"service-info",children:[jsxRuntimeExports.jsx("h3",{children:"  ?"}),jsxRuntimeExports.jsxs("ul",{className:"service-list",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"-"}),"           ."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"  Google  Apple Calendar"}),"       ."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"  "}),"  AI       ."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:" "}),"  push, email  SMS-   ."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"  "}),"    ,     ."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"  "}),"  CRM   ,    ."]})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"features",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h2",{className:"advantages-title",children:"   ?"}),jsxRuntimeExports.jsxs("div",{className:"feature-cards",children:[jsxRuntimeExports.jsxs("div",{className:"feature-card",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:" "}),jsxRuntimeExports.jsx("p",{children:"         ."})]}),jsxRuntimeExports.jsxs("div",{className:"feature-card",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:" "}),jsxRuntimeExports.jsx("p",{children:"AI       ."})]}),jsxRuntimeExports.jsxs("div",{className:"feature-card",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:" "}),jsxRuntimeExports.jsx("p",{children:"      ."})]}),jsxRuntimeExports.jsxs("div",{className:"feature-card",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:" "}),jsxRuntimeExports.jsx("p",{children:"        ."})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"pricing",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h2",{className:"advantages-title",children:"    ( )"}),jsxRuntimeExports.jsxs("p",{children:["  :      ,  .       70% ",jsxRuntimeExports.jsx("b",{children:"  ."})]}),jsxRuntimeExports.jsxs("div",{className:"pricing-table",children:[jsxRuntimeExports.jsxs("div",{className:"pricing-plan pro",children:[jsxRuntimeExports.jsx("h3",{children:""}),jsxRuntimeExports.jsx("p",{children:"    "}),jsxRuntimeExports.jsx("p",{className:"price",children:"9 /"}),jsxRuntimeExports.jsx("a",{href:"#form",children:jsxRuntimeExports.jsx("button",{className:"btn",children:" "})}),jsxRuntimeExports.jsx("p",{className:"credit-note",children:"  "}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:" -"}),jsxRuntimeExports.jsx("li",{children:"   "}),jsxRuntimeExports.jsx("li",{children:" "})]})]}),jsxRuntimeExports.jsxs("div",{className:"pricing-plan pro",children:[jsxRuntimeExports.jsx("h3",{children:""}),jsxRuntimeExports.jsx("p",{children:"   "}),jsxRuntimeExports.jsx("p",{className:"price",children:"19 /"}),jsxRuntimeExports.jsx("a",{href:"#form",children:jsxRuntimeExports.jsx("button",{className:"btn",children:" "})}),jsxRuntimeExports.jsx("p",{className:"credit-note",children:"  "}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:" "})]})]}),jsxRuntimeExports.jsxs("div",{className:"pricing-plan enterprise",children:[jsxRuntimeExports.jsx("h3",{children:""}),jsxRuntimeExports.jsx("p",{children:"   "}),jsxRuntimeExports.jsx("p",{className:"price",children:"39 /"}),jsxRuntimeExports.jsx("a",{href:"#form",children:jsxRuntimeExports.jsx("button",{className:"btn",children:" "})}),jsxRuntimeExports.jsx("p",{className:"credit-note",children:"  "}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:"   "}),jsxRuntimeExports.jsx("li",{children:" "}),jsxRuntimeExports.jsx("li",{children:" 24/7"})]})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"compare",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h2",{className:"compare-title",children:""}),jsxRuntimeExports.jsxs("div",{className:"compare-table",children:[jsxRuntimeExports.jsxs("div",{className:"compare-plan",children:[jsxRuntimeExports.jsx("h3",{children:""}),jsxRuntimeExports.jsx("p",{className:"price",children:"9 /"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:" - "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"   "}),jsxRuntimeExports.jsx("li",{children:" - (SMS, email, push)"}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:" -  "}),jsxRuntimeExports.jsx("li",{children:" CRM:  "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:" Google/Apple Calendar "}),jsxRuntimeExports.jsx("li",{children:" WhatsApp/Telegram "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"     "}),jsxRuntimeExports.jsx("li",{children:"   24/7"}),jsxRuntimeExports.jsx("li",{children:"   "}),jsxRuntimeExports.jsx("li",{children:"  "})]})]}),jsxRuntimeExports.jsxs("div",{className:"compare-plan",children:[jsxRuntimeExports.jsx("h3",{children:""}),jsxRuntimeExports.jsx("p",{className:"price",children:"19 /"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:" - "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"   "}),jsxRuntimeExports.jsx("li",{children:" - (SMS, email, push)"}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:" -  "}),jsxRuntimeExports.jsx("li",{children:" CRM:  "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:" Google/Apple Calendar "}),jsxRuntimeExports.jsx("li",{children:" WhatsApp/Telegram "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"     "}),jsxRuntimeExports.jsx("li",{children:"   24/7"}),jsxRuntimeExports.jsx("li",{children:"   "}),jsxRuntimeExports.jsx("li",{children:"  "})]})]}),jsxRuntimeExports.jsxs("div",{className:"compare-plan",children:[jsxRuntimeExports.jsx("h3",{children:""}),jsxRuntimeExports.jsx("p",{className:"price",children:"39 /"}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:" - "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"   "}),jsxRuntimeExports.jsx("li",{children:" - (SMS, email, push)"}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:" -  "}),jsxRuntimeExports.jsx("li",{children:" CRM:  "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"  "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:" Google/Apple Calendar "}),jsxRuntimeExports.jsx("li",{children:" WhatsApp/Telegram "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"    "}),jsxRuntimeExports.jsx("li",{children:"     "}),jsxRuntimeExports.jsx("li",{children:"   24/7"}),jsxRuntimeExports.jsx("li",{children:"   "}),jsxRuntimeExports.jsx("li",{children:"  "})]})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"features",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h2",{className:"advantages-title",children:""}),jsxRuntimeExports.jsxs("div",{className:"feature-cards",children:[jsxRuntimeExports.jsxs("div",{className:"feature-card",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:" "}),jsxRuntimeExports.jsx("p",{children:"     ."})]}),jsxRuntimeExports.jsxs("div",{className:"feature-card",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:" "}),jsxRuntimeExports.jsx("p",{children:"     ."})]}),jsxRuntimeExports.jsxs("div",{className:"feature-card",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:""}),jsxRuntimeExports.jsx("p",{children:"      ."})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"testimonials",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h2",{className:"advantages-title",children:" "}),jsxRuntimeExports.jsx("div",{className:"testimonial-cards",children:jsxRuntimeExports.jsxs("div",{className:"testimonial-card",children:[jsxRuntimeExports.jsx("p",{children:"   "}),jsxRuntimeExports.jsx("h4",{children:"POS    "}),jsxRuntimeExports.jsx("section",{className:"portfolio",children:jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("a",{href:"/aawra-landing/assets/pos-smart-features.pdf",download:!0,className:"popup-button",children:" "})})}),g&&jsxRuntimeExports.jsx("div",{className:"popup",children:jsxRuntimeExports.jsxs("div",{className:"popup-content",children:[jsxRuntimeExports.jsx("button",{className:"close-button",onClick:e,children:""}),jsxRuntimeExports.jsx(libExports.Worker,{workerUrl:`https://unpkg.com/pdfjs-dist@${__webpack_exports__version}/build/pdf.worker.min.js`,children:jsxRuntimeExports.jsx("div",{style:{height:"80vh",overflowY:"auto"},children:jsxRuntimeExports.jsx(libExports.Viewer,{fileUrl:pdfUrl})})})]})})]})})]})}),jsxRuntimeExports.jsx("section",{id:"form",className:"contact",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h2",{children:"  !  ."}),jsxRuntimeExports.jsx("p",{style:{color:"black"},children:"          !"}),jsxRuntimeExports.jsxs("form",{onSubmit:r,children:[jsxRuntimeExports.jsx("input",{type:"text",name:"user_name",placeholder:" ",required:!0}),jsxRuntimeExports.jsx("input",{type:"email",name:"user_email",placeholder:" email",required:!0}),jsxRuntimeExports.jsx("textarea",{name:"message",placeholder:" "}),jsxRuntimeExports.jsx("p",{className:"contactParagraph",children:"      :  ,   "}),jsxRuntimeExports.jsx("button",{type:"submit",children:""})]}),i&&jsxRuntimeExports.jsx("p",{children:i})]})}),jsxRuntimeExports.jsx("section",{className:"contact-info",children:jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("h2",{className:"contact-title",children:" "}),jsxRuntimeExports.jsxs("div",{className:"contact-cards",children:[jsxRuntimeExports.jsx("div",{className:"contact-card",children:jsxRuntimeExports.jsxs("a",{href:"mailto:dmitri.gornakov@gmail.com",className:"contact-link",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"Email"}),jsxRuntimeExports.jsx("p",{children:"dmitri.gornakov@gmail.com"})]})}),jsxRuntimeExports.jsx("div",{className:"contact-card",children:jsxRuntimeExports.jsxs("a",{href:"https://t.me/visual_sense",className:"contact-link",target:"_blank",rel:"noopener noreferrer",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"Telegram"}),jsxRuntimeExports.jsx("p",{children:"@visual_sense"})]})}),jsxRuntimeExports.jsx("div",{className:"contact-card",children:jsxRuntimeExports.jsxs("a",{href:"tel:+37258976398",className:"contact-link",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:""}),jsxRuntimeExports.jsx("p",{children:"+372 5897 6398"})]})}),jsxRuntimeExports.jsx("div",{className:"contact-card",children:jsxRuntimeExports.jsxs("a",{href:"https://wa.me/+37258976398",className:"contact-link",target:"_blank",rel:"noopener noreferrer",children:[jsxRuntimeExports.jsx("div",{className:"icon",children:""}),jsxRuntimeExports.jsx("h3",{children:"WhatsApp"}),jsxRuntimeExports.jsx("p",{children:"+372 5897 6398"})]})})]})]})})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
